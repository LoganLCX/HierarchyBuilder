{"version":3,"file":"index.cjs","sources":["webpack/runtime/define_property_getters","webpack/runtime/has_own_property","webpack/runtime/make_namespace_object","../../src/pipeline/utils/pipeline.ts","../../src/i18n/i18nData.ts","../../src/i18n/i18n.ts","../../src/builder/builder/buildAdvanced.ts","../../src/builder/builder/buildSpec.ts","../../src/builder/builder/build.ts","../../src/pipeline/utils/tree/traverse.ts","../../src/pipeline/utils/measures/depth.ts","../../src/pipeline/advanced/chart/pipes/measures/utils.ts","../../src/pipeline/utils/constant.ts","../../src/pipeline/utils/chatType.ts","../../src/builder/builder/advanced/colorItems.ts","../../src/builder/builder/builder.ts","../../src/pipeline/utils/valid/checkVSeed.ts","../../src/pipeline/advanced/table/pipes/init/initAdvancedVSeed.ts","../../src/pipeline/utils/measures/typeGuard.ts","../../src/pipeline/advanced/table/pipes/default/defaultMeasures.ts","../../src/pipeline/utils/dimensions/typeGuard.ts","../../src/pipeline/utils/measures/find.ts","../../src/pipeline/advanced/table/pipes/default/defaultDimensions.ts","../../src/pipeline/utils/replaceNullToUndefined.ts","../../src/pipeline/advanced/table/pipes/cellStyle/cellStyle.ts","../../src/pipeline/advanced/table/pipes/records/records.ts","../../src/pipeline/advanced/table/pipes/config/tableConfig.ts","../../src/pipeline/advanced/chart/pipes/theme/theme.ts","../../src/pipeline/advanced/table/pipeline/table.ts","../../src/pipeline/spec/table/pipes/init/table.ts","../../src/pipeline/spec/table/pipes/columns/dimensionsToColumns.ts","../../src/pipeline/utils/format/createNumFormatter.ts","../../src/pipeline/utils/format/createFormatter.ts","../../src/pipeline/utils/format/createFormatterByMeasure.ts","../../src/pipeline/spec/table/pipes/columns/measuresToColumns.ts","../../src/pipeline/spec/table/pipes/theme/bodyStyle.ts","../../src/pipeline/spec/table/pipes/theme/headerStyle.ts","../../src/pipeline/spec/table/pipes/theme/frameStyle.ts","../../src/pipeline/spec/table/pipes/theme/selectionStyle.ts","../../src/dataSelector/selector.ts","../../src/pipeline/spec/table/pipes/cellStyle/common.ts","../../src/pipeline/spec/table/pipes/cellStyle/table.ts","../../src/pipeline/spec/table/pipeline/table.ts","../../src/builder/register/chartType/table.ts","../../src/dataReshape/constant.ts","../../src/pipeline/advanced/table/pipes/default/defaultMeasureId.ts","../../src/pipeline/advanced/table/pipes/encoding/pivotTable.ts","../../src/dataReshape/foldMeasures.ts","../../src/pipeline/advanced/table/pipes/reshape/reshapePivotTable.ts","../../src/pipeline/advanced/table/pipes/config/pivotTableConfig.ts","../../src/pipeline/advanced/table/pipeline/pivotTable.ts","../../src/pipeline/spec/table/pipes/init/pivotTable.ts","../../src/pipeline/spec/table/pipes/columns/pivotColumns.ts","../../src/pipeline/spec/table/pipes/rows/pivotRows.ts","../../src/pipeline/spec/table/pipes/corner/titleOnDimension.ts","../../src/pipeline/spec/table/pipes/indicators/pivotIndicators.ts","../../src/pipeline/spec/table/pipes/theme/rowHeaderStyle.ts","../../src/pipeline/spec/table/pipes/theme/cornerHeaderStyle.ts","../../src/pipeline/spec/table/pipes/cellStyle/pivot.ts","../../src/pipeline/spec/table/pipes/indicators/pivotDataConfig.ts","../../src/pipeline/spec/table/pipeline/pivotTable.ts","../../src/builder/register/chartType/pivotTable.ts","../../src/pipeline/advanced/chart/pipes/init/initAdvancedVSeed.ts","../../src/pipeline/advanced/chart/pipes/default/defaultMeasures.ts","../../src/pipeline/advanced/chart/pipes/default/defaultDimensions.ts","../../src/pipeline/advanced/chart/pipes/default/defaultMeasureId.ts","../../src/pipeline/advanced/chart/pipes/encoding/adapter/encodingAdapter.ts","../../src/pipeline/advanced/chart/pipes/encoding/color/addColorToEncoding.ts","../../src/pipeline/advanced/chart/pipes/encoding/line.ts","../../src/pipeline/advanced/chart/pipes/measures/buildMeasures.ts","../../src/pipeline/utils/measures/delete.ts","../../src/pipeline/advanced/chart/pipes/measures/pickMeasuresForReshape.ts","../../src/pipeline/utils/dimensions/delete.ts","../../src/pipeline/advanced/chart/pipes/dimensions/pickDimensionsForReshape.ts","../../src/pipeline/advanced/chart/pipes/pivot/pivotAdapter.ts","../../src/dataReshape/unfoldDimensions.ts","../../src/dataReshape/dataReshapeByEncoding.ts","../../src/pipeline/spec/chart/pipes/color/colorAdapter.ts","../../src/pipeline/advanced/chart/pipes/reshape/reshapeWithEncoding.ts","../../src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithEncoding.ts","../../src/pipeline/advanced/chart/pipes/analysis/common.ts","../../src/pipeline/advanced/chart/pipes/analysis/sortXBand.ts","../../src/pipeline/advanced/chart/pipes/analysis/sortLegend.ts","../../src/pipeline/advanced/chart/pipes/config/line.ts","../../src/pipeline/advanced/chart/pipes/markStyle/markStyle.ts","../../src/pipeline/advanced/chart/pipes/annotation/annotation.ts","../../src/pipeline/advanced/chart/pipeline/line.ts","../../src/pipeline/spec/chart/pipes/init/line.ts","../../src/pipeline/spec/chart/pipes/color/color.ts","../../src/pipeline/spec/chart/pipes/color/linearColor.ts","../../src/pipeline/spec/chart/pipes/backgroundColor/background.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetXY.ts","../../src/pipeline/spec/chart/pipes/dataset/progressive.ts","../../src/pipeline/spec/chart/pipes/axes/title/defaultTitleText.ts","../../src/pipeline/spec/chart/pipes/axes/xBand.ts","../../src/pipeline/spec/chart/pipes/axes/format/linearFormat.ts","../../src/pipeline/spec/chart/pipes/axes/yLinear.ts","../../src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairLine.ts","../../src/pipeline/spec/chart/pipes/legend/discreteLegend.ts","../../src/pipeline/spec/chart/pipes/legend/colorLegend.ts","../../src/pipeline/spec/chart/pipes/color/colorPointStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/pointStyle.ts","../../src/pipeline/spec/chart/pipes/markStyle/pointState.ts","../../src/pipeline/spec/chart/pipes/color/colorLineStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/curve/curve.ts","../../src/pipeline/spec/chart/pipes/markStyle/lineStyle.ts","../../src/pipeline/spec/chart/pipes/label/label.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipStyle.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltip.ts","../../src/pipeline/spec/chart/pipes/annotation/utils.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationPointCommon.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationPoint.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationVerticalLine.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationHorizontalLine.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationArea.ts","../../src/pipeline/spec/chart/pipes/annotation/splitLine.ts","../../src/pipeline/spec/chart/pipes/init/pivot.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotGridStyle.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotIndicators.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetPivot.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotAxisStyle.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotRowDimensions.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotColumnDimensions.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotTitle.ts","../../src/pipeline/spec/chart/pipes/legend/pivotDiscreteLegend.ts","../../src/pipeline/spec/chart/pipes/legend/pivotColorLegend.ts","../../src/pipeline/spec/chart/pipes/pivotChart/dimensionLinkage.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotAdapter.ts","../../src/pipeline/spec/chart/pipeline/line.ts","../../src/builder/register/chartType/line.ts","../../src/pipeline/advanced/chart/pipes/encoding/column.ts","../../src/pipeline/advanced/chart/pipes/config/column.ts","../../src/pipeline/advanced/chart/pipes/regressionLine/regressionLine.ts","../../src/pipeline/advanced/chart/pipeline/column.ts","../../src/pipeline/spec/chart/pipes/init/column.ts","../../src/pipeline/spec/chart/pipes/stack/stackCornerRadius.ts","../../src/pipeline/spec/chart/pipes/barWidth/barMaxWidth.ts","../../src/pipeline/spec/chart/pipes/stack/stack.ts","../../src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairRect.ts","../../src/pipeline/spec/chart/pipes/color/colorBarStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/barStyle.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationAreaBand.ts","../../src/pipeline/spec/chart/pipes/regressionLine/common.ts","../../src/pipeline/spec/chart/pipes/regressionLine/columnRegressionLine.ts","../../src/pipeline/spec/chart/pipeline/column.ts","../../src/builder/register/chartType/column.ts","../../src/pipeline/advanced/chart/pipes/config/pie.ts","../../src/pipeline/advanced/chart/pipes/config/index.ts","../../src/pipeline/advanced/chart/pipeline/columnParallel.ts","../../src/pipeline/spec/chart/pipes/init/columnParallel.ts","../../src/pipeline/spec/chart/pipes/barWidth/barGapInGroup.ts","../../src/pipeline/spec/chart/pipeline/columnParallel.ts","../../src/builder/register/chartType/columnParallel.ts","../../src/pipeline/advanced/chart/pipeline/columnPercent.ts","../../src/pipeline/spec/chart/pipes/percent/percent.ts","../../src/pipeline/spec/chart/pipeline/columnPercent.ts","../../src/builder/register/chartType/columnPercent.ts","../../src/pipeline/advanced/chart/pipes/encoding/bar.ts","../../src/pipeline/advanced/chart/pipes/analysis/sortYBand.ts","../../src/pipeline/advanced/chart/pipeline/bar.ts","../../src/pipeline/spec/chart/pipes/init/bar.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetYX.ts","../../src/pipeline/spec/chart/pipes/axes/xLinear.ts","../../src/pipeline/spec/chart/pipes/axes/yBand.ts","../../src/pipeline/spec/chart/pipes/crosshair/horizontalCrosshairRect.ts","../../src/pipeline/spec/chart/pipeline/bar.ts","../../src/builder/register/chartType/bar.ts","../../src/pipeline/advanced/chart/pipeline/barParallel.ts","../../src/pipeline/spec/chart/pipes/init/barParallel.ts","../../src/pipeline/spec/chart/pipeline/barParallel.ts","../../src/builder/register/chartType/barParallel.ts","../../src/pipeline/advanced/chart/pipeline/barPercent.ts","../../src/pipeline/spec/chart/pipeline/barPercent.ts","../../src/builder/register/chartType/barPercent.ts","../../src/pipeline/advanced/chart/pipeline/area.ts","../../src/pipeline/spec/chart/pipes/init/area.ts","../../src/pipeline/spec/chart/pipes/color/colorAreaStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/areaStyle.ts","../../src/pipeline/spec/chart/pipeline/area.ts","../../src/builder/register/chartType/area.ts","../../src/pipeline/advanced/chart/pipeline/areaPercent.ts","../../src/pipeline/spec/chart/pipeline/areaPercent.ts","../../src/builder/register/chartType/areaPercent.ts","../../src/pipeline/advanced/chart/pipes/encoding/scatter.ts","../../src/pipeline/advanced/chart/pipes/measures/buildMeasuresForScatter.ts","../../src/pipeline/advanced/chart/pipes/config/scatter.ts","../../src/pipeline/advanced/chart/pipes/reshape/reshapeWithScatterEncoding.ts","../../src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithScatterEncoding.ts","../../src/pipeline/advanced/chart/pipeline/scatter.ts","../../src/pipeline/spec/chart/pipes/init/scatter.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetScatter.ts","../../src/pipeline/spec/chart/pipes/size/scatterSize.ts","../../src/pipeline/spec/chart/pipes/label/labelScatter.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipScatter.ts","../../src/pipeline/spec/chart/pipes/crosshair/horizontalCrosshairLine.ts","../../src/pipeline/spec/chart/pipes/regressionLine/linearRegressionLine.ts","../../src/pipeline/spec/chart/pipeline/scatter.ts","../../src/builder/register/chartType/scatter.ts","../../src/pipeline/advanced/chart/pipes/encoding/dualAxis.ts","../../src/pipeline/advanced/chart/pipes/measures/buildMeasuresForDualAxis.ts","../../src/pipeline/advanced/chart/pipes/reshape/reshapeWithDualEncoding.ts","../../src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithDualEncoding.ts","../../src/pipeline/advanced/chart/pipes/config/dualAxis.ts","../../src/pipeline/advanced/chart/pipeline/dualAxis.ts","../../src/pipeline/spec/chart/pipes/series/series.ts","../../src/pipeline/spec/chart/pipes/init/dualAxis.ts","../../src/pipeline/spec/chart/pipes/dual/dualChartType.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetDualAxis.ts","../../src/pipeline/spec/chart/pipes/label/labelDualAxis.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipDualAxis.ts","../../src/pipeline/spec/chart/pipes/pipeFilter/barStyleFilter.ts","../../src/pipeline/spec/chart/pipes/pipeFilter/pointStyleFilter.ts","../../src/pipeline/spec/chart/pipes/pipeFilter/lineStyleFilter.ts","../../src/pipeline/spec/chart/pipes/pipeFilter/areaStyleFilter.ts","../../src/pipeline/spec/chart/pipes/axes/yLinearPrimary.ts","../../src/pipeline/spec/chart/pipes/axes/yLinearSecondary.ts","../../src/pipeline/spec/chart/pipes/color/linearColorForDualAxis.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationPointOfDualAxis.ts","../../src/pipeline/spec/chart/pipeline/dualAxis.ts","../../src/builder/register/chartType/dualAxis.ts","../../src/pipeline/advanced/chart/pipes/encoding/pie.ts","../../src/pipeline/advanced/chart/pipeline/pie.ts","../../src/pipeline/spec/chart/pipes/init/pie.ts","../../src/pipeline/spec/chart/pipes/color/colorPieStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/pieStyle.ts","../../src/pipeline/spec/chart/pipes/label/labelPie.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotHideIndicatorName.ts","../../src/pipeline/spec/chart/pipes/region/addRegionPadding.ts","../../src/pipeline/spec/chart/pipeline/pie.ts","../../src/builder/register/chartType/pie.ts","../../src/pipeline/advanced/chart/pipeline/donut.ts","../../src/pipeline/spec/chart/pipes/init/donut.ts","../../src/pipeline/spec/chart/pipeline/donut.ts","../../src/builder/register/chartType/donut.ts","../../src/pipeline/advanced/chart/pipes/encoding/rose.ts","../../src/pipeline/advanced/chart/pipeline/rose.ts","../../src/pipeline/spec/chart/pipes/init/rose.ts","../../src/pipeline/spec/chart/pipes/axes/radius.ts","../../src/pipeline/spec/chart/pipes/color/colorRoseStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/roseStyle.ts","../../src/pipeline/spec/chart/pipeline/rose.ts","../../src/builder/register/chartType/rose.ts","../../src/pipeline/advanced/chart/pipeline/roseParallel.ts","../../src/pipeline/spec/chart/pipes/init/roseParallel.ts","../../src/pipeline/spec/chart/pipeline/roseParallel.ts","../../src/builder/register/chartType/roseParallel.ts","../../src/pipeline/advanced/chart/pipes/encoding/radar.ts","../../src/pipeline/advanced/chart/pipeline/radar.ts","../../src/pipeline/spec/chart/pipes/init/radar.ts","../../src/pipeline/spec/chart/pipes/axes/radarAngle.ts","../../src/pipeline/spec/chart/pipes/axes/radarRadius.ts","../../src/pipeline/spec/chart/pipeline/radar.ts","../../src/builder/register/chartType/radar.ts","../../src/pipeline/advanced/chart/pipes/encoding/funnel.ts","../../src/pipeline/advanced/chart/pipeline/funnel.ts","../../src/pipeline/spec/chart/pipes/init/funnel.ts","../../src/pipeline/spec/chart/pipes/color/colorFunnelStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/funnelStyle.ts","../../src/pipeline/spec/chart/pipes/markStyle/funnelTransformStyle.ts","../../src/pipeline/spec/chart/pipeline/funnel.ts","../../src/builder/register/chartType/funnel.ts","../../src/pipeline/advanced/chart/pipes/encoding/heatmap.ts","../../src/pipeline/advanced/chart/pipeline/heatmap.ts","../../src/pipeline/spec/chart/pipes/legend/heatmapColorLegend.ts","../../src/pipeline/spec/chart/pipes/color/colorCellStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/cellStyle.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipHeatmap.ts","../../src/pipeline/spec/chart/pipes/init/heatmap.ts","../../src/pipeline/spec/chart/pipeline/heatmap.ts","../../src/builder/register/chartType/heatmap.ts","../../src/pipeline/advanced/chart/pipes/config/boxplot.ts","../../src/pipeline/advanced/chart/pipes/encoding/boxplot.ts","../../src/pipeline/advanced/chart/pipes/reshape/reshapeWithBoxplotEncoding.ts","../../src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithBoxplotEncoding.ts","../../src/pipeline/advanced/chart/pipeline/boxplot.ts","../../src/pipeline/spec/chart/pipes/init/boxplot.ts","../../src/pipeline/spec/chart/pipes/boxWidth/boxMaxWidth.ts","../../src/pipeline/spec/chart/pipes/boxWidth/boxGapInGroup.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetBoxplot.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipBoxplot.ts","../../src/pipeline/spec/chart/pipes/color/colorBoxPlotStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/boxPlotStyle.ts","../../src/pipeline/spec/chart/pipes/markStyle/outlierStyle.ts","../../src/pipeline/spec/chart/pipeline/boxplot.ts","../../src/builder/register/chartType/boxplot.ts","../../src/pipeline/advanced/chart/pipes/config/histogram.ts","../../src/pipeline/advanced/chart/pipes/encoding/histogram.ts","../../src/pipeline/advanced/chart/pipes/reshape/reshapeWithHistogramEncoding.ts","../../src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithHistogramEncoding.ts","../../src/pipeline/advanced/chart/pipeline/histogram.ts","../../src/pipeline/spec/chart/pipes/init/histogram.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetHistogram.ts","../../src/pipeline/spec/chart/utils/histogram.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipHistogram.ts","../../src/pipeline/spec/chart/pipes/crosshair/histogramCrosshair.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationPointOfHistogram.ts","../../src/pipeline/spec/chart/pipes/regressionLine/kdeRegressionLine.ts","../../src/pipeline/spec/chart/pipes/regressionLine/ecdfRegressionLine.ts","../../src/pipeline/spec/chart/pipeline/histogram.ts","../../src/builder/register/chartType/histogram.ts","../../src/theme/common/crosshair.ts","../../src/theme/common/color.ts","../../src/theme/common/label.ts","../../src/theme/common/legend.ts","../../src/theme/common/table.ts","../../src/theme/common/tooltip.ts","../../src/theme/common/axes.ts","../../src/theme/common/annotaion.ts","../../src/theme/common/funnelTransform.ts","../../src/theme/common/heatmapCell.ts","../../src/theme/common/regressionLine.ts","../../src/theme/common/boxPlot.ts","../../src/theme/light/light.ts","../../src/theme/dark/dark.ts","../../src/builder/register/theme/custom.ts","../../src/builder/register/theme/light.ts","../../src/builder/register/theme/dark.ts","../../src/builder/register/all.ts","../../src/builder/register/custom.ts","../../src/types/properties/chartType/chartType.ts","../../src/types/properties/chartType/dualChartType.ts","../../src/types/properties/dataset/dataset.ts","../../src/types/properties/dimensions/zDimensions.ts","../../src/types/properties/format/numFormat.ts","../../src/types/properties/measures/zMeasures.ts","../../src/types/properties/measures/zDualMeasures.ts","../../src/types/properties/measures/zScatterMeasures.ts","../../src/types/properties/datasetReshapeInfo/zDatasetReshapeInfo.ts","../../src/types/properties/encoding/zEncoding.ts","../../src/types/properties/encoding/zDimensionEncoding.ts","../../src/types/properties/encoding/zMeasureEncoding.ts","../../src/types/properties/config/backgroundColor/backgroundColor.ts","../../src/types/properties/config/table.ts","../../src/types/properties/config/axes/zBandAxis.ts","../../src/types/properties/config/axes/zLinearAxis.ts","../../src/types/properties/config/crosshair/zCrosshair.ts","../../src/types/properties/config/color/color.ts","../../src/types/dataSelector/selector.ts","../../src/types/properties/config/label/zLabel.ts","../../src/types/properties/config/legend/legend.ts","../../src/types/properties/config/tooltip/tooltip.ts","../../src/types/properties/annotation/zAnnotationPoint.ts","../../src/types/properties/annotation/zAnnotationHorizontalLine.ts","../../src/types/properties/annotation/zAnnotationArea.ts","../../src/types/properties/config/annotation/zAnnotaion.ts","../../src/types/properties/config/pivotGrid/pivotGrid.ts","../../src/types/properties/config/dimensionLinkage/dimensionLinkage.ts","../../src/types/properties/config/line.ts","../../src/types/properties/config/stackCornerRadius/stackCornerRadius.ts","../../src/types/properties/config/barWidth/index.ts","../../src/types/properties/regressionLine/zRegressionLine.ts","../../src/types/properties/config/column.ts","../../src/types/properties/config/bar.ts","../../src/types/properties/config/area.ts","../../src/types/properties/config/scatter.ts","../../src/types/properties/config/dualAxis.ts","../../src/types/properties/config/label/zPieLabel.ts","../../src/types/properties/config/pie.ts","../../src/types/properties/config/rose.ts","../../src/types/properties/config/funnelTransform/zFunnelTransform.ts","../../src/types/properties/config/funnel.ts","../../src/types/properties/config/heatmap/zHeatmap.ts","../../src/types/properties/config/heatmap.ts","../../src/types/properties/config/pivotTable.ts","../../src/types/properties/config/whiskers/index.ts","../../src/types/properties/markStyle/boxPlotStyle.ts","../../src/types/properties/markStyle/outlierStyle.ts","../../src/types/properties/config/boxWidth/zBoxWidth.ts","../../src/types/properties/config/boxplot.ts","../../src/types/properties/config/histogram.ts","../../src/types/properties/config/config.ts","../../src/types/properties/theme/customTheme.ts","../../src/types/properties/theme/theme.ts","../../src/types/properties/markStyle/barStyle.ts","../../src/types/properties/markStyle/pointStyle.ts","../../src/types/properties/markStyle/lineStyle.ts","../../src/types/properties/markStyle/zAreaStyle.ts","../../src/types/properties/markStyle/markStyle.ts","../../src/types/properties/annotation/zAnnotationVerticalLine.ts","../../src/types/properties/annotation/annotation.ts","../../src/types/properties/analysis/sort.ts","../../src/types/properties/analysis/sortLegend.ts","../../src/types/properties/analysis/analysis.ts","../../src/types/properties/cellStyle/bodyCellStyle.ts","../../src/types/i18n/i18n.ts","../../src/types/chartType/table/zTable.ts","../../src/types/chartType/pivotTable/zPivotTable.ts","../../src/types/chartType/line/zLine.ts","../../src/types/chartType/column/zColumn.ts","../../src/types/chartType/columnParallel/zColumnParallel.ts","../../src/types/chartType/columnPercent/zColumnPercent.ts","../../src/types/chartType/bar/zBar.ts","../../src/types/chartType/barParallel/zBarParallel.ts","../../src/types/chartType/barPercent/zBarPercent.ts","../../src/types/chartType/area/zArea.ts","../../src/types/chartType/areaPercent/zAreaPercent.ts","../../src/types/chartType/scatter/zScatter.ts","../../src/types/chartType/dualAxis/zDualAxis.ts","../../src/types/chartType/histogram/zHistogram.ts","../../src/types/chartType/rose/zRose.ts","../../src/types/chartType/roseParallel/zRoseParallel.ts","../../src/types/chartType/pie/zPie.ts","../../src/types/chartType/donut/zDonut.ts","../../src/types/chartType/radar/zRadar.ts","../../src/types/chartType/funnel/zFunnel.ts","../../src/types/chartType/heatmap/zHeatmap.ts","../../src/types/chartType/boxPlot/zBoxPlot.ts","../../src/types/zVseed.ts","../../src/types/properties/cellStyle/cellStyle.ts","../../src/types/advancedVSeed.ts"],"sourcesContent":["__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import type { ExecPipelineType, Pipe } from 'src/types'\n\n/**\n * 执行pipeline, 每个pipe负责构建结果的一部分, 构建完成后得到完整的目标结果\n * @param pipeline pipeline数组, 每个pipe负责构建结果的一部分\n * @param initialValue 初始值\n * @param context 上下文\n * @returns 执行后的结果\n */\nexport const execPipeline: ExecPipelineType = <T, U>(\n  pipeline: Array<Pipe<T, U>>,\n  context: U,\n  initialValue: Partial<T> = {},\n): T => {\n  const result = pipeline.reduce((prev, cur) => {\n    return cur(prev, context)\n  }, initialValue)\n  return result as T\n}\n","import type { TranslateRecordType } from '../types'\n\nexport const translateMap: TranslateRecordType = {\n  指标名称: {\n    'en-US': 'MeasureName',\n    'zh-CN': '指标名称',\n  },\n  指标Id: {\n    'en-US': 'MeasureId',\n    'zh-CN': '指标Id',\n  },\n  指标值: {\n    'en-US': 'MeasureValue',\n    'zh-CN': '指标值',\n  },\n  异常点: {\n    'en-US': 'Outlier',\n    'zh-CN': '异常点',\n  },\n  上边界: {\n    'en-US': 'Upper Whisker',\n    'zh-CN': '上边界',\n  },\n  上四分位数: {\n    'en-US': 'Q3',\n    'zh-CN': '75分位数',\n  },\n  中位数: {\n    'en-US': 'Q2',\n    'zh-CN': '中位数',\n  },\n  下四分位数: {\n    'en-US': 'Q1',\n    'zh-CN': '25分位数',\n  },\n  下边界: {\n    'en-US': 'Lower Whisker',\n    'zh-CN': '下边界',\n  },\n}\n","import { isNullish } from 'remeda'\nimport { translateMap } from './i18nData'\nimport type { Locale, TranslateRecordType } from '../types'\n\nclass Intl {\n  private static instance: Intl\n\n  private translateMap: TranslateRecordType = translateMap\n  private locale: Locale = 'zh-CN'\n\n  canTranslate = (value: string) => !!this.translateMap[value]\n\n  /**\n   * @example i18n`指标名称`\n   */\n  i18n = (segments: TemplateStringsArray, ...values: Array<number | string>) => {\n    const text = segments.map((segment, index) => segment + (values[index] || '')).join('')\n    const translatedText = this.translateMap?.[text]?.[this.locale]\n    if (isNullish(translatedText)) {\n      console.warn(`i18n ${this.locale} no translate: ${text}`)\n      return text\n    }\n    return translatedText\n  }\n\n  setLocale = (locale: Locale): void => {\n    this.locale = locale\n  }\n\n  getLocale: () => Locale = () => this.locale\n\n  public static getInstance() {\n    if (!Intl.instance) {\n      Intl.instance = new Intl()\n    }\n\n    return Intl.instance\n  }\n}\n\nconst intl = Intl.getInstance()\n\nexport { intl }\n","import type { AdvancedPipelineContext, AdvancedVSeed } from 'src/types'\nimport { execPipeline } from '../../pipeline'\nimport { Builder } from './builder'\nimport { intl } from 'src/i18n'\n\nexport const buildAdvanced = (builder: Builder): AdvancedVSeed | null => {\n  const start = typeof performance !== 'undefined' ? performance.now() : Date.now()\n  const { chartType } = builder.vseed\n  if (!chartType) {\n    throw new Error('chartType is nil in buildAdvanced')\n  }\n\n  const pipeline = Builder.getAdvancedPipeline(chartType)\n  if (!pipeline) {\n    throw new Error(\n      `please invoke registerAll or register ${chartType} before build, no advanced pipeline for chartType ${chartType}`,\n    )\n  }\n\n  const context: AdvancedPipelineContext = {\n    vseed: builder.vseed,\n    customTheme: Builder.getThemeMap(),\n  }\n  if (builder.locale) {\n    intl.setLocale(builder.locale)\n  }\n\n  try {\n    const advancedVSeed = execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pipeline, context)\n    builder.advancedVSeed = advancedVSeed\n    return advancedVSeed\n  } catch (e) {\n    console.error(e)\n    throw new Error(`buildAdvanced error: ${(e as Error).message}.\\ndetails info in console`)\n  } finally {\n    const end = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    builder.performance['buildAdvanced'] = `${(end - start).toFixed(4)}ms`\n  }\n}\n","import type { Spec, VChartSpecPipeline } from 'src/types'\nimport { Builder } from './builder'\nimport type { AdvancedVSeed, SpecPipelineContext } from 'src/types'\nimport { execPipeline } from '../../pipeline'\nimport { intl } from 'src/i18n'\nimport type { ISpec } from '@visactor/vchart'\n\nexport const buildSpec = (builder: Builder, advancedVSeed: AdvancedVSeed): Spec => {\n  const start = typeof performance !== 'undefined' ? performance.now() : Date.now()\n\n  const { chartType } = builder.vseed\n\n  const pipeline = Builder.getSpecPipeline(chartType)\n  if (!pipeline) {\n    throw new Error(\n      `please invoke registerAll or register ${chartType} before build, no spec pipeline for chartType ${chartType}`,\n    )\n  }\n\n  const context: SpecPipelineContext = {\n    vseed: builder.vseed,\n    advancedVSeed,\n  }\n  if (builder.locale) {\n    intl.setLocale(builder.locale)\n  }\n\n  try {\n    const spec = execPipeline<ISpec, SpecPipelineContext>(pipeline as VChartSpecPipeline, context)\n    builder.spec = spec\n    return spec\n  } catch (e) {\n    console.error(e)\n    throw new Error(`buildSpec error: ${(e as Error).message}.\\ndetails info in console`)\n  } finally {\n    const end = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    builder.performance['buildSpec'] = `${(end - start).toFixed(4)}ms`\n  }\n}\n","import type { Spec } from 'src/types'\nimport type { Builder } from './builder'\n\nexport const build = (builder: Builder): Spec => {\n  const advancedVSeed = builder.buildAdvanced()\n  if (!advancedVSeed) {\n    throw new Error('advancedVSeed is null')\n  }\n  const spec = builder.buildSpec(advancedVSeed)\n  return spec\n}\n","/**\n * 支持泛型与可配置子节点键名的非递归前序遍历\n * @param tree 根节点数组\n * @param callback 遍历时对每个节点执行的回调，返回 true 时停止遍历\n * @param childrenKey 子节点键名（默认 'children'）\n */\ntype WithChildren<Node, K extends string> = Node & { [P in K]?: Node[] }\n\nexport const preorderTraverse = <Node, K extends string = 'children'>(\n  tree: Node[],\n  callback: (node: Node) => boolean,\n  childrenKey: K = 'children' as K,\n) => {\n  if (!tree || tree.length === 0) return\n\n  const stack: Node[] = [...tree].reverse()\n\n  while (stack.length > 0) {\n    const node = stack.pop() as Node\n    const stop = callback(node)\n    if (stop === true) {\n      return\n    }\n\n    const children = (node as WithChildren<Node, K>)[childrenKey]\n    if (Array.isArray(children) && children.length > 0) {\n      for (let i = children.length - 1; i >= 0; i--) {\n        const child = children[i]\n        stack.push(child)\n      }\n    }\n  }\n}\n\nexport const findTreeNodesBy = <Node, K extends string = 'children'>(\n  nodes: Node[] = [],\n  callback: (node: Node) => boolean,\n  childrenKey: K = 'children' as K,\n): Node[] => {\n  if (!nodes) return []\n  const result: Node[] = []\n  preorderTraverse<Node, K>(nodes, (node) => {\n    if (!(childrenKey in (node as WithChildren<Node, K>))) {\n      if (callback(node)) {\n        result.push(node)\n      }\n    }\n    return false\n  })\n  return result\n}\n","import type { Measure, MeasureTree } from 'src/types'\nimport { preorderTraverse } from '../tree/traverse'\n\n/**\n * 获取measures的深度\n * @param measures\n * @param id\n * @returns\n */\nexport const measureDepth = (measures: MeasureTree = []): number => {\n  if (!measures) return 0\n  let depth = 1\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if ('children' in node) {\n      depth = Math.max(depth, 1 + measureDepth(node.children as MeasureTree))\n    }\n    return false\n  })\n  return depth\n}\n","import type { MeasureGroup, MeasureTree } from 'src/types'\n\n/**\n * @description 检查是否为指标树, 指标树深度大于1. 如果存在一个指标为组, 即有children配置, 则认为是指标树.\n * @param vseed vseed\n * @returns\n */\nexport const isMeasureTreeWithChildren = <T extends MeasureTree>(measures?: T) => {\n  if (!measures) {\n    return false\n  }\n\n  return measures.some((measure) => 'children' in measure)\n}\n\n/**\n * @description 检查是否为指标树, 指标树存在parentId. 如果存在一个指标有parentId, 则认为是指标树.\n * @param vseed vseed\n * @returns\n */\nexport const isMeasureTreeWithParentId = <T extends MeasureTree>(measures?: T) => {\n  if (!measures) {\n    return false\n  }\n\n  return measures.some((measure) => 'parentId' in measure)\n}\n\n/**\n * @description 保证指标树中的每一组都有children, 没有children的指标, 会被放到一个默认的指标组中.\n * @param measures 指标树\n * @returns\n */\nexport const normalizeMeasureTree = (measures: MeasureTree) => {\n  const createEmptyMeasureGroup = (): MeasureGroup => {\n    return {\n      id: 'group',\n      alias: '',\n      children: [],\n    }\n  }\n\n  let currentGroup: MeasureGroup = createEmptyMeasureGroup()\n  const measureGroups: MeasureGroup[] = []\n  for (const measure of measures) {\n    if ('children' in measure) {\n      // 当前指标组之前的所有独立指标成组\n      if (currentGroup.children?.length) {\n        currentGroup.id = [currentGroup.id, ...currentGroup.children.map((item) => item.id)].join('-')\n        currentGroup.alias = currentGroup.children.map((item) => item.alias).join('-')\n        measureGroups.push(currentGroup)\n        currentGroup = createEmptyMeasureGroup()\n      }\n      // 当前是指标组\n      measureGroups.push(measure)\n    } else {\n      currentGroup.children?.push(measure)\n    }\n  }\n\n  // 最后一组\n  if (currentGroup.children?.length) {\n    currentGroup.id = [currentGroup.id, ...currentGroup.children.map((item) => item.id)].join('-')\n    currentGroup.alias = currentGroup.children.map((item) => item.alias).join('-')\n    measureGroups.push(currentGroup)\n    currentGroup = createEmptyMeasureGroup()\n  }\n\n  return measureGroups\n}\n","// 标注层 z-index\nexport const ANNOTATION_Z_INDEX = 1000\n// 线性轴 顶部空隙 预留5px\nexport const LINEAR_AXIS_INNER_OFFSET_TOP = 12\n// 双轴图 柱图 ZIndex\nexport const DUAL_AXIS_CHART_COLUMN_Z_INDEX = 1000\n// 双轴图 非柱图 ZIndex\nexport const DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX = 1001\n// 双轴图 标注层 ZIndex\nexport const DUAL_AXIS_LABEL_Z_INDEX = 1002\n// 默认父级id\nexport const DEFAULT_PARENT_ID = '__DefaultParentId__'\n// 轴标签间距\nexport const AXIS_LABEL_SPACE = 8\n// 透视轴 band 类型内边距\nexport const BAND_AXIS_INNER_OFFSET_IN_PIVOT = 2\n\n// 图表类型枚举\nexport const ChartTypeEnum = {\n  Table: 'table',\n  PivotTable: 'pivotTable',\n  // cartesian\n  Line: 'line',\n  Column: 'column',\n  ColumnPercent: 'columnPercent',\n  ColumnParallel: 'columnParallel',\n  Bar: 'bar',\n  BarPercent: 'barPercent',\n  BarParallel: 'barParallel',\n  Area: 'area',\n  AreaPercent: 'areaPercent',\n  DualAxis: 'dualAxis',\n  Scatter: 'scatter',\n  // polar\n  Rose: 'rose',\n  RoseParallel: 'roseParallel',\n  Pie: 'pie',\n  Donut: 'donut',\n  Radar: 'radar',\n  // other\n  Funnel: 'funnel',\n  Heatmap: 'heatmap',\n  Boxplot: 'boxPlot',\n  Histogram: 'histogram',\n} as const\n\n// Heatmap hide cell\nexport const DATUM_HIDE_KEY = '__VSEED_HideItem__'\n","import { type Dimensions, type DimensionGroup, type DimensionTree, type VSeed, type Measure } from 'src/types'\nimport { measureDepth } from './measures'\nimport { isMeasureTreeWithChildren, isMeasureTreeWithParentId } from '../advanced/chart/pipes/measures/utils'\nimport { unique } from 'remeda'\nimport { ChartTypeEnum, DEFAULT_PARENT_ID } from './constant'\n\nexport const isTable = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.Table\n}\nexport const isPivotTable = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.PivotTable\n}\nexport const isRadar = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.Radar\n}\nexport const isAreaPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.AreaPercent\n}\nexport const isColumnPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.ColumnPercent\n}\nexport const isBarPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.BarPercent\n}\n\nexport const isBarLikeChart = (vseed: VSeed) => {\n  return (\n    vseed.chartType === ChartTypeEnum.Bar ||\n    vseed.chartType === ChartTypeEnum.BarPercent ||\n    vseed.chartType === ChartTypeEnum.BarParallel\n  )\n}\n\nexport const isVTable = (vseed: VSeed) => {\n  return ['table', 'pivotTable'].includes(vseed.chartType)\n}\nexport const isVChart = (vseed: VSeed): boolean => {\n  return !isVTable(vseed)\n}\n\n/**\n * @description 透视图表或组合图\n * - 透视图表定义: 存在 column 或 row的 encoding\n * - 组合图表定义: 存在多组指标的情况\n * - 透视组合图表: 存在 column 或 row的 encoding 且 存在多组指标的情况\n * 上述三者都只能使用 VTable.PivotChart 绘制\n */\nexport const isPivotChart = (vseed: VSeed) => {\n  if (isVTable(vseed)) {\n    return false\n  }\n\n  if (isPivot(vseed)) {\n    return true\n  }\n\n  return isCombination(vseed)\n}\n\n/**\n * @description 存在column 或 row的encoding\n */\nexport const isPivot = (vseed: VSeed) => {\n  const { dimensions = [] } = vseed as {\n    dimensions: Dimensions\n  }\n\n  return dimensions && dimensions.some((dimension) => dimension.encoding === 'row' || dimension.encoding === 'column')\n}\n/**\n * @description 不存在column 或 row的encoding, 但是有多组指标的情况\n */\nexport const isCombination = (vseed: VSeed) => {\n  if (isMeasureTreeWithParentId(vseed.measures)) {\n    const parentIds = vseed.measures?.map((measure: Measure) => measure.parentId || DEFAULT_PARENT_ID)\n    return parentIds && unique(parentIds).length > 1\n  }\n\n  if (vseed.chartType === 'dualAxis' || vseed.chartType === 'scatter') {\n    if (vseed.chartType === 'scatter') {\n      if (isMeasureTreeWithChildren(vseed.measures)) {\n        const depth = measureDepth(vseed.measures)\n        return depth === 3\n      }\n\n      if (vseed.scatterMeasures && vseed.scatterMeasures.length > 1) {\n        return true\n      }\n      return false\n    }\n    if (vseed.chartType === 'dualAxis') {\n      if (isMeasureTreeWithChildren(vseed.measures)) {\n        const depth = measureDepth(vseed.measures)\n        return depth === 3\n      }\n\n      if (vseed.dualMeasures && vseed.dualMeasures.length > 1) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  const { measures = [] } = vseed as {\n    measures: DimensionTree\n    dimensions: Dimensions\n  }\n\n  const hasMeasureGroup = measures && measures.some((measure: DimensionGroup) => measure && measure.children)\n\n  return hasMeasureGroup\n}\n","import { unique } from 'remeda'\nimport type { Builder } from '../builder'\nimport { isPivotTable, isTable } from 'src/pipeline'\n\nexport const getColorItems = (builder: Builder): { id: string; alias: string }[] => {\n  const advancedVSeed = builder.advancedVSeed\n\n  if (!advancedVSeed || isTable(builder.vseed) || isPivotTable(builder.vseed)) {\n    return []\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const colorItems = unique(datasetReshapeInfo.flatMap((d) => d.unfoldInfo.colorItems))\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  return colorItems.map((d) => ({\n    id: d,\n    alias: colorIdMap[d]?.alias,\n  }))\n}\n\nexport const getColorIdMap = (builder: Builder): Record<string, { id: string; alias: string }> => {\n  const advancedVSeed = builder.advancedVSeed\n\n  if (!advancedVSeed || isTable(builder.vseed) || isPivotTable(builder.vseed)) {\n    return {}\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  return colorIdMap\n}\n","import type {\n  AdvancedPipe,\n  AdvancedPipeline,\n  AdvancedVSeed,\n  ChartType,\n  CustomThemeConfig,\n  Locale,\n  Spec,\n  SpecPipe,\n  SpecPipeline,\n  VSeed,\n  VSeedBuilder,\n} from 'src/types'\nimport { buildAdvanced } from './buildAdvanced'\nimport { buildSpec } from './buildSpec'\nimport { build } from './build'\nimport { intl } from 'src/i18n'\nimport { getColorIdMap, getColorItems } from './advanced'\n\nexport class Builder implements VSeedBuilder {\n  private _vseed: VSeed\n  private _advancedVSeed: AdvancedVSeed | null = null\n  private _spec: Spec | null = null\n  private _performance: Record<string, string | number> = {}\n\n  private _locale: Locale\n\n  constructor(vseed: VSeed) {\n    this._vseed = vseed\n    this._locale = vseed.locale || intl.getLocale()\n  }\n\n  get locale() {\n    return this._locale\n  }\n\n  /**\n   * @description 构建spec\n   * @returns spec\n   */\n  build = <T extends Spec>(): T => build(this) as T\n\n  /**\n   * @description 构建spec\n   * @param advanced 高级配置\n   * @returns spec\n   */\n  buildSpec = (advanced: AdvancedVSeed): Spec => buildSpec(this, advanced)\n\n  /**\n   * @description 构建spec\n   * @returns AdvancedVSeed | null\n   */\n  buildAdvanced = (): AdvancedVSeed | null => buildAdvanced(this)\n\n  /**\n   * @description 获取颜色项, 颜色项可以重复,\n   * @returns 颜色项\n   */\n  getColorItems = () => getColorItems(this)\n\n  /**\n   * @description 获取颜色id映射\n   * @returns 颜色id映射\n   */\n  getColorIdMap = () => getColorIdMap(this)\n\n  /**\n   * @description 获取vseed\n   * @returns vseed\n   */\n  get vseed() {\n    return this._vseed\n  }\n\n  /**\n   * @description 设置vseed\n   * @param value vseed\n   */\n  set vseed(value) {\n    this._vseed = value\n  }\n\n  /**\n   * @description 获取advancedVSeed\n   * @returns advancedVSeed\n   */\n  get advancedVSeed() {\n    return this._advancedVSeed\n  }\n\n  /**\n   *\n   * @description 设置advancedVSeed\n   * @param value advancedVSeed\n   */\n  set advancedVSeed(value) {\n    this._advancedVSeed = value\n  }\n\n  /**\n   * @description 获取spec\n   * @returns spec\n   */\n  get spec() {\n    return this._spec\n  }\n\n  /**\n   * @description 设置spec\n   * @param value spec\n   */\n  set spec(value) {\n    this._spec = value\n  }\n\n  /**\n   * @description 获取performance, 统计了构建spec和advancedVSeed的时间\n   * @returns performance\n   */\n  get performance() {\n    return this._performance\n  }\n\n  /**\n   * @description 设置performance\n   * @param value performance\n   */\n  set performance(value) {\n    this._performance = value\n  }\n\n  /**\n   * @description 获取advancedPipeline\n   * @param chartType 图表类型\n   * @returns advancedPipeline\n   */\n  static getAdvancedPipeline = (chartType: ChartType) => {\n    const customPipe = Builder._customAdvancedPipe[chartType] as AdvancedPipe\n    const pipeline = Builder._advancedPipelineMap[chartType] as AdvancedPipeline\n    if (customPipe) {\n      pipeline.push(customPipe)\n    }\n    return pipeline\n  }\n\n  /**\n   * @description 获取specPipeline\n   * @param chartType 图表类型\n   * @returns specPipeline\n   */\n\n  static getSpecPipeline = (chartType: ChartType) => {\n    const customPipe = Builder._customSpecPipe[chartType] as SpecPipe\n    const pipeline = Builder._specPipelineMap[chartType] as SpecPipeline\n    if (customPipe) {\n      pipeline.push(customPipe)\n    }\n    return pipeline\n  }\n\n  /**\n   * @description 根据主题key获取主题配置\n   * @param themeKey 主题key\n   * @example Builder.getTheme('light'), 获取浅色主题\n   * @returns 主题配置\n   */\n  static getTheme = (themeKey?: string) => Builder._themeMap[themeKey || 'light']\n\n  /**\n   * @description 获取主题配置映射表\n   * @example Builder.getThemeMap()\n   * @returns 主题配置映射表\n   */\n  static getThemeMap = () => Builder._themeMap\n\n  /**\n   * @description 从vseed创建builder\n   * @param vseed 完整的vseed DSL\n   * @returns builder\n   */\n  static from = (vseed: VSeed) => new Builder(vseed)\n\n  static _advancedPipelineMap: Partial<Record<ChartType, AdvancedPipeline>> = {}\n  static _specPipelineMap: Partial<Record<ChartType, SpecPipeline>> = {}\n  static _customAdvancedPipe: Partial<Record<ChartType, AdvancedPipe>> = {}\n  static _customSpecPipe: Partial<Record<ChartType, SpecPipe>> = {}\n  static _themeMap: Record<string, CustomThemeConfig> = {}\n}\n","import { isEmpty } from 'remeda'\nimport type { VSeed } from 'src/types'\n\nexport const checkVSeed = (vseed: VSeed) => {\n  const { chartType, dataset, dimensions, measures } = vseed\n  if (!chartType) {\n    throw new Error('chartType is required')\n  }\n  if (!dataset || isEmpty(dataset)) {\n    throw new Error('dataset is required, and must be an array')\n  }\n  if (dimensions && !Array.isArray(dimensions)) {\n    throw new Error('dimensions must be an array')\n  }\n  if (measures && !Array.isArray(measures)) {\n    throw new Error('measures must be an array')\n  }\n}\n","import { checkVSeed } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const initAdvancedVSeed: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType, locale } = vseed\n\n  checkVSeed(vseed)\n\n  return {\n    ...advancedVSeed,\n    chartType,\n    locale: locale || 'zh-CN',\n  } as AdvancedVSeed\n}\n","import type { Measure, MeasureGroup } from 'src/types'\n\nexport const isMeasure = (measure: Measure | MeasureGroup): measure is Measure => {\n  return !('children' in measure)\n}\n\nexport const isMeasureGroup = (measure: Measure | MeasureGroup): measure is MeasureGroup => {\n  return 'children' in measure\n}\n\nexport const isMeasures = (measures: Measure[] | MeasureGroup[]): measures is Measure[] => {\n  return measures.every(isMeasure)\n}\n","import { clone } from 'remeda'\nimport { isMeasure, preorderTraverse } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum } from 'src/types'\n\n/**\n * @description 如果用户没有配置 measures, 则基于 dataset 构建默认的 measures\n */\nexport const defaultMeasures: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { measures, dataset } = vseed\n\n  if (measures && measures.length > 0) {\n    const clonedMeasures = clone(measures)\n    preorderTraverse(clonedMeasures, (node) => {\n      if (isMeasure(node)) {\n        node.alias = node.alias || node.id\n      }\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      measures: clonedMeasures,\n    }\n  }\n\n  const top100dataset = dataset.slice(0, 100)\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n  const defaultMeasures = Object.keys(sample)\n    .filter((key) => {\n      return top100dataset.some((item) => typeof item[key] === 'number') && !['', null, undefined].includes(key)\n    })\n    .map((measure) => ({\n      id: measure,\n      alias: measure,\n    }))\n\n  return {\n    ...advancedVSeed,\n    measures: defaultMeasures,\n  }\n}\n","import type { Dimension, DimensionGroup } from 'src/types'\n\nexport const isDimension = (dimension: Dimension | DimensionGroup): dimension is Dimension => {\n  return !('children' in dimension)\n}\n\nexport const isDimensionGroup = (dimension: Dimension | DimensionGroup): dimension is DimensionGroup => {\n  return 'children' in dimension\n}\n\n// export const isDimensions = (dimensions: Dimension[] | DimensionGroup[]): dimensions is Dimension[] => {\n//   return dimensions.every(isDimension)\n// }\n","import type { Measure, MeasureGroup, MeasureTree } from 'src/types'\nimport { preorderTraverse } from '../tree'\n\nexport const findMeasureById = (measures: MeasureTree = [], id: string): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      if (node.id === id) {\n        result = node\n        return true\n      }\n    }\n    return false\n  })\n  return result\n}\n\nexport const findFirstMeasure = (measures: MeasureTree = []): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result = node\n      return true\n    }\n    return false\n  })\n  return result\n}\n\nexport const findAllMeasures = (measures: MeasureTree = []): Measure[] => {\n  if (!measures) return []\n  const result: Measure[] = []\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result.push(node)\n    }\n    return false\n  })\n  return result\n}\n\nexport const hasMultipleMeasureInSingleView = (measures: MeasureTree = []): boolean => {\n  if (measures.every((m) => !('children' in m))) {\n    return measures.length > 1\n  }\n  let found = false\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if ((node as MeasureGroup).children && (node as MeasureGroup).children!.length > 1) {\n      found = true\n      return true\n    }\n    return false\n  })\n  return found\n}\n","import { clone } from 'remeda'\nimport { findAllMeasures, isDimension, preorderTraverse } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum, Dimensions, DimensionTree } from 'src/types'\n\nexport const defaultDimensions: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dimensions, dataset } = vseed\n\n  if (dimensions && dimensions.length > 0) {\n    const clonedDimensions = clone(dimensions)\n    preorderTraverse(clonedDimensions, (node) => {\n      if (isDimension(node)) {\n        node.alias = node.alias || node.id\n      }\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      dimensions: clonedDimensions,\n    }\n  }\n\n  const measures = findAllMeasures(advancedVSeed.measures as DimensionTree)\n\n  const top100dataset = dataset.slice(0, 100)\n\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n\n  const newDimensions = Object.keys(sample)\n    .filter(\n      (key) =>\n        top100dataset.some((item) => typeof item[key] === 'string') &&\n        !['', null, undefined].includes(key) &&\n        !measures.some((measure) => measure.id === key),\n    )\n    .map((dim) => ({\n      id: dim,\n      alias: dim,\n    })) as Dimensions\n\n  return {\n    ...result,\n    dimensions: newDimensions,\n  }\n}\n","import { isPlainObject, mapValues, pipe } from 'remeda'\n\n// 递归类型，将所有 null 替换为 undefined\ntype NullToUndefined<T> = T extends null\n  ? undefined\n  : T extends (infer U)[]\n    ? NullToUndefined<U>[]\n    : T extends object\n      ? { [K in keyof T]: NullToUndefined<T[K]> }\n      : T\n\nexport const replaceNullToUndefined = <T>(obj: T): NullToUndefined<T> => {\n  if (obj === null) {\n    return undefined as NullToUndefined<T>\n  }\n  if (Array.isArray(obj)) {\n    // 递归处理数组元素\n    return obj.map(replaceNullToUndefined) as NullToUndefined<T>\n  }\n  if (isPlainObject(obj)) {\n    // 使用 remeda 的 mapValues 递归处理对象属性\n    return pipe(\n      obj as object,\n      mapValues((value) => replaceNullToUndefined(value)),\n    ) as NullToUndefined<T>\n  }\n  return obj as NullToUndefined<T>\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const cellStyle: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n\n  const pickedCellStyle = pick(vseed, ['bodyCellStyle']) as AdvancedVSeed['cellStyle']\n\n  const style = replaceNullToUndefined(pickedCellStyle)\n\n  return { ...advancedVSeed, cellStyle: style }\n}\n","import type { AdvancedPipe } from 'src/types'\n\nexport const records: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { dataset } = vseed\n  return {\n    ...advancedVSeed,\n    dataset,\n  }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, Config } from 'src/types'\n\nexport const tableConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const config = pick(vseed, [\n    'backgroundColor',\n    'bodyFontSize',\n    'bodyFontColor',\n    'bodyBackgroundColor',\n    'headerFontSize',\n    'headerFontColor',\n    'headerBackgroundColor',\n    'hoverHeaderBackgroundColor',\n    'hoverHeaderInlineBackgroundColor',\n    'selectedBorderColor',\n    'selectedBackgroundColor',\n  ]) as Config['pivotTable']\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result\n}\n","import { clone, isNullish, isNumber, isObjectType, isString, merge, mergeDeep } from 'remeda'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const theme: AdvancedPipe = (advancedVSeed, context) => {\n  const { customTheme, vseed } = context\n  const { theme = 'light', chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  } as AdvancedVSeed\n\n  if (!customTheme || !customTheme[theme]) {\n    return result\n  }\n\n  const chartConfigTheme = customTheme?.[theme].config?.[chartType]\n  if (chartConfigTheme) {\n    const chartConfig = result.config?.[chartType] || {}\n    const mergedConfig = mergeDeep(chartConfigTheme, clone(chartConfig))\n\n    // 数组项不会被Merge, 需要将1个主题配置, 合并到数组的每一项\n    for (const _k in mergedConfig) {\n      const key = _k as keyof typeof mergedConfig\n      // 配置的第一层, 如果是数组, 则数组的每一项目和主题配置合并\n      if (Array.isArray(mergedConfig[key])) {\n        mergedConfig[key] = mergeArray(mergedConfig[key], chartConfigTheme[key])\n      }\n    }\n\n    result.config = {\n      [chartType]: mergedConfig,\n    }\n  }\n\n  const chartCustomTheme = customTheme?.[theme]?.config?.[chartType]\n\n  result.customTheme = {\n    config: {\n      [chartType]: chartCustomTheme,\n    },\n  }\n\n  return result\n}\n\nconst mergeArray = <Destination extends Array<object>, Source extends object | number | string | undefined | null>(\n  arr: Destination,\n  themeItem: Source,\n): Destination => {\n  if (isNullish(themeItem) || isString(themeItem) || isNumber(themeItem)) {\n    return arr\n  }\n\n  if (!Array.isArray(arr)) {\n    return arr\n  }\n\n  if (arr.some((d) => !isObjectType(d))) {\n    return arr\n  }\n\n  return arr.map((item) => {\n    return merge(themeItem, item)\n  }) as Destination\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport { initAdvancedVSeed, records, tableConfig, defaultMeasures, defaultDimensions, cellStyle } from '../pipes'\nimport { theme } from '../../chart/pipes'\n\nexport const tableAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  cellStyle,\n\n  records,\n  tableConfig,\n  theme,\n]\n","import type { ListTableConstructorOptions } from '@visactor/vtable'\nimport type { ListTableSpecPipe } from 'src/types'\n\nexport const initTable: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const { config } = advancedVSeed\n  const { backgroundColor = 'transparent' } = config.table || {}\n\n  return {\n    ...spec,\n    records: dataset,\n    widthMode: 'standard',\n    defaultHeaderColWidth: 'auto',\n    heightMode: 'autoHeight',\n    autoWrapText: true,\n    columnResizeMode: 'all',\n    showHeader: true,\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    animationAppear: {\n      duration: 300,\n      delay: 250,\n      type: 'one-by-one',\n      direction: 'row',\n    },\n    hover: {\n      highlightMode: 'row',\n    },\n    theme: {\n      cellInnerBorder: false,\n      underlayBackgroundColor: backgroundColor,\n    },\n  } as ListTableConstructorOptions\n}\n","import type { ColumnsDefine, ListTableConstructorOptions } from '@visactor/vtable'\nimport { isMeasure } from 'src/pipeline/utils'\nimport type { Dimension, DimensionGroup, DimensionTree, ListTableSpecPipe } from 'src/types'\n\nexport const dimensionTreeToColumns: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const dimensions = (advancedVSeed as unknown as { dimensions: DimensionTree }).dimensions\n  const result = { ...spec } as ListTableConstructorOptions\n  const eachNode = (node: Dimension | DimensionGroup) => {\n    if (isMeasure(node)) {\n      return {\n        width: 'auto',\n      }\n    }\n\n    return {}\n  }\n  const columns = treeTreeToColumns<Dimension, DimensionGroup>(dimensions, eachNode)\n\n  return {\n    ...result,\n    columns: [...(result.columns || []), ...columns] as ListTableConstructorOptions['columns'],\n  }\n}\n\nconst treeTreeToColumns = <\n  T extends { id: string; alias?: string },\n  U extends { id: string; alias?: string; children?: (T | U)[] },\n>(\n  tree: (T | U)[],\n  callback?: (node: T | U) => object,\n): ColumnsDefine[] => {\n  const result = tree.map((item) => {\n    if ('children' in item && Array.isArray(item.children)) {\n      const groupNode = item as unknown as U\n      const field = groupNode.id\n      const title = groupNode.alias ?? groupNode.id\n      const props = callback?.(groupNode) || {}\n      // group\n      return {\n        field,\n        title,\n        columns: treeTreeToColumns(item.children, callback),\n        ...props,\n      }\n    } else {\n      const field = item.id\n      const title = item.alias ?? item.id\n      const props = callback?.(item) || {}\n      // leaf\n      return {\n        field,\n        title,\n        ...props,\n      }\n    }\n  }) as unknown as ColumnsDefine[]\n\n  return result || []\n}\n","import { isNumber } from 'remeda'\nimport { intl } from '../../../i18n'\nimport type { Formatter, Locale, NumFormat } from 'src/types'\n\nexport const createNumFormatter = (format?: Partial<NumFormat>, locale: Locale = intl.getLocale()): Formatter => {\n  const {\n    type = 'number',\n    ratio = 1,\n    thousandSeparator = true,\n    prefix = '',\n    suffix = '',\n    symbol = '',\n    fractionDigits = 2,\n    significantDigits,\n    roundingMode = 'halfExpand',\n    roundingPriority = 'auto',\n  } = format || {}\n\n  const numFormatterOptions: Intl.NumberFormatOptions = {\n    style: 'decimal',\n    notation: type === 'scientific' ? 'scientific' : 'standard',\n    // @ts-expect-error roundingMode is not in NumberFormatOptions\n    roundingMode,\n    roundingPriority,\n  }\n\n  if (isNumber(fractionDigits)) {\n    if (fractionDigits >= 0) {\n      numFormatterOptions.minimumFractionDigits = fractionDigits\n      numFormatterOptions.maximumFractionDigits = fractionDigits\n    }\n  }\n  if (isNumber(significantDigits) && significantDigits > 0) {\n    if (significantDigits > 0) {\n      numFormatterOptions.minimumSignificantDigits = significantDigits\n      numFormatterOptions.maximumSignificantDigits = significantDigits\n    }\n  }\n\n  const numFormatter = new Intl.NumberFormat(locale, { ...numFormatterOptions, useGrouping: thousandSeparator })\n\n  return (value?: number | string) => {\n    let num = Number(value)\n    let typeSymbol = ''\n    if (Number.isNaN(num)) {\n      return String(value)\n    }\n\n    // apply ratio for percent/permille\n    if (type === 'percent') {\n      num *= 100\n      typeSymbol = '%'\n    } else if (type === 'permille') {\n      num *= 1000\n      typeSymbol = '‰'\n    } else if (type === 'number') {\n      num = num / (ratio || 1)\n    }\n\n    // format value\n    let numStr = numFormatter.format(num)\n\n    // add thousand separator\n    if (thousandSeparator) {\n      const parts = numStr.split('.')\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n      numStr = parts.join('.')\n    }\n\n    const validSymbol = symbol ?? ''\n\n    // add symbol, typeSymbol, prefix and suffix\n    return `${prefix}${numStr}${typeSymbol}${validSymbol}${suffix}`\n  }\n}\n\nexport const autoNumFormatter = (value?: number | string, locale: Locale = intl.getLocale()): string => {\n  if (value === undefined || value === null) return String(value)\n  const num = Number(value)\n  if (Number.isNaN(num)) return String(value)\n\n  const numFormatterOptions: Intl.NumberFormatOptions = {\n    style: 'decimal',\n    notation: 'compact',\n    useGrouping: true,\n  }\n  numFormatterOptions.minimumFractionDigits = 0\n  numFormatterOptions.maximumFractionDigits = 2\n\n  const numFormatter = new Intl.NumberFormat(locale, { ...numFormatterOptions })\n\n  return numFormatter.format(Number(value))\n}\n","import type { Formatter, Locale, NumFormat } from 'src/types'\nimport { autoNumFormatter, createNumFormatter } from './createNumFormatter'\nimport { intl } from 'src/i18n'\n\nexport const createFormatter = (format: Partial<NumFormat>, locale?: Locale): Formatter => {\n  return createNumFormatter(format, locale)\n}\n\nexport const autoFormatter = (value?: number | string, locale: Locale = intl.getLocale()): string => {\n  return autoNumFormatter(value, locale)\n}\n","import type { Formatter, Measure } from 'src/types'\nimport { autoFormatter, createFormatter } from './createFormatter'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const createFormatterByMeasure = (measure?: Measure): Formatter => {\n  if (!measure) {\n    return (v) => String(v)\n  }\n  const { numFormat, format, autoFormat } = measure\n\n  const formatterFormat = numFormat || format || {}\n\n  if (autoFormat === true) {\n    return autoFormatter\n  }\n\n  if (isNullish(autoFormat) && isEmpty(formatterFormat)) {\n    return autoFormatter\n  }\n\n  if (!isEmpty(formatterFormat)) {\n    return createFormatter(formatterFormat)\n  }\n\n  return (v) => String(v)\n}\n","import type { ColumnsDefine, ListTableConstructorOptions } from '@visactor/vtable'\nimport { createFormatterByMeasure, isMeasure } from 'src/pipeline/utils'\nimport type { MeasureGroup, Measure, MeasureTree, ListTableSpecPipe, Datum } from 'src/types'\n\nexport const measureTreeToColumns: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const measures = (advancedVSeed as unknown as { measures: MeasureTree }).measures\n  const result = { ...spec } as ListTableConstructorOptions\n\n  const eachNode = (node: Measure | MeasureGroup) => {\n    if (isMeasure(node)) {\n      return {\n        width: 'auto',\n        fieldFormat: fieldFormat(node),\n      }\n    }\n\n    return {}\n  }\n  const columns = treeTreeToColumns<Measure, MeasureGroup>(measures, eachNode)\n  return {\n    ...result,\n    columns: [...(result.columns || []), ...columns] as ListTableConstructorOptions['columns'],\n  }\n}\n\nconst fieldFormat = (node: Measure) => {\n  const formatter = createFormatterByMeasure(node)\n\n  return (datum: Datum) => {\n    const { id } = node\n    const value = datum[id] as number | string | undefined\n    return formatter(value)\n  }\n}\nconst treeTreeToColumns = <\n  T extends { id: string; alias?: string },\n  U extends { id: string; alias?: string; children?: (T | U)[] },\n>(\n  tree: (T | U)[],\n  callback?: (node: T | U) => object,\n): ColumnsDefine[] => {\n  const result = tree.map((item) => {\n    if ('children' in item && Array.isArray(item.children)) {\n      const groupNode = item as unknown as U\n      const field = groupNode.id\n      const title = groupNode.alias ?? groupNode.id\n      const props = callback?.(groupNode) || {}\n      // group\n      return {\n        field,\n        title,\n        columns: treeTreeToColumns(item.children, callback),\n        ...props,\n      }\n    } else {\n      const field = item.id\n      const title = item.alias ?? item.id\n      const props = callback?.(item) || {}\n      // leaf\n      return {\n        field,\n        title,\n        ...props,\n      }\n    }\n  }) as unknown as ColumnsDefine[]\n\n  return result || []\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const bodyStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { chartType, config } = advancedVSeed\n  const themeConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themeConfig) return result\n\n  // basic\n  const borderColor = themeConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themeConfig.bodyBackgroundColor || '#fff'\n  const fontColor = themeConfig.bodyFontColor || '#1B1F23'\n  const fontSize = themeConfig.bodyFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themeConfig.hoverBodyBackgroundColor || '#bedaff'\n  const hoverInlineColor = themeConfig.hoverBodyInlineBackgroundColor || '#bedaff'\n\n  if (!result.theme) result.theme = {}\n  ;(result.theme as ThemeLike).bodyStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'right',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    color: fontColor,\n    fontSize: fontSize,\n    fontStyle: 'normal',\n    fontWeight: 'normal',\n    fontVariant: 'normal',\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const headerStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themConfig.hoverHeaderBackgroundColor || '#bedaff'\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor || '#bedaff'\n\n  ;(result.theme as ThemeLike).headerStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'center',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 0, 1, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const frameStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n\n  ;(result.theme as ThemeLike).frameStyle = {\n    borderColor,\n    borderLineWidth: 1,\n    cornerRadius: 4,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const selectionStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  const borderColor = themConfig.selectedBorderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.selectedBackgroundColor || 'rgb(224, 224, 224, 0.5)'\n\n  ;(result.theme as ThemeLike).selectionStyle = {\n    cellBorderColor: borderColor,\n    cellBorderLineWidth: 2,\n    cellBgColor: backgroundColor,\n  }\n\n  return result\n}\n","import type { Datum } from 'src/types'\nimport type {\n  DimensionSelector,\n  MeasureSelector,\n  PartialDatumSelector,\n  Selector,\n  Selectors,\n  ValueSelector,\n} from '../types/dataSelector'\nimport { omit } from 'remeda'\n\n/**\n * 判断两个数字是否“近似相等”\n */\nfunction nearlyEqual(a: number, b: number, epsilon = 1e-8) {\n  // NaN 直接不相等\n  if (Number.isNaN(a) || Number.isNaN(b)) return false\n  // 引用同一个数 或 完全相等\n  if (a === b) return true\n  const diff = Math.abs(a - b)\n  return diff <= epsilon\n}\n\nexport const selector = (\n  vchartDatum: Datum,\n  selector: Selector | Selectors | undefined | null,\n  selectorMode: 'And' | 'Or' = 'And',\n) => {\n  // 无有效选择器, 则认为全部匹配成功\n  if (!selector) {\n    return true\n  }\n\n  // 过滤掉 vchart 相关字段\n  const vchartKeys = Object.keys(vchartDatum).filter((k) => k.toLocaleLowerCase().startsWith('__vchart'))\n  const datum = omit(vchartDatum, vchartKeys) as Datum\n\n  // 统一处理选择器为数组\n  const selectors = (Array.isArray(selector) ? selector : [selector]) as Selectors\n\n  return selectors[selectorMode === 'And' ? 'every' : 'some']((selector) => {\n    // 1. 字符串或数字\n    if (isValueSelector(selector)) {\n      return selectByValue(selector, datum)\n    }\n\n    // 2. 指标选择器\n    else if (isMeasureSelector(selector)) {\n      return selectByMeasure(selector, datum)\n    }\n    // 3. 维度选择器\n    else if (isDimensionSelector(selector)) {\n      return selectByDmension(selector, datum)\n    }\n    // 4. 部分数据对象选择器\n    else if (isPartialDatumSelector(selector)) {\n      return selectByPartial(selector, datum)\n    }\n\n    return false\n  })\n}\n\nexport const selectorDatum = (datum: Datum, selector: Selector | Selectors | undefined | null): Datum[] => {\n  // 无有效选择器, 则认为全部匹配成功\n  if (!selector) {\n    return []\n  }\n\n  // 统一处理选择器为数组\n  const selectors = (Array.isArray(selector) ? selector : [selector]) as Selectors\n  let finalResult: Datum[] = []\n\n  for (const selector of selectors) {\n    const results: Datum[] = []\n    // 1. 字符串或数字\n    if (isValueSelector(selector)) {\n      Object.entries(datum).forEach(([key, value]) => {\n        if (value === selector) {\n          results.push({ [key]: value } as Datum)\n        }\n      })\n    } else if (isMeasureSelector(selector) && selectByMeasure(selector, datum)) {\n      results.push({ [selector.field]: datum[selector.field] } as Datum)\n    } else if (isDimensionSelector(selector) && selectByDmension(selector, datum)) {\n      results.push({ [selector.field]: datum[selector.field] } as Datum)\n    } else if (isPartialDatumSelector(selector) && selectByPartial(selector, datum)) {\n      results.push(selector)\n    }\n\n    if (results.length) {\n      if (finalResult.length) {\n        finalResult = finalResult.flatMap((prev) => {\n          return results.map((r) => {\n            return {\n              ...prev,\n              ...r,\n            }\n          })\n        })\n      } else {\n        finalResult = results\n      }\n    } else {\n      finalResult = []\n      break\n    }\n  }\n\n  return finalResult\n}\n\nexport const isValueSelector = (selector: Selector): selector is ValueSelector => {\n  return typeof selector === 'string' || typeof selector === 'number'\n}\n\nexport const isPartialDatumSelector = (selector: Selector): selector is PartialDatumSelector => {\n  return typeof selector === 'object' && selector !== null\n}\n\nexport const isMeasureSelector = (selector: Selector): selector is MeasureSelector => {\n  return (\n    typeof selector === 'object' &&\n    selector !== null &&\n    'field' in selector &&\n    ('operator' in selector || 'op' in selector) &&\n    'value' in selector &&\n    (['=', '==', '!=', '>', '<', '>=', '<=', 'between'].includes(selector.operator as string) ||\n      ['=', '==', '!=', '>', '<', '>=', '<=', 'between'].includes(selector.op as string))\n  )\n}\n\nexport const isDimensionSelector = (selector: Selector): selector is DimensionSelector => {\n  return (\n    typeof selector === 'object' &&\n    selector !== null &&\n    'field' in selector &&\n    ('operator' in selector || 'op' in selector) &&\n    'value' in selector &&\n    (['in', 'not in'].includes(selector.operator as string) || ['in', 'not in'].includes(selector.op as string))\n  )\n}\n\nexport const selectByMeasure = (selector: MeasureSelector, datum: Datum) => {\n  const op = selector.operator || selector.op\n  const selectorValueArr = Array.isArray(selector.value) ? selector.value : [selector.value]\n\n  switch (op) {\n    case '=':\n      if (\n        String(datum[selector.field]) === String(selectorValueArr[0]) ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '==':\n      if (datum[selector.field] === selectorValueArr[0]) {\n        return true\n      }\n      break\n    case '!=':\n      if (datum[selector.field] !== selectorValueArr[0]) {\n        return true\n      }\n      break\n    case '>':\n      if (\n        datum[selector.field] > selectorValueArr[0] &&\n        !nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '<':\n      if (\n        datum[selector.field] < selectorValueArr[0] &&\n        !nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '>=':\n      if (\n        datum[selector.field] >= selectorValueArr[0] ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '<=':\n      if (\n        datum[selector.field] <= selectorValueArr[0] ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case 'between':\n      if (\n        Array.isArray(selector.value) &&\n        (datum[selector.field] >= selectorValueArr[0] ||\n          nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))) &&\n        (datum[selector.field] <= selectorValueArr[1] ||\n          nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[1])))\n      ) {\n        return true\n      }\n      break\n  }\n  return false\n}\n\nexport const selectByDmension = (selector: DimensionSelector, datum: Datum) => {\n  const op = selector.operator || selector.op\n  const selectorValueArr = Array.isArray(selector.value) ? selector.value : [selector.value]\n  switch (op) {\n    case 'in':\n      if (selectorValueArr.includes(datum[selector.field] as string | number)) {\n        return true\n      }\n      break\n    case 'not in':\n      if (!selectorValueArr.includes(datum[selector.field] as string | number)) {\n        return true\n      }\n      break\n  }\n\n  return false\n}\n\nexport const selectByPartial = (selector: PartialDatumSelector, datum: Datum) => {\n  return Object.keys(selector).every((key) => datum[key] === selector[key])\n}\n\nexport const selectByValue = (selector: ValueSelector, datum: Datum) => {\n  return Object.values(datum).some((v) => v === selector)\n}\n","import type { BodyCellStyle } from 'src/types'\n\nconst tableStyleMap = {\n  backgroundColor: 'bgColor',\n  textColor: 'color',\n  textFontSize: 'fontSize',\n  borderColor: 'borderColor',\n  borderLineWidth: 'borderLineWidth',\n}\n\nexport const pickBodyCellStyle = (bodyCellStyle: BodyCellStyle) => {\n  return (Object.keys(tableStyleMap) as Array<keyof typeof tableStyleMap>).reduce<Record<string, any>>((acc, key) => {\n    if (key in bodyCellStyle) {\n      acc[tableStyleMap[key]] = bodyCellStyle[key]\n    }\n\n    return acc\n  }, {})\n}\n","import type { ListTableConstructorOptions, ColumnDefine } from '@visactor/vtable'\nimport { array } from '@visactor/vutils'\nimport { isNullish, isNumber, isPlainObject, isString } from 'remeda'\nimport { selector } from 'src/dataSelector/selector'\nimport type { BodyCellStyle, ListTableSpecPipe } from 'src/types'\nimport type { MeasureSelector, Selectors } from 'src/types/dataSelector'\nimport { pickBodyCellStyle } from './common'\nimport { preorderTraverse } from 'src/pipeline/utils/tree/traverse'\n\nexport const tableBodyCell: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { cellStyle } = advancedVSeed\n  const bodyCellStyle = cellStyle?.bodyCellStyle\n\n  if (!bodyCellStyle) {\n    return spec as ListTableConstructorOptions\n  }\n  const bodyCellStyleList = array(bodyCellStyle) as BodyCellStyle[]\n  const columns = (spec as ListTableConstructorOptions).columns || []\n  const setStyleOfColumn = (col: ColumnDefine) => {\n    const field = col.field as string\n    const matchedStyles = bodyCellStyleList.filter((style) => {\n      if (isNullish(style.selector)) {\n        return true\n      }\n      const selectors = array(style.selector) as Selectors\n\n      return selectors.some((selector) => {\n        return isPlainObject(selector)\n          ? isNullish(selector.field) || (selector as MeasureSelector).field === field\n          : isNumber(selector) || isString(selector)\n      })\n    })\n\n    if (!matchedStyles.length) {\n      return false\n    }\n\n    col.style = (datum: any) => {\n      const originalDatum = {\n        [field]: datum.dataValue,\n      }\n\n      const mergedStyle = matchedStyles.reduce<Record<string, any>>((result, style) => {\n        if (selector(originalDatum, style.selector)) {\n          return {\n            ...result,\n            ...pickBodyCellStyle(style),\n          }\n        }\n\n        return result\n      }, {})\n\n      return mergedStyle\n    }\n    return false\n  }\n\n  preorderTraverse<ColumnDefine, 'columns'>(columns, setStyleOfColumn, 'columns')\n\n  return spec as ListTableConstructorOptions\n}\n","import type { SpecPipeline } from 'src/types'\nimport {\n  initTable,\n  dimensionTreeToColumns,\n  measureTreeToColumns,\n  bodyStyle,\n  headerStyle,\n  frameStyle,\n  selectionStyle,\n  tableBodyCell,\n} from '../pipes'\n\nexport const tableSpecPipeline: SpecPipeline = [\n  initTable,\n  dimensionTreeToColumns,\n  measureTreeToColumns,\n  bodyStyle,\n  headerStyle,\n  frameStyle,\n  selectionStyle,\n  tableBodyCell,\n]\n","import { tableAdvancedPipeline, tableSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerTable = () => {\n  Builder._advancedPipelineMap['table'] = tableAdvancedPipeline\n  Builder._specPipelineMap['table'] = tableSpecPipeline\n}\n","// Reshape\nexport const ORIGINAL_DATA = '__OriginalData__'\nexport const Separator = '-'\n\n// Measures\nexport const FoldMeasureName = '__MeaName__'\nexport const FoldMeasureId = '__MeaId__'\nexport const FoldMeasureValue = '__MeaValue__'\nexport const MeasureId = FoldMeasureId\nexport const MeasureName = FoldMeasureName\n\n// Measures For DualAxis\nexport const FoldPrimaryMeasureValue = '__MeaPrimaryValue__'\nexport const FoldSecondaryMeasureValue = '__MeaSecondaryValue__'\n\n// Measures For Scatter\nexport const FoldXMeasureValue = '__MeaXValue__'\nexport const FoldYMeasureValue = '__MeaYValue__'\nexport const FoldXMeasureId = '__MeaXId__'\nexport const FoldYMeasureId = '__MeaYId__'\n// Encoding\nexport const XEncoding = '__Dim_X__'\nexport const YEncoding = '__Dim_Y__'\nexport const AngleEncoding = '__Dim_Angle__'\nexport const DetailEncoding = '__Dim_Detail__'\nexport const ColorEncoding = '__Dim_Color__'\nexport const ColorIdEncoding = '__Dim_ColorId__'\n\n// Measures For boxPlot\nexport const Q1MeasureValue = '__Q1__'\nexport const Q3MeasureValue = '__Q3__'\nexport const LowerWhisker = '__Lower_Whisker__'\nexport const UpperWhisker = '__Upper_Whisker__'\nexport const OutliersMeasureId = '__Outliers__'\nexport const MedianMeasureId = '__Meadian__'\n\n// Measures For Histogram\nexport const BinStartMeasureId = '__BinStart__'\nexport const BinEndMeasureId = '__BinEnd__'\nexport const BinCountMeasureId = '__BinCount__'\nexport const BinPercentageMeasureId = '__BinPercentage__'\n","import { MeasureId, MeasureName } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport type { AdvancedPipe, Dimension, DimensionTree } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n  const measures = findAllMeasures(advancedVSeed.measures as DimensionTree)\n\n  // 如果没有指标名称维度，则默认添加指标名称维度\n  if (measures.length > 1 && !result.dimensions?.some((dim) => dim.id === MeasureName)) {\n    result.dimensions?.push({\n      id: MeasureId,\n      alias: intl.i18n`指标名称`,\n      encoding: 'row',\n    } as Dimension)\n  }\n\n  return result\n}\n","import { unique } from 'remeda'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\n\nexport const encodingForPivotTable: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.tooltip = uniqueDimIds\n  encoding.row = []\n  encoding.column = []\n\n  uniqueDimIds.forEach((item, index) => {\n    if (index % 2 === 0) {\n      encoding.column!.push(item)\n    } else {\n      encoding.row!.push(item)\n    }\n  })\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.tooltip = uniqueDimIds\n  encoding.row = []\n  encoding.column = []\n\n  dimensions.forEach((dim, index) => {\n    const id = dim.id\n    if (dim.encoding === 'row') {\n      encoding.row!.push(id)\n    } else if (dim.encoding === 'column') {\n      encoding.column!.push(id)\n    } else {\n      if (index % 2 === 0) {\n        encoding.column!.push(id)\n      } else {\n        encoding.row!.push(id)\n      }\n    }\n  })\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.tooltip = unique(measures.map((item) => item.id))\n  encoding.detail = unique(\n    measures.filter((item) => item.encoding === 'detail' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.tooltip = measures.map((item) => item.id)\n  encoding.detail = unique(\n    measures.filter((item) => item.encoding === 'detail' || !item.encoding).map((item) => item.id),\n  )\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type { Dataset, FoldInfo, Measures } from 'src/types'\nimport { ColorEncoding, ColorIdEncoding, ORIGINAL_DATA } from './constant'\nimport { omit } from 'remeda'\n\n/**\n * 折叠指定的指标\n * @description 合并指定的指标为1个, 无论多少个, 都能转换为1个, 取名为fold, 意为折叠后混合在一起.\n */\nexport const foldMeasures = (\n  dataset: Dataset,\n  measures: Measures,\n  options: {\n    measureId: string\n    measureName: string\n    measureValue: string\n    colorMeasureId?: string\n    allowEmptyFold?: boolean\n    omitIds?: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n} => {\n  const { measureId, measureName, measureValue, colorMeasureId, allowEmptyFold = true, omitIds = [] } = options || {}\n\n  const foldInfo: FoldInfo = {\n    measureId,\n    measureName,\n    measureValue,\n    statistics: {\n      max: -Infinity,\n      min: Infinity,\n      sum: 0,\n      count: 0,\n      colorMin: Infinity,\n      colorMax: -Infinity,\n    },\n    foldMap: {},\n  }\n\n  if (!allowEmptyFold && measures.length === 0) {\n    return {\n      dataset,\n      foldInfo,\n    }\n  }\n\n  const result: Dataset = new Array(dataset.length * measures.length) as Dataset\n  let index = 0\n  const ids = measures.map((d) => d.id)\n  for (let i = 0; i < dataset.length; i++) {\n    for (let j = 0; j < measures.length; j++) {\n      const datum: Record<string, any> = omit({ ...dataset[i] }, [...ids, ...omitIds])\n\n      datum[ORIGINAL_DATA] = dataset[i]\n\n      const measure = measures[j]\n      const { id, alias } = measure\n\n      datum[id] = dataset[i][id] as unknown\n      datum[measureId] = id\n      datum[measureName] = alias || id\n      datum[measureValue] = dataset[i][id] as unknown\n\n      if (colorMeasureId) {\n        const value = (datum[ORIGINAL_DATA] as Record<string, string | number>)[colorMeasureId]\n        datum[ColorEncoding] = value\n        datum[ColorIdEncoding] = colorMeasureId\n\n        const valueNumber = Number(value)\n        foldInfo.statistics.colorMin = Math.min(foldInfo.statistics.colorMin, valueNumber)\n        foldInfo.statistics.colorMax = Math.max(foldInfo.statistics.colorMax, valueNumber)\n      }\n\n      const valueNumber = Number(datum[id])\n      foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n      foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n      foldInfo.statistics.sum += valueNumber\n      foldInfo.statistics.count++\n\n      foldInfo.foldMap[id] = alias\n      result[index++] = datum\n    }\n  }\n\n  return {\n    dataset: result,\n    foldInfo,\n  }\n}\n","import { FoldMeasureId, FoldMeasureName, foldMeasures, FoldMeasureValue } from 'src/dataReshape'\nimport {} from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, DatasetReshapeInfo, PivotTable } from 'src/types'\n\nexport const reshapePivotTable: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as PivotTable\n  const { dimensions, measures } = advancedVSeed\n  const { dataset: newDatasets, foldInfo } = foldMeasures(dataset, findAllMeasures(measures), {\n    measureId: FoldMeasureId,\n    measureName: FoldMeasureName,\n    measureValue: FoldMeasureValue,\n    allowEmptyFold: false,\n  })\n\n  const datasetReshapeInfo = [\n    {\n      id: String(chartType),\n      index: 0,\n      foldInfo,\n    },\n  ] as unknown as DatasetReshapeInfo\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n    dimensions,\n    measures,\n  }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, Config } from 'src/types'\n\nexport const pivotTableConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const config = pick(vseed, [\n    'backgroundColor',\n    'bodyFontSize',\n    'bodyFontColor',\n    'bodyBackgroundColor',\n    'headerFontSize',\n    'headerFontColor',\n    'headerBackgroundColor',\n    'hoverHeaderBackgroundColor',\n    'hoverHeaderInlineBackgroundColor',\n    'selectedBorderColor',\n    'selectedBackgroundColor',\n  ]) as Config['table']\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport { theme } from '../../chart/pipes'\nimport {\n  cellStyle,\n  defaultDimensions,\n  defaultMeasureId,\n  defaultMeasures,\n  encodingForPivotTable,\n  initAdvancedVSeed,\n  pivotTableConfig,\n  reshapePivotTable,\n} from '../pipes'\n\nexport const pivotTableAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  cellStyle,\n\n  encodingForPivotTable,\n  reshapePivotTable,\n  pivotTableConfig,\n  theme,\n]\n","import type { PivotTableConstructorOptions } from '@visactor/vtable'\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const initPivotTable: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const { config } = advancedVSeed\n  const { backgroundColor = 'transparent' } = config.pivotTable || {}\n  return {\n    ...spec,\n    records: dataset,\n    widthMode: 'standard',\n    defaultHeaderColWidth: 'auto',\n    heightMode: 'autoHeight',\n    autoWrapText: true,\n    columnResizeMode: 'all',\n    columnResizeType: 'column',\n    showColumnHeader: true,\n    showRowHeader: true,\n    select: {\n      highlightMode: 'cell',\n      headerSelectMode: 'inline',\n    },\n    hover: {\n      highlightMode: 'cross',\n    },\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    corner: {\n      titleOnDimension: 'all',\n    },\n    widthAdaptiveMode: 'all',\n    animationAppear: {\n      duration: 300,\n      delay: 250,\n      type: 'one-by-one',\n      direction: 'row',\n    },\n    theme: {\n      cellInnerBorder: false,\n      underlayBackgroundColor: backgroundColor,\n    },\n  } as PivotTableConstructorOptions\n}\n","import type { PivotTableConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotColumns: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { encoding } = advancedVSeed\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  const columns = dimensions.filter((item) => encoding.column?.includes(item.id))\n\n  return {\n    ...spec,\n    columns: columns.map((item) => {\n      return {\n        dimensionKey: item.id,\n        title: item.alias || item.id,\n        width: 'auto',\n      }\n    }),\n  } as PivotTableConstructorOptions\n}\n","import { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport type { Dimensions, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotRows: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  const { encoding, measures } = advancedVSeed\n  const rows = dimensions.filter((item) => encoding.row?.includes(item.id))\n  const allMeasures = findAllMeasures(measures)\n\n  return {\n    ...spec,\n    rows: rows.map((item) => {\n      const res = {\n        dimensionKey: item.id,\n        title: item.alias || item.id,\n        width: 'auto',\n      }\n\n      if (item.id === MeasureId) {\n        ;(res as any).headerFormat = (measureId: string) => {\n          const measure = allMeasures.find((m) => m.id === measureId)\n\n          return measure?.alias ?? measureId\n        }\n      }\n\n      return res\n    }),\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const titleOnDimension: PivotTableSpecPipe = (spec) => {\n  const { rows = [], columns = [] } = spec\n\n  return {\n    ...spec,\n    corner: {\n      titleOnDimension: (rows as any[]).length <= 1 && (columns as any[]).length >= 1 ? 'column' : 'row',\n    },\n  }\n}\n","import type { PivotChartConstructorOptions, BaseTableAPI } from '@visactor/vtable'\nimport { isNumber } from 'remeda'\nimport { intl } from 'src/i18n'\nimport { createFormatterByMeasure, findMeasureById } from 'src/pipeline/utils'\nimport type { Datum, FoldInfo, MeasureTree, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotIndicators: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { measures, datasetReshapeInfo } = advancedVSeed\n  const { foldInfo } = datasetReshapeInfo[0]\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n  const hasRow = ((spec as any)?.rows as any[])?.length > 0\n  const foldMapValues = Object.values(foldInfo.foldMap)\n\n  return {\n    ...spec,\n    indicatorTitle: intl.i18n`指标名称`,\n    indicatorsAsCol: hasRow,\n    hideIndicatorName: hasRow,\n    indicators: [\n      {\n        cellType: 'text',\n        indicatorKey: foldInfo.measureValue,\n        title: foldMapValues.length > 1 ? '' : foldMapValues[0],\n        width: 'auto',\n        format: fieldFormat(measures, foldInfo as FoldInfo),\n      },\n    ] as unknown as PivotChartConstructorOptions['indicators'],\n  }\n}\n\nconst fieldFormat = (measures: MeasureTree, foldInfo: FoldInfo) => {\n  return (value: number | string, col?: number, row?: number, table?: BaseTableAPI) => {\n    if (!isNumber(col) || !isNumber(row) || !table) {\n      return value\n    }\n\n    const datum = table.getCellOriginRecord(col, row) as Datum[]\n    if (!datum[0]) {\n      return value\n    }\n    const { measureId: foldMeasureId } = foldInfo\n    const measureId = datum[0][foldMeasureId] as string\n    const measure = findMeasureById(measures, measureId)\n    const formatter = createFormatterByMeasure(measure)\n    return formatter(value)\n  }\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const rowHeaderStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themConfig.hoverHeaderBackgroundColor || '#bedaff'\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor || '#bedaff'\n\n  ;(result.theme as ThemeLike).rowHeaderStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'left',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 1, 0, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const cornerHeaderStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor\n  const hoverCellColor = themConfig.hoverHeaderBackgroundColor\n\n  ;(result.theme as ThemeLike).cornerHeaderStyle = {\n    borderColor: [borderColor, borderColor],\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'left',\n    hover: {\n      cellBgColor: hoverCellColor || undefined,\n      inlineRowBgColor: hoverInlineColor || undefined,\n      inlineColumnBgColor: hoverInlineColor || undefined,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 1, 1, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { IIndicator, PivotTableConstructorOptions } from '@visactor/vtable'\nimport { array } from '@visactor/vutils'\nimport { isNullish, isString } from 'remeda'\nimport { selector } from 'src/dataSelector/selector'\nimport type { BodyCellStyle, Datum, PivotTableSpecPipe } from 'src/types'\nimport { pickBodyCellStyle } from './common'\nimport { FoldMeasureValue, MeasureId } from 'src/dataReshape'\n\nexport const pivotTableBodyCell: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { cellStyle } = advancedVSeed\n  const bodyCellStyle = cellStyle?.bodyCellStyle\n\n  if (!bodyCellStyle) {\n    return spec as PivotTableConstructorOptions\n  }\n  const bodyCellStyleList = array(bodyCellStyle) as BodyCellStyle[]\n  const indicators = (spec as PivotTableConstructorOptions).indicators || []\n\n  const newIndicators = indicators.map((ind) => {\n    const newInd = isString(ind)\n      ? ({\n          indicatorKey: ind,\n        } as IIndicator)\n      : ind\n\n    const { indicatorKey } = newInd\n\n    newInd.style = (datum: any) => {\n      const { dataValue, cellHeaderPaths } = datum\n      const headerPaths = [...cellHeaderPaths.colHeaderPaths, ...cellHeaderPaths.rowHeaderPaths]\n\n      const originalDatum: Datum = {\n        [indicatorKey]: dataValue,\n      }\n\n      headerPaths.forEach((path: any) => {\n        if (path.dimensionKey) {\n          originalDatum[path.dimensionKey] = path.value\n        }\n      })\n\n      if (!isNullish(originalDatum[MeasureId]) && !isNullish(originalDatum[FoldMeasureValue])) {\n        originalDatum[originalDatum[MeasureId]] = originalDatum[FoldMeasureValue]\n      }\n\n      const mergedStyle = bodyCellStyleList.reduce<Record<string, any>>((result, style) => {\n        if (selector(originalDatum, style.selector)) {\n          return {\n            ...result,\n            ...pickBodyCellStyle(style),\n          }\n        }\n\n        return result\n      }, {})\n\n      return mergedStyle\n    }\n    return newInd\n  })\n  return {\n    ...spec,\n    indicators: newIndicators,\n  } as PivotTableConstructorOptions\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const dataConfig: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const measures = findAllMeasures(advancedVSeed.measures)\n\n  const aggregationRules = measures.map((measure) => ({\n    field: measure.id,\n    aggregationType: 'NONE',\n    indicatorKey: measure.id,\n  }))\n\n  return {\n    ...spec,\n    dataConfig: {\n      aggregationRules,\n    },\n  }\n}\n","import type { SpecPipeline } from 'src/types'\nimport {\n  initPivotTable,\n  pivotColumns,\n  pivotRows,\n  pivotIndicators,\n  bodyStyle,\n  headerStyle,\n  rowHeaderStyle,\n  cornerHeaderStyle,\n  frameStyle,\n  selectionStyle,\n  titleOnDimension,\n  pivotTableBodyCell,\n} from '../pipes'\nimport { dataConfig } from '../pipes/indicators/pivotDataConfig'\n\nexport const pivotTableSpecPipeline: SpecPipeline = [\n  initPivotTable,\n  pivotColumns,\n  pivotRows,\n  titleOnDimension,\n  pivotIndicators,\n  bodyStyle,\n  headerStyle,\n  rowHeaderStyle,\n  cornerHeaderStyle,\n  frameStyle,\n  selectionStyle,\n  dataConfig,\n  pivotTableBodyCell,\n]\n","import { pivotTableAdvancedPipeline, pivotTableSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerPivotTable = () => {\n  Builder._advancedPipelineMap['pivotTable'] = pivotTableAdvancedPipeline\n  Builder._specPipelineMap['pivotTable'] = pivotTableSpecPipeline\n}\n","import { checkVSeed } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const initAdvancedVSeed: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType, locale } = vseed\n\n  checkVSeed(vseed)\n\n  return {\n    ...advancedVSeed,\n    chartType,\n    locale: locale || 'zh-CN',\n  } as AdvancedVSeed\n}\n","import { clone } from 'remeda'\nimport type { AdvancedPipe, Datum } from 'src/types'\nimport { preorderTraverse } from 'src/pipeline/utils'\n/**\n * @description 如果用户没有配置 measures, 则基于 dataset 构建默认的 measures\n */\nexport const defaultMeasures: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { measures, dataset } = vseed\n\n  if (measures && measures.length > 0) {\n    const clonedMeasures = clone(measures)\n    preorderTraverse(clonedMeasures, (node) => {\n      node.alias = node.alias || node.id\n\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      measures: clonedMeasures,\n    }\n  }\n\n  const top100dataset = dataset.slice(0, 100)\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n  const defaultMeasures = Object.keys(sample)\n    .filter((key) => {\n      return top100dataset.some((item) => typeof item[key] === 'number') && !['', null, undefined].includes(key)\n    })\n    .map((measure) => ({\n      id: measure,\n      alias: measure,\n    }))\n\n  return {\n    ...advancedVSeed,\n    measures: defaultMeasures,\n  }\n}\n","import { clone } from 'remeda'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum, Dimensions, DimensionTree } from 'src/types'\n\nexport const defaultDimensions: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dimensions, dataset } = vseed\n\n  if (dimensions && dimensions.length > 0) {\n    return {\n      ...result,\n      dimensions: clone(dimensions.map((dim) => ({ ...dim, alias: dim.alias || dim.id }))),\n    }\n  }\n\n  const measures = findAllMeasures(advancedVSeed.measures as DimensionTree)\n\n  const top100dataset = dataset.slice(0, 100)\n\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n\n  const newDimensions = Object.keys(sample)\n    .filter(\n      (key) =>\n        top100dataset.some((item) => typeof item[key] === 'string') &&\n        !['', null, undefined].includes(key) &&\n        !measures.some((measure) => measure.id === key),\n    )\n    .map((dim) => ({\n      id: dim,\n      alias: dim,\n    })) as Dimensions\n\n  return {\n    ...result,\n    dimensions: newDimensions,\n  }\n}\n","import { MeasureId } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport type { AdvancedPipe, Dimension } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n\n  const MeaIdDim: Dimension = {\n    id: MeasureId,\n    alias: intl.i18n`指标Id`,\n  }\n\n  // 如果没有指标Id维度，则默认添加指标Id维度\n  if (!result.dimensions?.some((dim) => dim.id === MeasureId)) {\n    result.dimensions?.push(MeaIdDim)\n  }\n\n  return result\n}\n","import type {\n  AdvancedPipe,\n  AdvancedPipeline,\n  AdvancedPipelineContext,\n  AdvancedVSeed,\n  Dimension,\n  Measure,\n} from 'src/types'\nimport { execPipeline } from 'src/pipeline/utils'\n\nexport const encodingAdapter = (\n  noEncodingPipeline: AdvancedPipeline,\n  hasEncodingPipeline: AdvancedPipeline,\n): AdvancedPipe => {\n  return (advancedVSeed, context) => {\n    const { dimensions = [], measures = [] } = advancedVSeed\n    const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n    const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n    const hasEncoding = hasDimensionEncoding || hasMeasureEncoding\n\n    if (hasEncoding) {\n      return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(hasEncodingPipeline, context, advancedVSeed)\n    }\n    return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(noEncodingPipeline, context, advancedVSeed)\n  }\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { Dimensions, Encoding } from 'src/types'\n\n/**\n * @description 为 encoding 添加 color 编码, 多指标场景, 会将 MeasureId 也添加到 color 编码中.\n * @param dimensions\n * @param encoding\n * @param isMultiMeasure\n */\nexport const addColorToEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n  const measureId = dimensions.find((item) => item.id === MeasureId)\n  if (isMultiMeasure && measureId && !measureId.encoding) {\n    encoding.color.push(MeasureId)\n  }\n  if (encoding.color.length === 0) {\n    encoding.color = [MeasureId]\n  }\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForLine: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForLine: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1)\n  encoding.color = uniqueDimIds.slice(1)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标Id之外的所有维度\n  encoding.detail = [] // 折线图暂不支持细分\n  encoding.label = []\n  encoding.row = []\n  encoding.column = []\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipe, MeasureGroup, Measures, MeasureTree, VSeed } from 'src/types'\nimport { isMeasureTreeWithChildren, isMeasureTreeWithParentId, normalizeMeasureTree } from './utils'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\nimport { isValid } from '@visactor/vutils'\n\nexport const buildMeasures: AdvancedPipe = (advancedVSeed) => {\n  // 带Children的指标树, 不进行任何处理\n  if (isMeasureTreeWithChildren(advancedVSeed.measures)) {\n    advancedVSeed.measures = normalizeMeasureTree(advancedVSeed.measures as MeasureTree)\n    return advancedVSeed\n  }\n  // 带parentId的指标树, 转换为带children的指标树\n  if (isMeasureTreeWithParentId(advancedVSeed.measures)) {\n    advancedVSeed.measures = generateMeasuresByParentId(advancedVSeed.measures as Measures)\n    return advancedVSeed\n  }\n\n  /**\n   * 透视图表, 自动生成指标树\n   */\n  if (isPivotChart(advancedVSeed as VSeed)) {\n    advancedVSeed.measures = basicMeasuresToMeasureTree(advancedVSeed.measures as Measures)\n  }\n\n  return advancedVSeed\n}\n\nconst generateMeasuresByParentId = (measures: Measures): MeasureTree => {\n  const measureTree: MeasureGroup[] = []\n\n  measures.forEach((measure) => {\n    const parent = measureTree.find((item) => item.id === measure.parentId)\n    if (parent && 'children' in parent) {\n      parent.children = parent.children || []\n\n      if (parent.children.length > 0) {\n        parent.alias += `-${measure.alias ?? measure.id}`\n      }\n\n      parent.children.push(measure)\n    } else if (isValid(measure.parentId)) {\n      measureTree.push({\n        id: measure.parentId,\n        alias: measure.alias ?? measure.id,\n        children: [measure],\n      })\n    } else {\n      measureTree.push({\n        id: DEFAULT_PARENT_ID,\n        alias: measure.alias ?? measure.id, // 当分组只有单个指标的时候，分组alias 设置为该指标的别名或者id\n        children: [measure],\n      })\n    }\n  })\n\n  return measureTree\n}\n\nconst basicMeasuresToMeasureTree = (measures: Measures): MeasureTree => {\n  const id = measures.map((item) => item.id).join('-')\n  const alias = measures.map((item) => item.alias || item.id).join('-')\n  return [\n    {\n      id,\n      alias,\n      children: measures,\n    },\n  ]\n}\n","import type { Measure, MeasureGroup, MeasureTree } from 'src/types'\nimport { isMeasure, isMeasureGroup } from './typeGuard'\n\n/**\n * @description 删除 measureTree 中符合 callback 条件的节点\n * @param measureTree 待删除的 measureTree\n * @param callback 回调函数，用于判断是否删除当前节点\n * @returns 删除的度量\n */\nexport const deleteMeasureTreeByCallback = <T extends MeasureTree>(\n  measureTree?: T,\n  callback?: (measure: Measure, index: number, measures: (Measure | MeasureGroup)[]) => boolean,\n): Measure[] => {\n  if (!measureTree) {\n    return undefined as unknown as Measure[]\n  }\n  const stack: (Measure | MeasureGroup)[] = [...measureTree].reverse()\n  const parents = new Map<Measure | MeasureGroup, (Measure | MeasureGroup)[]>()\n\n  measureTree.forEach((node) => {\n    parents.set(node, measureTree)\n  })\n\n  const nodesToProcess: Measure[] = []\n  const visited = new Set<Measure | MeasureGroup>()\n\n  while (stack.length > 0) {\n    const node = stack[stack.length - 1]\n\n    if (isMeasureGroup(node) && node.children && !visited.has(node)) {\n      visited.add(node)\n      const children = node.children.slice().reverse()\n      for (const child of children) {\n        parents.set(child, node.children)\n        stack.push(child)\n      }\n    } else {\n      stack.pop()\n      nodesToProcess.push(node as Measure)\n    }\n  }\n  const deleted: Measure[] = []\n\n  for (const node of nodesToProcess) {\n    const parentList = parents.get(node)\n\n    if (parentList) {\n      const index = parentList.indexOf(node)\n      if (isMeasure(node)) {\n        if (callback?.(node, index, parentList)) {\n          parentList.splice(index, 1)\n          deleted.push(node)\n        }\n      }\n    }\n  }\n\n  return deleted\n}\n","import { clone } from 'remeda'\nimport { deleteMeasureTreeByCallback } from 'src/index'\nimport type { AdvancedPipe, Measure } from 'src/types'\n\nexport const pickMeasuresForReshape = (encodingKeys: string[]): AdvancedPipe => {\n  return (advancedVSeed) => {\n    const clonedMeasures = clone(advancedVSeed.measures)\n\n    const deleteBy = (measure: Measure) => encodingKeys.includes(measure.encoding as string)\n\n    deleteMeasureTreeByCallback(clonedMeasures, deleteBy)\n\n    return {\n      ...advancedVSeed,\n      reshapeMeasures: clonedMeasures,\n    }\n  }\n}\n","import type { Dimension, DimensionGroup, DimensionTree } from 'src/types'\nimport { isDimension, isDimensionGroup } from './typeGuard'\n\n/**\n * @description 删除 dimensionTree 中符合 callback 条件的节点\n * @param dimensionTree 待删除的 dimensionTree\n * @param callback 回调函数，用于判断是否删除当前节点\n * @returns 删除后的 dimensionTree\n */\nexport const deleteDimensionTreeByCallback = <T extends DimensionTree>(\n  dimensionTree?: T,\n  callback?: (dimension: Dimension, index: number, dimensions: (Dimension | DimensionGroup)[]) => boolean,\n) => {\n  if (!dimensionTree) {\n    return dimensionTree\n  }\n  const stack: (Dimension | DimensionGroup)[] = [...dimensionTree].reverse()\n  const parents = new Map<Dimension | DimensionGroup, (Dimension | DimensionGroup)[]>()\n\n  dimensionTree.forEach((node) => {\n    parents.set(node, dimensionTree)\n  })\n\n  const nodesToProcess: (Dimension | DimensionGroup)[] = []\n  const visited = new Set<Dimension | DimensionGroup>()\n\n  while (stack.length > 0) {\n    const node = stack[stack.length - 1]\n\n    if (isDimensionGroup(node) && node.children && !visited.has(node)) {\n      visited.add(node)\n      const children = node.children.slice().reverse()\n      for (const child of children) {\n        parents.set(child, node.children)\n        stack.push(child)\n      }\n    } else {\n      stack.pop()\n      nodesToProcess.push(node)\n    }\n  }\n\n  for (const node of nodesToProcess) {\n    const parentList = parents.get(node)\n\n    if (parentList) {\n      const index = parentList.indexOf(node)\n      if (isDimension(node)) {\n        if (callback?.(node, index, parentList)) {\n          parentList.splice(index, 1)\n        }\n      }\n    }\n  }\n\n  return dimensionTree\n}\n","import { clone } from 'remeda'\nimport { deleteDimensionTreeByCallback } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension } from 'src/types'\n\nexport const pickDimensionsForReshape: AdvancedPipe = (advancedVSeed) => {\n  const deleteBy = (dimension: Dimension) => dimension.encoding === 'tooltip' || dimension.encoding === 'label'\n  const reshapeDimensions = clone(advancedVSeed.dimensions)\n  deleteDimensionTreeByCallback(reshapeDimensions, deleteBy)\n\n  return {\n    ...advancedVSeed,\n    reshapeDimensions,\n  }\n}\n","import type { AdvancedPipe, AdvancedPipeline, AdvancedPipelineContext, AdvancedVSeed } from 'src/types'\nimport { execPipeline, isPivotChart } from 'src/pipeline/utils'\n\nexport const pivotAdapter = (pipeline: AdvancedPipeline, pivotPipeline: AdvancedPipeline): AdvancedPipe => {\n  return (advancedVSeed, context) => {\n    const { vseed } = context\n    const usePivotChart = isPivotChart(vseed)\n\n    if (usePivotChart) {\n      return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pivotPipeline, context, advancedVSeed)\n    }\n\n    return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pipeline, context, advancedVSeed)\n  }\n}\n","import type { Dataset, Datum, Dimension, Encoding, UnfoldInfo } from 'src/types'\nimport {\n  AngleEncoding,\n  XEncoding,\n  YEncoding,\n  ColorEncoding,\n  DetailEncoding,\n  ColorIdEncoding,\n  MeasureId,\n  MeasureName,\n} from './constant'\n\n/**\n * @description 展开并合并视觉通道的维度, 在foldMeasures后合并维度, 所以不需要进行笛卡尔积\n * @param dataset 原始数据集\n * @param dimensions 维度\n * @param encoding 编码\n * @param options\n * @returns\n */\nexport const unfoldDimensions = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  encoding: Encoding,\n  options: {\n    foldMeasureId: string\n    separator: string\n    colorItemAsId: boolean\n  },\n): {\n  dataset: Dataset\n  unfoldInfo: UnfoldInfo\n} => {\n  const { separator } = options\n\n  const unfoldInfo: UnfoldInfo = {\n    encodingAngle: AngleEncoding,\n    encodingX: XEncoding,\n    encodingY: YEncoding,\n    encodingDetail: DetailEncoding,\n    encodingColor: ColorEncoding,\n    encodingColorId: ColorIdEncoding,\n\n    colorItems: [],\n    colorIdMap: {},\n  }\n\n  // 每个通道对应的维度\n  const { color, x, y, detail, angle } = encoding\n  const angleDimensions = angle ? dimensions.filter((dim) => angle.includes(dim.id)) : []\n  const xDimensions = x ? dimensions.filter((dim) => x.includes(dim.id)) : []\n  const yDimensions = y ? dimensions.filter((dim) => y.includes(dim.id)) : []\n  const colorDimensions = color ? dimensions.filter((dim) => color.includes(dim.id)) : []\n  const detailDimensions = detail ? dimensions.filter((dim) => detail.includes(dim.id)) : []\n\n  // 离散图例项\n  const colorItems = new Set<string>()\n  const colorIdMap: Record<string, { id: string; alias: string }> = {}\n\n  // 遍历数据集, 按通道合并维度\n  for (let i = 0; i < dataset.length; i++) {\n    // 应用编码至Datum上\n    const datum = dataset[i]\n\n    /**\n     * !important 这是全仓库, 最最最重要的五行代码, 贯穿VSeed整个生命周期, 是化繁为简的绝对核心\n     * 1. 点睛之笔: 呼应foldMeasures, 此时此刻的datum一定是单点数据, 维度合并不可能造成任何冲突.\n     * 2. 数据即通道\n     * 3. 利用需要合并的维度, 直接进行join, 即可生成新的维度, 与指标彻底解耦;\n     * 4. 以下通道均在一次遍历中完成, 不存在性能问题\n     * 5. 以下通道均可放入多个维度\n     */\n    applyEncoding(AngleEncoding, angleDimensions, datum, separator)\n    applyEncoding(XEncoding, xDimensions, datum, separator)\n    applyEncoding(YEncoding, yDimensions, datum, separator)\n    applyEncoding(ColorEncoding, colorDimensions, datum, separator)\n    applyEncoding(DetailEncoding, detailDimensions, datum, separator)\n\n    // 处理离散的颜色图例\n    if (!colorDimensions.length || !datum[ColorEncoding]) {\n      // 无颜色通道, 则跳过\n      continue\n    }\n    const colorId = String(datum[ColorEncoding] ?? '')\n\n    datum[ColorIdEncoding] = colorId\n\n    colorIdMap[colorId] = {\n      id: colorId,\n      alias: getColorAliasItem(ColorEncoding, colorDimensions, datum, separator),\n    }\n    colorItems.add(colorId)\n  }\n\n  unfoldInfo.colorItems = Array.from(colorItems)\n  unfoldInfo.colorIdMap = colorIdMap\n\n  return {\n    dataset,\n    unfoldInfo,\n  }\n}\n\n/**\n * @description 应用编码至数据中, 此方法会原地修改数据\n * @param encoding 编码\n * @param dimensions 维度\n * @param datum 数据\n * @param separator 分隔符\n * @returns undefined\n */\nconst applyEncoding = (encoding: string, dimensions: Dimension[], datum: Datum, separator: string) => {\n  if (encoding && dimensions.length) {\n    datum[encoding] = dimensions.map((dim) => String(datum[dim.id])).join(separator)\n  }\n}\n\nconst getColorAliasItem = (encoding: string, dimensions: Dimension[], datum: Datum, separator: string) => {\n  if (encoding && dimensions.length) {\n    return dimensions\n      .map((dim) => {\n        if (dim.id === MeasureId) {\n          return String(datum[MeasureName])\n        }\n\n        return String(datum[dim.id])\n      })\n      .join(separator)\n  }\n  return ''\n}\n","import type { Dataset, Dimension, Encoding, FoldInfo, Measure, Measures, UnfoldInfo } from 'src/types'\nimport { foldMeasures } from './foldMeasures'\nimport { FoldMeasureId, FoldMeasureName, FoldMeasureValue, Separator } from './constant'\nimport { unfoldDimensions } from './unfoldDimensions'\n\nexport const dataReshapeByEncoding = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  measures: Measure[],\n  encoding: Encoding,\n  options?: {\n    foldMeasureId?: string\n    foldMeasureName?: string\n    foldMeasureValue?: string\n    colorItemAsId?: boolean\n    colorMeasureId?: string\n    omitIds?: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n  unfoldInfo: UnfoldInfo\n} => {\n  const {\n    foldMeasureId = FoldMeasureId,\n    foldMeasureName = FoldMeasureName,\n    foldMeasureValue = FoldMeasureValue,\n    colorItemAsId = false,\n    colorMeasureId,\n    omitIds,\n  } = options || {}\n\n  // 合并所有指标为1个指标\n  const { dataset: foldedDataset, foldInfo } = foldMeasures(dataset, measures as Measures, {\n    measureId: foldMeasureId,\n    measureName: foldMeasureName,\n    measureValue: foldMeasureValue,\n    colorMeasureId,\n    omitIds,\n  })\n\n  // 展开指定的维度为指标\n  const { dataset: finalDataset, unfoldInfo } = unfoldDimensions(foldedDataset, dimensions, encoding, {\n    foldMeasureId,\n    separator: Separator,\n    colorItemAsId,\n  })\n  return { dataset: finalDataset, foldInfo, unfoldInfo }\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedVSeed, PivotChartSpecPipe, VChartSpecPipe, VSeed, Pipe, SpecPipelineContext } from 'src/types'\n\nexport function colorAdapter(ordinalPipe: PivotChartSpecPipe, linearPipe: PivotChartSpecPipe): PivotChartSpecPipe\nexport function colorAdapter(ordinalPipe: VChartSpecPipe, linearPipe: VChartSpecPipe): VChartSpecPipe\nexport function colorAdapter<TSpec>(\n  ordinalPipe: Pipe<TSpec, SpecPipelineContext>,\n  linearPipe: Pipe<TSpec, SpecPipelineContext>,\n) {\n  return (spec: Partial<TSpec>, context: SpecPipelineContext) => {\n    const { advancedVSeed, vseed } = context\n    if (isLinearColor(advancedVSeed, vseed)) {\n      return linearPipe(spec, context)\n    }\n    return ordinalPipe(spec, context)\n  }\n}\n\nexport const isLinearColor = <T extends AdvancedVSeed, U extends VSeed>(advancedVSeed: T, vseed: U) => {\n  const { encoding } = advancedVSeed\n  const measures = vseed.measures || advancedVSeed.measures\n  const measureIdList = findAllMeasures(measures).map((measure) => measure.id)\n  const { color } = encoding\n  return color?.length === 1 && measureIdList.includes(color[0])\n}\n\nexport const getColorMeasureId = <T extends AdvancedVSeed, U extends VSeed>(\n  advancedVSeed: T,\n  vseed: U,\n): string | undefined => {\n  if (isLinearColor(advancedVSeed, vseed)) {\n    const { encoding } = advancedVSeed\n    const { color } = encoding\n    return color?.[0]\n  }\n  return undefined\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, ColumnParallel, Encoding } from 'src/types'\n\nexport const reshapeWithEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding } = advancedVSeed\n\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const {\n    dataset: newDatasets,\n    foldInfo,\n    unfoldInfo,\n  } = dataReshapeByEncoding(\n    dataset,\n    uniqueBy(advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? [], (item) => item.id),\n    uniqueBy(findAllMeasures(advancedVSeed.reshapeMeasures ?? advancedVSeed.measures), (item) => item.id),\n    encoding as Encoding,\n    {\n      colorItemAsId: false,\n      colorMeasureId,\n    },\n  )\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Encoding,\n  MeasureGroup,\n} from 'src/types'\n\nexport const pivotReshapeWithEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  const allMeasures = findAllMeasures(measures)\n  const measureGroups: MeasureGroup[] = []\n  if (measures) {\n    measures.forEach((measure: MeasureGroup) => {\n      if (measure.children && measure.children.length > 0) {\n        measureGroups.push(measure)\n      }\n    })\n  }\n\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measureGroup, index) => {\n    const measures = measureGroup.children\n    if (!measures) {\n      return\n    }\n    const groupId = measureGroup.id\n    const {\n      dataset: newSubDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item) => item.id),\n      uniqueBy(measures, (item) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: `${FoldMeasureValue}${groupId}`,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasures.map((item) => item.id),\n      },\n    )\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newSubDataset)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { sort, unique } from 'remeda'\nimport type { Dataset, Datum } from 'src/types'\nimport type { Sort } from 'src/types/properties/analysis/sort'\n\nexport const calcOrder = (sortConfig: Sort, id: string, dataset: Dataset): string[] => {\n  if (sortConfig.customOrder) {\n    return sortConfig.customOrder\n  }\n\n  const order = sortConfig.order || 'asc'\n  const orderBy = sortConfig.orderBy\n\n  const res = sort(dataset, (a, b) => {\n    const aValue = a[orderBy || id] as string | number\n    const bValue = b[orderBy || id] as string | number\n\n    if (order === 'asc') {\n      if (aValue < bValue) {\n        return -1\n      }\n      if (aValue > bValue) {\n        return 1\n      }\n      return 0\n    }\n    if (aValue > bValue) {\n      return -1\n    }\n    if (aValue < bValue) {\n      return 1\n    }\n    return 0\n  })\n\n  return unique(res.map((item: Datum) => item[id] as string))\n}\n","import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortXBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const xField = unfoldInfo.encodingX\n  if (!sortAxis || !xField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, xField, dataset.flat(2))\n\n  result.analysis.orderMapping[xField] = axisOrderResult\n\n  return result\n}\n","import type { AdvancedPipe, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortLegend: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sortLegend } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed\n  const colorId = datasetReshapeInfo?.[0]?.unfoldInfo?.encodingColorId\n  const colorIdMap = datasetReshapeInfo?.[0]?.unfoldInfo?.colorIdMap ?? {}\n  const colorItems = datasetReshapeInfo?.[0]?.unfoldInfo?.colorItems\n  if (!sortLegend || !colorId || !colorIdMap || !colorItems) {\n    return advancedVSeed\n  }\n\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  if (sortLegend.customOrder) {\n    const colorIds = Object.keys(colorIdMap)\n    // 先根据名称匹配, 若名称不存在, 则根据id匹配, 从而兼容名称和id的两种情况\n    const orderRes = sortLegend.customOrder.map((itemNameOrId) => {\n      return colorIds.find((id) => {\n        return colorIdMap[id]?.alias === itemNameOrId || colorIdMap[id]?.id === itemNameOrId || id === itemNameOrId\n      }) as string\n    })\n    result.analysis.orderMapping[colorId] = orderRes\n    return result\n  }\n\n  const orderRes = calcOrder(sortLegend, colorId, dataset?.flat(2) || [])\n  result.analysis.orderMapping[colorId] = orderRes\n\n  return result\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const lineConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairLine',\n    'dimensionLinkage',\n  ]) as Config['line']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const markStyle: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n\n  const pickedMarkStyle = pick(vseed, [\n    'barStyle',\n    'pointStyle',\n    'lineStyle',\n    'areaStyle',\n    'boxPlotStyle',\n    'outlierStyle',\n  ]) as AdvancedVSeed['markStyle']\n\n  const markStyle = replaceNullToUndefined(pickedMarkStyle)\n\n  return { ...advancedVSeed, markStyle }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const annotation: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const annotation = pick(vseed, [\n    'annotationPoint',\n    'annotationHorizontalLine',\n    'annotationVerticalLine',\n    'annotationArea',\n  ]) as AdvancedVSeed['annotation']\n\n  return { ...advancedVSeed, annotation }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  lineConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForLine,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const lineAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForLine, buildMeasures],\n    [encodingForLine, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  lineConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'line'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = foldInfo.measureValue\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const color: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const colorItems = unfoldInfo.colorItems\n  const colorIdMap = unfoldInfo.colorIdMap\n\n  const { color } = baseConfig\n  const { colorScheme, colorMapping } = color\n\n  result.color = {\n    type: 'ordinal',\n    domain: colorItems,\n    range: colorScheme,\n    specified: createSpecifiedForColorMapping(colorMapping, colorIdMap, colorItems),\n  } as ILineChartSpec['color']\n  return result\n}\n\nexport const createSpecifiedForColorMapping = (\n  colorMapping?: Record<string, string>,\n  colorIdMap?: Record<string, { id: string; alias: string }>,\n  colorItems?: string[],\n) => {\n  if (!colorMapping || !colorIdMap || !colorItems) {\n    return undefined\n  }\n\n  const matchedList: string[] = []\n\n  // 名称越长优先级越高: 按名称长度降, 优先匹配名称长的, 避免一个短的名称匹配到了超多个长的\n  const colors = Object.entries(colorMapping).sort((a, b) => b[0].length - a[0].length)\n  // 准确匹配\n  const accurateMap = colors.reduce(\n    (prev, cur) => {\n      const name = cur[0]\n      const colorValue = cur[1]\n\n      const accurateMatchedList = Object.entries(colorIdMap).filter(([colorKey, colorObj]) => {\n        return colorKey === name || colorObj.alias === name || colorObj.id === name\n      })\n      accurateMatchedList.forEach((item) => {\n        prev[item[0]] = colorValue\n        matchedList.push(name)\n      })\n\n      return prev\n    },\n    {} as Record<string, string>,\n  )\n\n  // 模糊匹配\n  const fuzzyMap = colors.reduce(\n    (prev, cur) => {\n      const name = cur[0]\n      const colorValue = cur[1]\n      if (matchedList.includes(name)) {\n        return prev\n      }\n\n      const fuzzyMatchedList = Object.entries(colorIdMap).filter(([colorKey, colorObj]) => {\n        return colorKey.includes(name) || colorObj.alias.includes(name) || colorObj.id.includes(name)\n      })\n      fuzzyMatchedList.forEach((item) => {\n        // 已经匹配有值, 则不重复匹配\n        if (prev[item[0]]) {\n          return\n        }\n        prev[item[0]] = colorValue\n      })\n\n      return prev\n    },\n    {} as Record<string, string>,\n  )\n\n  // 合并, 准确匹配的优先级高\n  return {\n    ...fuzzyMap,\n    ...accurateMap,\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const linearColor: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const { color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  result.color = {\n    type: 'linear',\n    range: linearColorScheme || colorScheme || [],\n    domain: [\n      {\n        dataId: id,\n        fields: [unfoldInfo.encodingColor],\n      },\n    ],\n  }\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { BackgroundColor, VChartSpecPipe } from 'src/types'\n\nexport const backgroundColor: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { backgroundColor: BackgroundColor }\n\n  const { backgroundColor } = baseConfig\n\n  return {\n    ...result,\n    background: backgroundColor,\n  }\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetXY: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const orderMapping = analysis?.orderMapping || {}\n  const angle = unfoldInfo.encodingAngle\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n  if (angle) {\n    fields[angle] = {\n      sortIndex: 0,\n    }\n  }\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ILineSeriesSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const progressive: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as ILineSeriesSpec\n  // const { advancedVSeed } = context\n  // const { dataset = [] } = advancedVSeed\n  // const size = dataset.length\n\n  // if (size < 5000) {\n  //   return result\n  // }\n\n  result.large = false\n  result.largeThreshold = Infinity\n  result.progressiveStep = 400\n  result.progressiveThreshold = Infinity\n\n  return result\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { Dimensions, MeasureTree } from 'src/types'\n\nexport const defaultTitleText = (measures: MeasureTree, dimensions: Dimensions, idList: string[] = []) => {\n  const allMeasures = findAllMeasures(measures)\n  return idList\n    .map((id) => {\n      const alias = [...allMeasures, ...dimensions].find((f) => f.id === id)?.alias || ''\n      return alias\n    })\n    .join(' & ')\n}\n","import type { ICartesianBandAxisSpec, ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis } from 'src/types'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { AXIS_LABEL_SPACE } from 'src/pipeline/utils'\nimport { MeasureId } from 'src/dataReshape'\nimport { isArray } from '@visactor/vutils'\n\nexport const xBand: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures, dimensions, encoding, datasetReshapeInfo, pivotAllDatasetReshapeInfo } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'column']?.xAxis ?? {}) as XBandAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n    labelAutoHide,\n    labelAutoHideGap,\n    labelAutoLimit,\n    labelAutoLimitLength = 80,\n    labelAutoRotate,\n    labelAutoRotateAngleRange,\n  } = config\n\n  const sampling = !(labelAutoHide || labelAutoRotate || labelAutoLimit)\n  const onlyMeasureId = (encoding.x || []).filter((v) => v !== MeasureId).length === 0\n\n  const bandAxis = {\n    visible,\n    type: 'band',\n    orient: 'bottom',\n    maxHeight: labelAutoLimitLength + 60,\n    sampling,\n    hover: true,\n    label: {\n      visible: label?.visible,\n      flush: true,\n      space: AXIS_LABEL_SPACE,\n      style: {\n        maxLineWidth: labelAutoLimitLength,\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n\n      // 防重叠相关\n      minGap: labelAutoHideGap,\n      autoHide: labelAutoHide,\n      autoHideMethod: 'greedy',\n      autoHideSeparation: labelAutoHideGap,\n      autoLimit: labelAutoLimit,\n      autoRotate: labelAutoRotate,\n      autoRotateAngle: labelAutoRotateAngleRange,\n      lastVisible: true,\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.x as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    paddingInner: [0.15, 0.1],\n    paddingOuter: [0.075, 0.1],\n  } as ICartesianBandAxisSpec\n  if (onlyMeasureId && bandAxis.label) {\n    const allDatasetReshapeInfo = pivotAllDatasetReshapeInfo || datasetReshapeInfo\n    const colorIdMap = allDatasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n      return { ...prev, ...cur.unfoldInfo.colorIdMap }\n    }, {})\n\n    bandAxis.label.formatMethod = (text: string | string[]) => {\n      return isArray(text) ? text : (colorIdMap[String(text)]?.alias ?? text)\n    }\n  }\n\n  result.axes = [...result.axes, bandAxis] as ISpec['axes']\n  return result\n}\n","import { isEmpty, isNullish } from 'remeda'\nimport { autoFormatter } from 'src/pipeline/utils'\nimport type { Formatter, NumFormat } from 'src/types'\n\nexport const createLinearFormat = (\n  value: string | number,\n  autoFormat: boolean | undefined,\n  numFormat: NumFormat,\n  formatter: Formatter,\n) => {\n  if (isNullish(autoFormat) && isEmpty(numFormat)) {\n    return autoFormatter(value)\n  }\n\n  if (autoFormat === true) {\n    return autoFormatter(value)\n  }\n\n  if (!isEmpty(numFormat)) {\n    return formatter(value)\n  }\n\n  return String(value)\n}\n\nexport const createLinearPercentFormat = (\n  value: string | number,\n  autoFormat: boolean | undefined,\n  numFormat: NumFormat,\n  formatter: Formatter,\n  percentFormatter: Formatter,\n) => {\n  if (isNullish(autoFormat) && isEmpty(numFormat)) {\n    return percentFormatter(value)\n  }\n\n  if (autoFormat === true) {\n    return percentFormatter(value)\n  }\n\n  if (!isEmpty(numFormat)) {\n    return formatter(value)\n  }\n\n  return String(value)\n}\n","import type { ISpec } from '@visactor/vchart'\nimport {\n  AXIS_LABEL_SPACE,\n  createNumFormatter,\n  isAreaPercent,\n  isBarPercent,\n  isColumnPercent,\n  isPivotChart,\n  LINEAR_AXIS_INNER_OFFSET_TOP,\n} from 'src/pipeline/utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\n\nexport const yLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures, dimensions, encoding } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'column']?.yAxis ?? {}) as YLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n    autoFormat,\n    numFormat = {},\n  } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const linearAxis = {\n    ...(isPivot\n      ? {\n          range: {\n            min,\n            max,\n          },\n        }\n      : {\n          min,\n          max,\n        }),\n    visible,\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient: 'left',\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod: (value: string) => {\n        if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n          return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n        }\n        return createLinearFormat(value, autoFormat, numFormat, formatter)\n      },\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    innerOffset: {\n      top: LINEAR_AXIS_INNER_OFFSET_TOP,\n      // bottom: LINEAR_AXIS_INNER_OFFSET_TOP,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { Legend, VChartSpecPipe } from 'src/types'\n\nexport const discreteLegend: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend }\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { legend } = baseConfig\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    pagerIconColor,\n    pagerIconDisableColor,\n    labelFontWeight,\n    maxSize = 1,\n    border,\n    shapeType = 'rectRound',\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n  const labelTextColor = labelColor || labelFontColor\n\n  result.legends = {\n    type: 'discrete',\n    visible: enable,\n    maxCol: Math.max(1, maxSize),\n    maxRow: Math.max(1, maxSize),\n    autoPage: true,\n    orient,\n    position: legendPosition,\n    item: {\n      focus: true,\n      maxWidth: '30%',\n      focusIconStyle: {\n        size: labelFontSize + 2,\n        fill: labelTextColor,\n        fontWeight: labelFontWeight,\n      },\n      shape: {\n        space: border ? 6 : 4,\n        style: (item) => {\n          return {\n            symbolType: shapeType,\n            size: border ? 8 : 10,\n            fillOpacity: 1,\n            opacity: 1,\n            stroke: false,\n            outerBorder: border\n              ? {\n                  stroke: item.shape.fill,\n                  distance: 3,\n                  lineWidth: 1,\n                }\n              : null,\n          }\n        },\n        state: {\n          unSelected: {\n            opacity: 0.2,\n            fillOpacity: 1, // 覆盖 vchart 里的默认值\n          },\n        },\n      },\n      label: {\n        formatMethod: (value) => {\n          return unfoldInfo.colorIdMap[String(value)]?.alias ?? value\n        },\n        style: {\n          fontSize: labelFontSize,\n          fill: labelColor || labelFontColor,\n          fontWeight: labelFontWeight,\n        },\n        state: {\n          unSelected: {\n            fill: labelColor || labelFontColor, // 覆盖vchart里面的默认值\n            fillOpacity: 0.8, // 覆盖 vchart 里的默认值\n          },\n        },\n      },\n      background: {\n        state: {\n          selectedHover: {\n            fill: labelColor || labelFontColor,\n            fillOpacity: 0.05,\n          },\n          unSelectedHover: {\n            fill: null,\n          },\n        },\n      },\n    },\n    pager: {\n      textStyle: {\n        fill: labelTextColor,\n      },\n      handler: {\n        style: {\n          fill: pagerIconColor,\n        },\n        state: {\n          disable: {\n            fill: pagerIconDisableColor,\n          },\n        },\n      },\n    },\n    padding: 0,\n  }\n  return result\n}\n","import { createFormatterByMeasure, findTreeNodesBy } from 'src/pipeline/utils'\nimport type { Legend, Measure, VChartSpecPipe } from 'src/types'\n\nexport const colorLegend: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType, measures = [] } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend }\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { legend } = baseConfig\n  const { enable, position = 'bottom', labelFontColor, labelColor, labelFontSize = 12, labelFontWeight } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  result.legends = {\n    type: 'color',\n    visible: enable,\n    orient,\n    position: legendPosition,\n    padding: 0,\n    field: unfoldInfo.encodingColor,\n    maxWidth: '30%',\n    handlerText: {\n      visible: true,\n      style: {\n        fill: labelColor || labelFontColor,\n        fontSize: labelFontSize,\n        fontWeight: labelFontWeight,\n      },\n    },\n  }\n  const colorMeasure = findTreeNodesBy<Measure>(measures, (m) => m.encoding === 'color')?.[0]\n  if (colorMeasure) {\n    const formatter = createFormatterByMeasure(colorMeasure)\n    result.legends.handlerText!.formatter = formatter\n  }\n  return result\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorPointStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as ILineChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.point?.style) {\n        result.point.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, PointStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const pointStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle } = advancedVSeed\n  const { pointStyle } = markStyle\n  const result = {\n    ...spec,\n    point: {\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(pointStyle) || isEmpty(pointStyle)) {\n    return result\n  }\n\n  const pointStyles = (Array.isArray(pointStyle) ? pointStyle : [pointStyle]) as PointStyle[]\n\n  const customMap = pointStyles.reduce<object>((result, style, index) => {\n    const {\n      pointBorderColor,\n      pointBorderStyle,\n      pointBorderWidth = 1,\n      pointColor,\n      pointColorOpacity,\n      pointSize,\n      pointVisible = true,\n    } = style\n\n    const lineDash = pointBorderStyle === 'dashed' ? [5, 2] : pointBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: pointVisible,\n          size: pointSize,\n          fill: pointColor,\n          fillOpacity: pointColorOpacity,\n          innerBorder: {\n            stroke: pointBorderColor,\n            lineWidth: pointBorderWidth,\n            distance: (pointBorderWidth || 0) / 2,\n            lineDash: lineDash,\n          },\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    point: {\n      ...result.point,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport type { IScatterChartSpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe } from 'src/types'\n\nexport const pointStateDimensionHover: VChartSpecPipe = (spec) => {\n  const point = (spec as IScatterChartSpec).point || {}\n  const result = {\n    ...spec,\n    point: {\n      ...point,\n      state: {\n        ...(point.state || {}),\n        dimension_hover: {\n          scaleX: 1.4,\n          scaleY: 1.4,\n          outerBorder: {\n            lineWidth: 4,\n            strokeOpacity: 0.25,\n            distance: 2,\n          },\n        },\n      },\n    },\n  } as IScatterChartSpec\n  return result\n}\n\nexport const pointStateHover: VChartSpecPipe = (spec, context) => {\n  const point = (spec as IScatterChartSpec).point || {}\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const result = {\n    ...spec,\n    point: {\n      ...point,\n      state: {\n        ...(point.state || {}),\n        hover: {\n          scaleX: 1.4,\n          scaleY: 1.4,\n          stroke: (datum: Datum, context: unknown) => {\n            const field = unfoldInfo.encodingColorId\n            const color = (context as any).seriesColor(datum[field] as string)\n            return color\n          },\n          fillOpacity: 0.6,\n          lineWidth: 1,\n        },\n      },\n    },\n  } as IScatterChartSpec\n  return result\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorLineStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as ILineChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.line?.style) {\n        result.line.style.stroke = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import { isRadar } from 'src/pipeline/utils'\nimport type { VSeed } from 'src/types'\n\nexport const getCurveType = (vseed: VSeed, lineSmooth: boolean = false): string => {\n  if (!lineSmooth) {\n    return 'linear'\n  }\n\n  /**\n   * Tip: 长期来看, 由VChart封装好雷达图与面积图的曲线类型差异, 是一个更好的选择.\n   */\n  return isRadar(vseed) ? 'catmullRomClosed' : 'monotone'\n}\n\nexport const getCurveTension = (vseed: VSeed, lineSmooth: boolean = false): number => {\n  if (!lineSmooth) {\n    return 0\n  }\n\n  /**\n   * Tip: 长期来看, 由VChart封装好雷达图与面积图的曲线类型差异, 是一个更好的选择.\n   */\n  return isRadar(vseed) ? 0.4 : 0\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, LineStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { getCurveTension, getCurveType } from './curve'\n\nexport const lineStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle } = advancedVSeed\n  const { lineStyle } = markStyle\n  const result = {\n    ...spec,\n    line: {\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(lineStyle) || isEmpty(lineStyle)) {\n    return result\n  }\n\n  const lineStyles = (Array.isArray(lineStyle) ? lineStyle : [lineStyle]) as LineStyle[]\n\n  const customMap = lineStyles.reduce<object>((result, style, index) => {\n    const { lineColor, lineColorOpacity, lineSmooth, lineStyle, lineWidth = 2, lineVisible = true } = style\n\n    const dashSegment = lineWidth * 2\n    const dashGap = lineWidth\n\n    const lineDash =\n      lineStyle === 'dashed' ? [dashSegment, dashSegment] : lineStyle === 'dotted' ? [dashGap / 2, dashGap * 2] : [0, 0]\n\n    const curveType = getCurveType(context.vseed, lineSmooth)\n    const curveTension = getCurveTension(context.vseed, lineSmooth)\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (\n          _: Datum,\n          node: {\n            renderNode: {\n              context: {\n                data: Datum[]\n              }\n            }\n          },\n        ) => {\n          const lineData = node.renderNode.context.data\n          for (const d of lineData) {\n            if (selector(d, style.selector)) {\n              return true\n            }\n          }\n          return false\n        },\n        style: {\n          visible: lineVisible,\n          curveType: curveType,\n          curveTension: curveTension,\n          strokeOpacity: lineColorOpacity,\n          stroke: lineColor,\n          lineWidth: lineWidth,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    line: {\n      ...result.line,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport { createFormatter, createFormatterByMeasure, DATUM_HIDE_KEY, findMeasureById } from '../../../../utils'\nimport type {\n  Datum,\n  Dimension,\n  Dimensions,\n  Encoding,\n  FoldInfo,\n  Formatter,\n  Label,\n  Measure,\n  Measures,\n  NumFormat,\n  VChartSpecPipe,\n} from 'src/types'\nimport { isNumber, merge, uniqueBy } from 'remeda'\nimport { selector } from 'src/dataSelector'\nimport { MeasureId } from 'src/dataReshape/constant'\n\nexport const label: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as ILineChartSpec['label']\n\n  return result\n}\n\nexport const generateMeasureValue = (\n  value: number | string,\n  measure: Measure,\n  labelAutoFormat?: boolean,\n  numFormat: NumFormat = {},\n) => {\n  const format = merge(numFormat, measure.numFormat || measure.format)\n  const mergedMeasure = { ...measure, numFormat: format, autoFormat: labelAutoFormat || measure.autoFormat }\n\n  const formatter = createFormatterByMeasure(mergedMeasure)\n  return formatter(value)\n}\n\nexport const generateMeasurePercent = (value: number | string, sum: number, formatter: Formatter) => {\n  if (value === undefined || value === null) return String(value)\n  const num = Number(value)\n  if (Number.isNaN(num)) return String(value)\n\n  const percentValue = num / sum\n  return formatter(percentValue)\n}\n\nexport const buildLabel = (\n  label: Label,\n  vseedMeasures: Measures = [],\n  vseedDimensions: Dimensions = [],\n  advancedVSeedDimensions: Dimensions,\n  advancedVSeedMeasures: Measures,\n  encoding: Encoding,\n  foldInfoList: FoldInfo[],\n) => {\n  const {\n    enable,\n    wrap,\n    showValue,\n    showValuePercent,\n    showDimension,\n    labelOverlap,\n    labelColorSmartInvert,\n    labelStroke,\n    labelColor,\n    labelFontSize,\n    labelFontWeight,\n    labelBackgroundColor,\n    labelPosition,\n    autoFormat,\n    numFormat = {},\n  } = label\n\n  const hasDimLabelEncoding = vseedDimensions.some((item) => encoding.label?.includes(item.id))\n\n  const labelDims = uniqueBy(\n    hasDimLabelEncoding\n      ? vseedDimensions.filter((item) => encoding.label?.includes(item.id))\n      : showDimension\n        ? advancedVSeedDimensions.filter((d) => d.id !== MeasureId)\n        : [],\n    (item: Dimension) => item.id,\n  )\n\n  const labelMeas = uniqueBy(\n    vseedMeasures.filter((item) => encoding.label?.includes(item.id)),\n    (item: Measure) => item.id,\n  )\n\n  const percentFormat: NumFormat = merge(numFormat, {\n    type: 'percent',\n  } as NumFormat)\n\n  const percentFormatter = createFormatter(percentFormat)\n\n  const result = {\n    visible: enable,\n    dataFilter: (data: Datum[]) => {\n      return data.filter((entry) => {\n        return entry.data?.[DATUM_HIDE_KEY] !== true && selector(entry.data as Datum, label.selector, 'Or')\n      })\n    },\n    formatMethod: (_: unknown, datum: Datum) => {\n      const result = []\n\n      const dimLabels = labelDims.map((item: Dimension) => {\n        const id = item.id\n        return datum[id] as number | string\n      })\n\n      const meaLabels = labelMeas.map((item: Measure) =>\n        generateMeasureValue(datum[item.id] as number | string, item, autoFormat, numFormat),\n      )\n\n      result.push(...dimLabels)\n\n      foldInfoList.forEach((foldInfo) => {\n        const { measureId, measureValue, statistics } = foldInfo\n        const measure = findMeasureById(advancedVSeedMeasures, datum[measureId] as string)\n        if (measure) {\n          const measureValueLabel = generateMeasureValue(\n            datum[measureValue] as number | string,\n            measure,\n            autoFormat,\n            numFormat,\n          )\n          // 饼图/环图需要使用实际占比数据\n          const measurePercentLabel = isNumber(datum['__VCHART_ARC_RATIO'])\n            ? generateMeasurePercent(datum['__VCHART_ARC_RATIO'], 1, percentFormatter)\n            : generateMeasurePercent(datum[measureValue] as number | string, statistics.sum, percentFormatter)\n          if (showValue) {\n            result.push(measureValueLabel)\n          }\n          if (showValuePercent) {\n            result.push(measurePercentLabel)\n          }\n        }\n      })\n\n      result.push(...meaLabels)\n\n      if (wrap) {\n        return result\n      }\n      return result.join(' ')\n    },\n    position: labelPosition,\n    style: {\n      stroke: labelStroke,\n      fill: labelColor,\n      fontSize: labelFontSize,\n      fontWeight: labelFontWeight,\n      background: labelBackgroundColor,\n    },\n    smartInvert: labelColorSmartInvert,\n  }\n\n  if (labelOverlap) {\n    ;(result as any).overlap = {\n      hideOnHit: true,\n      clampForce: true,\n    }\n  }\n\n  return result\n}\n","import type { ITooltipSpec } from '@visactor/vchart'\nimport type { TooltipConfig } from 'src/types/properties'\n\nexport const getTooltipStyle = (tooltipConfig: TooltipConfig) => {\n  return {\n    panel: {\n      padding: tooltipConfig.padding,\n      border: {\n        radius: tooltipConfig.borderRadius,\n        width: tooltipConfig.borderWidth,\n        color: tooltipConfig.borderColor,\n      },\n      backgroundColor: tooltipConfig.backgroundColor,\n    },\n    keyLabel: {\n      lineHeight: tooltipConfig.lineHeight,\n      fontSize: tooltipConfig.fontSize,\n      fontColor: tooltipConfig.keyColor,\n    },\n    valueLabel: {\n      lineHeight: tooltipConfig.lineHeight,\n      fontSize: tooltipConfig.fontSize,\n      fontColor: tooltipConfig.valueColor,\n      fontWeight: 'medium',\n    },\n    titleLabel: {\n      fontSize: tooltipConfig.fontSize,\n      lineHeight: tooltipConfig.lineHeight,\n      fontColor: tooltipConfig.titleColor,\n      fontWeight: 'bold',\n    },\n  } as ITooltipSpec['style']\n}\n","import { pipe, uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Measures, VChartSpecPipe, TooltipConfig, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\n\nexport const tooltip: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { measures, datasetReshapeInfo, chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: TooltipConfig }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable = true } = tooltip\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: !!enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        foldInfo,\n        unfoldInfo,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, measures, foldInfo, unfoldInfo),\n    },\n  }\n  return result\n}\n\nexport const createDimensionContent = (\n  dimensions: Dimensions,\n  measures: Measures,\n  foldInfo: FoldInfo,\n  unfoldInfo: UnfoldInfo,\n) => {\n  const { measureId, measureValue, foldMap } = foldInfo\n  const { encodingColor } = unfoldInfo\n\n  return [\n    {\n      visible: true,\n      shapeType: 'rectRound',\n      hasShape: true,\n      key: dimensions.some((d) => d.encoding === 'color')\n        ? (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[encodingColor] as string)) || ''\n            return unfoldInfo.colorIdMap[key].alias ?? key\n          }\n        : (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[measureId] as string)) || ''\n            return foldMap[key] ?? key\n          },\n      value: (v: unknown) => {\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    },\n  ]\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures,\n  foldInfo: FoldInfo,\n  unfoldInfo: UnfoldInfo,\n) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item) => item.id),\n    uniqueBy((item) => item.alias),\n  )\n  const meas = pipe(\n    measures.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item) => item.id),\n    uniqueBy((item) => item.alias),\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const defaultContent = {\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const { measureName } = foldInfo\n      const { encodingColor: colorName } = unfoldInfo\n\n      const datum = v as Datum\n      return (datum && (datum[measureName || colorName] as string)) || ''\n    },\n    value: (v: unknown) => {\n      const { measureId, measureValue } = foldInfo\n\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const value = datum[measureValue] as string | number\n      const id = datum[measureId] as string\n      const measure = findMeasureById(measures, id)\n      if (!measure) {\n        return String(value)\n      }\n\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }\n\n  return [...dimContent, defaultContent, ...meaContent]\n}\n","import type { Datum } from 'src/types'\n\nexport const isSubset = (sub: Datum, obj: Datum, excludeMeasuresIds?: string[]) => {\n  return Object.entries(sub).every(([key, value]) => {\n    if (excludeMeasuresIds && excludeMeasuresIds.includes(key)) {\n      return false\n    }\n\n    if (typeof value === 'string') {\n      return obj[key] === value\n    }\n    if (typeof value === 'number') {\n      return obj[key] === value\n    }\n    return true\n  })\n}\n\nexport const ANNOTATION_AREA_TEXT_STYLE_BY_POSITION = {\n  top: {\n    textAlign: 'center',\n    textBaseline: 'top',\n  },\n  topRight: {\n    textAlign: 'right',\n    textBaseline: 'top',\n  },\n  topLeft: {\n    textAlign: 'left',\n    textBaseline: 'top',\n  },\n  bottom: {\n    textAlign: 'center',\n    textBaseline: 'bottom',\n  },\n  bottomLeft: {\n    textAlign: 'left',\n    textBaseline: 'bottom',\n  },\n  bottomRight: {\n    textAlign: 'right',\n    textBaseline: 'bottom',\n  },\n  left: {\n    textAlign: 'left',\n    textBaseline: 'middle',\n  },\n  right: {\n    textAlign: 'right',\n    textBaseline: 'middle',\n  },\n}\n","import type { ISpec, IMarkPointSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, Selector, Selectors, SpecPipelineContext, VChartSpecPipe, VSeed } from 'src/types'\nimport { isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const generateAnnotationPointPipe = (options: {\n  findSelectedDatas?: (\n    dataset: Datum[],\n    selector: Selector | Selectors | undefined | null,\n    spec: ISpec,\n    context: SpecPipelineContext,\n  ) => Datum[]\n  generateMarkPoint?: (datum: Datum, spec: ISpec, context: SpecPipelineContext) => IMarkPointSpec[] | undefined\n}) => {\n  const findSelectedDatas = options.findSelectedDatas ?? ((dataset, s) => dataset.filter((datum) => selector(datum, s)))\n  const generateMarkPoint =\n    options.generateMarkPoint ??\n    ((datum: Datum) => {\n      return [\n        {\n          coordinate: (data: Datum[]) => {\n            return data.find((item) => isSubset(datum, item))\n          },\n        },\n      ]\n    })\n\n  return ((spec: ISpec, context: SpecPipelineContext) => {\n    const { advancedVSeed, vseed } = context\n    const { annotation, config } = advancedVSeed\n\n    if (!annotation || !annotation.annotationPoint) {\n      return spec\n    }\n\n    const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationPoint\n    const { annotationPoint } = annotation\n    const annotationPointList = Array.isArray(annotationPoint) ? annotationPoint : [annotationPoint]\n    const isHorizontalBar = isBarLikeChart(advancedVSeed as VSeed)\n    const defaultStyle = isHorizontalBar\n      ? {\n          textAlign: 'right',\n          textBaseline: 'middle',\n        }\n      : {\n          textAlign: 'center',\n          textBaseline: 'top',\n        }\n\n    const markPoint = annotationPointList.flatMap((annotationPoint) => {\n      const {\n        selector: selectorPoint,\n        text = '',\n        textColor = theme?.textColor ?? '#ffffff',\n        textFontSize = theme?.textFontSize ?? 12,\n        textFontWeight = theme?.textFontWeight ?? 400,\n        textAlign = defaultStyle.textAlign,\n        textBaseline = defaultStyle.textBaseline,\n        textBackgroundBorderColor = theme?.textBackgroundBorderColor,\n        textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n        textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n        textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n        textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n        textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n        offsetX = theme?.offsetX ?? 0,\n        offsetY = theme?.offsetY ?? 0,\n      } = annotationPoint\n\n      const dataset = advancedVSeed.dataset.flat()\n      const selectedData = selectorPoint ? findSelectedDatas(dataset, selectorPoint, spec, context) : []\n      const dx = -10 - (isHorizontalBar ? (textFontSize as number) : 0) // 由于vchart tag实现问题，需要设置这个强制偏移量\n      const dy = isHorizontalBar ? 0 : (textFontSize as number)\n      const markPointStyle = {\n        zIndex: ANNOTATION_Z_INDEX,\n        regionRelative: true,\n        itemLine: {\n          visible: false,\n        },\n        itemContent: {\n          offsetY,\n          offsetX,\n          confine: true,\n          text: {\n            text: text,\n            style: {\n              opacity: 0.95,\n              visible: true,\n              textAlign: textAlign,\n              textBaseline: textBaseline,\n              fill: textColor,\n              stroke: textBackgroundColor,\n              lineWidth: 1,\n              fontSize: textFontSize,\n              fontWeight: textFontWeight,\n              dx,\n              dy,\n            },\n            labelBackground: {\n              visible: textBackgroundVisible,\n              padding: textBackgroundPadding,\n              style: {\n                opacity: 0.95,\n                cornerRadius: textBackgroundBorderRadius ?? 4,\n                fill: textBackgroundColor,\n                stroke: textBackgroundBorderColor,\n                lineWidth: textBackgroundBorderWidth,\n                dx,\n                dy,\n              },\n            },\n          },\n        },\n      } as Partial<IMarkPointSpec>\n\n      return selectedData.reduce((res: IMarkPointSpec[], datum) => {\n        const marks = generateMarkPoint(datum, spec, context)\n\n        if (marks && marks.length) {\n          marks.forEach((mark) => {\n            res.push({\n              ...markPointStyle,\n              ...mark,\n            } as IMarkPointSpec)\n          })\n        }\n\n        return res\n      }, [])\n    }) as unknown as IMarkPointSpec[]\n\n    return {\n      ...spec,\n      markPoint,\n    } as ISpec\n  }) as VChartSpecPipe\n}\n","import type { VChartSpecPipe } from 'src/types'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPoint: VChartSpecPipe = generateAnnotationPointPipe({})\n","import type { ILineChartSpec, IMarkLineSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isArray, isNumber, isString } from 'remeda'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\n\nexport const annotationVerticalLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, datasetReshapeInfo, config } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  if (!annotation || !annotation.annotationVerticalLine) {\n    return spec\n  }\n\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationVerticalLine\n  const { annotationVerticalLine } = annotation\n  const annotationVerticalLineList = Array.isArray(annotationVerticalLine)\n    ? annotationVerticalLine\n    : [annotationVerticalLine]\n\n  const positionMap = {\n    outsideStart: 'start',\n    outsideEnd: 'end',\n    outsideMiddle: 'middle',\n    insideStart: 'insideStartTop',\n    insideMiddle: 'insideMiddleTop',\n    insideEnd: 'insideEndTop',\n  }\n  const markLine = annotationVerticalLineList.flatMap((annotationVerticalLine) => {\n    const {\n      selector: selectorPoint,\n      xValue,\n      text = '',\n      textPosition = 'insideEnd',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n      textAlign = 'center',\n      textBaseline = 'top',\n\n      lineColor = theme?.lineColor ?? '#212121',\n      lineStyle = theme?.lineStyle ?? 'dashed',\n      lineVisible = theme?.lineStyle ?? true,\n      lineWidth = theme?.lineWidth ?? 1,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#212121',\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n    } = annotationVerticalLine\n\n    const dataset = advancedVSeed.dataset.flat()\n\n    const generateOneMarkLine = (x: number | string) => ({\n      x,\n      autoRange: true,\n      zIndex: ANNOTATION_Z_INDEX,\n      line: {\n        style: {\n          visible: lineVisible,\n          stroke: lineColor,\n          lineStyle: lineStyle,\n          lineWidth: lineWidth,\n          lineDash: lineStyle === 'dashed' ? [5, 2] : lineStyle === 'dotted' ? [2, 5] : [0],\n        },\n      },\n      label: {\n        confine: true,\n        text: text,\n        position: (positionMap as any)[textPosition || 'insideEnd'],\n        style: {\n          opacity: 0.95,\n          dx: 5,\n          visible: true,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          fill: textColor,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            dx: 5,\n            cornerRadius: textBackgroundBorderRadius,\n            fill: textBackgroundColor,\n            fillOpacity: 1,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n          },\n        },\n      },\n      startSymbol: {\n        visible: theme?.startSymbolVisible ?? true,\n        symbolType: theme?.startSymbolType ?? 'triangleDown',\n        size: 5 + (lineWidth || 1),\n        style: {\n          dy: -3,\n          fill: lineColor,\n        },\n      },\n      endSymbol: {\n        visible: theme?.endSymbolVisible ?? false,\n        symbolType: theme?.endSymbolType ?? 'arrow',\n        size: 10 + (lineWidth || 1),\n        style: {\n          dy: 4,\n          fill: lineColor,\n        },\n      },\n    })\n\n    if ((!selectorPoint && isArray(xValue)) || isString(xValue) || isNumber(xValue)) {\n      const xValueArr = Array.isArray(xValue) ? xValue : [xValue]\n      return xValueArr.map(generateOneMarkLine)\n    }\n\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n\n    return selectedData.map((datum) => {\n      if (datum[unfoldInfo.encodingX]) {\n        return generateOneMarkLine(datum[unfoldInfo.encodingX] as string)\n      }\n      if (datum[foldInfo.measureValue]) {\n        return generateOneMarkLine(datum[foldInfo.measureValue] as string)\n      }\n      return {}\n    })\n  }) as IMarkLineSpec[]\n\n  const specMarkLine = ((spec as ILineChartSpec).markLine as IMarkLineSpec[]) || []\n  const newMarkLine = [...specMarkLine, ...(markLine || [])]\n\n  return {\n    ...spec,\n    markLine: newMarkLine,\n  }\n}\n","import type { ILineChartSpec, IMarkLineSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isArray, isNumber, isString } from 'remeda'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\n\nexport const annotationHorizontalLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, datasetReshapeInfo, config } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  if (!annotation || !annotation.annotationHorizontalLine) {\n    return spec\n  }\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationHorizontalLine\n  const { annotationHorizontalLine } = annotation\n  const annotationHorizontalLineList = Array.isArray(annotationHorizontalLine)\n    ? annotationHorizontalLine\n    : [annotationHorizontalLine]\n\n  const positionMap = {\n    outsideStart: 'start',\n    outsideEnd: 'end',\n    outsideMiddle: 'middle',\n    insideStart: 'insideStartTop',\n    insideMiddle: 'insideMiddleTop',\n    insideEnd: 'insideEndTop',\n  }\n\n  const markLine = annotationHorizontalLineList.flatMap((annotationHorizontalLine) => {\n    const {\n      selector: selectorPoint,\n      yValue,\n      text = '',\n      textPosition = 'insideEnd',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n      textAlign = 'right',\n      textBaseline = 'bottom',\n\n      lineColor = theme?.lineColor ?? '#212121',\n      lineStyle = theme?.lineStyle ?? 'dashed',\n      lineVisible = theme?.lineStyle ?? true,\n      lineWidth = theme?.lineWidth ?? 1,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#212121',\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n    } = annotationHorizontalLine\n\n    const dataset = advancedVSeed.dataset.flat()\n\n    const generateOneMarkLine = (y: string | number) => {\n      return {\n        y,\n        autoRange: true,\n        zIndex: ANNOTATION_Z_INDEX,\n        line: {\n          style: {\n            visible: lineVisible,\n            stroke: lineColor,\n            lineWidth: lineWidth,\n            lineDash: lineStyle === 'dashed' ? [5, 2] : lineStyle === 'dotted' ? [2, 5] : [0],\n          },\n        },\n        label: {\n          confine: true,\n          text: text,\n          position: (positionMap as any)[textPosition || 'insideEnd'],\n          style: {\n            opacity: 0.95,\n            visible: true,\n            dy: 4,\n            stroke: textBackgroundColor,\n            lineWidth: 1,\n            textAlign: textAlign,\n            textBaseline: textBaseline,\n            fill: textColor,\n            fontSize: textFontSize,\n            fontWeight: textFontWeight,\n          },\n          labelBackground: {\n            visible: textBackgroundVisible,\n            padding: textBackgroundPadding,\n            style: {\n              opacity: 0.95,\n              dy: 4,\n              cornerRadius: textBackgroundBorderRadius,\n              fill: textBackgroundColor,\n              stroke: textBackgroundBorderColor,\n              lineWidth: textBackgroundBorderWidth,\n              fillOpacity: 1,\n            },\n          },\n        },\n        startSymbol: {\n          visible: theme?.startSymbolVisible ?? true,\n          symbolType: theme?.startSymbolType ?? 'triangleDown',\n          size: 5 + (lineWidth || 1),\n          style: {\n            dx: 3,\n            fill: lineColor,\n          },\n        },\n        endSymbol: {\n          visible: theme?.endSymbolVisible ?? false,\n          symbolType: theme?.endSymbolType ?? 'arrow',\n          size: 10 + (lineWidth || 1),\n          style: {\n            dx: -4,\n            fill: lineColor,\n          },\n        },\n      }\n    }\n    if ((!selectorPoint && isArray(yValue)) || isString(yValue) || isNumber(yValue)) {\n      const yValueArr = Array.isArray(yValue) ? yValue : [yValue]\n      return yValueArr.map(generateOneMarkLine)\n    }\n\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n\n    return selectedData.map((datum) => {\n      if (datum[unfoldInfo.encodingY]) {\n        return generateOneMarkLine(datum[unfoldInfo.encodingY] as string)\n      }\n      if (datum[foldInfo.measureValue]) {\n        return generateOneMarkLine(datum[foldInfo.measureValue] as string)\n      }\n      return {}\n    })\n  }) as IMarkLineSpec[]\n  const specMarkLine = ((spec as ILineChartSpec).markLine as IMarkLineSpec[]) || []\n  const newMarkLine = [...specMarkLine, ...(markLine || [])]\n  return {\n    ...spec,\n    markLine: newMarkLine,\n  }\n}\n","/**\n * @description 适用于线图、面积图等的区块标注，计算标注区块的时候，只考虑点的大小\n */\nimport type { ICartesianSeries, ILineChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, VChartSpecPipe, VSeed } from 'src/types'\nimport { ANNOTATION_AREA_TEXT_STYLE_BY_POSITION, isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const annotationArea: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationArea) {\n    return spec\n  }\n\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationArea\n  const { annotationArea } = annotation\n  const annotationAreaList = Array.isArray(annotationArea) ? annotationArea : [annotationArea]\n\n  const positionMap = {\n    top: 'insideTop',\n    topRight: 'insideTopRight',\n    topLeft: 'insideTopLeft',\n    bottom: 'insideBottom',\n    bottomLeft: 'insideBottomLeft',\n    bottomRight: 'insideBottomRight',\n    left: 'insideLeft',\n    right: 'insideRight',\n  }\n  const defaultTextPosition = isBarLikeChart(advancedVSeed as VSeed) ? 'right' : 'top'\n\n  const markArea = annotationAreaList.flatMap((annotationArea) => {\n    const {\n      selector: selectorPoint,\n      text = '',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#191d24',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#191d24',\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 4,\n\n      areaColor = theme?.areaColor ?? '#888888',\n      areaColorOpacity = theme?.areaColorOpacity ?? 0.15,\n      areaBorderColor = theme?.areaBorderColor ?? '#888888',\n      areaBorderRadius = theme?.areaBorderRadius ?? 4,\n      areaBorderWidth = theme?.areaBorderWidth ?? 1,\n      areaLineDash = theme?.areaLineDash,\n\n      outerPadding = theme?.outerPadding ?? 4,\n    } = annotationArea\n\n    const dataset = advancedVSeed.dataset.flat()\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n    const textPosition: string = annotationArea.textPosition ?? defaultTextPosition\n    const textAlign =\n      annotationArea.textAlign ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textAlign\n    const textBaseline =\n      annotationArea.textBaseline ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textBaseline\n\n    return {\n      zIndex: ANNOTATION_Z_INDEX,\n      regionRelative: true,\n      positions: (data: Datum[], context: ICartesianSeries) => {\n        const positionData = data.filter((item) => selectedData.some((datum) => isSubset(datum, item)))\n        const xyList = positionData.map((datum) => context.dataToPosition(datum) as { x: number; y: number })\n\n        const yAxisHelper = context.getYAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n        const xAxisHelper = context.getXAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n\n        if (typeof xAxisHelper?.getBandwidth === 'function') {\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const minX = Math.min(...xyList.map((item) => item.x)) - (outerPadding || 4)\n          const maxX = Math.max(...xyList.map((item) => item.x)) + (outerPadding || 4)\n          const minY = 0\n          const maxY = regionRect.height\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        if (typeof yAxisHelper?.getBandwidth === 'function') {\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const minY = Math.min(...xyList.map((item) => item.y)) - (outerPadding || 4)\n          const maxY = Math.max(...xyList.map((item) => item.y)) + (outerPadding || 4)\n          const minX = 0\n          const maxX = regionRect.width\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        return []\n      },\n      label: {\n        position: (positionMap as any)[textPosition],\n        visible: true,\n        text: text,\n        style: {\n          opacity: 0.95,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          fill: textColor,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            cornerRadius: textBackgroundBorderRadius ?? 4,\n            fill: textBackgroundColor,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n            fillOpacity: 1,\n          },\n        },\n      },\n      area: {\n        style: {\n          visible: true,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n          stroke: areaBorderColor,\n          lineWidth: areaBorderWidth,\n          cornerRadius: areaBorderRadius,\n          lineDash: areaLineDash,\n        },\n      },\n    }\n  }) as ILineChartSpec['markArea']\n\n  return {\n    ...spec,\n    markArea: markArea,\n  }\n}\n","import type { ICartesianSeries, IChart, ILineChartSpec, IVChart } from '@visactor/vchart'\nimport { array, clamper, Color as VUtilColor } from '@visactor/vutils'\nimport { isNullish, isNumber, isPlainObject } from 'remeda'\nimport type { AnnotationHorizontalLine, VChartSpecPipe, Color } from 'src/types'\n\ninterface SplitConfig {\n  points: { x: number; y: number }[]\n  splitCoordinate: number\n  lineStroke: {\n    gradient: string\n    x0: number\n    x1: number\n    y0: number\n    y1: number\n    stops: {\n      color: string\n      offset: number\n    }[]\n  }\n  areaFill: {\n    gradient: string\n    x0: number\n    x1: number\n    y0: number\n    y1: number\n    stops: {\n      color: string\n      offset: number\n    }[]\n  }\n}\n\nconst formatGradientStops = (stops: { color: string; offset: number }[]) => {\n  const firstInvalidateIndex = stops.findIndex((stop) => stop.offset < 0 || stop.offset > 1)\n\n  if (firstInvalidateIndex >= 0) {\n    if (stops[firstInvalidateIndex].offset > 1) {\n      const newStops = stops.slice(0, firstInvalidateIndex + 1)\n      newStops[newStops.length - 1].offset = 1\n\n      return newStops\n    }\n    const newStops = stops.slice(firstInvalidateIndex + 1)\n\n    newStops[0].offset = 0\n    return newStops\n  }\n\n  return stops\n}\n\nexport const splitLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { annotation, chartType, datasetReshapeInfo } = advancedVSeed\n\n  if (!annotation || !annotation.annotationHorizontalLine) {\n    return spec\n  }\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  const splitLineConfig = array(annotation.annotationHorizontalLine).find(\n    (item) => !!(item as AnnotationHorizontalLine).splitLine,\n  ) as AnnotationHorizontalLine | undefined\n\n  const splitValue = +(splitLineConfig?.yValue as number | string)\n\n  if (Number.isNaN(splitValue) || !isNumber(splitValue)) {\n    return spec\n  }\n  const result = { ...spec } as Partial<ILineChartSpec>\n  const colorTheme = baseConfig?.color ?? {}\n  const colorConfig = {\n    positiveColor: colorTheme.positiveColor || 'red',\n    negativeColor: colorTheme.negativeColor || 'green',\n    ...(isPlainObject(splitLineConfig?.splitLine) ? splitLineConfig?.splitLine : {}),\n  }\n\n  const groupMark = {\n    type: 'group',\n    name: 'annotationHorizontalLine-splitLine',\n    zIndex: 300,\n    style: {\n      splitConfig: (datum: any, ctx: any) => {\n        const vchart = ctx.vchart as IVChart\n        const chart = vchart.getChart() as IChart\n        const lineSeries = chart.getAllSeries().find((s) => s.type === 'line' || s.type === 'area') as ICartesianSeries\n\n        if (!lineSeries) {\n          return\n        }\n        const lineMark = lineSeries.getMarkInName('line') ?? lineSeries.getMarkInName('area')\n\n        if (!lineMark) {\n          return\n        }\n        const lineGraphics = lineMark.getGraphics()\n\n        if (!lineGraphics || lineGraphics.length !== 1 || !lineGraphics[0]) {\n          return\n        }\n        const points = ((lineGraphics[0].attribute as any).points ?? []) as { x: number; y: number }[]\n\n        if ((lineGraphics[0].attribute as any).segments?.length) {\n          ;((lineGraphics[0].attribute as any).segments as any[]).forEach(\n            (seg: { points: { x: number; y: number }[] }) => {\n              seg.points.forEach((pt: { x: number; y: number }) => {\n                points.push({ x: pt.x, y: pt.y })\n              })\n            },\n          )\n        }\n\n        if (!points || !points.length) {\n          return\n        }\n        const scale = lineSeries.getYAxisHelper().getScale!(0)\n        const splitCoordinate = scale.scale(splitValue)\n        const minY = Math.min(...points.map((p) => p.y))\n        const maxY = Math.max(...points.map((p) => p.y))\n        const ratio = (splitCoordinate - minY) / (maxY - minY)\n\n        const lineStroke = {\n          gradient: 'linear',\n          x0: 0,\n          x1: 0,\n          y0: 0,\n          y1: 1,\n          stops: formatGradientStops([\n            {\n              color: colorConfig.positiveColor,\n              offset: 0,\n            },\n            {\n              color: colorConfig.positiveColor,\n              offset: ratio,\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: ratio + 0.0000001,\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: 1,\n            },\n          ]),\n        }\n        const areaFill = {\n          gradient: 'linear',\n          x0: 0,\n          x1: 0,\n          y0: 0,\n          y1: 1,\n          stops: formatGradientStops([\n            {\n              color: colorConfig.positiveColor,\n              offset: 0,\n            },\n            {\n              color: new VUtilColor(colorConfig.positiveColor).setOpacity(0).toRGBA(),\n              offset: ratio,\n            },\n            {\n              offset: ratio + 0.0000001,\n              color: new VUtilColor(colorConfig.negativeColor).setOpacity(0).toRGBA(),\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: 1,\n            },\n          ]),\n        }\n        const attrs: any = {\n          segments: null,\n          points,\n        }\n\n        if (lineGraphics[0].type === 'area') {\n          attrs.stroke = lineStroke\n          attrs.fill = areaFill\n        } else {\n          attrs.stroke = lineStroke\n        }\n\n        lineGraphics[0].setAttributes(attrs as unknown as Record<string, any>)\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        lineGraphics[0].setFinalAttributes?.(attrs)\n        const start = lineSeries.getRegion().getLayoutStartPoint()\n        const range = scale.range() as number[]\n\n        return {\n          points: points.map((entry) => ({ x: entry.x + start.x, y: entry.y + start.y })),\n          splitCoordinate: clamper(range[0], range[range.length - 1])(splitCoordinate as number) + start.y,\n          areaFill,\n          lineStroke,\n        } as SplitConfig\n      },\n    },\n    children: [\n      {\n        type: 'area',\n        interactive: false,\n        zIndex: 500,\n        style: {\n          fillOpacity: 0.5,\n          points: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.splitConfig) {\n              const { points, splitCoordinate } = parentNode.attribute.splitConfig as SplitConfig\n\n              return points.map((entry: { x: number; y: number }) => {\n                return {\n                  ...entry,\n                  y1: splitCoordinate,\n                }\n              })\n            }\n\n            return []\n          },\n          fill: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.splitConfig) {\n              const { areaFill } = parentNode.attribute.splitConfig as SplitConfig\n\n              return areaFill\n            }\n\n            return\n          },\n        },\n      },\n    ],\n  }\n\n  if (!result.customMark) {\n    result.customMark = []\n  }\n\n  ;(result.customMark as any[]).push(groupMark)\n\n  const seriesSpec =\n    result.type === 'line' || result.type === 'area'\n      ? result\n      : result.series?.find((s) => s.type === 'line' || s.type === 'area')\n\n  if (seriesSpec) {\n    if (!seriesSpec.point) {\n      seriesSpec.point = {}\n    }\n    if (!seriesSpec.line) {\n      seriesSpec.line = {}\n    }\n\n    if (!seriesSpec.point.style) {\n      seriesSpec.point.style = {}\n    }\n    if (!seriesSpec.line.style) {\n      seriesSpec.line.style = {}\n    }\n\n    const measureValueKey = datasetReshapeInfo[0].foldInfo.measureValue\n\n    seriesSpec.point.style.fill = (datum) => {\n      return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n    }\n    seriesSpec.line.style.stroke = (datum) => {\n      return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n    }\n    if (seriesSpec.label && (seriesSpec.label as any).visible && isNullish((seriesSpec.label as any).style?.fill)) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ;(seriesSpec.label as any).style = {\n        ...(seriesSpec.label as any).style,\n        fill: (datum: any) => {\n          return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n        },\n      }\n    }\n  }\n\n  return result\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { PivotChartSpecPipe } from 'src/types'\n\nexport const initPivot: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    animation: true,\n    rows: [],\n    columns: [],\n    indicators: [],\n    records: [],\n    widthMode: 'standard',\n    autoFillWidth: true,\n    defaultHeaderColWidth: 'auto',\n    defaultColWidth: 240,\n\n    heightMode: 'standard',\n    autoFillHeight: true,\n    defaultRowHeight: 180,\n    defaultHeaderRowHeight: 'auto',\n\n    indicatorsAsCol: false,\n    select: {\n      highlightMode: 'cell',\n      headerSelectMode: 'inline',\n    },\n    hover: {\n      highlightMode: 'cross',\n    },\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    corner: {\n      titleOnDimension: 'row',\n    },\n    animationAppear: {\n      duration: 600,\n      type: 'all',\n      direction: 'row',\n    },\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { isCombination, isPivot } from 'src/pipeline/utils'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\nimport { isNullish } from 'remeda'\n\nexport const pivotGridStyle: PivotChartSpecPipe = (spec, context) => {\n  const { vseed, advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n  const onlyCombination = !isPivot(vseed) && isCombination(vseed)\n\n  const result = { ...spec } as PivotChartConstructorOptions\n  const transparent = 'rgba(0,0,0,0)'\n\n  const borderColor = themConfig.borderColor ?? '#e3e5eb'\n  const bodyFontColor = themConfig.bodyFontColor ?? '#141414'\n  const headerFontColor = themConfig.headerFontColor ?? '#21252c'\n  const headerBackgroundColor = themConfig.headerBackgroundColor ?? 'rgba(0,0,0,0)'\n  const hoverHeaderBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderBackgroundColor ?? '#D9DDE4')\n  const hoverHeaderInlineBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderInlineBackgroundColor ?? '#D9DDE455')\n  const outlineBorderLineWidth = themConfig.outlineBorderLineWidth ?? 0\n  const frameCornerRadius = themConfig.frameCornerRadius ?? 0\n\n  if (!isNullish(themConfig.minChartWidth)) {\n    result.defaultColWidth = themConfig.minChartWidth\n  }\n\n  if (!isNullish(themConfig.minChartHeight)) {\n    result.defaultRowHeight = themConfig.minChartHeight\n  }\n\n  return {\n    ...result,\n    theme: {\n      underlayBackgroundColor: transparent,\n      bodyStyle: {\n        borderColor,\n        color: bodyFontColor,\n        borderLineWidth: (arg: { row: number; col: number; table: any }) => {\n          const noYAxis =\n            chartType === 'pie' ||\n            chartType === 'rose' ||\n            chartType === 'donut' ||\n            chartType === 'funnel' ||\n            chartType === 'radar' ||\n            chartType === 'roseParallel'\n\n          return [\n            arg.row === 0 ? outlineBorderLineWidth : 1,\n            outlineBorderLineWidth,\n            0,\n            arg.col === 0 || (noYAxis && arg.col === 1 && arg.table.colCount <= 2) ? outlineBorderLineWidth : 1,\n          ]\n        },\n        bgColor: transparent,\n        hover: {\n          cellBgColor: 'transparent',\n        },\n      },\n      headerStyle: {\n        borderColor,\n        fontSize: 12,\n        // borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        borderLineWidth: (arg: { row: number; col: number }) => {\n          return [outlineBorderLineWidth, outlineBorderLineWidth, 1, arg.col === 0 ? outlineBorderLineWidth : 1]\n        },\n        color: headerFontColor,\n        textAlign: 'center',\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      rowHeaderStyle: {\n        borderColor,\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, 1, 0, outlineBorderLineWidth]\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerHeaderStyle: {\n        borderColor,\n        textAlign: 'center',\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        fontWeight: 'bold',\n        borderLineWidth: [outlineBorderLineWidth, 1, 1, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerLeftBottomCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightTopCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: 0,\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      rightFrozenStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, outlineBorderLineWidth, 0, 1]\n        },\n        frameStyle: {\n          borderLineWidth: 0,\n        },\n        hover: {\n          borderLineWidth: 0,\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightBottomCellStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n\n      bottomFrozenStyle: {\n        borderColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      selectionStyle: {\n        cellBgColor: '',\n        cellBorderColor: '',\n      },\n      frameStyle: {\n        borderColor,\n        cornerRadius: frameCornerRadius,\n        borderLineWidth: outlineBorderLineWidth,\n      },\n\n      axisStyle: {\n        leftAxisStyle: {\n          cellPaddingLeft: 10,\n        },\n        bottomAxisStyle: {\n          cellPaddingBottom: 4,\n        },\n        rightAxisStyle: {\n          cellPaddingRight: 4,\n        },\n      },\n      scrollStyle: {\n        visible: 'scrolling',\n        hoverOn: false,\n      },\n    },\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { execPipeline } from '../../../../utils'\nimport type {\n  Dataset,\n  Encoding,\n  MeasureGroup,\n  PivotChartSpecPipe,\n  SpecPipelineContext,\n  VChartSpecPipe,\n} from 'src/types'\nimport { unique } from 'remeda'\n\nexport const pivotIndicators =\n  (chartPipeline: VChartSpecPipe[]): PivotChartSpecPipe =>\n  (spec, context): Partial<PivotChartConstructorOptions> => {\n    const result = { ...spec } as PivotChartConstructorOptions\n    const { advancedVSeed } = context\n    const { measures, datasetReshapeInfo, dataset, encoding } = advancedVSeed\n\n    const colorItems = unique(datasetReshapeInfo.flatMap((d) => d.unfoldInfo.colorItems))\n    const allMeasureIds = unique(datasetReshapeInfo.flatMap((d) => Object.keys(d.foldInfo.foldMap || {})))\n\n    const indicators = datasetReshapeInfo.map((reshapeInfo, index) => {\n      const measureGroup = measures?.find((d) => `${d.id}` === reshapeInfo.id) as MeasureGroup\n      const subMeasuresId = (measureGroup?.children || []).map((d) => d.id)\n      const invalideMeasuresIds = allMeasureIds.filter((id) => !subMeasuresId.includes(id))\n\n      const newDataset = dataset[index] as Dataset\n      const newDatasetReshapeInfo = [\n        {\n          ...reshapeInfo,\n          unfoldInfo: { ...reshapeInfo.unfoldInfo, colorItems },\n        },\n      ]\n      const newContext: SpecPipelineContext = {\n        ...context,\n        advancedVSeed: {\n          ...advancedVSeed,\n          pivotAllDatasetReshapeInfo: datasetReshapeInfo,\n          datasetReshapeInfo: newDatasetReshapeInfo,\n          encoding: Object.keys(encoding).reduce((res, key) => {\n            res[key as keyof Encoding] = encoding[key as keyof Encoding]?.filter((e) => {\n              return !invalideMeasuresIds.includes(e)\n            }) as string[]\n\n            return res\n          }, {} as Encoding),\n          dataset: newDataset,\n        },\n      }\n\n      const chartSpec = execPipeline(chartPipeline, newContext, {})\n      return {\n        indicatorKey: `${reshapeInfo.id}`,\n        title: measureGroup?.alias,\n        cellType: 'chart',\n        chartModule: 'vchart',\n        chartSpec: chartSpec,\n        style: {\n          padding: [1, 1, 0, 1],\n        },\n      }\n    })\n\n    return {\n      ...result,\n      indicators: indicators,\n    } as Partial<PivotChartConstructorOptions>\n  }\n\nexport const pivotIndicatorsAsRow: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    indicatorsAsCol: false,\n  }\n}\n\nexport const pivotIndicatorsAsCol: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    indicatorsAsCol: true,\n  }\n}\n","import type { PivotChartSpecPipe } from 'src/types'\n\nexport const datasetPivot: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { dataset, datasetReshapeInfo } = advancedVSeed\n  const records = dataset.reduce((pre, cur, index) => {\n    const id = datasetReshapeInfo[index].id\n    pre[id] = cur\n    return pre\n  }, {})\n  return {\n    ...result,\n    records: records,\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport { BAND_AXIS_INNER_OFFSET_IN_PIVOT } from 'src/pipeline/utils/constant'\nimport type { Config, VChartSpecPipe } from 'src/types'\n\nexport const pivotAxisStyle = (axisStyle: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = axisStyle(spec, context) as ILineChartSpec\n\n    if (result.axes) {\n      const { advancedVSeed } = context\n      const { config, chartType } = advancedVSeed\n      const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n      result.axes.forEach((axis: any) => {\n        axis.domainLine = {\n          visible: false,\n        }\n\n        if (themConfig.chartGridColor && axis.grid && axis.grid.visible && axis.grid.style) {\n          axis.grid.style.stroke = themConfig.chartGridColor\n        }\n\n        if (themConfig.axisLabelColor && axis.label && axis.label.visible && axis.label.style) {\n          axis.label.style.fill = themConfig.axisLabelColor\n        }\n\n        if (axis.type === 'band') {\n          if (axis.orient === 'left' || axis.orient === 'right') {\n            axis.innerOffset = {\n              top: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              bottom: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          } else if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.innerOffset = {\n              left: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              right: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          }\n        } else if (axis.type === 'linear') {\n          if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.label.flush = true\n          }\n        }\n      })\n    }\n\n    return result\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotRowDimensions: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  if (!dimensions) {\n    return result\n  }\n  const rowDimensions = dimensions.filter((dim) => dim.encoding === 'row')\n  const rows = rowDimensions.map((dim) => ({\n    dimensionKey: dim.id,\n    title: dim.alias || dim.id,\n  }))\n  return {\n    ...result,\n    rows: rows,\n  } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotColumnDimensions: PivotChartSpecPipe = (spec, context): Partial<PivotChartConstructorOptions> => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n\n  if (!dimensions) {\n    return result\n  }\n  const columnDimensions = dimensions.filter((dim) => dim.encoding === 'column')\n  const columns = columnDimensions.map((dim) => ({\n    dimensionKey: dim.id,\n    title: dim.alias || dim.id,\n  })) as unknown\n\n  return {\n    ...result,\n    columns: columns,\n  } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotTitle: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n  if (result.columns && result.columns.length > 0) {\n    result.title = {\n      text: (spec as unknown as { columns: { title: string }[] }).columns.map((entry) => entry.title).join('/'),\n      align: 'center',\n      orient: 'top',\n      padding: [2, 0, 0, 0],\n      textStyle: {\n        fontSize: themConfig.titleFontSize ?? 12,\n        fill: themConfig.titleFontColor ?? '#000',\n        fontWeight: themConfig.titleFontWeight ?? 'bold',\n      },\n    }\n  }\n\n  return result\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { unique } from 'remeda'\nimport type { Color, Legend, PivotChartSpecPipe } from 'src/types'\nimport { createSpecifiedForColorMapping } from '../color/color'\n\nexport const pivotDiscreteLegend: PivotChartSpecPipe = (spec, context): Partial<PivotChartConstructorOptions> => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend; color: Color }\n\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const colorItems = unique(\n    datasetReshapeInfo.flatMap((d) => {\n      return d.unfoldInfo.colorItems\n    }),\n  )\n\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  const { legend, color } = baseConfig\n  const { colorScheme, colorMapping } = color\n\n  const colorSpecified = createSpecifiedForColorMapping(colorMapping, colorIdMap, colorItems)\n\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight = 400,\n    maxSize = 1,\n    border,\n    shapeType = 'rectRound',\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  const legends = {\n    padding: 0,\n    visible: enable,\n    type: 'discrete',\n    orient,\n    position: legendPosition,\n    maxCol: Math.max(1, maxSize),\n    maxRow: Math.max(1, maxSize),\n    data: colorItems.map((d: string, index: number) => {\n      const color = colorSpecified?.[d] ?? colorScheme?.[index % colorScheme.length]\n      return {\n        label: d,\n        shape: {\n          outerBorder: border\n            ? {\n                stroke: color,\n                distance: 3,\n                lineWidth: 1,\n              }\n            : undefined,\n          fill: color,\n        },\n      }\n    }),\n\n    item: {\n      focus: true,\n      maxWidth: '30%',\n      focusIconStyle: {\n        size: labelFontSize + 2,\n        fill: labelColor || labelFontColor,\n        fontWeight: labelFontWeight,\n      },\n      shape: {\n        space: border ? 6 : 4,\n        style: {\n          symbolType: shapeType,\n          size: border ? 8 : 10,\n        },\n      },\n      label: {\n        formatMethod: (value: string) => {\n          return colorIdMap[value]?.alias ?? value\n        },\n        style: {\n          fontSize: labelFontSize,\n          fill: labelColor || labelFontColor,\n          fontWeight: labelFontWeight,\n        },\n      },\n      background: {\n        state: {\n          selectedHover: {\n            fill: labelColor || labelFontColor,\n            fillOpacity: 0.05,\n          },\n        },\n      },\n    },\n  }\n  return { ...result, legends } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Color, Legend, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotColorLegend: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend; color: Color }\n\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const max = Math.max(...datasetReshapeInfo.map((d) => d.foldInfo.statistics.colorMin))\n  const min = Math.min(...datasetReshapeInfo.map((d) => d.foldInfo.statistics.colorMax))\n  const { legend, color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight = 400,\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  const legends = {\n    visible: enable,\n    type: 'color',\n    orient,\n    position: legendPosition,\n\n    colors: linearColorScheme || colorScheme || [],\n    value: [min, max],\n    min: min,\n    max: max,\n\n    maxWidth: '30%',\n    handlerText: {\n      visible: true,\n      style: {\n        fill: labelColor || labelFontColor,\n        fontSize: labelFontSize,\n        fontWeight: labelFontWeight,\n      },\n    },\n  } as unknown\n  return { ...result, legends } as Partial<PivotChartConstructorOptions>\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { DimensionLinkage, PivotChartSpecPipe } from 'src/types'\n\nexport const dimensionLinkage: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = (advancedVSeed.config?.[chartType as 'line']?.dimensionLinkage ?? {}) as DimensionLinkage\n\n  if (config.enable === false) {\n    return spec\n  }\n\n  const indicators = spec.indicators\n  const labelHoverOnAxis = {}\n  const chartSpec = (indicators as any)?.[0]?.chartSpec as ILineChartSpec\n  const crosshair = chartSpec?.crosshair as ICartesianCrosshairSpec\n\n  if (crosshair?.xField) {\n    const labelFormat = crosshair.xField.label?.formatMethod\n    ;(labelHoverOnAxis as any).bottom = {\n      visible: config.showLabel ?? crosshair.xField.label?.visible ?? true,\n      background: crosshair.xField.label?.labelBackground,\n      textStyle: crosshair.xField.label?.style,\n      formatMethod: labelFormat\n        ? (text: string | string[] | number) => (text || text === 0 ? labelFormat(text) : null)\n        : undefined,\n    }\n  }\n  if (crosshair?.yField) {\n    const labelFormat = crosshair.yField.label?.formatMethod\n    ;(labelHoverOnAxis as any).left = {\n      visible: config.showLabel ?? crosshair.yField.label?.visible ?? true,\n      background: crosshair.yField.label?.labelBackground,\n      textStyle: crosshair.yField.label?.style,\n      formatMethod: labelFormat\n        ? (text: string | string[] | number) => (text || text === 0 ? labelFormat(text) : null)\n        : undefined,\n    }\n  }\n\n  if (indicators && indicators.length) {\n    indicators.forEach((ind) => {\n      const crosshair = (ind as any)?.chartSpec?.crosshair as ICartesianCrosshairSpec\n\n      if (crosshair?.xField) {\n        crosshair.xField.label = { visible: false }\n      }\n\n      if (crosshair?.yField) {\n        crosshair.yField.label = { visible: false }\n      }\n    })\n  }\n\n  spec.chartDimensionLinkage = {\n    showTooltip: config.showTooltip ?? (chartSpec?.tooltip?.dimension?.visible as boolean) ?? true,\n    heightLimitToShowTooltipForLastRow: 60,\n    widthLimitToShowTooltipForLastColumn: 90,\n    labelHoverOnAxis,\n  }\n\n  return spec\n}\n","import type {\n  PivotChartSpecPipe,\n  PivotChartSpecPipeline,\n  SpecPipe,\n  SpecPipelineContext,\n  VChartSpecPipe,\n  VChartSpecPipeline,\n} from 'src/types'\nimport type { ISpec } from '@visactor/vchart'\nimport type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { execPipeline, isPivotChart } from '../../../../utils'\n\nexport const pivotAdapter = (pipeline: VChartSpecPipeline, pivotPipeline: PivotChartSpecPipeline): SpecPipe => {\n  const adapted = ((spec: unknown, context: SpecPipelineContext) => {\n    const { vseed } = context\n    const usePivotChart = isPivotChart(vseed)\n    if (usePivotChart) {\n      return execPipeline<PivotChartConstructorOptions, SpecPipelineContext>(\n        pivotPipeline,\n        context,\n        spec as Partial<PivotChartConstructorOptions>,\n      )\n    }\n    return execPipeline<ISpec, SpecPipelineContext>(pipeline, context, spec as Partial<ISpec>)\n  }) as VChartSpecPipe & PivotChartSpecPipe\n\n  return adapted as unknown as SpecPipe\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  xBand,\n  yLinear,\n  initLine,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorLineStyleFill,\n  colorPointStyleFill,\n  pivotColorLegend,\n  pivotTitle,\n  pivotAxisStyle,\n  splitLine,\n  dimensionLinkage,\n} from '../pipes'\n\nconst line: VChartSpecPipeline = [\n  initLine,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  verticalCrosshairLine,\n  colorAdapter(discreteLegend, colorLegend),\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  label,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  splitLine,\n]\n\nconst pivotLine: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initLine,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    label,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    splitLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const lineSpecPipeline = [pivotAdapter(line, pivotLine)]\n","import { lineAdvancedPipeline, lineSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerLine = () => {\n  Builder._advancedPipelineMap['line'] = lineAdvancedPipeline\n  Builder._specPipelineMap['line'] = lineSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForColumn: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForColumn: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const columnConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'stackCornerRadius',\n    'barMaxWidth',\n    'barGapInGroup',\n\n    'dimensionLinkage',\n  ]) as Config['column']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import type { AdvancedPipe, RegressionLineConfig } from 'src/types'\n\nexport const regressionLine: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  let keys = [] as string[]\n\n  if (vseed.chartType === 'histogram') {\n    keys = ['kdeRegressionLine', 'ecdfRegressionLine']\n  } else if (vseed.chartType === 'scatter') {\n    keys = ['linearRegressionLine', 'lowessRegressionLine', 'polynomialRegressionLine', 'logisticRegressionLine']\n  } else if (vseed.chartType === 'column') {\n    keys = ['polynomialRegressionLine']\n  }\n\n  if (keys.length) {\n    const regressionLineConfig: RegressionLineConfig = {}\n    let hasLine = false\n\n    keys.forEach((key: string) => {\n      if ((vseed as any)[key]) {\n        hasLine = true\n        regressionLineConfig[key as keyof RegressionLineConfig] = (vseed as any)[key]\n      }\n    })\n\n    return hasLine\n      ? {\n          ...advancedVSeed,\n          regressionLine: regressionLineConfig,\n        }\n      : advancedVSeed\n  }\n\n  return advancedVSeed\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  columnConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  regressionLine,\n} from '../pipes'\n\nexport const columnAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForColumn, buildMeasures],\n    [encodingForColumn, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnConfig,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initColumn: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { FoldMeasureId } from 'src/dataReshape/constant'\nimport type { Datum, VChartSpecPipe, StackCornerRadius } from 'src/types'\n\nexport const stackCornerRadius: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const stackCornerRadius = advancedVSeed.config?.[chartType as 'column']?.stackCornerRadius as StackCornerRadius\n\n  if (chartType === 'dualAxis' && (spec as any).type !== 'bar') {\n    return spec\n  }\n\n  return {\n    ...spec,\n    stackCornerRadius: (_: unknown, datum: Datum) => {\n      if (datum && datum[datum[FoldMeasureId]] > 0) {\n        return stackCornerRadius\n      }\n\n      return 0\n    },\n  } as IBarChartSpec\n}\n","import { isNullish } from 'remeda'\nimport type { BarMaxWidth, VChartSpecPipe } from 'src/types'\n\nexport const barMaxWidth: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const barMaxWidth = advancedVSeed.config?.[chartType as 'column']?.barMaxWidth as BarMaxWidth\n\n  if (!isNullish(barMaxWidth)) {\n    return {\n      ...spec,\n      barMaxWidth,\n    }\n  }\n\n  return spec\n}\n","import type { IAreaChartSpec, IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const stackInverse: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IAreaChartSpec | IBarChartSpec\n  result.stackInverse = true\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'column']?.crosshairRect\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const rectColor = config.rectColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || false\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'rect',\n      style: {\n        lineWidth: 0,\n        opacity: 0.26,\n        fill: rectColor,\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorBarStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IBarChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.bar?.style) {\n        result.bar.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { BarStyle, Datum, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const barStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle, dataset = [] } = advancedVSeed\n  const { barStyle } = markStyle\n\n  const showStroke = dataset.length <= 100\n\n  const result = {\n    ...spec,\n    bar: {\n      style: {\n        visible: true,\n        fillOpacity: 1,\n        lineWidth: showStroke ? 1 : 0,\n      },\n      state: {\n        hover: {\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  } as IBarChartSpec\n\n  if (isNullish(barStyle) || isEmpty(barStyle)) {\n    return result\n  }\n\n  const barStyles = (Array.isArray(barStyle) ? barStyle : [barStyle]) as BarStyle[]\n\n  const customMap = barStyles.reduce<object>((result, style, index) => {\n    const {\n      barBorderColor,\n      barBorderStyle,\n      barBorderWidth = 1,\n      barColor,\n      barColorOpacity,\n      barBorderOpacity,\n      barRadius,\n      barVisible = true,\n    } = style\n\n    const lineDash = barBorderStyle === 'dashed' ? [5, 2] : barBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: barVisible,\n          fill: barColor,\n          fillOpacity: barColorOpacity,\n          cornerRadius: barRadius,\n          lineWidth: barBorderWidth,\n          stroke: barBorderColor,\n          strokeOpacity: barBorderOpacity,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  result.bar!.state = {\n    ...result.bar!.state,\n    ...customMap,\n  }\n\n  return result\n}\n","import { type ICartesianSeries, type ILineChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, VChartSpecPipe, VSeed } from 'src/types'\nimport { ANNOTATION_AREA_TEXT_STYLE_BY_POSITION, isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const annotationAreaBand: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationArea) {\n    return spec\n  }\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationArea\n  const { annotationArea } = annotation\n  const annotationAreaList = Array.isArray(annotationArea) ? annotationArea : [annotationArea]\n\n  const positionMap = {\n    top: 'insideTop',\n    topRight: 'insideTopRight',\n    topLeft: 'insideTopLeft',\n    bottom: 'insideBottom',\n    bottomLeft: 'insideBottomLeft',\n    bottomRight: 'insideBottomRight',\n    left: 'insideLeft',\n    right: 'insideRight',\n  }\n  const defaultTextPosition = isBarLikeChart(advancedVSeed as VSeed) ? 'right' : 'top'\n\n  const markArea = annotationAreaList.flatMap((annotationArea) => {\n    const {\n      selector: selectorPoint,\n      text = '',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#191d24',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#191d24',\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 4,\n\n      areaColor = theme?.areaColor ?? '#888888',\n      areaColorOpacity = theme?.areaColorOpacity ?? 0.15,\n      areaBorderColor = theme?.areaBorderColor ?? '#888888',\n      areaBorderRadius = theme?.areaBorderRadius ?? 4,\n      areaBorderWidth = theme?.areaBorderWidth ?? 1,\n      areaLineDash = theme?.areaLineDash,\n\n      outerPadding = theme?.outerPadding ?? 4,\n    } = annotationArea\n    const textPosition: string = annotationArea.textPosition ?? defaultTextPosition\n    const textAlign =\n      annotationArea.textAlign ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textAlign\n    const textBaseline =\n      annotationArea.textBaseline ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textBaseline\n\n    const dataset = advancedVSeed.dataset.flat()\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n\n    return {\n      zIndex: ANNOTATION_Z_INDEX,\n      regionRelative: true,\n      // coordinates: selectedData,\n      positions: (data: Datum[], context: ICartesianSeries & { _scaleConfig?: { bandPosition?: number } }) => {\n        const positionData = data.filter((item) => selectedData.some((datum) => isSubset(datum, item)))\n        const xyList = positionData.map((datum) => context.dataToPosition(datum) as { x: number; y: number })\n\n        const bandPosition = context?._scaleConfig?.bandPosition || 0\n\n        const yAxisHelper = context.getYAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n        const xAxisHelper = context.getXAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n\n        if (typeof xAxisHelper?.getBandwidth === 'function') {\n          const depth = context.fieldX.length ?? 0\n          const xBandWidth = xAxisHelper?.getBandwidth?.(depth - 1)\n          const regionRect = context.getRegion().getLayoutRect()\n          const startX = Math.min(...xyList.map((item) => item.x)) - (outerPadding || 4)\n          const endX = Math.max(...xyList.map((item) => item.x)) + (outerPadding || 4)\n\n          const width = endX - startX + xBandWidth\n          const middleX = (endX + startX) / 2 + xBandWidth * (0.5 - bandPosition)\n\n          const minX = middleX - width / 2\n          const maxX = middleX + width / 2\n\n          const minY = 0\n          const maxY = regionRect.height\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        if (typeof yAxisHelper?.getBandwidth === 'function') {\n          const depth = context.fieldY.length ?? 0\n          const yBandWidth = yAxisHelper?.getBandwidth?.(depth - 1)\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const startY = Math.min(...xyList.map((item) => item.y)) - (outerPadding || 4)\n          const endY = Math.max(...xyList.map((item) => item.y)) + (outerPadding || 4)\n          const width = endY - startY + yBandWidth\n          const middleY = (endY + startY) / 2 + yBandWidth * (0.5 - bandPosition)\n\n          const minY = middleY - width / 2\n          const maxY = middleY + width / 2\n          const minX = 0\n          const maxX = regionRect.width\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        return []\n      },\n      label: {\n        position: positionMap[textPosition as 'bottom'],\n        visible: true,\n        text: text,\n        style: {\n          opacity: 0.95,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          fill: textColor,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            cornerRadius: textBackgroundBorderRadius ?? 4,\n            fill: textBackgroundColor,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n            fillOpacity: 1,\n          },\n        },\n      },\n      area: {\n        style: {\n          visible: true,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n          stroke: areaBorderColor,\n          lineWidth: areaBorderWidth,\n          cornerRadius: areaBorderRadius,\n          lineDash: areaLineDash,\n        },\n      },\n    }\n  }) as ILineChartSpec['markArea']\n\n  return {\n    ...spec,\n    markArea: markArea,\n  }\n}\n","import type { Datum } from '@visactor/vchart'\n\nexport const defaultRegressionLineColor = (datum: Datum, ctx: any, opt: any): string | undefined => {\n  const parentNode = opt.mark?._product?.parent\n  if (parentNode?.attribute?.data) {\n    return parentNode.attribute.data.color\n  }\n  return undefined\n}\n\nexport const defaultRegressionLineLabelX = (datum: any, ctx: any, opt: any) => {\n  const parentNode = opt.mark?._product?.parent\n\n  if (parentNode?.attribute?.data?.linePoints) {\n    const points = parentNode.attribute.data.linePoints\n    return points[points.length - 1]?.x\n  }\n\n  return undefined\n}\n\nexport const defaultRegressionLineLabelY = (datum: any, ctx: any, opt: any) => {\n  const parentNode = opt.mark?._product?.parent\n\n  if (parentNode?.attribute?.data?.linePoints) {\n    const points = parentNode.attribute.data.linePoints\n    return points[points.length - 1]?.y\n  }\n\n  return undefined\n}\n\nexport const getAlphaByConfidenceLevel = (confidenceLevel: number = 0.95) => {\n  return 1 - Math.max(Math.min(1, confidenceLevel), 0)\n}\n","import type { IBarChartSpec, ICartesianSeries, IChart, IVChart } from '@visactor/vchart'\nimport { isNullish } from 'remeda'\nimport { array, clamper, regressionPolynomial } from '@visactor/vutils'\nimport type {\n  Datum,\n  VChartSpecPipe,\n  RegressionLineConfig,\n  LinearRegressionLine,\n  PolynomialRegressionLine,\n} from 'src/types'\nimport { defaultRegressionLineColor, getAlphaByConfidenceLevel } from './common'\n\nexport const columnPolynomialRegressionLine: VChartSpecPipe = (spec, context): Partial<IBarChartSpec> => {\n  const result = { ...spec } as Partial<IBarChartSpec>\n  const { advancedVSeed } = context\n  const { chartType, regressionLine } = advancedVSeed\n  const lineTheme = advancedVSeed.config[chartType as 'scatter']?.regressionLine as RegressionLineConfig\n\n  if (!regressionLine || !regressionLine.polynomialRegressionLine) {\n    return result\n  }\n\n  const lineList = array(regressionLine.polynomialRegressionLine)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme.linearRegressionLine ?? {}) as LinearRegressionLine\n    const {\n      color,\n      lineWidth,\n      lineDash,\n      text,\n      textColor,\n      textFontSize,\n      textFontWeight,\n      confidenceIntervalOpacity,\n      confidenceLevel = 0.95,\n      confidenceIntervalVisible = theme.confidenceIntervalVisible,\n    } = line as LinearRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `polynomialRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const s = chart.getAllSeries()[0] as ICartesianSeries\n\n          if (s) {\n            const rect = s.getRegion().getLayoutRect()\n\n            if (rect.width === 0 || rect.height === 0) {\n              return null\n            }\n\n            const yClamper = clamper(0, 0 + rect.height)\n            const data = s.getViewData()?.latestData as Datum[]\n            const fieldX = s.fieldX?.[0]\n            const fieldY = s.fieldY?.[0]\n            const xValues = s.getRawDataStatisticsByField(fieldX).values as string[]\n            const degree = (line as PolynomialRegressionLine).degree ?? 2\n            // 多项式拟合需要至少 degree + 1 个点\n            const minPoints = degree + 1\n\n            if (!fieldX || !fieldY || !data || data.length < minPoints || xValues.length < minPoints) {\n              return null\n            }\n\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const { confidenceInterval, evaluateGrid } = regressionPolynomial(\n              xValues.map((xVal, index: number) => {\n                const filteredData = data.filter((d) => d[fieldX] === xVal)\n\n                return {\n                  x: index,\n                  y: Math.max(...filteredData.map((d) => d[fieldY] as number)),\n                }\n              }),\n              undefined,\n              undefined,\n              {\n                degree: (line as PolynomialRegressionLine).degree ?? 2,\n                alpha: getAlphaByConfidenceLevel(confidenceLevel),\n              },\n            )\n            const N = xValues.length\n            const xAxisHelper = s.getXAxisHelper()\n            const halfBandWidth = xAxisHelper ? xAxisHelper.getBandwidth!(0) / 2 : 0\n            const lineData = evaluateGrid(N)\n            const linePoints = lineData.map((datum: Datum, index: number) => {\n              const d = { [fieldX]: xValues[index], [fieldY]: datum.y }\n              return {\n                x: s.dataToPositionX(d)! + halfBandWidth,\n                y: yClamper(s.dataToPositionY(d)!),\n              }\n            })\n            const result: {\n              linePoints: { x: number; y: number }[]\n              areaPoints?: { x: number; y: number; y1: number }[]\n              color: string\n            } = {\n              linePoints,\n              color: s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n\n            if (confidenceIntervalVisible) {\n              const intervalData = confidenceInterval(N)\n\n              result.areaPoints = intervalData.map((datum: Datum, index: number) => {\n                const d = { [fieldX]: xValues[index], [fieldY]: datum.lower }\n                return {\n                  x: s.dataToPositionX(d)! + halfBandWidth,\n                  y: yClamper(s.dataToPositionY(d)!),\n                  y1: yClamper(s.dataToPositionY({ [fieldY]: datum.upper })!),\n                }\n              })\n            }\n\n            return result\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    if (confidenceIntervalVisible) {\n      childrenMarks.push({\n        type: 'area',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        style: {\n          lineWidth: lineWidth ?? theme.lineWidth,\n          lineDash: lineDash ?? theme.lineDash,\n          fillOpacity: confidenceIntervalOpacity ?? theme.confidenceIntervalOpacity,\n          fill: color ?? defaultRegressionLineColor,\n          points: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data) {\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n              return parentNode.attribute.data.areaPoints\n            }\n\n            return []\n          },\n        },\n      })\n    }\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `polynomialRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data?.linePoints) {\n              const points = parentNode.attribute.data.linePoints\n              return points[points.length - 1]?.x\n            }\n\n            return undefined\n          },\n          y: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data?.linePoints) {\n              const points = parentNode.attribute.data.linePoints\n              return points[points.length - 1]?.y\n            }\n\n            return undefined\n          },\n        },\n      })\n    }\n  })\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initColumn,\n  datasetXY,\n  xBand,\n  yLinear,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  columnPolynomialRegressionLine,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst column: VChartSpecPipeline = [\n  initColumn,\n  stackCornerRadius,\n  barMaxWidth,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  verticalCrosshairRect,\n  colorAdapter(discreteLegend, colorLegend),\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  columnPolynomialRegressionLine,\n]\n\nconst pivotColumn: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumn,\n    stackCornerRadius,\n    barMaxWidth,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n    columnPolynomialRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnSpecPipeline = [pivotAdapter(column, pivotColumn)]\n","import { columnAdvancedPipeline, columnSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumn = () => {\n  Builder._advancedPipelineMap['column'] = columnAdvancedPipeline\n  Builder._specPipelineMap['column'] = columnSpecPipeline\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const pieConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, ['backgroundColor', 'color', 'label', 'legend', 'tooltip']) as Config['pie']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { lineConfig } from './line'\nimport { columnConfig } from './column'\nimport { pieConfig } from './pie'\nimport { dualAxisConfig } from './dualAxis'\nimport { scatterConfig } from './scatter'\nimport { histogramConfig } from './histogram'\nimport { boxplotConfig } from './boxplot'\n\nexport { lineConfig, columnConfig, pieConfig, dualAxisConfig, scatterConfig, histogramConfig, boxplotConfig }\n\n// area\nexport const areaConfig = lineConfig\nexport const areaPercentConfig = lineConfig\n\n// bar\nexport const barConfig = columnConfig\nexport const barParallelConfig = columnConfig\nexport const barPercentConfig = columnConfig\n\n// column\nexport const columnParallelConfig = columnConfig\nexport const columnPercentConfig = columnConfig\n\n// donut, rose\nexport const donutConfig = pieConfig\nexport const roseConfig = pieConfig\nexport const roseParallelConfig = pieConfig\nexport const radarConfig = pieConfig\n\n// funnel, heatmap\nexport const funnelConfig = pieConfig\nexport const heatmapConfig = pieConfig\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  columnParallelConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const columnParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForColumn, buildMeasures],\n    [encodingForColumn, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initColumnParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.x, encoding.color)\n\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = [unfoldInfo.encodingX]\n\n  if (!sameDimensionsMode) {\n    result.xField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.y?.length === 1) {\n      result.xField.pop()\n    }\n  }\n\n  result.yField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import { isNullish } from 'remeda'\nimport type { BarGapInGroup, VChartSpecPipe } from 'src/types'\n\nexport const barGapInGroup: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const barGapInGroup = advancedVSeed.config?.[chartType as 'columnParallel']?.barGapInGroup as BarGapInGroup\n\n  if (!isNullish(barGapInGroup)) {\n    return {\n      ...spec,\n      barGapInGroup,\n    }\n  }\n\n  return spec\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  xBand,\n  yLinear,\n  initColumnParallel,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotIndicators,\n  initPivot,\n  datasetPivot,\n  pivotAdapter,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  barGapInGroup,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst columnParallel: VChartSpecPipeline = [\n  initColumnParallel,\n  stackCornerRadius,\n  barMaxWidth,\n  barGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotColumnParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumnParallel,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnParallelSpecPipeline = [pivotAdapter(columnParallel, pivotColumnParallel)]\n","import { columnParallelAdvancedPipeline, columnParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumnParallel = () => {\n  Builder._advancedPipelineMap['columnParallel'] = columnParallelAdvancedPipeline\n  Builder._specPipelineMap['columnParallel'] = columnParallelSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  columnPercentConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const columnPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForColumn, buildMeasures],\n    [encodingForColumn, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IAreaChartSpec, IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const percent: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IAreaChartSpec | IBarChartSpec\n  result.percent = true\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initColumn,\n  datasetXY,\n  xBand,\n  yLinear,\n  percent,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst columnPercent: VChartSpecPipeline = [\n  initColumn,\n  stackCornerRadius,\n  stackInverse,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotColumnPercent: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumn,\n    stackCornerRadius,\n    stackInverse,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    percent,\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnPercentSpecPipeline = [pivotAdapter(columnPercent, pivotColumnPercent)]\n","import { columnPercentAdvancedPipeline, columnPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumnPercent = () => {\n  Builder._advancedPipelineMap['columnPercent'] = columnPercentAdvancedPipeline\n  Builder._specPipelineMap['columnPercent'] = columnPercentSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForBar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForBar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.y = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // y\n  encoding.y = unique(dimensions.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  if (encoding.y.length === 0) {\n    encoding.y = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.x = unique(measures.filter((item) => item.encoding === 'xAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // x\n  encoding.x = unique(measures.filter((item) => item.encoding === 'xAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortYBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const yField = unfoldInfo?.encodingY\n  if (!sortAxis || !yField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, yField, dataset.flat(2))\n\n  result.analysis.orderMapping[yField] = axisOrderResult\n\n  return result\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  buildMeasures,\n  pivotAdapter,\n  barConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForBar, buildMeasures],\n    [encodingForBar, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initBar: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'bar'\n  result.direction = 'horizontal'\n  result.yField = unfoldInfo.encodingY\n  result.xField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetYX: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const orderMapping = analysis?.orderMapping || {}\n\n  const angle = unfoldInfo.encodingAngle\n  const y = unfoldInfo.encodingY\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n  if (angle) {\n    fields[angle] = {\n      sortIndex: 0,\n    }\n  }\n  if (y) {\n    const order = orderMapping[y]\n    if (order) {\n      fields[y] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[y] = {\n        sortIndex: 0,\n      }\n    }\n  }\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XLinearAxis } from 'src/types'\nimport {\n  AXIS_LABEL_SPACE,\n  createNumFormatter,\n  isAreaPercent,\n  isBarPercent,\n  isColumnPercent,\n  isPivotChart,\n  LINEAR_AXIS_INNER_OFFSET_TOP,\n} from 'src/pipeline/utils'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\n\nexport const xLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { encoding, dimensions, measures } = advancedVSeed\n  const { chartType } = vseed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.xAxis ?? {}) as XLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n    autoFormat,\n    numFormat = {},\n  } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const linearAxis = {\n    ...(isPivot\n      ? {\n          range: {\n            min,\n            max,\n          },\n        }\n      : {\n          min,\n          max,\n        }),\n    visible,\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient: 'bottom',\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod: (value: string) => {\n        if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n          return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n        }\n        return createLinearFormat(value, autoFormat, numFormat, formatter)\n      },\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.x as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    innerOffset: {\n      right: LINEAR_AXIS_INNER_OFFSET_TOP,\n      // left: LINEAR_AXIS_INNER_OFFSET_TOP,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ICartesianBandAxisSpec, ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis } from 'src/types'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { AXIS_LABEL_SPACE } from 'src/pipeline/utils'\nimport { MeasureId } from 'src/dataReshape'\nimport { isArray } from '@visactor/vutils'\n\nexport const yBand: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures, dimensions, encoding, datasetReshapeInfo, pivotAllDatasetReshapeInfo } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.yAxis ?? {}) as XBandAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n    labelAutoHide,\n    labelAutoHideGap,\n    labelAutoLimit,\n    labelAutoLimitLength = 80,\n    labelAutoRotate,\n    labelAutoRotateAngleRange,\n  } = config\n\n  const sampling = !(labelAutoHide || labelAutoRotate || labelAutoLimit)\n  const onlyMeasureId = (encoding.y || []).filter((v) => v !== MeasureId).length === 0\n\n  const bandAxis = {\n    visible,\n    type: 'band',\n    orient: 'left',\n    maxWidth: labelAutoLimitLength + 60,\n    sampling,\n    hover: true,\n    label: {\n      visible: label?.visible,\n      flush: true,\n      containerAlign: 'right',\n      space: AXIS_LABEL_SPACE,\n      style: {\n        maxLineWidth: labelAutoLimitLength,\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n      // 防重叠相关\n      minGap: labelAutoHideGap,\n      autoHide: labelAutoHide,\n      autoHideMethod: 'greedy',\n      autoHideSeparation: labelAutoHideGap,\n      autoLimit: labelAutoLimit,\n      autoRotate: labelAutoRotate,\n      autoRotateAngle: labelAutoRotateAngleRange,\n      lastVisible: true,\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    paddingInner: [0.15, 0.1],\n    paddingOuter: [0.075, 0.1],\n  } as ICartesianBandAxisSpec\n  if (onlyMeasureId && bandAxis.label) {\n    const allDatasetReshapeInfo = pivotAllDatasetReshapeInfo || datasetReshapeInfo\n    const colorIdMap = allDatasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n      return { ...prev, ...cur.unfoldInfo.colorIdMap }\n    }, {})\n\n    bandAxis.label.formatMethod = (text: string | string[]) => {\n      return isArray(text) ? text : (colorIdMap[String(text)]?.alias ?? text)\n    }\n  }\n\n  result.axes = [...result.axes, bandAxis] as ISpec['axes']\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const horizontalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'column']?.crosshairRect\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const rectColor = config.rectColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || false\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.yField = {\n    visible,\n    line: {\n      type: 'rect',\n      style: {\n        lineWidth: 0,\n        opacity: 0.26,\n        fill: rectColor,\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const yAxisConfig = result.axes?.find((v) => v.orient === 'left')\n  const yAxisFormatter = yAxisConfig?.label?.formatMethod\n  if (yAxisFormatter) {\n    ;(crosshair.yField.label!.formatMethod as any) = (text: string | string[]) => yAxisFormatter(text)\n  }\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initBar,\n  datasetYX,\n  xLinear,\n  yBand,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst bar: VChartSpecPipeline = [\n  initBar,\n  stackCornerRadius,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBar: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBar,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetYX,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barSpecPipeline = [pivotAdapter(bar, pivotBar)]\n","import { barAdvancedPipeline, barSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBar = () => {\n  Builder._advancedPipelineMap['bar'] = barAdvancedPipeline\n  Builder._specPipelineMap['bar'] = barSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  buildMeasures,\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  barParallelConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForBar, buildMeasures],\n    [encodingForBar, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initBarParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.y, encoding.color)\n\n  result.type = 'bar'\n  result.direction = 'horizontal'\n\n  result.yField = [unfoldInfo.encodingY]\n\n  if (!sameDimensionsMode) {\n    result.yField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.x?.length === 1) {\n      result.yField.pop()\n    }\n  }\n\n  result.xField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetYX,\n  xLinear,\n  yBand,\n  initBarParallel,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  barGapInGroup,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst barParallel: VChartSpecPipeline = [\n  initBarParallel,\n  stackCornerRadius,\n  barMaxWidth,\n  barGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBarParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBarParallel,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetYX,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barParallelSpecPipeline = [pivotAdapter(barParallel, pivotBarParallel)]\n","import { barParallelAdvancedPipeline, barParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBarParallel = () => {\n  Builder._advancedPipelineMap['barParallel'] = barParallelAdvancedPipeline\n  Builder._specPipelineMap['barParallel'] = barParallelSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  buildMeasures,\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  barPercentConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForBar, buildMeasures],\n    [encodingForBar, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initBar,\n  datasetYX,\n  xLinear,\n  yBand,\n  percent,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst barPercent: VChartSpecPipeline = [\n  initBar,\n  stackCornerRadius,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBarPercent: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBar,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    percent,\n    datasetYX,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barPercentSpecPipeline = [pivotAdapter(barPercent, pivotBarPercent)]\n","import { barPercentAdvancedPipeline, barPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBarPercent = () => {\n  Builder._advancedPipelineMap['barPercent'] = barPercentAdvancedPipeline\n  Builder._specPipelineMap['barPercent'] = barPercentSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  areaConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  encodingForLine,\n  defaultMeasures,\n  defaultMeasureId,\n  defaultDimensions,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const areaAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForLine, buildMeasures],\n    [encodingForLine, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  areaConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initArea: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IAreaChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'area'\n  result.direction = 'vertical'\n  result.yField = foldInfo.measureValue\n\n  result.xField = unfoldInfo.encodingX\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorAreaStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IAreaChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.area?.style) {\n        result.area.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { AreaStyle, Datum, LineStyle, VChartSpecPipe } from 'src/types'\nimport { groupBy, isEmpty, isNullish } from 'remeda'\nimport { getCurveTension, getCurveType } from './curve'\n\nexport const areaStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle, datasetReshapeInfo, dataset } = advancedVSeed\n  const { areaStyle, lineStyle } = markStyle\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const result = {\n    ...spec,\n    area: {\n      visible: true,\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(areaStyle) || isEmpty(areaStyle)) {\n    return result\n  }\n\n  const areaStyles = (Array.isArray(areaStyle) ? areaStyle : [areaStyle]) as AreaStyle[]\n  const lineStyles = (Array.isArray(lineStyle) ? lineStyle : [lineStyle]) as LineStyle[]\n\n  const group = unfoldInfo.encodingColorId\n\n  const areaGroups = groupBy(dataset, (d) => d[group ?? ''] as string)\n\n  const customMap = areaStyles.reduce<object>((result, style, index) => {\n    const { areaColor, areaColorOpacity, areaVisible = true } = style\n\n    const curveType = getCurveType(context.vseed, lineStyles[index]?.lineSmooth)\n    const curveTension = getCurveTension(context.vseed, lineStyles[index]?.lineSmooth)\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          const lineData = areaGroups[datum[group ?? ''] as string]\n          for (const d of lineData) {\n            if (selector(d, style.selector)) {\n              return true\n            }\n          }\n          return false\n        },\n        style: {\n          curveType,\n          curveTension,\n          visible: areaVisible,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    area: {\n      ...result.area,\n      visible: true,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  xBand,\n  yLinear,\n  initArea,\n  stackInverse,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotAdapter,\n  initPivot,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  areaStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  datasetXY,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotColorLegend,\n  pivotAxisStyle,\n  pivotTitle,\n  splitLine,\n  dimensionLinkage,\n} from '../pipes'\n\nconst area: VChartSpecPipeline = [\n  initArea,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  splitLine,\n]\n\nconst pivotArea: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initArea,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    stackInverse,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    splitLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const areaSpecPipeline = [pivotAdapter(area, pivotArea)]\n","import { areaAdvancedPipeline, areaSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerArea = () => {\n  Builder._advancedPipelineMap['area'] = areaAdvancedPipeline\n  Builder._specPipelineMap['area'] = areaSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  areaPercentConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  encodingForLine,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const areaPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForLine, buildMeasures],\n    [encodingForLine, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  areaPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  percent,\n  datasetXY,\n  xBand,\n  yLinear,\n  initArea,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotAdapter,\n  initPivot,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  areaStyle,\n  verticalCrosshairLine,\n  progressive,\n  colorLegend,\n  colorAdapter,\n  linearColor,\n  pivotColorLegend,\n  pointStateDimensionHover,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst areaPercent: VChartSpecPipeline = [\n  initArea,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotAreaPercent: PivotChartSpecPipeline = [\n  initPivot,\n\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initArea,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    percent,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const areaPercentSpecPipeline = [pivotAdapter(areaPercent, pivotAreaPercent)]\n","import { areaPercentAdvancedPipeline, areaPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerAreaPercent = () => {\n  Builder._advancedPipelineMap['areaPercent'] = areaPercentAdvancedPipeline\n  Builder._specPipelineMap['areaPercent'] = areaPercentSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\n\nexport const defaultEncodingForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  // prepare measures and dimensions\n  const measures = findAllMeasures(vseedMeasures)\n\n  // exist encoding condition\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n  // encoding for modify in place\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const dimensionsWithoutMeasureId = dimensions.filter((item) => item.id !== MeasureId)\n  const uniqueDimIds = unique(dimensionsWithoutMeasureId.map((d) => d.id))\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  // color\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'xAxis' || item.encoding === 'yAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'xAxis' || item.encoding === 'yAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // size\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size').map((item) => item.id))\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipe, MeasureGroup, Measures, MeasureTree, Scatter, ScatterMeasures } from 'src/types'\nimport { isMeasureTreeWithParentId, isMeasureTreeWithChildren } from './utils'\nimport { clone } from 'remeda'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\n\nexport const buildMeasuresForScatter: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context as {\n    vseed: Scatter\n  }\n\n  // 带Children的指标树, 不进行任何处理\n  if (isMeasureTreeWithChildren(advancedVSeed.measures)) {\n    return advancedVSeed\n  }\n  // 带parentId的指标树, 转换为带children的指标树\n  if (isMeasureTreeWithParentId(advancedVSeed.measures)) {\n    advancedVSeed.measures = generateMeasuresByParentId(advancedVSeed.measures as Measures)\n    return advancedVSeed\n  }\n\n  /**\n   * 既不是带Children的指标树, 也不是带parentId的指标树, 则自动生成指标\n   */\n\n  const scatterMeasures = vseed.scatterMeasures\n    ? clone(vseed.scatterMeasures)\n    : basicMeasuresToScatterMeasures(advancedVSeed.measures || [])\n  advancedVSeed.measures = scatterMeasuresToMeasureTree(scatterMeasures)\n\n  return advancedVSeed\n}\n\nconst basicMeasuresToScatterMeasures = (basicMeasures: Measures): ScatterMeasures => {\n  const yMeasures: Measures = []\n  const xMeasures: Measures = []\n\n  for (let index = 0; index < basicMeasures.length; index++) {\n    const item = basicMeasures[index]\n    const encoding = Array.isArray(item.encoding) ? item.encoding : [item.encoding]\n    const isYAxis = encoding.includes('yAxis')\n    const isXAxis = encoding.includes('xAxis')\n\n    if (isYAxis) {\n      yMeasures.push(item)\n    } else if (isXAxis) {\n      xMeasures.push(item)\n    } else {\n      if (index !== 0) {\n        yMeasures.push(item)\n      } else {\n        xMeasures.push(item)\n      }\n    }\n  }\n\n  if (yMeasures.length === 0 && xMeasures.length > 0) {\n    yMeasures.push(xMeasures[0])\n  }\n\n  return [{ id: 'scatterMeasures', xMeasures, yMeasures }]\n}\n\nconst scatterMeasuresToMeasureTree = (scatterMeasures: ScatterMeasures): MeasureTree => {\n  const measureTree = scatterMeasures.map((item, index): MeasureGroup => {\n    const { id, xMeasures, yMeasures } = item\n    const groupChildren: MeasureGroup[] = []\n\n    let groupId: string = `${id}-`\n    if (xMeasures) {\n      const arrPrimaryMeasures = Array.isArray(xMeasures) ? xMeasures : [xMeasures]\n      const alias = arrPrimaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-x`,\n        alias: arrPrimaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrPrimaryMeasures,\n      })\n    }\n    if (yMeasures) {\n      const arrSecondaryMeasures = Array.isArray(yMeasures) ? yMeasures : [yMeasures]\n      const alias = arrSecondaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-y`,\n        alias: arrSecondaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrSecondaryMeasures,\n      })\n    }\n\n    return {\n      id: groupId,\n      alias: groupId,\n      children: groupChildren,\n    }\n  })\n\n  // 只有1个散点图, 仅返回2层, vchart 绘制散点图\n  if (scatterMeasures.length === 1) {\n    return measureTree[0].children || []\n  }\n\n  // 有多个散点图, 返回3层, pivot chart 绘制组合散点图\n  return measureTree\n}\n\nconst generateMeasuresByParentId = (measures: Measures) => {\n  const scatterMeasures: ScatterMeasures = []\n\n  measures.forEach((item) => {\n    const id = item.parentId || DEFAULT_PARENT_ID\n\n    if (!scatterMeasures.find((d) => d.id === id)) {\n      scatterMeasures.push({\n        id,\n        yMeasures: [],\n        xMeasures: [],\n      })\n    }\n    const scatterChart = scatterMeasures.find((d) => d.id === id)\n    if (!scatterChart || !Array.isArray(scatterChart.yMeasures) || !Array.isArray(scatterChart.xMeasures)) {\n      return\n    }\n\n    const encoding = Array.isArray(item.encoding) ? item.encoding : [item.encoding].filter(Boolean)\n    const isX = encoding.includes('xAxis')\n    const isY = encoding.includes('yAxis')\n    const isEmpty = !encoding.length\n    if (isY) {\n      scatterChart.yMeasures.push(item)\n    } else if (isX) {\n      scatterChart.xMeasures.push(item)\n    } else if (isEmpty) {\n      if (scatterChart.yMeasures.length !== 0) {\n        scatterChart.yMeasures.push(item)\n      } else {\n        scatterChart.xMeasures.push(item)\n      }\n    }\n  })\n\n  return scatterMeasuresToMeasureTree(scatterMeasures)\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const scatterConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'sizeRange',\n    'size',\n    'crosshairLine',\n\n    'dimensionLinkage',\n  ]) as Config['line']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { uniqueBy } from 'remeda'\nimport {\n  dataReshapeByEncoding,\n  FoldXMeasureId,\n  FoldXMeasureValue,\n  FoldYMeasureId,\n  FoldYMeasureValue,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const reshapeWithScatterEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  if (measures.length > 2) {\n    throw new Error('measures can not be more than 2 groups in scatter')\n  }\n  const foldInfoList: FoldInfo[] = []\n  const unfoldInfoList: UnfoldInfo[] = []\n\n  const datasets: Dataset[] = []\n  const xMeasures = measures[0] as MeasureGroup\n  const yMeasures = (measures[1] || xMeasures) as MeasureGroup\n\n  if (xMeasures && xMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (d) => d.id),\n      uniqueBy(xMeasures.children, (d) => d.id),\n      encoding as Encoding,\n      {\n        foldMeasureValue: FoldXMeasureValue,\n        foldMeasureId: FoldXMeasureId,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets.push(newDataset)\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  if (yMeasures && yMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      datasets[0],\n      uniqueBy(dimensions, (d) => d.id),\n      uniqueBy(yMeasures.children, (d) => d.id),\n      encoding as Encoding,\n      {\n        foldMeasureValue: FoldYMeasureValue,\n        foldMeasureId: FoldYMeasureId,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets[0] = newDataset\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  const unfoldInfo: UnfoldInfo = {\n    ...unfoldInfoList[0],\n    colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n    colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n  }\n\n  return {\n    ...result,\n    dataset: datasets[0],\n\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo: foldInfoList[0],\n        foldInfoList: foldInfoList,\n        unfoldInfo: unfoldInfo,\n      },\n    ],\n  }\n}\n","import { dataReshapeByEncoding, FoldXMeasureValue, FoldYMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures, measureDepth } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithScatterEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const allMeasures = findAllMeasures(measures)\n\n  const measureGroups: Array<MeasureGroup[]> = []\n\n  const depth = measureDepth(measures)\n  if (depth === 3) {\n    measures.forEach((measure: MeasureGroup) => {\n      measureGroups.push(measure.children as unknown as MeasureGroup[])\n    })\n  } else if (depth === 2) {\n    measureGroups.push(measures)\n  }\n\n  const datasetList: Dataset[] = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measures: MeasureGroup[], index) => {\n    if (measures.length > 2) {\n      throw new Error('measures can not be more than 2 groups in scatter')\n    }\n\n    const foldInfoList: FoldInfo[] = []\n    const unfoldInfoList: UnfoldInfo[] = []\n\n    const datasets: Dataset[] = []\n    const xMeasures = measures[0]\n    const yMeasures = measures[1] || xMeasures\n\n    if (xMeasures && xMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(dataset, dimensions, xMeasures.children, encoding as Encoding, {\n        foldMeasureValue: `${FoldXMeasureValue}${index}`,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasures.map((item) => item.id),\n      })\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    if (yMeasures && yMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(dataset, dimensions, yMeasures.children, encoding as Encoding, {\n        foldMeasureValue: `${FoldYMeasureValue}${index}`,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasures.map((item) => item.id),\n      })\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    const unfoldInfo: UnfoldInfo = {\n      ...unfoldInfoList[0],\n      colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n      colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n    }\n\n    const reshapeInfo = {\n      id: `${chartType}-${index}`,\n      index,\n      foldInfo: foldInfoList[0],\n      foldInfoList: foldInfoList,\n      unfoldInfo: unfoldInfo,\n    }\n\n    datasetReshapeInfo.push(reshapeInfo)\n    datasetList.push(datasets[0].map((d, index) => ({ ...d, ...(datasets[1]?.[index] || {}) })))\n  })\n\n  return {\n    ...result,\n    dataset: datasetList,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  scatterConfig,\n  encodingForScatter,\n  buildMeasuresForScatter,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForScatter,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  regressionLine,\n} from '../pipes'\nimport { reshapeWithScatterEncoding } from '../pipes/reshape/reshapeWithScatterEncoding'\nimport { pivotReshapeWithScatterEncoding } from '../pipes/reshape/pivotReshapeWithScatterEncoding'\n\nexport const scatterAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForScatter, buildMeasuresForScatter],\n    [\n      encodingForScatter,\n      buildMeasuresForScatter,\n      pickMeasuresForReshape(['tooltip', 'label', 'size']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithScatterEncoding], [pivotReshapeWithScatterEncoding]),\n\n  scatterConfig,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList } = datasetReshapeInfo[0]\n\n  result.type = 'scatter'\n  result.direction = 'vertical'\n  result.xField = foldInfoList?.[0].measureValue\n  if (foldInfoList?.[1]) {\n    result.yField = foldInfoList[1].measureValue\n  }\n\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetScatter: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const scatterSize: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed } = context\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as {\n    sizeRange: number | number[]\n    size?: number | number[]\n  }\n  const hasSizeEncoding = encoding?.size?.[0]\n  if (!hasSizeEncoding) {\n    return result\n  }\n\n  const size = baseConfig.size ?? baseConfig.sizeRange\n\n  result.size = {\n    type: 'linear',\n    range: Array.isArray(size) ? size : [size, size],\n  } as IScatterChartSpec['size']\n\n  result.sizeField = encoding?.size?.[0] || undefined\n\n  return result\n}\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, Label, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    foldInfoList,\n  ) as unknown as IScatterChartSpec['label']\n\n  return result\n}\n","import { uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Locale, Measures, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\n\nexport const tooltipScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, chartType, locale, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const { foldInfoList } = datasetReshapeInfo[0] as unknown as {\n    foldInfoList: FoldInfo[]\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        locale,\n        foldInfoList,\n      ),\n    },\n    dimension: {\n      visible: false,\n    },\n  }\n  return result\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures,\n  locale: Locale,\n  foldInfoList: FoldInfo[],\n) => {\n  const dims = uniqueBy(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n  const meas = uniqueBy(\n    measures.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const foldMeaContent = foldInfoList.map((foldInfo) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: Object.values(foldInfo.foldMap)[0],\n      value: (v: unknown) => {\n        const { measureId, measureValue } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    }\n  })\n  return [...dimContent, ...foldMeaContent, ...meaContent]\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const horizontalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.yField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const yAxisConfig = result.axes?.find((v) => v.orient === 'left')\n  const yAxisFormatter = yAxisConfig?.label?.formatMethod\n  if (yAxisFormatter) {\n    ;(crosshair.yField.label!.formatMethod as any) = (text: string | string[]) => yAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { ICartesianSeries, IChart, IScatterChartSpec, IVChart } from '@visactor/vchart'\nimport { isNullish } from 'remeda'\nimport {\n  array,\n  clamper,\n  regressionLinear,\n  regressionLowess,\n  regressionPolynomial,\n  regressionLogistic,\n} from '@visactor/vutils'\nimport type {\n  Datum,\n  VChartSpecPipe,\n  RegressionLineConfig,\n  LinearRegressionLine,\n  PolynomialRegressionLine,\n  SpecPipelineContext,\n  LogisticRegressionLine,\n  LowessRegressionLine,\n} from 'src/types'\nimport { getAlphaByConfidenceLevel } from './common'\n\nexport const generateRegressionLinePipe = (\n  type: 'linearRegressionLine' | 'lowessRegressionLine' | 'polynomialRegressionLine' | 'logisticRegressionLine',\n  regressionFunction: (\n    arr: Datum[],\n    xAccessor: (d: Datum) => number,\n    yAccessor: (d: Datum) => number,\n    options?: any,\n  ) => {\n    confidenceInterval: (N: number) => { lower: number; upper: number; x: number }[]\n    evaluateGrid: (N: number) => { x: number; y: number }[]\n  },\n  getOptions: (lineConfig: any) => any = getDefaultRegressionOptions,\n  getMinPoints: (lineConfig: any) => number = () => 2,\n): VChartSpecPipe => {\n  return ((spec: Partial<IScatterChartSpec>, context: SpecPipelineContext): Partial<IScatterChartSpec> => {\n    const result = { ...spec }\n    const { advancedVSeed } = context\n    const { chartType, regressionLine } = advancedVSeed\n    const lineTheme = advancedVSeed.config[chartType as 'scatter']?.regressionLine as RegressionLineConfig\n\n    if (!regressionLine || !regressionLine[type]) {\n      return result\n    }\n\n    const lineList = array(regressionLine[type])\n\n    if (!result.extensionMark) {\n      result.extensionMark = []\n    }\n\n    lineList.forEach((line, lineIndex) => {\n      if (line.enable === false) {\n        return\n      }\n\n      const theme = (lineTheme.linearRegressionLine ?? {}) as LinearRegressionLine\n      const {\n        color,\n        lineWidth,\n        lineDash,\n        text,\n        textColor,\n        textFontSize,\n        textFontWeight,\n        confidenceIntervalOpacity,\n        confidenceIntervalVisible = theme.confidenceIntervalVisible,\n      } = line as LinearRegressionLine\n\n      const childrenMarks: any[] = []\n\n      ;(result.extensionMark as any[]).push({\n        type: 'group',\n        interactive: false,\n        zIndex: 500,\n        name: `${type}-${lineIndex}`,\n        layoutType: 'region-relative',\n        dataId: (spec.data as any)?.id,\n        animation: false,\n        style: {\n          data: (datum: any, ctx: any) => {\n            const vchart = ctx.vchart as IVChart\n            const chart = vchart.getChart() as IChart\n            const s = chart.getAllSeries()[0] as ICartesianSeries\n\n            if (s) {\n              const rect = s.getRegion().getLayoutRect()\n              const segments: {\n                areaPoints?: { x: number; y: number; y1: number }[]\n                linePoints: { x: number; y: number }[]\n                color: string\n              }[] = []\n\n              if (rect.width === 0 || rect.height === 0) {\n                return segments\n              }\n\n              const yClamper = clamper(0, rect.height)\n              const colorAttrOptions = s.getColorAttribute()\n              const groups: (string | undefined)[] = s.getSeriesKeys()\n              const data = s.getViewData()?.latestData as Datum[]\n              const fieldX = s.fieldX?.[0]\n              const fieldY = s.fieldY?.[0]\n\n              if (!groups.length) {\n                groups.push(undefined)\n              }\n\n              groups.forEach((group) => {\n                const groupData = data.filter((d: Datum) => d[colorAttrOptions?.field] === group)\n\n                const minPoints = getMinPoints(line)\n\n                if (groupData.length < minPoints) {\n                  return\n                }\n                const { confidenceInterval, evaluateGrid } = regressionFunction(\n                  groupData,\n                  (datum: Datum) => datum?.[fieldX],\n                  (datum: Datum) => datum?.[fieldY],\n                  getOptions?.(line),\n                )\n                const N = Math.max(3, Math.floor(groupData.length / 4))\n                const mainColor = color ?? colorAttrOptions?.scale?.scale(group)\n\n                const lineData = evaluateGrid(N)\n                const linePoints: { x: number; y: number }[] = []\n\n                lineData.forEach((ld: Datum, index: number) => {\n                  const d = { [fieldX]: ld.x, [fieldY]: ld.y }\n                  const x = s.dataToPositionX(d)!\n                  const y = yClamper(s.dataToPositionY(d)!)\n\n                  if (segments.length && index === 0) {\n                    segments[segments.length - 1].linePoints.push({ x, y: NaN }) // 断开线段用的\n                  }\n\n                  linePoints.push({\n                    x,\n                    y,\n                  })\n                })\n\n                const segment: {\n                  color: string\n                  linePoints: { x: number; y: number }[]\n                  areaPoints?: { x: number; y: number; y1: number }[]\n                } = {\n                  color: mainColor,\n                  linePoints,\n                }\n\n                if (confidenceIntervalVisible) {\n                  const intervalData = confidenceInterval(N)\n                  const areaPoints: { x: number; y: number; y1: number }[] = []\n\n                  intervalData.map((datum: Datum, index: number) => {\n                    const d = { [fieldX]: datum.x, [fieldY]: datum.lower }\n                    const x = s.dataToPositionX(d)!\n                    const y = yClamper(s.dataToPositionY(d)!)\n                    const y1 = yClamper(s.dataToPositionY({ [fieldY]: datum.upper })!)\n\n                    if (segments.length && index === 0) {\n                      segments[segments.length - 1].areaPoints!.push({ x, y: NaN, y1: NaN }) // 断开线段用的\n                    }\n\n                    areaPoints.push({ x, y, y1 })\n                  })\n\n                  segment.areaPoints = areaPoints\n                }\n\n                segments.push(segment)\n              })\n\n              return segments\n            }\n            return []\n          },\n        },\n        children: childrenMarks,\n      })\n\n      if (confidenceIntervalVisible) {\n        childrenMarks.push({\n          type: 'area',\n          interactive: false,\n          zIndex: 500,\n          dataId: (spec.data as any)?.id,\n          style: {\n            stroke: false,\n            lineWidth: lineWidth ?? theme.lineWidth,\n            lineDash: lineDash ?? theme.lineDash,\n            fillOpacity: confidenceIntervalOpacity ?? theme.confidenceIntervalOpacity,\n            fill: 'red', // vrender bug，必须要设置一个全局的fill，才会绘制\n            segments: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode) {\n                const data = parentNode.finalAttribute?.data ?? parentNode.attribute?.data\n\n                if (data?.length) {\n                  // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call\n                  return data.map((d: any) => {\n                    return {\n                      points: d.areaPoints ?? [],\n                      fill: d.color,\n                    }\n                  })\n                }\n              }\n\n              return []\n            },\n          },\n        })\n      }\n\n      childrenMarks.push({\n        type: 'line',\n        interactive: false,\n        zIndex: 500,\n        animation: false,\n        dataId: (spec.data as any)?.id,\n        style: {\n          lineWidth: lineWidth ?? theme.lineWidth,\n          lineDash: lineDash ?? theme.lineDash,\n          stroke: 'red', // vrender bug，必须要设置一个全局的stroke，才会绘制\n          segments: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode) {\n              const data = parentNode.finalAttribute?.data ?? parentNode.attribute?.data\n              if (data?.length) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call\n                return data.map((d: any) => {\n                  return {\n                    points: d.linePoints,\n                    stroke: d.color,\n                  }\n                })\n              }\n            }\n\n            return []\n          },\n        },\n      })\n\n      if (!isNullish(text)) {\n        childrenMarks.push({\n          type: 'text',\n          interactive: false,\n          zIndex: 500,\n          animation: false,\n          dataId: (spec.data as any)?.id,\n          dataKey: () => {\n            return `regressionLine-label-${lineIndex}`\n          },\n          style: {\n            textAlign: 'end',\n            fill: textColor ?? theme.textColor,\n            fontSize: textFontSize ?? theme.textFontSize,\n            fontWeight: textFontWeight ?? theme.textFontWeight,\n            text: text,\n            x: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode?.attribute?.data?.length) {\n                const point = parentNode.attribute.data[parentNode.attribute.data.length - 1].linePoints\n                return point[point.length - 1]?.x\n              }\n\n              return undefined\n            },\n            y: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode?.attribute?.data?.length) {\n                const point = parentNode.attribute.data[parentNode.attribute.data.length - 1].linePoints\n                return point[point.length - 1]?.y\n              }\n\n              return undefined\n            },\n          },\n        })\n      }\n    })\n\n    return result\n  }) as VChartSpecPipe\n}\n\nconst getDefaultRegressionOptions = (\n  lineConfig: PolynomialRegressionLine | LinearRegressionLine | LogisticRegressionLine | LowessRegressionLine,\n) => {\n  const alpha = getAlphaByConfidenceLevel(lineConfig?.confidenceLevel)\n  return { alpha }\n}\n\nexport const linearRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'linearRegressionLine',\n  regressionLinear,\n  getDefaultRegressionOptions,\n)\nexport const lowessRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'lowessRegressionLine',\n  regressionLowess,\n  getDefaultRegressionOptions,\n)\nexport const polynomialRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'polynomialRegressionLine',\n  regressionPolynomial,\n  (lineConfig: PolynomialRegressionLine) => {\n    return { ...getDefaultRegressionOptions(lineConfig), degree: lineConfig.degree ?? 2 }\n  },\n  (lineConfig: PolynomialRegressionLine) => (lineConfig.degree ?? 2) + 1,\n)\nexport const logisticRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'logisticRegressionLine',\n  regressionLogistic,\n  getDefaultRegressionOptions,\n)\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  yLinear,\n  backgroundColor,\n  tooltipScatter,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  verticalCrosshairLine,\n  xLinear,\n  horizontalCrosshairLine,\n  pointStateHover,\n  initScatter,\n  progressive,\n  datasetScatter,\n  linearColor,\n  colorAdapter,\n  colorPointStyleFill,\n  colorLegend,\n  pivotColorLegend,\n  labelScatter,\n  scatterSize,\n  linearRegressionLine,\n  lowessRegressionLine,\n  polynomialRegressionLine,\n  logisticRegressionLine,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst scatter: VChartSpecPipeline = [\n  initScatter,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetScatter,\n  progressive,\n  xLinear,\n  yLinear,\n  scatterSize,\n  labelScatter,\n  tooltipScatter,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  horizontalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateHover,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  linearRegressionLine,\n  lowessRegressionLine,\n  polynomialRegressionLine,\n  logisticRegressionLine,\n]\n\nconst pivotScatter: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initScatter,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetScatter,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yLinear),\n    scatterSize,\n    labelScatter,\n    tooltipScatter,\n    verticalCrosshairLine,\n    horizontalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateHover,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    linearRegressionLine,\n    lowessRegressionLine,\n    polynomialRegressionLine,\n    logisticRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const scatterSpecPipeline = [pivotAdapter(scatter, pivotScatter)]\n","import { scatterAdvancedPipeline, scatterSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerScatter = () => {\n  Builder._advancedPipelineMap['scatter'] = scatterAdvancedPipeline\n  Builder._specPipelineMap['scatter'] = scatterSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'primaryYAxis' || item.encoding === 'secondaryYAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'primaryYAxis' || item.encoding === 'secondaryYAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipe, DualAxis, DualMeasures, MeasureGroup, Measures, MeasureTree } from 'src/types'\nimport { isMeasureTreeWithParentId, isMeasureTreeWithChildren } from './utils'\nimport { clone } from 'remeda'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\n\nexport const buildMeasuresForDualAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context as {\n    vseed: DualAxis\n  }\n\n  // 带Children的指标树, 不进行任何处理\n  if (isMeasureTreeWithChildren(advancedVSeed.measures)) {\n    return advancedVSeed\n  }\n  // 带parentId的指标树, 转换为带children的指标树\n  if (isMeasureTreeWithParentId(advancedVSeed.measures)) {\n    advancedVSeed.measures = generateMeasuresByParentId(advancedVSeed.measures as Measures)\n    return advancedVSeed\n  }\n\n  /**\n   * 既不是带Children的指标树, 也不是带parentId的指标树, 则自动生成指标\n   */\n  const dualMeasures = vseed.dualMeasures\n    ? clone(vseed.dualMeasures)\n    : basicMeasuresToDualMeasures(advancedVSeed.measures || [])\n  advancedVSeed.measures = dualMeasuresToMeasureTree(dualMeasures)\n\n  return advancedVSeed\n}\n\nconst basicMeasuresToDualMeasures = (basicMeasures: Measures): DualMeasures => {\n  const primaryMeasures: Measures = []\n  const secondaryMeasures: Measures = []\n\n  for (let index = 0; index < basicMeasures.length; index++) {\n    const item = basicMeasures[index]\n    const encoding = Array.isArray(item.encoding) ? item.encoding : [item.encoding]\n    const isPrimaryYAxis = encoding.includes('primaryYAxis')\n    const isSecondaryYAxis = encoding.includes('secondaryYAxis')\n\n    if (isPrimaryYAxis) {\n      primaryMeasures.push(item)\n    } else if (isSecondaryYAxis) {\n      secondaryMeasures.push(item)\n    } else {\n      if (index === 0) {\n        primaryMeasures.push(item)\n      } else {\n        secondaryMeasures.push(item)\n      }\n    }\n  }\n\n  return [{ id: 'dualMeasures', primaryMeasures, secondaryMeasures }]\n}\n\nconst dualMeasuresToMeasureTree = (dualMeasures: DualMeasures): MeasureTree => {\n  const measureTree = dualMeasures.map((item, index): MeasureGroup => {\n    const { id, primaryMeasures, secondaryMeasures } = item\n    const groupChildren: MeasureGroup[] = []\n\n    let groupId: string = `${id}-`\n    if (primaryMeasures) {\n      const arrPrimaryMeasures = Array.isArray(primaryMeasures) ? primaryMeasures : [primaryMeasures]\n      const alias = arrPrimaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-primary`,\n        alias: arrPrimaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrPrimaryMeasures,\n      })\n    }\n    if (secondaryMeasures) {\n      const arrSecondaryMeasures = Array.isArray(secondaryMeasures) ? secondaryMeasures : [secondaryMeasures]\n      const alias = arrSecondaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-secondary`,\n        alias: arrSecondaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrSecondaryMeasures,\n      })\n    }\n\n    return {\n      id: groupId,\n      alias: groupId,\n      children: groupChildren,\n    }\n  })\n\n  // 只有1个双轴图, 仅返回2层, vchart 绘制双轴图\n  if (dualMeasures.length === 1) {\n    return measureTree[0].children || []\n  }\n\n  // 有多个双轴图, 返回3层, pivot chart 绘制组合双轴图\n  return measureTree\n}\n\nconst generateMeasuresByParentId = (measures: Measures) => {\n  const dualMeasures: DualMeasures = []\n\n  measures.forEach((item) => {\n    const id = item.parentId || DEFAULT_PARENT_ID\n    if (!dualMeasures.find((d) => d.id === id)) {\n      dualMeasures.push({\n        id,\n        primaryMeasures: [],\n        secondaryMeasures: [],\n      })\n    }\n\n    const dualChart = dualMeasures.find((d) => d.id === id)\n    if (!dualChart || !Array.isArray(dualChart.primaryMeasures) || !Array.isArray(dualChart.secondaryMeasures)) {\n      return\n    }\n\n    const encoding = Array.isArray(item.encoding) ? item.encoding : [item.encoding].filter(Boolean)\n    const isPrimary = encoding.includes('primaryYAxis')\n    const isSecondary = encoding.includes('secondaryYAxis')\n    const isEmpty = !item.encoding\n\n    if (isPrimary) {\n      dualChart.primaryMeasures.push(item)\n    } else if (isSecondary) {\n      dualChart.secondaryMeasures.push(item)\n    } else if (isEmpty) {\n      if (dualChart.primaryMeasures.length === 0) {\n        dualChart.primaryMeasures.push(item)\n      } else {\n        dualChart.secondaryMeasures.push(item)\n      }\n    }\n  })\n\n  return dualMeasuresToMeasureTree(dualMeasures)\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldPrimaryMeasureValue, FoldSecondaryMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const reshapeWithDualEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  if (measures.length > 2) {\n    throw new Error('measures can not be more than 2 groups in dualAxis')\n  }\n  const foldInfoList: FoldInfo[] = []\n  const unfoldInfoList: UnfoldInfo[] = []\n\n  const datasets: Dataset[] = []\n  const primaryMeasures = measures[0] as MeasureGroup\n  const secondaryMeasures = (measures[1] || []) as MeasureGroup\n\n  if (primaryMeasures && primaryMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item) => item.id),\n      uniqueBy(primaryMeasures.children, (item) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: FoldPrimaryMeasureValue,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets.push(newDataset)\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  if (secondaryMeasures && secondaryMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item) => item.id),\n      uniqueBy(secondaryMeasures.children, (item) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: FoldSecondaryMeasureValue,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets.push(newDataset)\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  const unfoldInfo: UnfoldInfo = {\n    ...unfoldInfoList[0],\n    colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n    colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n  }\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo: foldInfoList[0],\n        foldInfoList: foldInfoList,\n        unfoldInfo: unfoldInfo,\n      },\n    ],\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldPrimaryMeasureValue, FoldSecondaryMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures, measureDepth } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithDualEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  const allMeasures = findAllMeasures(measures)\n  const datasetList: Dataset[] = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  const measureGroups: Array<MeasureGroup[]> = []\n\n  const depth = measureDepth(measures)\n  if (depth === 3) {\n    measures.forEach((measure: MeasureGroup) => {\n      measureGroups.push(measure.children as unknown as MeasureGroup[])\n    })\n  } else if (depth === 2) {\n    measureGroups.push(measures as unknown as MeasureGroup[])\n  }\n\n  measureGroups.forEach((measures: MeasureGroup[], index) => {\n    if (measures.length > 2) {\n      throw new Error('measures can not be more than 2 groups in dualAxis')\n    }\n\n    const foldInfoList: FoldInfo[] = []\n    const unfoldInfoList: UnfoldInfo[] = []\n\n    const datasets: Dataset[] = []\n    const primaryMeasures = measures[0]\n    const secondaryMeasures = measures[1] || []\n\n    if (primaryMeasures && primaryMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item) => item.id),\n        uniqueBy(primaryMeasures.children, (item) => item.id),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          foldMeasureValue: `${FoldPrimaryMeasureValue}${index}`,\n          colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n          omitIds: allMeasures.map((item) => item.id),\n        },\n      )\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    if (secondaryMeasures && secondaryMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item) => item.id),\n        uniqueBy(secondaryMeasures.children, (item) => item.id),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          foldMeasureValue: `${FoldSecondaryMeasureValue}${index}`,\n          colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n          omitIds: allMeasures.map((item) => item.id),\n        },\n      )\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    const unfoldInfo: UnfoldInfo = {\n      ...unfoldInfoList[0],\n      colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n      colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n    }\n\n    const reshapeInfo = {\n      id: `${chartType}-${index}`,\n      index,\n      foldInfo: foldInfoList[0],\n      foldInfoList: foldInfoList,\n      unfoldInfo: unfoldInfo,\n    }\n\n    datasetReshapeInfo.push(reshapeInfo)\n    datasetList.push(datasets.flat(2))\n  })\n\n  return {\n    ...result,\n    dataset: datasetList,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const dualAxisConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    // common\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n\n    // only for dualAxis\n    'dualChartType',\n    'alignTicks',\n    'primaryYAxis',\n    'secondaryYAxis',\n    'crosshairLine',\n    'crosshairRect',\n\n    'barGapInGroup',\n    'barMaxWidth',\n    'stackCornerRadius',\n\n    'dimensionLinkage',\n  ]) as Config['dualAxis']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  dualAxisConfig,\n  encodingForDualAxis,\n  reshapeWithDualEncoding,\n  pivotReshapeWithDualEncoding,\n  buildMeasuresForDualAxis,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForDualAxis,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const dualAxisAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForDualAxis, buildMeasuresForDualAxis],\n    [\n      encodingForDualAxis,\n      buildMeasuresForDualAxis,\n      pickMeasuresForReshape(['tooltip', 'label', 'color']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithDualEncoding], [pivotReshapeWithDualEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  dualAxisConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { SpecPipelineContext, VChartSpecPipe, VChartSpecPipeline } from 'src/types'\nimport { execPipeline } from '../../../../utils'\nimport type { ICommonChartSpec, ILineSeriesSpec, ISpec } from '@visactor/vchart'\n\nexport const series = (...args: VChartSpecPipeline[]): VChartSpecPipe => {\n  const result = {\n    type: 'common',\n    padding: 0,\n    region: [\n      {\n        clip: true,\n      },\n    ],\n  } as ICommonChartSpec\n\n  return (_: Partial<ISpec>, context: SpecPipelineContext) => {\n    result.series = args.map((pipeline) => {\n      return execPipeline<Partial<ISpec>, SpecPipelineContext>(pipeline, context, {})\n    }) as ILineSeriesSpec[]\n\n    return result as Partial<ISpec>\n  }\n}\n\n/**\n * @description 双轴图的透视场景, 不能使用此pipe, 请使用series\n * 因为VTable.PivotVChart会自行解析数据, 而非VChart解析.\n */\nexport const seriesDualAxis = (...args: VChartSpecPipeline[]): VChartSpecPipe => {\n  const result = {\n    type: 'common',\n    padding: 0,\n    labelLayout: 'region',\n    region: [\n      {\n        clip: true,\n      },\n    ],\n  } as ICommonChartSpec\n\n  const createDualContext = <T extends SpecPipelineContext>(context: T, index: number): T => {\n    const { advancedVSeed } = context\n    const dataset = advancedVSeed.dataset[index]\n    return {\n      ...context,\n      advancedVSeed: {\n        ...advancedVSeed,\n        dataset: dataset,\n      },\n    }\n  }\n\n  return (_: Partial<ISpec>, context: SpecPipelineContext) => {\n    result.series = args.map((pipeline, index) => {\n      const seriesContext = createDualContext(context, index)\n      return execPipeline<ISpec, SpecPipelineContext>(pipeline, seriesContext, {})\n    }) as ILineSeriesSpec[]\n\n    return result\n  }\n}\n","import type { IBarSeriesSpec, ILineSeriesSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initDualAxisPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarSeriesSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList, id } = datasetReshapeInfo[0]\n\n  result.id = `${id}-primary-series`\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.yField = foldInfoList?.[0].measureValue\n  result.animation = true\n\n  return result\n}\n\nexport const initDualAxisSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineSeriesSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList, id } = datasetReshapeInfo[0]\n\n  result.id = `${id}-secondary-series`\n  result.type = 'line'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  if (foldInfoList?.[1]) {\n    result.yField = foldInfoList[1].measureValue\n  }\n\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n  result.animation = true\n\n  return result\n}\n","import type { IBarSeriesSpec, ISeriesSpec } from '@visactor/vchart'\nimport { DUAL_AXIS_CHART_COLUMN_Z_INDEX, DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } from 'src/pipeline/utils/constant'\nimport type { DualChartType, VChartSpecPipe } from 'src/types'\n\nexport const dualChartTypePrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec, zIndex: DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } as ISeriesSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo } = advancedVSeed\n  const index = datasetReshapeInfo[0].index\n\n  const config =\n    advancedVSeed.config?.[chartType as 'dualAxis']?.dualChartType ||\n    ({\n      primary: 'column',\n      secondary: 'line',\n    } as DualChartType)\n\n  const primary = Array.isArray(config) ? config[index].primary || config[0].primary : config.primary\n  const secondary = Array.isArray(config) ? config[index].secondary || config[0].secondary : config.secondary\n  const bothColumn = primary === 'column' && secondary === 'column'\n  const type = bothColumn ? 'columnParallel' : primary\n  switch (type) {\n    case 'line': {\n      result.type = 'line'\n      break\n    }\n    case 'column': {\n      result.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'columnParallel': {\n      const columnSpec = result as IBarSeriesSpec\n      if (Array.isArray(columnSpec.xField)) {\n        columnSpec.xField.push(datasetReshapeInfo[0].unfoldInfo.encodingDetail)\n      } else if (columnSpec.xField) {\n        columnSpec.xField = [columnSpec.xField, datasetReshapeInfo[0].unfoldInfo.encodingDetail]\n      }\n      columnSpec.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'columnPercent': {\n      result.type = 'bar'\n      result.percent = true\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'area': {\n      result.type = 'area'\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'areaPercent': {\n      result.type = 'area'\n      result.percent = true\n      break\n    }\n    case 'scatter': {\n      result.type = 'scatter'\n      break\n    }\n    default:\n      result.type = primary\n  }\n\n  return result\n}\n\nexport const dualChartTypeSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec, zIndex: DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } as ISeriesSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo } = advancedVSeed\n  const config =\n    advancedVSeed.config?.[chartType as 'dualAxis']?.dualChartType ||\n    ({\n      primary: 'column',\n      secondary: 'line',\n    } as DualChartType)\n\n  const index = datasetReshapeInfo[0].index\n  const primary = Array.isArray(config) ? config[index].primary || config[0].primary : config.primary\n  const secondary = Array.isArray(config) ? config[index].secondary || config[0].secondary : config.secondary\n  const bothColumn = primary === 'column' && secondary === 'column'\n  const type = bothColumn ? 'columnParallel' : secondary\n\n  switch (type) {\n    case 'line': {\n      result.type = 'line'\n      break\n    }\n    case 'column': {\n      result.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'columnParallel': {\n      const columnSpec = result as IBarSeriesSpec\n      if (Array.isArray(columnSpec.xField)) {\n        columnSpec.xField.push(datasetReshapeInfo[0].unfoldInfo.encodingDetail)\n      } else if (columnSpec.xField) {\n        columnSpec.xField = [columnSpec.xField, datasetReshapeInfo[0].unfoldInfo.encodingDetail]\n      }\n      columnSpec.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'columnPercent': {\n      result.type = 'bar'\n      result.percent = true\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'area': {\n      result.type = 'area'\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'areaPercent': {\n      result.type = 'area'\n      result.percent = true\n      break\n    }\n    case 'scatter': {\n      result.type = 'scatter'\n      break\n    }\n    default:\n      result.type = secondary\n  }\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetPrimary: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const orderMapping = analysis?.orderMapping || {}\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id: `${id}-primary-dataset`,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n\nexport const datasetSecondary: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const orderMapping = analysis?.orderMapping || {}\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id: `${id}-secondary-dataset`,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, Label, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\nimport { DUAL_AXIS_LABEL_Z_INDEX } from 'src/pipeline/utils/constant'\n\nexport const labelPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n  result.label = buildLabel(\n    baseConfig.label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfoList[0]],\n  ) as unknown as ILineChartSpec['label']\n  ;(result.label as any)!.zIndex = DUAL_AXIS_LABEL_Z_INDEX\n  return result\n}\n\nexport const labelSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n\n  result.label = buildLabel(\n    baseConfig.label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfoList[1]],\n  ) as unknown as ILineChartSpec['label']\n  ;(result.label as any)!.zIndex = DUAL_AXIS_LABEL_Z_INDEX\n  return result\n}\n","import { isNullish } from 'remeda'\nimport { createDimensionContent, createMarkContent } from './tooltip'\nimport type { FoldInfo, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport { getTooltipStyle } from './tooltipStyle'\n\nexport const tooltipPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { measures, datasetReshapeInfo, chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n  const unfoldInfo = datasetReshapeInfo[0].unfoldInfo\n\n  result.tooltip = {\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        foldInfoList[0],\n        unfoldInfo,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, measures, foldInfoList[0], unfoldInfo),\n    },\n  }\n  return result\n}\n\nexport const tooltipSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { measures, datasetReshapeInfo, chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n\n  if (isNullish(datasetReshapeInfo[0].foldInfoList?.[1])) {\n    return result\n  }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n  const unfoldInfo = datasetReshapeInfo[0].unfoldInfo as UnfoldInfo\n  result.tooltip = {\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        foldInfoList[1],\n        unfoldInfo,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, measures, foldInfoList[1], unfoldInfo),\n    },\n  }\n  return result\n}\n\nexport const tooltipDualAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n  }\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const barStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'bar') {\n      return pipe(spec, context) as IBarChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const pointStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'line' || spec.type === 'area') {\n      return pipe(spec, context) as ILineChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const lineStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'line') {\n      return pipe(spec, context) as ILineChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const areaStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'area') {\n      return pipe(spec, context) as IAreaChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { AXIS_LABEL_SPACE, LINEAR_AXIS_INNER_OFFSET_TOP } from '../../../../utils/constant'\nimport { createNumFormatter } from '../../../../utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { createLinearFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\n\nexport const yLinearPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo, encoding, measures, dimensions } = advancedVSeed\n  const { index, id: reshapeInfoId, foldInfoList } = datasetReshapeInfo[0]\n  // TODO: default config missing\n  const primaryYAxis = advancedVSeed.config?.[chartType as 'dualAxis']?.primaryYAxis as YLinearAxis | YLinearAxis[]\n  const yAxisConfig = Array.isArray(primaryYAxis) ? primaryYAxis[index] || primaryYAxis[0] : primaryYAxis\n  const alignTicks = advancedVSeed.config?.[chartType as 'dualAxis']?.alignTicks as boolean | boolean[]\n  const alignTicksConfig = Array.isArray(alignTicks) ? alignTicks[index] || alignTicks[0] : alignTicks\n\n  if (isNullish(foldInfoList?.[0])) {\n    return result\n  }\n\n  const isEmptySecondary = isEmpty(foldInfoList?.[0].foldMap)\n\n  const id = `${reshapeInfoId}-primary-axis`\n  const seriesIds = [`${reshapeInfoId}-primary-series`, `${reshapeInfoId}-secondary-series`]\n  const seriesId = alignTicksConfig ? seriesIds : seriesIds[0]\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n\n    autoFormat,\n    numFormat = {},\n  } = yAxisConfig ?? {}\n\n  const formatter = createNumFormatter(numFormat)\n\n  const linearAxis = {\n    visible: isEmptySecondary ? false : visible,\n    id,\n    seriesId,\n\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient: 'left',\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    max,\n    min,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod: (value: string) => {\n        return createLinearFormat(value, autoFormat, numFormat, formatter)\n      },\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    innerOffset: {\n      top: LINEAR_AXIS_INNER_OFFSET_TOP,\n      // bottom: LINEAR_AXIS_INNER_OFFSET_TOP,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { AXIS_LABEL_SPACE, LINEAR_AXIS_INNER_OFFSET_TOP } from '../../../../utils/constant'\nimport { createNumFormatter } from '../../../../utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { createLinearFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\n\nexport const yLinearSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo, measures, dimensions, encoding } = advancedVSeed\n  const { index, id: reshapeInfoId, foldInfoList } = datasetReshapeInfo[0]\n  // TODO: default config missing\n  const secondaryYAxis = advancedVSeed.config?.[chartType as 'dualAxis']?.secondaryYAxis as YLinearAxis | YLinearAxis[]\n  const yAxisConfig = Array.isArray(secondaryYAxis) ? secondaryYAxis[index] || secondaryYAxis[0] : secondaryYAxis\n  const alignTicks = advancedVSeed.config?.[chartType as 'dualAxis']?.alignTicks as boolean | boolean[]\n  const alignTicksConfig = Array.isArray(alignTicks) ? alignTicks[index] || alignTicks[0] : alignTicks\n\n  if (isNullish(foldInfoList?.[1])) {\n    return result\n  }\n\n  const isEmptySecondary = isEmpty(foldInfoList?.[1].foldMap)\n  const onlySecondary = isEmpty(foldInfoList?.[0].foldMap) && !isEmptySecondary\n\n  const sync = {\n    axisId: `${reshapeInfoId}-primary-axis`,\n    zeroAlign: true,\n  }\n\n  const id = `${reshapeInfoId}-secondary-axis`\n  const seriesIds = [`${reshapeInfoId}-primary-series`, `${reshapeInfoId}-secondary-series`]\n  const seriesId = alignTicksConfig ? seriesIds : seriesIds[1]\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n    numFormat = {},\n    autoFormat,\n  } = yAxisConfig ?? {}\n\n  const formatter = createNumFormatter(numFormat)\n\n  const linearAxis = {\n    visible: isEmptySecondary ? false : visible,\n    id,\n    seriesId,\n    sync,\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient: 'right',\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    max,\n    min,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod: (value: string) => {\n        return createLinearFormat(value, autoFormat, numFormat, formatter)\n      },\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: onlySecondary ? true : grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    innerOffset: {\n      top: LINEAR_AXIS_INNER_OFFSET_TOP,\n      // bottom: LINEAR_AXIS_INNER_OFFSET_TOP,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const linearColorForDualAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const { color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  result.color = {\n    type: 'linear',\n    range: linearColorScheme || colorScheme || [],\n    domain: [\n      {\n        dataId: `${id}-primary-dataset`,\n        fields: [unfoldInfo.encodingColor],\n      },\n      {\n        dataId: `${id}-secondary-dataset`,\n        fields: [unfoldInfo.encodingColor],\n      },\n    ],\n  }\n\n  return result\n}\n","import type { IMarkPointSpec, ISpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, SpecPipelineContext, VChartSpecPipe } from 'src/types'\nimport { isSubset } from './utils'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport { MeasureId } from 'src/dataReshape/constant'\nimport { pickWithout } from '@visactor/vutils'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPointOfDualAxis: VChartSpecPipe = generateAnnotationPointPipe({\n  findSelectedDatas: (dataset, s, spec: ISpec, context: SpecPipelineContext) => {\n    return dataset.reduce((res: Datum[], d: Datum) => {\n      const { advancedVSeed } = context\n      const allMeasureIds = findAllMeasures(advancedVSeed.reshapeMeasures ?? advancedVSeed.measures).map((m) => m.id)\n      const pickedDatum = pickWithout(\n        d,\n        allMeasureIds.filter((id) => id !== d[MeasureId]),\n      )\n\n      if (selector(pickedDatum, s)) {\n        res.push(pickedDatum)\n      }\n\n      return res\n    }, [])\n  },\n  generateMarkPoint: (datum: Datum, spec: ISpec, context: SpecPipelineContext) => {\n    const { advancedVSeed } = context\n    const allMeasureIds = findAllMeasures(advancedVSeed.reshapeMeasures ?? advancedVSeed.measures).map((m) => m.id)\n    return spec.series?.map((s: any, index: number) => {\n      return {\n        relativeSeriesIndex: index,\n        coordinate: (data: Datum[]) => {\n          return data.find((item) => {\n            return isSubset(\n              datum,\n              item,\n              allMeasureIds.filter((id) => id !== item[MeasureId]),\n            )\n          })\n        },\n      } as IMarkPointSpec\n    })\n  },\n})\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  xBand,\n  backgroundColor,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  pointStyle,\n  lineStyle,\n  pointStateDimensionHover,\n  progressive,\n  datasetPrimary,\n  datasetSecondary,\n  areaStyle,\n  barStyle,\n  verticalCrosshairRect,\n  yLinearSecondary,\n  initDualAxisPrimary,\n  initDualAxisSecondary,\n  labelPrimary,\n  labelSecondary,\n  tooltipPrimary,\n  tooltipSecondary,\n  yLinearPrimary,\n  dualChartTypePrimary,\n  dualChartTypeSecondary,\n  seriesDualAxis,\n  series,\n  colorBarStyleFill,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  pivotColorLegend,\n  linearColorForDualAxis,\n  annotationAreaBand,\n  barMaxWidth,\n  barGapInGroup,\n  stackCornerRadius,\n  pivotTitle,\n  pivotAxisStyle,\n  dimensionLinkage,\n  annotationPointOfDualAxis,\n  barStyleFilter,\n  pointStyleFilter,\n  lineStyleFilter,\n  areaStyleFilter,\n  tooltipDualAxis,\n} from '../pipes'\n\nconst dualAxis: VChartSpecPipeline = [\n  seriesDualAxis(\n    [\n      initDualAxisPrimary,\n      dualChartTypePrimary,\n      datasetPrimary,\n      labelPrimary,\n      tooltipPrimary,\n      progressive,\n\n      barMaxWidth,\n      barGapInGroup,\n      stackCornerRadius,\n\n      barStyleFilter(colorBarStyleFill(barStyle)),\n      pointStyleFilter(colorPointStyleFill(pointStyle)),\n      pointStyleFilter(pointStateDimensionHover),\n      lineStyleFilter(colorLineStyleFill(lineStyle)),\n      areaStyleFilter(colorAreaStyleFill(areaStyle)),\n    ],\n    [\n      initDualAxisSecondary,\n      dualChartTypeSecondary,\n      datasetSecondary,\n      labelSecondary,\n      tooltipSecondary,\n      progressive,\n\n      barMaxWidth,\n      barGapInGroup,\n      stackCornerRadius,\n\n      barStyleFilter(colorBarStyleFill(barStyle)),\n      pointStyleFilter(colorPointStyleFill(pointStyle)),\n      pointStyleFilter(pointStateDimensionHover),\n      lineStyleFilter(colorLineStyleFill(lineStyle)),\n      areaStyleFilter(colorAreaStyleFill(areaStyle)),\n    ],\n  ),\n  xBand,\n  yLinearPrimary,\n  yLinearSecondary,\n\n  colorAdapter(color, linearColorForDualAxis),\n  colorAdapter(discreteLegend, colorLegend),\n\n  backgroundColor,\n\n  verticalCrosshairRect,\n  annotationPointOfDualAxis,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n\n  tooltipDualAxis,\n]\n\nconst pivotDualAxis: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    series(\n      [\n        initDualAxisPrimary,\n        dualChartTypePrimary,\n        datasetPrimary,\n        labelPrimary,\n        tooltipPrimary,\n        progressive,\n\n        stackCornerRadius,\n        barMaxWidth,\n        barGapInGroup,\n\n        colorBarStyleFill(barStyle),\n        colorPointStyleFill(pointStyle),\n        pointStateDimensionHover,\n        colorLineStyleFill(lineStyle),\n        colorAreaStyleFill(areaStyle),\n      ],\n      [\n        initDualAxisSecondary,\n        dualChartTypeSecondary,\n        datasetSecondary,\n        labelSecondary,\n        tooltipSecondary,\n        progressive,\n\n        stackCornerRadius,\n        barMaxWidth,\n        barGapInGroup,\n\n        colorBarStyleFill(barStyle),\n        colorPointStyleFill(pointStyle),\n        pointStateDimensionHover,\n        colorLineStyleFill(lineStyle),\n        colorAreaStyleFill(areaStyle),\n      ],\n    ),\n    xBand,\n    yLinearPrimary,\n    pivotAxisStyle(yLinearSecondary),\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    verticalCrosshairRect,\n    annotationPointOfDualAxis,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n\n    tooltipDualAxis,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const dualAxisSpecPipeline = [pivotAdapter(dualAxis, pivotDualAxis)]\n","import { dualAxisAdvancedPipeline, dualAxisSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerDualAxis = () => {\n  Builder._advancedPipelineMap['dualAxis'] = dualAxisAdvancedPipeline\n  Builder._specPipelineMap['dualAxis'] = dualAxisSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForPie: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForPie: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n\n  if (isMultiMeasure) {\n    encoding.color = uniqueDimIds.slice(0) // 所有维度都用于color映射，包括MeasureId\n  } else {\n    encoding.color = uniqueDimIds.filter((d: string) => d !== MeasureId) // 除了MeasureId之外的所有维度用于color映射\n  }\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.angle = unique(measures.filter((item) => item.encoding === 'angle' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // angle\n  encoding.angle = unique(measures.filter((item) => item.encoding === 'angle' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  pieConfig,\n  annotation,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForPie,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForPie,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const pieAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForPie],\n    [buildMeasures, encodingForPie, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  pieConfig,\n  theme,\n  annotation,\n]\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'pie'\n  result.outerRadius = 0.8\n  result.innerRadius = 0\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorPieStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IPieChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.pie?.style) {\n        result.pie.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const pieStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { dataset } = advancedVSeed\n  const showStroke = dataset.length <= 30\n  const config = advancedVSeed.config?.[chartType as 'pie']\n\n  const result = {\n    ...spec,\n    pie: {\n      style: {\n        stroke: config?.backgroundColor ?? '#ffffff',\n        lineWidth: showStroke ? 1 : 0,\n      },\n    },\n  } as Required<IPieChartSpec>\n\n  if ((spec as IPieChartSpec).outerRadius) {\n    result.pie.state = {\n      hover: {\n        outerRadius: ((spec as IPieChartSpec).outerRadius as number) * 1.1,\n      },\n    }\n  }\n\n  if (config?.cornerRadius) {\n    result.pie.style!.cornerRadius = config.cornerRadius\n  }\n\n  return result\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, PieLabel, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: PieLabel }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as IPieChartSpec['label']\n  if (label.labelLayout) {\n    ;(result.label as any)!.layout = {\n      align: label.labelLayout,\n    }\n  }\n  return result\n}\n","import type { PivotChartSpecPipe } from 'src/types'\n\nexport const pivotHideIndicatorName: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  return {\n    ...spec,\n    hideIndicatorName: datasetReshapeInfo.length <= 1,\n  }\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const addRegionPadding: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IPieChartSpec\n\n  if (result.region && result.region.length > 0) {\n    result.region[0].padding = 10\n  }\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  color,\n  datasetXY,\n  datasetPivot,\n  initPie,\n  initPivot,\n  discreteLegend,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotDiscreteLegend,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  progressive,\n  pieStyle,\n  colorPieStyleFill,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  pivotColorLegend,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst pie: VChartSpecPipeline = [\n  initPie,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  colorPieStyleFill(pieStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotPie: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initPie,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    colorPieStyleFill(pieStyle),\n    labelPie,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    addRegionPadding,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const pieSpecPipeline = [pivotAdapter(pie, pivotPie)]\n","import { pieAdvancedPipeline, pieSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerPie = () => {\n  Builder._advancedPipelineMap['pie'] = pieAdvancedPipeline\n  Builder._specPipelineMap['pie'] = pieSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  donutConfig,\n  encodingForPie,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForPie,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const donutAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForPie],\n    [buildMeasures, encodingForPie, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  donutConfig,\n  theme,\n  annotation,\n]\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initDonut: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'pie'\n  result.outerRadius = 0.8\n  result.innerRadius = result.outerRadius * 0.8\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  color,\n  datasetXY,\n  datasetPivot,\n  initDonut,\n  initPivot,\n  discreteLegend,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotDiscreteLegend,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  pivotColorLegend,\n  pieStyle,\n  colorPieStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst donut: VChartSpecPipeline = [\n  initDonut,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  labelPie,\n  colorPieStyleFill(pieStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotDonut: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initDonut,\n    addRegionPadding,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    labelPie,\n    colorPieStyleFill(pieStyle),\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const donutSpecPipeline = [pivotAdapter(donut, pivotDonut)]\n","import { donutAdvancedPipeline, donutSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerDonut = () => {\n  Builder._advancedPipelineMap['donut'] = donutAdvancedPipeline\n  Builder._specPipelineMap['donut'] = donutSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForRose: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForRose: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n  // encoding for modify in place\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.angle = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // angle\n  encoding.angle = unique(dimensions.filter((item) => item.encoding === 'angle').map((item) => item.id))\n  if (encoding.angle.length === 0) {\n    encoding.angle = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  roseConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  encodingForRose,\n  defaultEncodingForRose,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const roseAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForRose, buildMeasures],\n    [encodingForRose, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  roseConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initRose: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRoseChartSpec\n  const { advancedVSeed } = context\n  const { dataset, datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'rose'\n\n  result.angleField = unfoldInfo.encodingAngle\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.valueField = foldInfo.measureValue\n  result.padding = 0\n  result.outerRadius = 0.9\n  result.innerRadius = 0\n\n  const hasNegativeValue = dataset.flat().find((d) => d[foldInfo.measureValue] < 0)\n  if (hasNegativeValue) {\n    result.innerRadius = 0.05\n  }\n\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radiusAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    type: 'linear',\n    orient: 'radius',\n    visible: false,\n    zero: true,\n    nice: false,\n  })\n\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport { isLinearColor } from './colorAdapter'\nimport type { VChartSpecPipe } from 'src/types/pipeline/spec/spec'\n\nexport const colorRoseStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IRoseChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.rose?.style) {\n        result.rose.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const roseStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const showStroke = dataset.length <= 30\n\n  const result = {\n    ...spec,\n    rose: {\n      style: {},\n    },\n  } as Required<IRoseChartSpec>\n\n  return {\n    ...result,\n    rose: {\n      style: {\n        stroke: '#ffffff',\n        lineWidth: showStroke ? 1 : 0,\n      },\n      state: {\n        hover: {\n          lineWidth: 1,\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  initRose,\n  radiusAxis,\n  progressive,\n  linearColor,\n  colorAdapter,\n  pivotColorLegend,\n  colorLegend,\n  roseStyle,\n  colorRoseStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst rose: VChartSpecPipeline = [\n  initRose,\n  stackCornerRadius,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radiusAxis,\n  verticalCrosshairRect,\n  colorRoseStyleFill(roseStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n]\n\nconst pivotRose: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRose,\n    addRegionPadding,\n    stackCornerRadius,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radiusAxis,\n    verticalCrosshairRect,\n    colorRoseStyleFill(roseStyle),\n    labelPie,\n    tooltip,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const roseSpecPipeline = [pivotAdapter(rose, pivotRose)]\n","import { roseAdvancedPipeline, roseSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRose = () => {\n  Builder._advancedPipelineMap['rose'] = roseAdvancedPipeline\n  Builder._specPipelineMap['rose'] = roseSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  roseParallelConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  encodingForRose,\n  defaultEncodingForRose,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const roseParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForRose, buildMeasures],\n    [encodingForRose, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  roseParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initRoseParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRoseChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, dataset, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.angle, encoding.color)\n\n  result.type = 'rose'\n  result.angleField = [unfoldInfo.encodingAngle]\n\n  if (!sameDimensionsMode) {\n    result.angleField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.radius?.length === 1) {\n      result.angleField.pop()\n    }\n  }\n\n  result.valueField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n\n  result.outerRadius = 0.9\n  result.innerRadius = 0\n\n  const hasNegativeValue = dataset.flat().find((d) => d[foldInfo.measureValue] < 0)\n  if (hasNegativeValue) {\n    result.innerRadius = 0.05\n  }\n\n  result.rose = {\n    style: {\n      stroke: '#ffffff',\n      lineWidth: 1,\n    },\n    state: {\n      hover: {\n        lineWidth: 1,\n        fillOpacity: 0.6,\n      },\n    },\n  }\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotIndicators,\n  initPivot,\n  datasetPivot,\n  pivotAdapter,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  initRoseParallel,\n  radiusAxis,\n  progressive,\n  pivotColorLegend,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  roseStyle,\n  colorRoseStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst roseParallel: VChartSpecPipeline = [\n  initRoseParallel,\n  stackCornerRadius,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radiusAxis,\n  colorRoseStyleFill(roseStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n  verticalCrosshairRect,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotRoseParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRoseParallel,\n    addRegionPadding,\n    stackCornerRadius,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radiusAxis,\n    verticalCrosshairRect,\n    colorRoseStyleFill(roseStyle),\n    labelPie,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const roseParallelSpecPipeline = [pivotAdapter(roseParallel, pivotRoseParallel)]\n","import { roseParallelAdvancedPipeline, roseParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRoseParallel = () => {\n  Builder._advancedPipelineMap['roseParallel'] = roseParallelAdvancedPipeline\n  Builder._specPipelineMap['roseParallel'] = roseParallelSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForRadar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForRadar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.angle = uniqueDimIds.slice(0, 1)\n  encoding.color = uniqueDimIds.slice(1)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.detail = [] // 雷达图暂不支持细分\n  encoding.label = []\n  encoding.row = []\n  encoding.column = []\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // angle\n  encoding.angle = unique(dimensions.filter((item) => item.encoding === 'angle').map((item) => item.id))\n  if (encoding.angle.length === 0) {\n    encoding.angle = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = []\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // radius\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortLegend,\n  radarConfig,\n  encodingForRadar,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForRadar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const radarAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForRadar, buildMeasures],\n    [encodingForRadar, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  // sortXBandAxis,\n  sortLegend,\n  radarConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IRadarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initRadar: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRadarChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'radar'\n  result.angleField = unfoldInfo.encodingAngle\n  result.radiusField = foldInfo.measureValue\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radarAngleAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    orient: 'angle',\n    visible: true,\n    zero: true,\n    nice: true,\n    grid: {\n      visible: true,\n    },\n    domainLine: {\n      visible: true,\n    },\n    tick: {\n      visible: true,\n    },\n  })\n\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radarRadiusAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    orient: 'radius',\n    visible: true,\n    zero: true,\n    nice: true,\n    grid: {\n      visible: true,\n    },\n    tick: {\n      visible: true,\n    },\n    label: {\n      visible: true,\n    },\n    domainLine: {\n      visible: true,\n    },\n  })\n\n  return result\n}\n","import type { PivotChartSpecPipeline, SpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  pointStyle,\n  lineStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  initRadar,\n  areaStyle,\n  radarAngleAxis,\n  radarRadiusAxis,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotColorLegend,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst radar: VChartSpecPipeline = [\n  initRadar,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radarAngleAxis,\n  radarRadiusAxis,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  // annotationPoint,\n  // annotationVerticalLine,\n  // annotationHorizontalLine,\n  // annotationArea,\n]\n\nconst pivotRadar: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRadar,\n    addRegionPadding,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radarAngleAxis,\n    radarRadiusAxis,\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    // annotationPoint,\n    // annotationVerticalLine,\n    // annotationHorizontalLine,\n    // annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const radarSpecPipeline: SpecPipeline = [pivotAdapter(radar, pivotRadar)]\n","import { radarAdvancedPipeline, radarSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRadar = () => {\n  Builder._advancedPipelineMap['radar'] = radarAdvancedPipeline\n  Builder._specPipelineMap['radar'] = radarSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForFunnel: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForFunnel: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.color = uniqueDimIds.slice(0) // 第0个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // size\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  funnelConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForFunnel,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForFunnel,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const funnelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForFunnel, buildMeasures],\n    [encodingForFunnel, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  funnelConfig,\n  theme,\n  annotation,\n]\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initFunnel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IFunnelChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'funnel'\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.isTransform = true\n  result.shape = 'rect'\n  result.maxSize = '75%'\n  result.minSize = '10%'\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorFunnelStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IFunnelChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.funnel?.style) {\n        result.funnel.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const funnelStyle: VChartSpecPipe = (spec) => {\n  const result = {\n    ...spec,\n    funnel: {\n      style: {},\n    },\n  } as IFunnelChartSpec\n\n  return {\n    ...result,\n    funnel: {\n      style: {\n        cornerRadius: 0,\n      },\n      state: {\n        hover: {\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  }\n}\n","import type { VChartSpecPipe } from 'src/types'\n\nexport const funnelTransformStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const config = advancedVSeed.config?.[chartType as 'funnel']?.transform\n\n  return {\n    ...spec,\n    transform: {\n      style: {\n        fill: config?.backgroundColor,\n      },\n    },\n    transformLabel: {\n      visible: true,\n      style: {\n        fill: config?.textColor,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  datasetXY,\n  datasetPivot,\n  initPivot,\n  label,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  initFunnel,\n  discreteLegend,\n  color,\n  funnelStyle,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorFunnelStyleFill,\n  pivotDiscreteLegend,\n  pivotColorLegend,\n  pivotHideIndicatorName,\n  funnelTransformStyle,\n  pivotTitle,\n} from '../pipes'\n\nconst funnel: VChartSpecPipeline = [\n  initFunnel,\n  backgroundColor,\n  datasetXY,\n  colorAdapter(color, linearColor),\n  label,\n  colorAdapter(discreteLegend, colorLegend),\n  colorFunnelStyleFill(funnelStyle),\n  funnelTransformStyle,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotFunnel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initFunnel,\n    backgroundColor,\n    datasetXY,\n    colorAdapter(color, linearColor),\n    label,\n    tooltip,\n    colorFunnelStyleFill(funnelStyle),\n    funnelTransformStyle,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const funnelSpecPipeline = [pivotAdapter(funnel, pivotFunnel)]\n","import { funnelAdvancedPipeline, funnelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerFunnel = () => {\n  Builder._advancedPipelineMap['funnel'] = funnelAdvancedPipeline\n  Builder._specPipelineMap['funnel'] = funnelSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForHeatmap: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForHeatmap: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.y = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第2个维度放置于Y轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  // x\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n  // y\n  encoding.y = unique(dimensions.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  if (encoding.y.length === 0) {\n    if (dimensions.length > 1) {\n      encoding.y = dimensions.slice(1).map((item) => item.id)\n    } else {\n      encoding.y = dimensions.slice(0).map((item) => item.id)\n    }\n  }\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  const colorDims = unique(\n    measures.filter((item) => item.encoding === 'color' || !item.encoding).map((item) => item.id),\n  )\n  if (colorDims.length > 0) {\n    encoding.color = [colorDims[0]]\n  }\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  heatmapConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForHeatmap,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForHeatmap,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const heatmapAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForHeatmap, buildMeasures],\n    [encodingForHeatmap, buildMeasures, pickMeasuresForReshape(['tooltip', 'label']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  heatmapConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { VChartSpecPipe } from 'src/types'\nimport { colorLegend } from './colorLegend'\nimport type { Datum, IHeatmapChartSpec } from '@visactor/vchart'\nimport { DATUM_HIDE_KEY } from 'src/pipeline/utils/constant'\n\nexport const heatmapColorLegend: VChartSpecPipe = (spec, context) => {\n  const result = colorLegend(spec, context) as IHeatmapChartSpec\n\n  if (result.legends) {\n    ;(result.legends as any).customFilter = (data: Datum[], range: number[], key: string) => {\n      const min = Math.min(range[0], range[1])\n      const max = Math.max(range[0], range[1])\n      return (data ?? []).map((entry: Datum) => {\n        const val = entry[key]\n        const isHide = val - min < -1e-6 || val - max > 1e-6\n\n        entry[DATUM_HIDE_KEY] = isHide\n\n        return entry\n      })\n    }\n  }\n\n  return result\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorCellStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IHeatmapChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.cell?.style) {\n        result.cell.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport { DATUM_HIDE_KEY } from 'src/pipeline/utils/constant'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const cellStyle: VChartSpecPipe = (spec, context) => {\n  const result = {\n    ...spec,\n    cell: {\n      style: {},\n    },\n  } as IHeatmapChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const cell = advancedVSeed.config?.[chartType as 'heatmap']?.cell\n\n  return {\n    ...result,\n    cell: {\n      style: {\n        visible: (datum: any) => {\n          return datum?.[DATUM_HIDE_KEY] !== true\n        },\n        shape: 'rect',\n        stroke: cell?.stroke,\n        lineWidth: cell?.lineWidth ?? 1,\n      },\n    },\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Locale, Measures, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\n\nexport const tooltipHeatmap: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, chartType, locale, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const { foldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, findAllMeasures(vseed.measures), locale, foldInfo),\n    },\n    dimension: {\n      visible: false,\n    },\n  }\n  return result\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures,\n  locale: Locale,\n  foldInfo: FoldInfo,\n) => {\n  const dims = uniqueBy(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n  const meas = uniqueBy(\n    measures.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const foldMeaContent = [foldInfo].map((foldInfo) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (v: unknown) => {\n        const { measureId, foldMap } = foldInfo\n        const datum = v as Datum\n        const id = datum[measureId] as string\n        return foldMap[id] || id\n      },\n      value: (v: unknown) => {\n        const { measureId, measureValue } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    }\n  })\n  return [...dimContent, ...foldMeaContent, ...meaContent]\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initHeatmap: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHeatmapChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'heatmap'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = unfoldInfo.encodingY\n  result.seriesField = unfoldInfo.encodingColorId\n  result.valueField = foldInfo.measureValue\n  result.padding = 0\n  result.axes = [\n    {\n      type: 'band',\n      orient: 'left',\n      bandPadding: 0,\n    },\n    {\n      type: 'band',\n      orient: 'bottom',\n      bandPadding: 0,\n    },\n  ]\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  label,\n  tooltipHeatmap,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  discreteLegend,\n  color,\n  colorAdapter,\n  linearColor,\n  heatmapColorLegend,\n  cellStyle,\n  colorCellStyleFill,\n  pivotDiscreteLegend,\n  pivotColorLegend,\n  pivotTitle,\n  pivotAxisStyle,\n} from '../pipes'\nimport { initHeatmap } from '../pipes/init/heatmap'\n\nconst heatmap: VChartSpecPipeline = [\n  initHeatmap,\n  backgroundColor,\n  datasetXY,\n  colorAdapter(color, linearColor),\n  label,\n  colorAdapter(discreteLegend, heatmapColorLegend),\n  colorCellStyleFill(cellStyle),\n  tooltipHeatmap,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotHeatmap: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    pivotAxisStyle(initHeatmap),\n    backgroundColor,\n    datasetXY,\n    colorAdapter(color, linearColor),\n    label,\n    tooltipHeatmap,\n    colorCellStyleFill(cellStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const heatmapSpecPipeline = [pivotAdapter(heatmap, pivotHeatmap)]\n","import { heatmapAdvancedPipeline, heatmapSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerHeatmap = () => {\n  Builder._advancedPipelineMap['heatmap'] = heatmapAdvancedPipeline\n  Builder._specPipelineMap['heatmap'] = heatmapSpecPipeline\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const boxplotConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'whiskers',\n    'boxMaxWidth',\n    'boxGapInGroup',\n\n    'dimensionLinkage',\n  ]) as Config['boxPlot']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForBoxplot: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForBoxplot: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  if ((!encoding.value || encoding.value.length <= 1) && encoding.color && encoding.color.length > 1) {\n    encoding.color = encoding.color.filter((c) => c !== MeasureId)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.q1 = unique(measures.filter((item) => item.encoding === 'q1').map((item) => item.id))\n  encoding.median = unique(measures.filter((item) => item.encoding === 'median').map((item) => item.id))\n  encoding.q3 = unique(measures.filter((item) => item.encoding === 'q3').map((item) => item.id))\n  encoding.min = unique(measures.filter((item) => item.encoding === 'min').map((item) => item.id))\n  encoding.max = unique(measures.filter((item) => item.encoding === 'max').map((item) => item.id))\n  encoding.outliers = unique(measures.filter((item) => item.encoding === 'outliers').map((item) => item.id))\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import {\n  FoldMeasureId,\n  FoldMeasureName,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  Separator,\n  unfoldDimensions,\n  UpperWhisker,\n} from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, ColumnParallel, Dataset, Encoding } from 'src/types'\nimport { boxplot } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\n\nexport const reshapeWithBoxplotEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item) => item.id)\n\n  const whiskers = config?.[chartType as 'boxPlot']?.whiskers\n\n  let newDatasets: any[] = []\n  let foldInfo: any = {}\n  let unfoldInfo: any = {}\n\n  const allMeasures = findAllMeasures(measures)\n\n  if (encoding.value?.length) {\n    const boxPlotDataList: Dataset = []\n    encoding.value.forEach((f) => {\n      const m = allMeasures.find((m) => m.id === f)\n      const boxPlotData = boxplot(dataset, {\n        field: f,\n        groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n        whiskers,\n        outputNames: {\n          q1: Q1MeasureValue,\n          q3: Q3MeasureValue,\n          lowerWhisker: LowerWhisker,\n          upperWhisker: UpperWhisker,\n          median: MedianMeasureId,\n          outliers: OutliersMeasureId,\n        },\n      }) as Dataset\n\n      boxPlotData.forEach((datum) => {\n        datum[FoldMeasureId] = f\n        datum[FoldMeasureName] = m?.alias ?? f\n      })\n      boxPlotDataList.push(...boxPlotData)\n    })\n    const res = unfoldDimensions(boxPlotDataList, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((d) => {\n      newDatasets.push(d)\n    })\n    unfoldInfo = res.unfoldInfo\n  } else if (\n    encoding.q1?.length &&\n    encoding.q3?.length &&\n    encoding.min?.length &&\n    encoding.max?.length &&\n    encoding.median?.length\n  ) {\n    const res = unfoldDimensions(dataset, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((datum) => {\n      datum[UpperWhisker] = datum[encoding.max![0]]\n      datum[LowerWhisker] = datum[encoding.min![0]]\n      datum[Q1MeasureValue] = datum[encoding.q1![0]]\n      datum[Q3MeasureValue] = datum[encoding.q3![0]]\n      datum[MedianMeasureId] = datum[encoding.median![0]]\n    })\n\n    newDatasets = res.dataset\n    foldInfo = {}\n    unfoldInfo = res.unfoldInfo\n  }\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n    dimensions,\n    measures,\n  }\n}\n","import { boxplot } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport {\n  FoldMeasureId,\n  FoldMeasureName,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  Separator,\n  unfoldDimensions,\n  UpperWhisker,\n} from 'src/dataReshape'\nimport type {\n  AdvancedPipe,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Dimension,\n  Encoding,\n  MeasureGroup,\n} from 'src/types'\n\nexport const pivotReshapeWithBoxplotEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'boxPlot']\n  const whiskers = chartConfig?.whiskers\n\n  const measureGroups: MeasureGroup[] = []\n  if (measures) {\n    measures.forEach((measure: MeasureGroup) => {\n      if (measure.children && measure.children.length > 0) {\n        measureGroups.push(measure)\n      }\n    })\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measureGroup, index) => {\n    const subMeasures = measureGroup.children\n    if (!subMeasures) {\n      return\n    }\n    const groupId = measureGroup.id\n    let newDatasets: any[] = []\n    let foldInfo: any = {}\n    let unfoldInfo: any = {}\n    const validEncodingIds = (encoding.value || []).filter((id) => subMeasures.find((field) => field.id === id))\n\n    if (validEncodingIds.length) {\n      const boxPlotDataList: Dataset = []\n      validEncodingIds.forEach((f) => {\n        const m = subMeasures.find((m) => m.id === f)\n        const boxPlotData = boxplot(dataset, {\n          field: f,\n          groupField: [\n            ...(encoding.x ?? []),\n            ...(encoding.color ?? []),\n            ...rowColumnFields.map((item: Dimension) => item.id),\n          ] as string[],\n          whiskers,\n          outputNames: {\n            q1: Q1MeasureValue,\n            q3: Q3MeasureValue,\n            lowerWhisker: LowerWhisker,\n            upperWhisker: UpperWhisker,\n            median: MedianMeasureId,\n            outliers: OutliersMeasureId,\n          },\n        }) as Dataset\n\n        boxPlotData.forEach((datum) => {\n          datum[FoldMeasureId] = f\n          datum[FoldMeasureName] = m?.alias ?? f\n        })\n\n        boxPlotDataList.push(...boxPlotData)\n      })\n      const res = unfoldDimensions(boxPlotDataList, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((d) => {\n        newDatasets.push(d)\n      })\n      unfoldInfo = res.unfoldInfo\n    } else if (\n      encoding.q1?.length &&\n      encoding.q3?.length &&\n      encoding.min?.length &&\n      encoding.max?.length &&\n      encoding.median?.length\n    ) {\n      const res = unfoldDimensions(dataset, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((datum) => {\n        datum[UpperWhisker] = datum[encoding.max![0]]\n        datum[LowerWhisker] = datum[encoding.min![0]]\n        datum[Q1MeasureValue] = datum[encoding.q1![0]]\n        datum[Q3MeasureValue] = datum[encoding.q3![0]]\n        datum[MedianMeasureId] = datum[encoding.median![0]]\n      })\n\n      newDatasets = res.dataset\n      foldInfo = {}\n      unfoldInfo = res.unfoldInfo\n    }\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newDatasets)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  sortLegend,\n  pivotReshapeWithBoxplotEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  defaultEncodingForBoxplot,\n  encodingForBoxplot,\n  reshapeWithBoxplotEncoding,\n  boxplotConfig,\n} from '../pipes'\n\nexport const boxplotAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  boxplotConfig,\n\n  encodingAdapter(\n    [defaultEncodingForBoxplot, buildMeasures],\n    [\n      encodingForBoxplot,\n      buildMeasures,\n      pickMeasuresForReshape(['tooltip', 'label', 'color']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithBoxplotEncoding], [pivotReshapeWithBoxplotEncoding]),\n\n  sortLegend,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isDeepEqual } from 'remeda'\nimport {\n  LowerWhisker,\n  MeasureId,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  UpperWhisker,\n} from 'src/dataReshape/constant'\n\nexport const initBoxplot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBoxPlotChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'boxPlot'\n  // 默认应该是盒须的位置\n  result.minField = LowerWhisker\n  result.maxField = UpperWhisker\n  result.q1Field = Q1MeasureValue\n  result.medianField = MedianMeasureId\n  result.q3Field = Q3MeasureValue\n  result.outliersField = OutliersMeasureId\n  result.xField = [unfoldInfo.encodingX]\n  result.seriesField = unfoldInfo.encodingColorId\n\n  const sameDimensionsMode = isDeepEqual(encoding.x, encoding.color)\n\n  if (!sameDimensionsMode) {\n    result.xField.push(unfoldInfo.encodingColor)\n\n    if (encoding.color?.[0] === MeasureId && encoding.value?.length === 1) {\n      result.xField.pop()\n    }\n  }\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import { isNullish } from 'remeda'\nimport type { BoxMaxWidth, VChartSpecPipe } from 'src/types'\n\nexport const boxMaxWidth: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const boxMaxWidth = advancedVSeed.config?.[chartType as 'boxPlot']?.boxMaxWidth as BoxMaxWidth\n\n  if (!isNullish(boxMaxWidth)) {\n    return {\n      ...spec,\n      boxMaxWidth,\n    }\n  }\n\n  return spec\n}\n","import { isNullish } from 'remeda'\nimport type { BoxGapInGroup, VChartSpecPipe } from 'src/types'\n\nexport const boxGapInGroup: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const boxGapInGroup = advancedVSeed.config?.[chartType as 'boxPlot']?.boxGapInGroup as BoxGapInGroup\n\n  if (!isNullish(boxGapInGroup)) {\n    return {\n      ...spec,\n      boxGapInGroup,\n    }\n  }\n\n  return spec\n}\n","import { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\nimport type { ISpec } from '@visactor/vchart'\n\nexport const datasetBoxplot: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { id } = datasetReshapeInfo[0]\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as unknown as ISpec\n}\n","import { pipe, uniqueBy, isNullish } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures } from '../../../../utils'\nimport type { Dimension, Dimensions, Encoding, VChartSpecPipe, Tooltip } from 'src/types'\nimport type { Datum, ISpec, ITooltipLinePattern, ITooltipLineActual, TooltipData } from '@visactor/vchart'\nimport {\n  ColorEncoding,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  UpperWhisker,\n  XEncoding,\n} from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { intl } from 'src/i18n'\n\nconst boxPlotMeasureKeys = [UpperWhisker, Q3MeasureValue, MedianMeasureId, Q1MeasureValue, LowerWhisker]\nconst VCHART_OUTLIER_KEY = '__VCHART_BOX_PLOT_OUTLIER_VALUE'\n\nexport const tooltipBoxplot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const meas = findAllMeasures(vseed.measures)\n  const valueMeasure = meas.find((item) => item.encoding === 'value' || isNullish(item.encoding))\n  const defaultFormatter = valueMeasure ? createFormatterByMeasure(valueMeasure) : (v: unknown) => v\n  const measureAliasMapping: Record<string, string> = {\n    [OutliersMeasureId]: intl.i18n`异常点`,\n    [UpperWhisker]: intl.i18n`上边界`,\n    [Q3MeasureValue]: intl.i18n`上四分位数`,\n    [MedianMeasureId]: intl.i18n`中位数`,\n    [Q1MeasureValue]: intl.i18n`下四分位数`,\n    [LowerWhisker]: intl.i18n`下边界`,\n  }\n\n  result.tooltip = {\n    visible: enable,\n    style: getTooltipStyle(tooltip),\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, encoding as Encoding),\n      updateContent: (prev: ITooltipLineActual[] | undefined, data: TooltipData | undefined) => {\n        const datum = (data as any)?.[0]?.datum?.[0]\n\n        if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n          const tooltipItems: ITooltipLineActual[] = (prev ?? []).filter(\n            (item: any) => !boxPlotMeasureKeys.includes(item.key as string),\n          )\n          const outerlierMeasure = meas.find((item) => item.id === OutliersMeasureId)\n          const formatter = outerlierMeasure ? createFormatterByMeasure(outerlierMeasure) : defaultFormatter\n\n          tooltipItems.push({\n            ...(tooltipItems[0] as any),\n            key: outerlierMeasure?.alias ?? measureAliasMapping[OutliersMeasureId],\n            value: formatter(datum?.[VCHART_OUTLIER_KEY] as number) as string,\n          } as ITooltipLineActual)\n\n          return tooltipItems\n        }\n\n        return (prev ?? []).map((entry) => {\n          if (boxPlotMeasureKeys.includes((entry as any).key as string)) {\n            const mea = meas.find((item) => item.id === (entry as any).key)\n            const formatter = mea ? createFormatterByMeasure(mea) : defaultFormatter\n\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return {\n              ...(entry as any),\n              value: formatter(datum?.[(entry as any).key] as number) as string,\n              key: mea?.alias ?? measureAliasMapping[entry?.key as string] ?? (entry as any).key,\n            }\n          }\n\n          return entry\n        }) as ITooltipLineActual[]\n      },\n    },\n    dimension: {\n      visible: false,\n    },\n  }\n  return result as unknown as ISpec\n}\n\nconst createMarkContent = (tooltip: string[], dimensions: Dimensions, encoding: Encoding) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias ?? item.id,\n    value: (datum: Datum | undefined) => {\n      if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n        if (encoding.color?.includes(item.id)) {\n          return datum?.[ColorEncoding] as string\n        }\n        if (encoding.x?.includes(item.id)) {\n          return datum?.[XEncoding] as string\n        }\n      }\n\n      return datum?.[item.id] as string\n    },\n  }))\n\n  const defaultContent = boxPlotMeasureKeys.map((key: string) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key,\n      value: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return datum[key] as string | number\n      },\n    }\n  })\n\n  return [...dimContent, defaultContent] as ITooltipLinePattern[]\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorBoxPlotStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IBoxPlotChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.boxPlot?.style) {\n        result.boxPlot.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { BoxPlotStyle, Datum, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const boxPlotStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { markStyle, config } = advancedVSeed\n  const { boxPlotStyle } = markStyle\n  const theme = config?.[vseed.chartType as 'boxPlot']?.boxPlotStyle\n\n  const result = {\n    ...spec,\n    boxPlot: {\n      style: {\n        shaftShape: 'filled-line',\n        visible: true,\n        shaftWidth: '50%',\n        stroke: theme?.boxBorderColor,\n      },\n    },\n  } as IBoxPlotChartSpec\n\n  if (isNullish(boxPlotStyle) || isEmpty(boxPlotStyle)) {\n    return result\n  }\n\n  const boxPlotStyles = (Array.isArray(boxPlotStyle) ? boxPlotStyle : [boxPlotStyle]) as BoxPlotStyle[]\n\n  const customMap = boxPlotStyles.reduce<object>((result, style, index) => {\n    const { boxColor, boxColorOpacity, boxBorderColor, boxBorderWidth = 1, boxVisible = true, boxBorderOpacity } = style\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: boxVisible,\n          fill: boxColor,\n          fillOpacity: boxColorOpacity,\n          lineWidth: boxBorderWidth,\n          stroke: boxBorderColor,\n          strokeOpacity: boxBorderOpacity,\n        },\n      },\n    }\n  }, {})\n\n  result.boxPlot!.state = {\n    ...result.boxPlot!.state,\n    ...customMap,\n  }\n\n  return result\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, OutlierStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const outlierStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { markStyle, config } = advancedVSeed\n  const { outlierStyle } = markStyle\n  const theme = config?.[vseed.chartType as 'boxPlot']?.outlierStyle\n  const result = {\n    ...spec,\n    outlier: {\n      style: {\n        fill: theme?.pointColor,\n      },\n    },\n  } as IBoxPlotChartSpec\n\n  if (isNullish(outlierStyle) || isEmpty(outlierStyle)) {\n    return result\n  }\n\n  const outlierStyles = (Array.isArray(outlierStyle) ? outlierStyle : [outlierStyle]) as OutlierStyle[]\n\n  const customMap = outlierStyles.reduce<object>((result, style, index) => {\n    const {\n      pointBorderColor,\n      pointBorderStyle,\n      pointBorderWidth = 1,\n      pointColor,\n      pointColorOpacity,\n      pointSize,\n      pointVisible = true,\n    } = style\n\n    const lineDash = pointBorderStyle === 'dashed' ? [5, 2] : pointBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: pointVisible,\n          size: pointSize,\n          fill: pointColor,\n          fillOpacity: pointColorOpacity,\n          innerBorder: {\n            stroke: pointBorderColor,\n            lineWidth: pointBorderWidth,\n            distance: (pointBorderWidth || 0) / 2,\n            lineDash: lineDash,\n          },\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    outlier: {\n      ...result.outlier,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  label,\n  tooltipBoxplot,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  stackCornerRadius,\n  boxMaxWidth,\n  boxGapInGroup,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  pivotColorLegend,\n  initBoxplot,\n  xBand,\n  yLinear,\n  verticalCrosshairRect,\n  datasetBoxplot,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  boxPlotStyle,\n  colorBoxPlotStyleFill,\n  outlierStyle,\n  discreteLegend,\n} from '../pipes'\n\nconst boxplot: VChartSpecPipeline = [\n  initBoxplot,\n  stackCornerRadius,\n  boxMaxWidth,\n  boxGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetBoxplot,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltipBoxplot,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBoxPlotStyleFill(boxPlotStyle),\n  outlierStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBoxplot: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  datasetPivot,\n  pivotIndicators([\n    initBoxplot,\n    stackCornerRadius,\n    boxMaxWidth,\n    boxGapInGroup,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetBoxplot,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltipBoxplot,\n    colorBoxPlotStyleFill(boxPlotStyle),\n    outlierStyle,\n    verticalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const boxplotSpecPipeline = [pivotAdapter(boxplot, pivotBoxplot)]\n","import { boxplotAdvancedPipeline, boxplotSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBoxPlot = () => {\n  Builder._advancedPipelineMap['boxPlot'] = boxplotAdvancedPipeline\n  Builder._specPipelineMap['boxPlot'] = boxplotSpecPipeline\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { merge } from '@visactor/vutils'\nimport { pick } from 'remeda'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config, Dimension } from 'src/types'\n\nexport const histogramConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n  const hasColorEncoding = (advancedVSeed?.dimensions || []).find((field: Dimension) => field?.encoding === 'color')\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'binCount',\n    'binStep',\n    'binValueType',\n\n    'dimensionLinkage',\n  ]) as Config['histogram']\n\n  let config = replaceNullToUndefined(pickedConfig)\n\n  if (pickedConfig?.binValueType === 'percentage') {\n    config = merge(\n      {},\n      {\n        yAxis: {\n          autoFomat: false,\n          numFormat: {\n            type: 'percent',\n            fractionDigits: 1,\n          },\n        },\n        label: {\n          autoFormat: false,\n          numFormat: {\n            type: 'percent',\n            fractionDigits: 1,\n          },\n        },\n      },\n      config,\n    )\n  }\n  if (!hasColorEncoding && !config?.legend?.enable) {\n    config = {\n      ...config,\n      legend: {\n        ...config?.legend,\n        enable: false,\n      },\n    }\n  }\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n\nexport const histogramXAxisConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n  const { dataset = [] } = advancedVSeed\n  const flattenDatasert = dataset.flat()\n  const minValue = Math.min(...flattenDatasert.map((v) => +v[BinStartMeasureId]))\n  const maxValue = Math.max(...flattenDatasert.map((v) => +v[BinEndMeasureId]))\n\n  const chartConfig = result.config?.[chartType] as any\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...chartConfig,\n      xAxis: {\n        min: Number.isNaN(minValue) ? undefined : minValue,\n        max: Number.isNaN(maxValue) ? undefined : maxValue,\n        ...(chartConfig?.xAxis || {}),\n      },\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForHistogram: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForHistogram: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, false)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const dimensionsWithoutMeasureId = dimensions.filter((item) => item.id !== MeasureId)\n  const uniqueDimIds = unique(dimensionsWithoutMeasureId.map((d) => d.id))\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d: string) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail?.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip?.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label?.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.x0 = unique(measures.filter((item) => item.encoding === 'x0').map((item) => item.id))\n  encoding.x1 = unique(measures.filter((item) => item.encoding === 'x1').map((item) => item.id))\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.x0 = unique(measures.filter((item) => item.encoding === 'x0').map((item) => item.id))\n  encoding.x1 = unique(measures.filter((item) => item.encoding === 'x1').map((item) => item.id))\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import {\n  BinCountMeasureId,\n  BinEndMeasureId,\n  BinPercentageMeasureId,\n  BinStartMeasureId,\n  dataReshapeByEncoding,\n  FoldMeasureId,\n  FoldMeasureName,\n  FoldMeasureValue,\n  Separator,\n  unfoldDimensions,\n} from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, ColumnParallel, Dataset, Dimension, Encoding, FoldInfo } from 'src/types'\nimport { bin } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes/color/colorAdapter'\n\nexport const reshapeWithHistogramEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item) => item.id)\n  const chartConfig = config?.[chartType as 'histogram']\n  const binCount = chartConfig?.binCount\n  const binStep = chartConfig?.binStep\n  const binValueType = chartConfig?.binValueType\n\n  let newDatasets: any[] = []\n  let foldInfo: FoldInfo = {\n    foldMap: {},\n    measureId: FoldMeasureId,\n    measureName: FoldMeasureName,\n    measureValue: FoldMeasureValue,\n    statistics: {\n      max: -Infinity,\n      min: Infinity,\n      sum: 0,\n      count: 0,\n      colorMin: Infinity,\n      colorMax: -Infinity,\n    },\n  }\n  let unfoldInfo: any = {}\n\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const allMeasures = findAllMeasures(measures)\n\n  if (encoding.value?.length) {\n    const valueField = encoding.value[0]\n    const m = allMeasures.find((m) => m.id === valueField)\n    const binData = bin(dataset, {\n      field: valueField,\n      groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n      bins: binCount,\n      step: binStep,\n      outputNames: {\n        x0: BinStartMeasureId,\n        x1: BinEndMeasureId,\n        count: BinCountMeasureId,\n        percentage: BinPercentageMeasureId,\n      },\n    }) as Dataset\n\n    binData.forEach((datum) => {\n      datum[FoldMeasureId] = valueField\n      datum[FoldMeasureName] = m?.alias ?? valueField\n      const valueNumber = binValueType === 'percentage' ? +datum[BinPercentageMeasureId] : +datum[BinCountMeasureId]\n      datum[FoldMeasureValue] = valueNumber\n      datum[valueField] = valueNumber\n      foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n      foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n      foldInfo.statistics.sum += valueNumber\n      foldInfo.statistics.count++\n    })\n    if (m?.id) {\n      foldInfo.foldMap[m?.id] = m?.alias\n    }\n\n    const res = unfoldDimensions(binData, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((d) => {\n      newDatasets.push(d)\n    })\n    unfoldInfo = res.unfoldInfo\n  } else if (encoding.x0?.length && encoding.x1?.length && encoding.y?.length) {\n    const res = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      findAllMeasures(measures)\n        .filter((item) => encoding.y?.includes(item.id))\n        .slice(0, 1),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        colorMeasureId,\n      },\n    )\n\n    res.dataset.forEach((datum) => {\n      datum[BinStartMeasureId] = datum[encoding.x0![0]]\n      datum[BinEndMeasureId] = datum[encoding.x1![0]]\n    })\n\n    newDatasets = res.dataset\n    foldInfo = res.foldInfo\n    unfoldInfo = res.unfoldInfo\n  }\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n    dimensions,\n    measures,\n  }\n}\n","import { bin } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport {\n  BinCountMeasureId,\n  BinEndMeasureId,\n  BinPercentageMeasureId,\n  BinStartMeasureId,\n  dataReshapeByEncoding,\n  FoldMeasureId,\n  FoldMeasureName,\n  FoldMeasureValue,\n  Separator,\n  unfoldDimensions,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Datum,\n  Dimension,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n} from 'src/types'\n\nexport const pivotReshapeWithHistogramEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'histogram']\n  const binCount = chartConfig?.binCount\n  const binStep = chartConfig?.binStep\n  const binValueType = chartConfig?.binValueType\n\n  const measureGroups: MeasureGroup[] = []\n  if (measures) {\n    measures.forEach((measure: MeasureGroup) => {\n      if (measure.children && measure.children.length > 0) {\n        measureGroups.push(measure)\n      }\n    })\n  }\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measureGroup, index) => {\n    const subMeasures = measureGroup.children\n    if (!subMeasures) {\n      return\n    }\n    const groupId = measureGroup.id\n\n    let newDatasets: any[] = []\n    let foldInfo: FoldInfo = {\n      foldMap: {},\n      measureId: FoldMeasureId,\n      measureName: FoldMeasureName,\n      measureValue: FoldMeasureValue,\n      statistics: {\n        max: -Infinity,\n        min: Infinity,\n        sum: 0,\n        count: 0,\n        colorMin: Infinity,\n        colorMax: -Infinity,\n      },\n    }\n    let unfoldInfo: any = {}\n\n    if (encoding.value?.length) {\n      const valueField = encoding.value[0]\n      const m = subMeasures.find((m) => m.id === valueField)\n      const binData = bin(dataset, {\n        field: valueField,\n        groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n        facetField: rowColumnFields.map((item: Dimension) => item.id),\n        bins: binCount,\n        step: binStep,\n        outputNames: {\n          x0: BinStartMeasureId,\n          x1: BinEndMeasureId,\n          count: BinCountMeasureId,\n          percentage: BinPercentageMeasureId,\n        },\n      }) as Dataset\n\n      binData.forEach((datum: Datum) => {\n        datum[FoldMeasureId] = valueField\n        datum[FoldMeasureName] = m?.alias ?? valueField\n        const valueNumber = binValueType === 'percentage' ? +datum[BinPercentageMeasureId] : +datum[BinCountMeasureId]\n        datum[FoldMeasureValue] = valueNumber\n        datum[valueField] = valueNumber\n\n        foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n        foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n        foldInfo.statistics.sum += valueNumber\n        foldInfo.statistics.count++\n      })\n      if (m?.id) {\n        foldInfo.foldMap[m?.id] = m?.alias\n      }\n\n      const res = unfoldDimensions(binData, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((d) => {\n        newDatasets.push(d)\n      })\n      unfoldInfo = res.unfoldInfo\n    } else if (encoding.x0?.length && encoding.x1?.length && encoding.y?.length) {\n      const res = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item: Dimension) => item.id),\n        subMeasures.filter((item) => encoding.y?.includes(item.id)).slice(0, 1),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          colorMeasureId,\n        },\n      )\n\n      res.dataset.forEach((datum) => {\n        datum[BinStartMeasureId] = datum[encoding.x0![0]]\n        datum[BinEndMeasureId] = datum[encoding.x1![0]]\n        datum[FoldMeasureId] = datum[encoding.y![0]]\n      })\n\n      newDatasets = res.dataset\n      foldInfo = res.foldInfo\n      unfoldInfo = res.unfoldInfo\n    }\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newDatasets)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  histogramConfig,\n  markStyle,\n  annotation,\n  sortLegend,\n  pivotReshapeWithHistogramEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  encodingAdapter,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  defaultEncodingForHistogram,\n  encodingForHistogram,\n  reshapeWithHistogramEncoding,\n  regressionLine,\n} from '../pipes'\nimport { histogramXAxisConfig } from '../pipes/config/histogram'\n\nexport const histogramAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  histogramConfig,\n\n  encodingAdapter(\n    [defaultEncodingForHistogram, buildMeasures],\n    [\n      encodingForHistogram,\n      buildMeasures,\n      pickMeasuresForReshape(['tooltip', 'label', 'color']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithHistogramEncoding], [pivotReshapeWithHistogramEncoding]),\n\n  histogramXAxisConfig,\n  sortLegend,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import type { IHistogramChartSpec } from '@visactor/vchart'\nimport { BinEndMeasureId, BinStartMeasureId, FoldMeasureValue } from 'src/index'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initHistogram: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IHistogramChartSpec\n\n  // 直方图默认支持明细数据\n  result.type = 'histogram'\n  result.xField = BinStartMeasureId\n  result.x2Field = BinEndMeasureId\n  result.yField = FoldMeasureValue\n  // result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.legends = {\n    visible: false,\n  }\n  result.barGap = 2\n  result.animation = true\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetHistogram: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { id } = datasetReshapeInfo[0]\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as unknown as ISpec\n}\n","import { autoFormatter, createNumFormatter } from 'src/pipeline/utils'\nimport type { AdvancedVSeed, XLinearAxis } from 'src/types'\nimport { createLinearFormat } from '../pipes/axes/format/linearFormat'\n\nexport const getDefaultXFormatterOfHistogram = (advancedVSeed: AdvancedVSeed) => {\n  const { chartType, config } = advancedVSeed\n  const xConfig = config?.[chartType as 'bar']?.xAxis as XLinearAxis\n  const { autoFormat = true, numFormat = {} } = xConfig\n  const formatter = createNumFormatter(numFormat)\n  return (value: number) => createLinearFormat(value, autoFormat, numFormat, formatter)\n}\n\nexport const getDefaultValueFormatterOfHistogram = (binValueType: 'count' | 'percentage' = 'count') => {\n  return binValueType === 'percentage'\n    ? createNumFormatter({\n        type: 'percent',\n        fractionDigits: 1,\n      })\n    : (value: number | string) => autoFormatter(value)\n}\n","import { pipe, uniqueBy, isNullish } from 'remeda'\nimport type { Dimension, Dimensions, Encoding, VChartSpecPipe, Tooltip } from 'src/types'\nimport type { Datum, ISpec, ITooltipLinePattern } from '@visactor/vchart'\nimport { BinEndMeasureId, BinStartMeasureId, ColorEncoding, FoldMeasureValue, XEncoding } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { getDefaultValueFormatterOfHistogram, getDefaultXFormatterOfHistogram } from '../../utils/histogram'\n\nconst VCHART_OUTLIER_KEY = '__VCHART_BOX_PLOT_OUTLIER_VALUE'\n\nexport const tooltipHistogram: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip; binValueType: 'count' | 'percentage' }\n  const { binValueType, tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(advancedVSeed)\n  const defaultValueFormatter = getDefaultValueFormatterOfHistogram(binValueType)\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        encoding as Encoding,\n        defaultXFormatter,\n        defaultValueFormatter,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        encoding as Encoding,\n        defaultXFormatter,\n        defaultValueFormatter,\n      ),\n    },\n  }\n  return result as unknown as ISpec\n}\n\nconst createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  encoding: Encoding,\n  dimFormatter: (value: number) => string,\n  defaultValueFormatter: (value: number | string) => string,\n) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias ?? item.id,\n    value: (datum: Datum | undefined) => {\n      if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n        if (encoding.color?.includes(item.id)) {\n          return datum?.[ColorEncoding] as string\n        }\n        if (encoding.x?.includes(item.id)) {\n          return datum?.[XEncoding] as string\n        }\n      }\n\n      return defaultValueFormatter(datum?.[item.id] as string)\n    },\n  }))\n\n  const defaultContent = [\n    {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return `[${dimFormatter(+datum[BinStartMeasureId])}, ${dimFormatter(+datum[BinEndMeasureId])})`\n      },\n      value: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return defaultValueFormatter(datum[FoldMeasureValue] as string | number)\n      },\n    },\n  ]\n\n  return [...dimContent, defaultContent] as ITooltipLinePattern[]\n}\n","import type { ICartesianCrosshairSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { verticalCrosshairRect } from './verticalCrosshairRect'\nimport { getDefaultXFormatterOfHistogram } from '../../utils/histogram'\nimport { isArray } from '@visactor/vutils'\n\nexport const histogramVerticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = verticalCrosshairRect(spec, context)\n  if (!result.crosshair) {\n    return result\n  }\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  if (!crosshair.xField) {\n    return result\n  }\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(context.advancedVSeed)\n  crosshair.xField = {\n    ...(crosshair.xField || {}),\n    label: {\n      ...(crosshair.xField?.label || {}),\n      formatMethod: (text) => {\n        if (isArray(text)) {\n          return text\n        }\n        const binRange = `${text}`.split('~')\n        const binStart = defaultXFormatter(+binRange[0])\n        const binEnd = defaultXFormatter(+binRange[1])\n        return binRange.length === 1 ? binStart : `[${binStart}, ${binEnd})`\n      },\n    },\n  }\n\n  return result\n}\n","import type { IHistogramChartSpec, IMarkPointSpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe } from 'src/types'\nimport { isSubset } from './utils'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPointOfHistogram: VChartSpecPipe = generateAnnotationPointPipe({\n  generateMarkPoint: (datum: Datum, spec) => {\n    const histogramSpec = spec as IHistogramChartSpec\n    const xField = histogramSpec.xField as string\n    const x2Field = histogramSpec.x2Field as string\n\n    return [\n      {\n        coordinate: (data: Datum[]) => {\n          const d = data.find((item) => isSubset(datum, item))\n\n          return d\n            ? {\n                ...d,\n                [xField]: (d[xField] + d[x2Field]) / 2,\n              }\n            : undefined\n        },\n      } as IMarkPointSpec,\n    ]\n  },\n})\n","import type { ICartesianSeries, IChart, IHistogramChartSpec, IVChart } from '@visactor/vchart'\nimport type { KDEOptions } from '@visactor/vutils'\nimport { isNullish, uniqueBy } from 'remeda'\nimport { kde, array } from '@visactor/vutils'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape'\nimport type { Datum, Dimension, VChartSpecPipe, Encoding, RegressionLineConfig, KdeRegressionLine } from 'src/types'\nimport { defaultRegressionLineColor, defaultRegressionLineLabelX, defaultRegressionLineLabelY } from './common'\n\nexport const kdeRegressionLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHistogramChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding = {} as Encoding, dimensions, regressionLine } = advancedVSeed\n  const { dataset } = vseed\n  const lineTheme = advancedVSeed.config[chartType as 'histogram']?.regressionLine as RegressionLineConfig\n  const binValueType = advancedVSeed.config[chartType as 'histogram']?.binValueType\n\n  if (!regressionLine || !regressionLine.kdeRegressionLine) {\n    return result\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const lineList = array(regressionLine.kdeRegressionLine).filter((kdeLine) => kdeLine.enable !== false)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme.kdeRegressionLine ?? {}) as KdeRegressionLine\n    const { color, lineWidth, lineDash, text, textColor, textFontSize, textFontWeight } = line as KdeRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `kdeRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const series = chart.getAllSeries().filter((s: any) => s.type === 'bar')\n\n          // 直方图使用的是bar系列\n          if (series && series.length) {\n            const s = series[0] as ICartesianSeries\n\n            const fieldX = s.fieldX?.[0]\n            const scaleY = s.getYAxisHelper().getScale?.(0)\n            const viewData = s.getViewData()?.latestData\n\n            if (!dataset || !dataset.length || !viewData || !viewData.length || !scaleY) {\n              return null\n            }\n            const simpleData = dataset\n              .filter((entry: Datum) => {\n                return rowColumnFields.length\n                  ? rowColumnFields.every((dim: Dimension) => {\n                      return entry[dim.id] === viewData[0][dim.id]\n                    })\n                  : true\n              })\n              .map((d: Datum) => +(d as any)[encoding.value?.[0] as string])\n            const res = kde(simpleData, {\n              bandwidth: Math.abs(viewData[0][BinEndMeasureId] - viewData[0][BinStartMeasureId]),\n            } as KDEOptions)\n            const N = Math.max(3, Math.floor(simpleData.length / 4))\n            const lineData = res.evaluateGrid(N)\n\n            // 根据 binValueType 决定如何转换 KDE 密度值\n            // - 频次模式 (count): 频次 = 密度 × 样本数 × 带宽\n            // - 百分比模式 (percentage): 百分比 = 密度 × 带宽\n            const scaleR = (k: number) => {\n              if (binValueType === 'percentage') {\n                // 百分比模式：y轴是0-1的百分比，KDE密度值乘以带宽即可\n                return scaleY.scale(k * res.bandwidth)\n              } else {\n                // 频次模式：y轴是实际计数，需要乘以样本数量\n                return scaleY.scale(k * simpleData.length * res.bandwidth)\n              }\n            }\n\n            const linePoints = lineData.map((ld: Datum) => {\n              const d = { [fieldX]: ld.x }\n              return {\n                x: s.dataToPositionX(d)!,\n                y: scaleR(ld.y as number),\n              }\n            })\n\n            return {\n              linePoints,\n              color: color ?? s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `kdeRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: defaultRegressionLineLabelX,\n          y: defaultRegressionLineLabelY,\n        },\n      })\n    }\n  })\n\n  return result\n}\n","import type { ICartesianSeries, IChart, IHistogramChartSpec, IVChart } from '@visactor/vchart'\nimport { isNullish, uniqueBy } from 'remeda'\nimport { ecdf, array, isArray } from '@visactor/vutils'\nimport type { Datum, Dimension, VChartSpecPipe, Encoding, RegressionLineConfig, EcdfRegressionLine } from 'src/types'\nimport { defaultRegressionLineColor, defaultRegressionLineLabelX, defaultRegressionLineLabelY } from './common'\n\nexport const ecdfRegressionLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHistogramChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding = {} as Encoding, dimensions, regressionLine } = advancedVSeed\n  const { dataset } = vseed\n  const lineTheme = advancedVSeed.config[chartType as 'histogram']?.regressionLine as RegressionLineConfig\n\n  if (!regressionLine || !regressionLine.ecdfRegressionLine) {\n    return result\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const lineList = array(regressionLine.ecdfRegressionLine).filter((ecdfLine) => ecdfLine.enable !== false)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme?.ecdfRegressionLine ?? {}) as EcdfRegressionLine\n    const { color, lineWidth, lineDash, text, textColor, textFontSize, textFontWeight } = line as EcdfRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `ecdfRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const series = chart.getAllSeries().filter((s: any) => s.type === 'bar')\n\n          // 直方图使用的是bar系列\n          if (series && series.length) {\n            const s = series[0] as ICartesianSeries\n\n            const fieldX = s.fieldX?.[0]\n            const scaleY = s.getYAxisHelper().getScale?.(0)\n            const viewData = s.getViewData()?.latestData\n\n            if (!dataset || !dataset.length || !viewData || !viewData.length || !scaleY) {\n              return null\n            }\n            const simpleData = dataset\n              .filter((entry: Datum) => {\n                return rowColumnFields.length\n                  ? rowColumnFields.every((dim: Dimension) => {\n                      return entry[dim.id] === viewData[0][dim.id]\n                    })\n                  : true\n              })\n              .map((d: Datum) => +(d as any)[encoding.value?.[0] as string])\n            const res = ecdf(simpleData)\n            const N = Math.max(3, Math.floor(simpleData.length / 4))\n            const lineData = res.evaluateGrid(N)\n            const yRange = scaleY.range()\n            const y0 = yRange[0]\n            const y1 = yRange[yRange.length - 1]\n            const scaleR = (e: number) => {\n              return y0 + (y1 - y0) * e\n            }\n\n            const linePoints = lineData.map((ld: Datum) => {\n              const d = { [fieldX]: ld.x }\n              return {\n                x: s.dataToPositionX(d)!,\n                y: scaleR(ld.y as number),\n              }\n            })\n\n            return {\n              linePoints,\n              color: color ?? s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `ecdfRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: defaultRegressionLineLabelX,\n          y: defaultRegressionLineLabelY,\n        },\n      })\n    }\n  })\n\n  // add percent axis of ecdf\n  const leftAxis = result.axes?.find((v) => v.orient === 'left')\n  if (leftAxis && lineList.length) {\n    result.axes?.push({\n      visible: true,\n      orient: 'right',\n      type: 'linear',\n      base: 10,\n      min: 0,\n      max: 1,\n      domainLine: {\n        ...leftAxis.domainLine,\n      },\n      grid: {\n        visible: false,\n      },\n      tick: {\n        ...leftAxis.tick,\n      },\n      title: {\n        ...leftAxis.title,\n        visible: false,\n      },\n      label: {\n        ...leftAxis.label,\n        visible: true,\n        formatMethod: (v) => {\n          const text = isArray(v) ? v[0] : v\n          return `${(+text * 100).toFixed(1)}%`\n        },\n      },\n    })\n  }\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  label,\n  xLinear,\n  backgroundColor,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  barStyle,\n  annotationPointOfHistogram,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  datasetHistogram,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  initHistogram,\n  yLinear,\n  histogramVerticalCrosshairRect,\n  tooltipHistogram,\n  kdeRegressionLine,\n  ecdfRegressionLine,\n  pivotTitle,\n  pivotAxisStyle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst histogram: VChartSpecPipeline = [\n  initHistogram,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetHistogram,\n  progressive,\n  xLinear,\n  yLinear,\n  label,\n  tooltipHistogram,\n  colorAdapter(discreteLegend, colorLegend),\n  histogramVerticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPointOfHistogram,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  kdeRegressionLine,\n  ecdfRegressionLine,\n]\n\nconst pivotHistogram: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  datasetPivot,\n  pivotIndicators([\n    initHistogram,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetHistogram,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltipHistogram,\n    colorBarStyleFill(barStyle),\n    histogramVerticalCrosshairRect,\n    annotationPointOfHistogram,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n    kdeRegressionLine,\n    ecdfRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const histogramSpecPipeline = [pivotAdapter(histogram, pivotHistogram)]\n","import { histogramSpecPipeline, histogramAdvancedPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerHistogram = () => {\n  Builder._advancedPipelineMap['histogram'] = histogramAdvancedPipeline\n  Builder._specPipelineMap['histogram'] = histogramSpecPipeline\n}\n","export const getDarkCrosshairLine = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#404349',\n  lineColor: '#55595F',\n})\n\nexport const getDarkCrosshairRect = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#404349',\n  rectColor: '#4B4F54',\n})\n\nexport const getLightCrosshairLine = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#21252C',\n  lineColor: '#21252C',\n})\nexport const getLightCrosshairRect = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#364159',\n  rectColor: '#D9DDE4',\n})\n","export const getLightColorScheme = () => [\n  '#8D72F6',\n  '#5766EC',\n  '#66A3FE',\n  '#51D5E6',\n  '#4EC0B3',\n  '#F9DF90',\n  '#F9AD71',\n  '#ED8888',\n  '#E9A0C3',\n  '#D77DD3',\n]\nexport const getDarkColorScheme = () => [\n  '#2E62F1',\n  '#4DC36A',\n  '#FF8406',\n  '#FFCC00',\n  '#4F44CF',\n  '#5AC8FA',\n  '#003A8C',\n  '#B08AE2',\n  '#FF6341',\n  '#98DD62',\n]\nexport const getLightLinearColorScheme = () => ['#C2CEFF', '#5766EC']\nexport const getDarkLinearColorScheme = () => ['#A0CEFF', '#2E62F1']\nexport const getLightColor = () => ({\n  linearColorScheme: getLightLinearColorScheme(),\n  colorScheme: getLightColorScheme(),\n  positiveColor: '#7E5DFF',\n  negativeColor: '#EB3373',\n})\nexport const getDarkColor = () => ({\n  linearColorScheme: getDarkLinearColorScheme(),\n  colorScheme: getDarkColorScheme(),\n  positiveColor: '#7E5DFF',\n  negativeColor: '#EB3373',\n})\n","export const getDefaultLabel = () => ({\n  enable: true,\n  wrap: true,\n  showValue: true,\n  showValuePercent: false,\n  labelColorSmartInvert: false,\n  labelOverlap: true,\n})\n\nexport const getDarkLabel = () => ({\n  ...getDefaultLabel(),\n  labelStroke: '#21252C',\n})\n\nexport const getLightLabel = () => ({\n  ...getDefaultLabel(),\n  labelStroke: '#fff',\n})\n","import type { Legend } from 'src/types'\n\nexport const getDefaultLegend = (): Legend => ({\n  enable: true,\n  border: true,\n  maxSize: 1,\n  shapeType: 'rectRound',\n  position: 'rt',\n  labelFontSize: 12,\n  labelFontWeight: 400,\n})\n\nexport const getDarkLegend = (): Legend => ({\n  ...getDefaultLegend(),\n  labelColor: '#BBBDC3',\n  pagerIconColor: '#89909D',\n  pagerIconDisableColor: '#2A2D33',\n})\n\nexport const getLightLegend = (): Legend => ({\n  ...getDefaultLegend(),\n  labelColor: '#606773',\n  pagerIconColor: '#89909D',\n  pagerIconDisableColor: '#F1F2F5',\n})\n","import type { PivotChartGridConfig } from 'src/types'\n\nexport const getDefaultTableConfig = () => ({\n  bodyFontSize: 12,\n  bodyBackgroundColor: 'transparent',\n  headerFontSize: 12,\n})\n\nexport const getLightTableConfig = () => ({\n  ...getDefaultTableConfig(),\n  borderColor: '#e3e5eb',\n\n  bodyFontColor: '#141414',\n\n  headerFontColor: '#21252c',\n  headerBackgroundColor: '#f6f7f9',\n\n  hoverBodyBackgroundColor: '#bedaff',\n  hoverBodyInlineBackgroundColor: '#bedaff33',\n  hoverHeaderBackgroundColor: '#D9DDE4',\n  hoverHeaderInlineBackgroundColor: '#D9DDE455',\n\n  selectedBorderColor: '#4080ff',\n  selectedBackgroundColor: '#bedaff33',\n\n  backgroundColor: 'transparent',\n})\n\nexport const getDarkTableConfig = () => ({\n  ...getDefaultTableConfig(),\n  borderColor: '#4b4e53',\n\n  bodyFontColor: '#fdfdfd',\n  headerFontColor: '#fdfdfd',\n  headerBackgroundColor: '#36393e',\n\n  hoverBodyBackgroundColor: '#4284ff66',\n  hoverBodyInlineBackgroundColor: '#4284ff10',\n  hoverHeaderBackgroundColor: '#6f7984cc',\n  hoverHeaderInlineBackgroundColor: '#4b4f54',\n\n  selectedBorderColor: '#3073f2',\n  selectedBackgroundColor: '#4284ff33',\n})\n\nconst pickPivotChartGridConfig = (tableConfig: any) => {\n  return {\n    outlineBorderLineWidth: 0,\n    frameCornerRadius: 0,\n    borderColor: tableConfig.borderColor,\n    bodyFontColor: tableConfig.bodyFontColor,\n    headerFontColor: tableConfig.headerFontColor,\n\n    headerBackgroundColor: 'transparent',\n    hoverHeaderBackgroundColor: tableConfig.hoverHeaderBackgroundColor,\n    hoverHeaderInlineBackgroundColor: tableConfig.hoverHeaderInlineBackgroundColor,\n\n    titleFontColor: tableConfig.headerFontColor,\n    titleFontSize: tableConfig.headerFontSize,\n    titleFontWeight: 'bold',\n  }\n}\n\nexport const getLightPivotChartGridConfig = () => {\n  const res = pickPivotChartGridConfig(getLightTableConfig()) as PivotChartGridConfig\n\n  res.hoverHeaderInlineBackgroundColor = '#D9DDE446'\n\n  res.chartGridColor = '#F0F1F6'\n  res.axisLabelColor = '#BCC1CB'\n\n  return res\n}\n\nexport const getDarkPivotChartGridConfig = () => {\n  const res = pickPivotChartGridConfig(getDarkTableConfig()) as PivotChartGridConfig\n\n  res.hoverHeaderInlineBackgroundColor = '#4b4f5446'\n\n  return res\n}\n","import type { TooltipConfig } from 'src/types'\n\nconst getDefaultTooltip = (): TooltipConfig => ({\n  enable: true,\n  borderRadius: 12,\n  borderWidth: 1,\n  padding: 7,\n  lineHeight: 12,\n  fontSize: 12,\n  lineSpace: 6,\n})\n\nexport const getLightTooltip = (): TooltipConfig => ({\n  ...getDefaultTooltip(),\n  borderColor: '#e3e5e8',\n  backgroundColor: '#fff',\n  keyColor: '#606773',\n  valueColor: '#21252c',\n  titleColor: '#21252c',\n})\n\nexport const getDarkTooltip = (): TooltipConfig => ({\n  ...getDefaultTooltip(),\n  borderColor: '#3c3f44',\n  backgroundColor: '#2b2d30',\n  keyColor: '#89909D',\n  valueColor: '#E2E3E6',\n  titleColor: '#E2E3E6',\n})\n","import type { YBandAxis, YLinearAxis } from 'src/types'\n\nexport const getLightLinearAxis = (): YLinearAxis => ({\n  nice: true,\n  zero: true,\n  inverse: false,\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#8F959E',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#606773',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: true,\n    gridColor: '#E3E5EB',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#E3E5EB',\n  },\n  line: {\n    visible: false,\n    lineColor: '#E3E5EB',\n    lineWidth: 1,\n  },\n})\n\nexport const getLightBandAxis = (): YBandAxis => ({\n  labelAutoHide: true,\n  labelAutoHideGap: 4,\n  labelAutoLimit: true,\n  labelAutoLimitLength: 80,\n  labelAutoRotate: false,\n  labelAutoRotateAngleRange: [0, -45, -90],\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#8F959E',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#606773',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: false,\n    gridColor: '#E3E5EB',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#E3E5EB',\n  },\n  line: {\n    visible: true,\n    lineColor: '#E3E5EB',\n    lineWidth: 1,\n  },\n})\n\nexport const getDarkLinearAxis = (): YLinearAxis => ({\n  nice: true,\n  zero: true,\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#888C93',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#BBBDC3',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: true,\n    gridColor: '#303339',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#303339',\n  },\n  line: {\n    visible: false,\n    lineColor: '#303339',\n    lineWidth: 1,\n  },\n})\n\nexport const getDarkBandAxis = (): YBandAxis => ({\n  labelAutoHide: true,\n  labelAutoHideGap: 4,\n  labelAutoLimit: true,\n  labelAutoLimitLength: 80,\n  labelAutoRotate: false,\n  labelAutoRotateAngleRange: [0, -45, -90],\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#888C93',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#BBBDC3',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: false,\n    gridColor: '#303339',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#303339',\n  },\n  line: {\n    visible: true,\n    lineColor: '#303339',\n    lineWidth: 1,\n  },\n})\n","import type {\n  AnnotationAreaConfig,\n  AnnotationHorizontalLineConfig,\n  AnnotationPointConfig,\n} from 'src/types/properties/config/annotation/annotation'\n\nexport const getDefaultAnnotationPoint = (): AnnotationPointConfig => ({\n  textBackgroundVisible: true,\n  textFontSize: 12,\n  textFontWeight: 400,\n\n  textBackgroundBorderRadius: 0,\n  textBackgroundBorderWidth: 1,\n  textBackgroundPadding: 2,\n})\n\nexport const getLightAnnotationPoint = (): AnnotationPointConfig => ({\n  ...getDefaultAnnotationPoint(),\n  textColor: '#ffffff',\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n})\n\nexport const getDefaultAnnotationLine = (): AnnotationHorizontalLineConfig => ({\n  lineVisible: true,\n  lineWidth: 1,\n  lineStyle: 'solid' as const,\n\n  textFontSize: 12,\n  textFontWeight: 400,\n  startSymbolVisible: true,\n  endSymbolVisible: false,\n\n  textBackgroundVisible: true,\n  textBackgroundBorderWidth: 1,\n  textBackgroundBorderRadius: 0,\n  textBackgroundPadding: 2,\n})\n\nexport const getLightAnnotationHorizontalLine = (): AnnotationHorizontalLineConfig => ({\n  ...getDefaultAnnotationLine(),\n  lineColor: '#BCC1CB',\n\n  textColor: '#ffffff',\n\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n})\n\nexport const getLightAnnotationVerticalLine = () => getLightAnnotationHorizontalLine()\n\nexport const getDefaultAnnotationArea = (): AnnotationAreaConfig => ({\n  textFontSize: 12,\n  textFontWeight: 400,\n  textBackgroundVisible: true,\n  textBackgroundBorderWidth: 1,\n  textBackgroundBorderRadius: 0,\n  textBackgroundPadding: 2,\n  areaBorderWidth: 0,\n  areaBorderRadius: 0,\n  areaLineDash: [2, 2],\n\n  outerPadding: 4,\n})\n\nexport const getLightAnnotationArea = (): AnnotationAreaConfig => ({\n  ...getDefaultAnnotationArea(),\n  textColor: '#ffffff',\n\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n\n  areaColor: '#BCC1CB',\n  areaColorOpacity: 0.12,\n  areaBorderColor: '#BCC1CB',\n})\n\nexport const getLightAnnotation = () => ({\n  annotationPoint: getLightAnnotationPoint(),\n  annotationHorizontalLine: getLightAnnotationHorizontalLine(),\n  annotationVerticalLine: getLightAnnotationVerticalLine(),\n  annotationArea: getLightAnnotationArea(),\n})\n\n// --- dark ---\nexport const getDarkAnnotationPoint = (): AnnotationPointConfig => ({\n  ...getDefaultAnnotationPoint(),\n  textColor: '#E2E3E6',\n\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n})\n\nexport const getDarkAnnotationHorizontalLine = (): AnnotationHorizontalLineConfig => ({\n  ...getDefaultAnnotationLine(),\n  lineColor: '#55595F',\n\n  textColor: '#E2E3E6',\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n})\n\nexport const getDarkAnnotationVerticalLine = () => getDarkAnnotationHorizontalLine()\n\nexport const getDarkAnnotationArea = (): AnnotationAreaConfig => ({\n  ...getDefaultAnnotationArea(),\n  textColor: '#E2E3E6',\n\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n\n  areaColor: '#E2E3E6',\n  areaColorOpacity: 0.15,\n  areaBorderColor: '#E2E3E6',\n})\n\nexport const getDarkAnnotation = () => ({\n  annotationPoint: getDarkAnnotationPoint(),\n  annotationHorizontalLine: getDarkAnnotationHorizontalLine(),\n  annotationVerticalLine: getDarkAnnotationVerticalLine(),\n  annotationArea: getDarkAnnotationArea(),\n})\n\nexport default getLightAnnotation\n","import type { FunnelTransformConfig } from 'src/types/properties/config/funnelTransform'\n\nexport const getLightFunnelTransformTheme = (): FunnelTransformConfig => {\n  return {\n    backgroundColor: '#F6F7F9',\n    textColor: '#737880',\n  }\n}\n\nexport const getDarkFunnelTransformTheme = (): FunnelTransformConfig => {\n  return {\n    backgroundColor: '#2A2D33',\n    textColor: '#888C93',\n  }\n}\n","import type { HeatmapCell } from 'src/types/properties/config/heatmap/heatmap'\n\nexport const getLightHeatmapCellTheme = (): HeatmapCell => {\n  return {\n    stroke: '#fff',\n  }\n}\n\nexport const getDarkHeatmapCellTheme = (): HeatmapCell => {\n  return {\n    stroke: '#404349',\n  }\n}\n","import type { RegressionLineConfig } from 'src/types/properties/regressionLine'\n\nexport const getDefaultRegressionLine = () => {\n  return {\n    lineWidth: 2,\n    textFontSize: 12,\n    textFontWeight: 400,\n  }\n}\n\nexport const getLightRegressionLine = (): Partial<RegressionLineConfig> => {\n  return {\n    kdeRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n    },\n    ecdfRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n    },\n    linearRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    lowessRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    polynomialRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    logisticRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n  }\n}\n\nexport const getDarkRegressionLine = (): Partial<RegressionLineConfig> => {\n  return {\n    kdeRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n    },\n    ecdfRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n    },\n    linearRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    lowessRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    polynomialRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    logisticRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n  }\n}\n","import type { BoxPlotStyle, OutlierStyle } from 'src/types'\n\nexport const getLightBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    boxBorderColor: '#e3e5eb',\n  }\n}\n\nexport const getDarkBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    boxBorderColor: '#4b4e53',\n  }\n}\n\nexport const getLightOutlierStyle = (): OutlierStyle => {\n  return {\n    pointColor: '#8F959E',\n  }\n}\n\nexport const getDarkOutlierStyle = (): OutlierStyle => {\n  return {\n    pointColor: '#36393e',\n  }\n}\n","import type { CustomThemeConfig, YBandAxis } from 'src/types'\nimport {\n  getLightColor,\n  getLightCrosshairLine,\n  getLightCrosshairRect,\n  getLightLabel,\n  getLightLegend,\n  getLightPivotChartGridConfig,\n  getLightTableConfig,\n} from '../common'\nimport { getLightTooltip } from '../common/tooltip'\nimport { getLightBandAxis, getLightLinearAxis } from '../common/axes'\nimport { getLightAnnotation } from '../common/annotaion'\nimport { getLightFunnelTransformTheme } from '../common/funnelTransform'\nimport { getLightHeatmapCellTheme } from '../common/heatmapCell'\nimport { getLightRegressionLine } from '../common/regressionLine'\nimport { getLightBoxPlotStyle, getLightOutlierStyle } from '../common/boxPlot'\n\nexport const lightTheme = (): CustomThemeConfig => {\n  const linearAxis = getLightLinearAxis()\n  const bandAxis: YBandAxis = getLightBandAxis()\n  const barBandAxis: YBandAxis = {\n    ...bandAxis,\n    labelAutoHide: false,\n    labelAutoHideGap: 1,\n    labelAutoLimit: false,\n    labelAutoLimitLength: undefined,\n    labelAutoRotate: false,\n    labelAutoRotateAngleRange: [0, -45, -90],\n  }\n\n  const crosshairLine = getLightCrosshairLine()\n  const crosshairRect = getLightCrosshairRect()\n\n  const baseConfig = {\n    backgroundColor: 'transparent',\n    color: getLightColor(),\n    label: getLightLabel(),\n    legend: getLightLegend(),\n    tooltip: getLightTooltip(),\n  }\n  const tableConfig = getLightTableConfig()\n\n  return {\n    config: {\n      // table\n      table: tableConfig,\n      pivotTable: tableConfig,\n      // cartesian\n      line: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine,\n\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      column: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        regressionLine: getLightRegressionLine(),\n      },\n      columnParallel: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      columnPercent: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: {\n          ...linearAxis,\n        },\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      bar: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      barParallel: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      barPercent: {\n        ...baseConfig,\n        xAxis: {\n          ...linearAxis,\n        },\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      area: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      areaPercent: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: {\n          ...linearAxis,\n        },\n        crosshairLine,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      scatter: {\n        ...baseConfig,\n        crosshairLine,\n        sizeRange: [8, 24],\n        xAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        yAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        label: {\n          ...baseConfig.label,\n          showValue: false,\n          showValuePercent: false,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        regressionLine: getLightRegressionLine(),\n      },\n      dualAxis: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        primaryYAxis: linearAxis,\n        secondaryYAxis: { ...linearAxis, grid: { visible: false } },\n        dualChartType: {\n          primary: 'column',\n          secondary: 'line',\n        },\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      // polar\n      pie: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      donut: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      radar: {\n        ...baseConfig,\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      rose: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      roseParallel: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      // other\n      funnel: {\n        ...baseConfig,\n\n        transform: getLightFunnelTransformTheme(),\n\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      heatmap: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          labelColorSmartInvert: true,\n        },\n        cell: getLightHeatmapCellTheme(),\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      histogram: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n        regressionLine: getLightRegressionLine(),\n      },\n      boxPlot: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        boxPlotStyle: getLightBoxPlotStyle(),\n        outlierStyle: getLightOutlierStyle(),\n      },\n    },\n  }\n}\n","import type { CustomThemeConfig, YBandAxis } from 'src/types'\nimport {\n  getDarkColor,\n  getDarkCrosshairLine,\n  getDarkCrosshairRect,\n  getDarkTableConfig,\n  getDarkPivotChartGridConfig,\n  getDarkLabel,\n  getDarkLegend,\n} from '../common'\nimport { getDarkTooltip } from '../common/tooltip'\nimport { getDarkBandAxis, getDarkLinearAxis } from '../common/axes'\nimport { getDarkAnnotation } from '../common/annotaion'\nimport { getDarkFunnelTransformTheme } from '../common/funnelTransform'\nimport { getDarkHeatmapCellTheme } from '../common/heatmapCell'\nimport { getDarkRegressionLine } from '../common/regressionLine'\nimport { getDarkBoxPlotStyle, getDarkOutlierStyle } from '../common/boxPlot'\n\nexport const darkTheme = (): CustomThemeConfig => {\n  const linearAxis = getDarkLinearAxis()\n  const bandAxis = getDarkBandAxis()\n  const barBandAxis: YBandAxis = {\n    ...bandAxis,\n    labelAutoHide: false,\n    labelAutoHideGap: 1,\n    labelAutoLimit: false,\n    labelAutoLimitLength: undefined,\n    labelAutoRotate: false,\n    labelAutoRotateAngleRange: [0, -45, -90],\n  }\n  const crosshairLine = getDarkCrosshairLine()\n  const crosshairRect = getDarkCrosshairRect()\n\n  const baseConfig = {\n    backgroundColor: 'transparent',\n    color: getDarkColor(),\n    label: getDarkLabel(),\n    legend: getDarkLegend(),\n    tooltip: getDarkTooltip(),\n  }\n\n  const tableConfig = getDarkTableConfig()\n\n  return {\n    config: {\n      table: tableConfig,\n      pivotTable: tableConfig,\n\n      // cartesian\n      line: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      column: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n\n        regressionLine: getDarkRegressionLine(),\n      },\n      columnParallel: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      columnPercent: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      bar: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      barParallel: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      barPercent: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      area: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      areaPercent: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      scatter: {\n        ...baseConfig,\n        crosshairLine,\n        sizeRange: [8, 24],\n        xAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        yAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        label: {\n          ...baseConfig.label,\n          showValue: false,\n          showValuePercent: false,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n        regressionLine: getDarkRegressionLine(),\n      },\n      dualAxis: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        primaryYAxis: linearAxis,\n        secondaryYAxis: { ...linearAxis, grid: { visible: false } },\n        dualChartType: {\n          primary: 'column',\n          secondary: 'line',\n        },\n        crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      // polar\n      pie: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      donut: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      radar: {\n        ...baseConfig,\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      rose: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      roseParallel: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      // other\n      funnel: {\n        ...baseConfig,\n        transform: getDarkFunnelTransformTheme(),\n\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      heatmap: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          labelColorSmartInvert: true,\n        },\n\n        cell: getDarkHeatmapCellTheme(),\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      histogram: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n        regressionLine: getDarkRegressionLine(),\n      },\n      boxPlot: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n\n        boxPlotStyle: getDarkBoxPlotStyle(),\n        outlierStyle: getDarkOutlierStyle(),\n      },\n    },\n  }\n}\n","import type { CustomThemeConfig } from 'src/types'\nimport { Builder } from '../../builder'\nimport { darkTheme, lightTheme } from '../../../theme'\n\nexport const registerCustomTheme = (\n  key: string,\n  themeConfig:\n    | CustomThemeConfig\n    | ((props: { lightTheme: CustomThemeConfig; darkTheme: CustomThemeConfig }) => CustomThemeConfig),\n) => {\n  const customTheme =\n    typeof themeConfig === 'function' ? themeConfig({ lightTheme: lightTheme(), darkTheme: darkTheme() }) : themeConfig\n  Builder._themeMap[key] = customTheme\n}\n","import { registerCustomTheme } from './custom'\nimport { lightTheme } from '../../../theme'\n\nexport const registerLightTheme = () => {\n  registerCustomTheme('light', lightTheme())\n}\n","import { darkTheme } from '../../../theme'\nimport { registerCustomTheme } from './custom'\n\nexport const registerDarkTheme = () => {\n  registerCustomTheme('dark', darkTheme())\n}\n","import {\n  registerArea,\n  registerAreaPercent,\n  registerBar,\n  registerBarParallel,\n  registerBarPercent,\n  registerColumn,\n  registerColumnParallel,\n  registerColumnPercent,\n  registerLine,\n  registerPie,\n  registerDonut,\n  registerRose,\n  registerRoseParallel,\n  registerFunnel,\n  registerScatter,\n  registerTable,\n  registerPivotTable,\n  registerHeatmap,\n  registerRadar,\n  registerDualAxis,\n  registerBoxPlot,\n  registerHistogram,\n} from './chartType'\nimport { registerDarkTheme, registerLightTheme } from './theme'\n\nexport const registerAll = () => {\n  // table\n  registerTable()\n  registerPivotTable()\n  // cartesian\n  registerLine()\n  registerColumn()\n  registerColumnParallel()\n  registerColumnPercent()\n  registerBar()\n  registerBarParallel()\n  registerBarPercent()\n  registerArea()\n  registerAreaPercent()\n  registerScatter()\n  registerDualAxis()\n  // polar\n  registerPie()\n  registerDonut()\n  registerRose()\n  registerRoseParallel()\n  registerRadar()\n  // other\n  registerFunnel()\n  registerHeatmap()\n  registerBoxPlot()\n  registerHistogram()\n  // theme\n  registerLightTheme()\n  registerDarkTheme()\n}\n","import type { AdvancedPipe, ChartType, SpecPipe } from 'src/types'\nimport { Builder } from '../builder'\n\nexport const updateAdvanced = (chartType: ChartType, advancedPipe: AdvancedPipe) => {\n  Builder._customAdvancedPipe[chartType] = advancedPipe\n}\nexport const updateSpec = (chartType: ChartType, specPipe: SpecPipe) => {\n  Builder._customSpecPipe[chartType] = specPipe\n}\n","import { z } from 'zod'\n\nexport type ChartType =\n  | 'table'\n  | 'pivotTable'\n  // cartesian\n  | 'line'\n  | 'column'\n  | 'columnPercent'\n  | 'columnParallel'\n  | 'bar'\n  | 'barPercent'\n  | 'barParallel'\n  | 'area'\n  | 'areaPercent'\n  | 'scatter'\n  | 'dualAxis'\n  // polar\n  | 'rose'\n  | 'roseParallel'\n  | 'pie'\n  | 'donut'\n  | 'radar'\n  // other\n  | 'heatmap'\n  | 'funnel'\n  | 'boxPlot'\n  | 'histogram'\n\nexport const zChartType = z.enum([\n  'table',\n  'pivotTable',\n  // cartesian\n  'line',\n  'column',\n  'columnPercent',\n  'columnParallel',\n  'bar',\n  'barPercent',\n  'barParallel',\n  'area',\n  'areaPercent',\n  'scatter',\n  'dualAxis',\n  // polar\n  'rose',\n  'roseParallel',\n  'pie',\n  'donut',\n  'radar',\n  // other\n  'funnel',\n  'heatmap',\n  'boxPlot',\n  'histogram',\n])\n","import { z } from 'zod'\n\n// 'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\nexport const zDualChartType = z.object({\n  primary: z.enum(['line', 'column', 'columnParallel', 'area', 'scatter']).default('column'),\n  secondary: z.enum(['line', 'column', 'columnParallel', 'area', 'scatter']).default('line'),\n})\n\nexport type DualChartType = z.infer<typeof zDualChartType>\n","import { z } from 'zod'\n\n/**\n * example dataset link:\n * [\n *    { date: '2019', 20001:'type', profit:10, sales: null, },\n *    { date: '2020', 20001:'type', profit:30, sales: -1.1, },\n *    { date: '2021', 20001:'type', profit:30, sales: 1, },\n *    { date: '2023', 20001:'type', profit:40, sales: undefined, },\n *    { date: '2022', 20001:'type', profit:50, sales: 100, },\n * ]\n */\nexport const zDatum = z.record(z.string().or(z.number()), z.any())\nexport const zDataset = z.array(zDatum)\n\nexport type Datum = z.infer<typeof zDatum>\nexport type Dataset = z.infer<typeof zDataset>\n","import { z } from 'zod'\nimport type { DimensionGroup } from './dimensions'\n\nexport const zDimension = z.object({\n  id: z.string(),\n  alias: z.string().optional(),\n  encoding: z.enum(['xAxis', 'yAxis', 'angle', 'color', 'detail', 'tooltip', 'label', 'row', 'column']).optional(),\n})\nexport const zDimensionGroup: z.ZodType<DimensionGroup> = z.object({\n  id: z.string(),\n  alias: z.string().optional(),\n  get children() {\n    return z.array(zDimensionGroup.or(zDimension)).optional()\n  },\n})\nexport const zDimensions = z.array(zDimension)\nexport const zDimensionTree = z.array(zDimensionGroup.or(zDimension))\n","import { z } from 'zod'\n\nexport interface NumFormat {\n  /**\n   * @description 数字格式化类型, 支持数值(十进制)、百分比(%)、千分比(‰)、科学计数法\n   * @default 'number'\n   */\n  type?: 'number' | 'percent' | 'permille' | 'scientific'\n\n  /**\n   * @description 数值格式化比例, 不能为0\n   * @default 1\n   * @example\n   * - 100000 转换为 10万, ratio:10000, symbol:\"万\"\n   * - 100000 转换为 10K, ratio:1000, symbol:\"K\"\n   */\n  ratio?: number\n\n  /**\n   * @description 数值格式化符号, 例如%、‰\n   * @default ''\n   * @example\n   * - 100000 转换为 10万, ratio:10000, symbol:\"万\"\n   * - 100000 转换为 10K, ratio:1000, symbol:\"K\"\n   */\n  symbol?: string\n\n  /**\n   * @description 数值格式化千分位分隔符\n   * @default true\n   */\n  thousandSeparator?: boolean\n\n  /**\n   * @description 数值格式化后缀\n   * @default ''\n   */\n  suffix?: string\n  /**\n   * @description 数值格式化前缀\n   * @default ''\n   */\n  prefix?: string\n\n  /**\n   * @description 数值格式化小数位, 使用浏览器提供的 Intl.NumberFormat 中的 minimumFractionDigits 和 maximumFractionDigits 进行格式化, 优先级低于 significantDigits\n   * @default 2\n   * @example\n   * - 1234.5678 转换为 1235, fractionDigits:0 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.6, fractionDigits:1 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.57, fractionDigits:2 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1230.568, fractionDigits:3 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.5678, fractionDigits:4 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.56780, fractionDigits:5 (roundingMode:halfCeil)\n   */\n  fractionDigits?: number\n\n  /**\n   * @description 数值格式化有效位, 使用浏览器提供的 Intl.NumberFormat 中的 minimumSignificantDigits 和 maximumSignificantDigits 进行格式化, 优先级高于 fractionDigits\n   * @default undefined\n   * @example\n   * - 1234.5678 转换为 1000, significantDigits:1\n   * - 1234.5678 转换为 1200, significantDigits:2\n   * - 1234.5678 转换为 1230, significantDigits:3\n   * - 1234.5678 转换为 1234, significantDigits:4\n   * - 1234.5678 转换为 1234.6, significantDigits:5 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.57, significantDigits:6 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.568, significantDigits:7 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.5678, significantDigits:8 (roundingMode:halfCeil)\n   */\n  significantDigits?: number\n\n  /**\n   * @description 数值格式化舍入优先级, 处理同时设置了 significantDigits 和 fractionDigits 时的舍入优先级, 使用浏览器提供的 Intl.NumberFormat 进行格式化, 规则同 Intl.NumberFormat 中的 roundingPriority\n   * @default 'morePrecision'\n   * @example\n   * - 1234.5678 转换为 1230, significantDigits:3 (roundingPriority:lessPrecision)\n   * - 1234.5678 转换为 1234.5678, significantDigits:3 (roundingPriority:morePrecision)\n   */\n  roundingPriority?: 'morePrecision' | 'lessPrecision'\n\n  /**\n   * @description 数值格式化舍入模式, 使用浏览器提供的 Intl.NumberFormat 进行格式化, 规则同 Intl.NumberFormat 中的 roundingMode\n   * @default 'halfExpand'\n   * @example\n   */\n  roundingMode?:\n    | 'floor'\n    | 'ceil'\n    | 'expand'\n    | 'trunc'\n    | 'halfCeil'\n    | 'halfFloor'\n    | 'halfExpand'\n    | 'halfTrunc'\n    | 'halfEven'\n}\n\nexport const zNumFormat = z\n  .object({\n    type: z.enum(['number', 'percent', 'permille', 'scientific']).default('number').optional(),\n    ratio: z.number().default(1).optional(),\n    symbol: z.string().default('').optional(),\n    thousandSeparator: z.boolean().default(false).optional(),\n    prefix: z.string().default('').optional(),\n    suffix: z.string().default('').optional(),\n\n    fractionDigits: z.number().default(2).optional(),\n    significantDigits: z.number().default(0).optional(),\n    roundingPriority: z.enum(['morePrecision', 'lessPrecision']).default('morePrecision').optional(),\n    roundingMode: z\n      .enum(['floor', 'ceil', 'halfEven', 'expand', 'trunc', 'halfFloor', 'halfCeil', 'halfExpand', 'halfTrunc'])\n      .default('halfCeil')\n      .optional(),\n  })\n  .optional()\n","import { z } from 'zod'\nimport { zNumFormat } from '../format/numFormat'\nimport type { MeasureGroup } from './measures'\n\nexport const zMeasure = z.object({\n  id: z.string(),\n  alias: z.string().optional(),\n  autoFormat: z.boolean().optional(),\n  numFormat: zNumFormat.optional(),\n  format: zNumFormat.optional(),\n  encoding: z\n    .enum([\n      'primaryYAxis',\n      'secondaryYAxis',\n      'xAxis',\n      'yAxis',\n      'angle',\n      'radius',\n      'size',\n      'color',\n      'label',\n      'tooltip',\n      'detail',\n      'column',\n      'value',\n      'q1',\n      'q3',\n      'min',\n      'max',\n      'median',\n      'outliers',\n      'x0',\n      'x1',\n    ])\n    .optional(),\n  parentId: z.string().optional(),\n})\n\nexport const zMeasureGroup: z.ZodType<MeasureGroup> = z.object({\n  id: z.string(),\n  alias: z.string().optional(),\n  get children() {\n    return z.array(zMeasureGroup.or(zMeasure)).optional()\n  },\n})\n\nexport const zMeasures = z.array(zMeasure)\nexport const zMeasureTree = z.array(zMeasureGroup.or(zMeasure))\n","import { z } from 'zod'\nimport { zMeasure } from './zMeasures'\n\nexport const zDualMeasure = z.object({\n  id: z.string(),\n\n  primaryMeasures: z\n    .array(\n      zMeasure.omit({\n        encoding: true,\n        parentId: true,\n      }),\n    )\n    .or(\n      zMeasure.omit({\n        parentId: true,\n        encoding: true,\n      }),\n    )\n    .optional(),\n\n  secondaryMeasures: z.array(zMeasure).or(zMeasure).optional(),\n})\n\nexport const zDualMeasures = z.array(zDualMeasure)\n","import { z } from 'zod'\nimport { zMeasure } from './zMeasures'\n\nexport const zScatterMeasure = z.object({\n  id: z.string(),\n\n  xMeasures: z\n    .array(\n      zMeasure.omit({\n        parentId: true,\n        encoding: true,\n      }),\n    )\n    .or(zMeasure)\n    .optional(),\n\n  yMeasures: z\n    .array(\n      zMeasure.omit({\n        parentId: true,\n        encoding: true,\n      }),\n    )\n    .or(zMeasure)\n    .optional(),\n})\n\nexport const zScatterMeasures = z.array(zScatterMeasure)\n","import { z } from 'zod'\n\nexport const zFoldInfo = z.object({\n  foldMap: z.record(z.string(), z.string().or(z.undefined())),\n  statistics: z.object({\n    min: z.number(),\n    max: z.number(),\n    sum: z.number(),\n    count: z.number(),\n    colorMin: z.number(),\n    colorMax: z.number(),\n  }),\n  measureId: z.string(),\n  measureName: z.string(),\n  measureValue: z.string(),\n})\nexport const zUnfoldInfo = z.object({\n  encodingX: z.string(),\n  encodingY: z.string(),\n  encodingColor: z.string(),\n  encodingColorId: z.string(),\n  encodingDetail: z.string(),\n  encodingAngle: z.string(),\n  colorItems: z.array(z.string()),\n  colorIdMap: z.record(z.string(), z.object({ id: z.string(), alias: z.string() })),\n})\n\nexport const zDatasetReshapeInfo = z.array(\n  z.object({\n    id: z.string(),\n    index: z.number(),\n    foldInfo: zFoldInfo,\n    foldInfoList: z.array(zFoldInfo).nullish(),\n    unfoldInfo: zUnfoldInfo,\n  }),\n)\n","import { z } from 'zod'\n\nexport const zEncoding = z.object({\n  x: z.array(z.string()).nullish(),\n  y: z.array(z.string()).nullish(),\n  angle: z.array(z.string()).nullish(),\n  radius: z.array(z.string()).nullish(),\n  detail: z.array(z.string()).nullish(),\n\n  color: z.array(z.string()).nullish(),\n  size: z.array(z.string()).nullish(),\n  tooltip: z.array(z.string()).nullish(),\n  label: z.array(z.string()).nullish(),\n\n  row: z.array(z.string()).nullish(),\n  column: z.array(z.string()).nullish(),\n\n  group: z.array(z.string()).nullish().describe('已弃用, 请使用颜色替代'),\n  value: z.array(z.string()).nullish(),\n  q1: z.array(z.string()).nullish(),\n  q3: z.array(z.string()).nullish(),\n  median: z.array(z.string()).nullish(),\n  min: z.array(z.string()).nullish(),\n  max: z.array(z.string()).nullish(),\n  outliers: z.array(z.string()).nullish(),\n\n  x0: z.array(z.string()).nullish(),\n  x1: z.array(z.string()).nullish(),\n})\n\n/**\n * @description 仅VSeed内AdvancedVSeed使用此结构, 其余场景请使用DimensionEncodingEnum、MeasureEncodingEnum\n */\nexport const EncodingEnum = {\n  x: 'x',\n  y: 'y',\n  angle: 'angle',\n  radius: 'radius',\n  detail: 'detail',\n\n  color: 'color',\n  size: 'size',\n  tooltip: 'tooltip',\n  label: 'label',\n\n  row: 'row',\n  column: 'column',\n\n  group: 'group',\n} as const\n","import { z } from 'zod'\n\nexport const zDimensionEncoding = z.enum([\n  'xAxis',\n  'yAxis',\n  'angle',\n  'color',\n  'detail',\n  'tooltip',\n  'label',\n  'row',\n  'column',\n])\n\nexport const DimensionEncodingEnum = {\n  xAxis: 'xAxis',\n  yAxis: 'yAxis',\n  angle: 'angle',\n  color: 'color',\n  detail: 'detail',\n  tooltip: 'tooltip',\n  label: 'label',\n  row: 'row',\n  column: 'column',\n} as const\n","import { z } from 'zod'\n\nexport const zMeasureEncoding = z.enum([\n  'primaryYAxis',\n  'secondaryYAxis',\n  'xAxis',\n  'yAxis',\n  'angle',\n  'radius',\n  'size',\n  'color',\n  'detail',\n  'column',\n  'label',\n  'tooltip',\n])\n\nexport const MeasureEncodingEnum = {\n  primaryYAxis: 'primaryYAxis',\n  secondaryYAxis: 'secondaryYAxis',\n  xAxis: 'xAxis',\n  yAxis: 'yAxis',\n  angle: 'angle',\n  radius: 'radius',\n  size: 'size',\n  color: 'color',\n  detail: 'detail',\n  column: 'column',\n  label: 'label',\n  tooltip: 'tooltip',\n} as const\n","import { z } from 'zod'\nexport const zBackgroundColor = z.string().default('transparent').nullish()\n\n/**\n * 图表的背景颜色\n * @default transparent 默认为透明背景\n * @description 背景颜色可以是颜色字符串, 例如'red', 'blue', 也可以是hex, rgb或rgba'#ff0000', 'rgba(255,0,0,0.5)'\n */\nexport type BackgroundColor = string | undefined\n","import { z } from 'zod'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\n\nexport const zTableConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n\n  // Border\n  borderColor: z.string().nullish(),\n\n  // Body\n  bodyFontSize: z.number().nullish(),\n  bodyFontColor: z.string().nullish(),\n  bodyBackgroundColor: z.string().nullish(),\n  // Body interaction\n  hoverBodyBackgroundColor: z.string().nullish(),\n  hoverBodyInlineBackgroundColor: z.string().nullish(),\n\n  // Header\n  headerFontSize: z.number().nullish(),\n  headerFontColor: z.string().nullish(),\n  headerBackgroundColor: z.string().nullish(),\n  // Header interaction\n  hoverHeaderBackgroundColor: z.string().nullish(),\n  hoverHeaderInlineBackgroundColor: z.string().nullish(),\n\n  // Interaction\n  selectedBorderColor: z.string().nullish(),\n  selectedBackgroundColor: z.string().nullish(),\n})\n\nexport type TableConfig = z.infer<typeof zTableConfig>\n","import { z } from 'zod'\n\nexport const zXBandAxis = z.object({\n  visible: z.boolean().default(true).nullish(),\n\n  labelAutoHide: z.boolean().default(true).nullish(),\n  labelAutoHideGap: z.number().default(0).nullish(),\n  labelAutoRotate: z.boolean().default(true).nullish(),\n  labelAutoRotateAngleRange: z.array(z.number()).default([0, -45, -90]).nullish(),\n  labelAutoLimit: z.boolean().default(true).nullish(),\n  labelAutoLimitLength: z.number().default(100).nullish(),\n  label: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      labelColor: z.string().default('#797B85').nullish(),\n      labelFontSize: z.number().default(12).nullish(),\n      labelFontWeight: z.number().default(400).nullish(),\n      labelAngle: z.number().default(0).nullish(),\n    })\n    .nullish(),\n  line: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      lineColor: z.string().default('rgba(54, 65, 89, 0.30)').nullish(),\n      lineWidth: z.number().default(1).nullish(),\n    })\n    .nullish(),\n  tick: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      tickInside: z.boolean().default(false).nullish(),\n      tickColor: z.string().default('rgba(54, 65, 89, 0.30)').nullish(),\n      tickSize: z.number().default(4).nullish(),\n    })\n    .nullish(),\n  title: z\n    .object({\n      visible: z.boolean().default(false).nullish(),\n      titleText: z.string().default('').nullish(),\n      titleColor: z.string().default('#646A73').nullish(),\n      titleFontSize: z.number().default(12).nullish(),\n      titleFontWeight: z.number().default(400).nullish(),\n    })\n    .nullish(),\n  grid: z\n    .object({\n      visible: z.boolean().default(false).nullish(),\n      gridColor: z.string().default('rgba(54, 65, 89, 0.15)').nullish(),\n      gridWidth: z.number().default(0.5).nullish(),\n      gridLineDash: z.array(z.number()).nullish(),\n    })\n    .nullish(),\n})\nexport const zYBandAxis = zXBandAxis\n","import { z } from 'zod'\nimport { zNumFormat } from '../../format'\n\nexport const zXLinearAxis = z.object({\n  visible: z.boolean().default(true).nullish(),\n\n  min: z.number().nullish(),\n  max: z.number().nullish(),\n  nice: z.boolean().default(true).nullish(),\n  zero: z.boolean().default(true).nullish(),\n  log: z.boolean().default(false).nullish(),\n  logBase: z.number().default(10).nullish(),\n  inverse: z.boolean().default(false).nullish(),\n  numFormat: zNumFormat.nullish(),\n  label: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      labelColor: z.string().default('#797B85').nullish(),\n      labelFontSize: z.number().default(12).nullish(),\n      labelFontWeight: z.number().default(400).nullish(),\n      labelAngle: z.number().default(0).nullish(),\n    })\n    .nullish(),\n  line: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      lineColor: z.string().default('rgba(54, 65, 89, 0.30)').nullish(),\n      lineWidth: z.number().default(1).nullish(),\n    })\n    .nullish(),\n  tick: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      tickInside: z.boolean().default(false).nullish(),\n      tickColor: z.string().default('rgba(54, 65, 89, 0.30)').nullish(),\n      tickSize: z.number().default(4).nullish(),\n    })\n    .nullish(),\n  title: z\n    .object({\n      visible: z.boolean().default(false).nullish(),\n      titleText: z.string().default('').nullish(),\n      titleColor: z.string().default('#646A73').nullish(),\n      titleFontSize: z.number().default(12).nullish(),\n      titleFontWeight: z.number().default(400).nullish(),\n    })\n    .nullish(),\n  grid: z\n    .object({\n      visible: z.boolean().default(false).nullish(),\n      gridColor: z.string().default('rgba(54, 65, 89, 0.15)').nullish(),\n      gridWidth: z.number().default(0.5).nullish(),\n      gridLineDash: z.array(z.number()).nullish(),\n    })\n    .nullish(),\n})\n\nexport const zYLinearAxis = zXLinearAxis\n","import { z } from 'zod'\n\nexport const zCrosshairLine = z.object({\n  visible: z.boolean().nullish(),\n  lineColor: z.string().nullish(),\n  labelColor: z.string().nullish(),\n  labelVisible: z.boolean().nullish(),\n  labelBackgroundColor: z.string().nullish(),\n  lineDash: z.array(z.number()).nullish(),\n})\n\nexport const zCrosshairRect = z.object({\n  visible: z.boolean().nullish(),\n  rectColor: z.string().nullish(),\n  labelColor: z.string().nullish(),\n  labelVisible: z.boolean().nullish(),\n  labelBackgroundColor: z.string().nullish(),\n})\n","import { z } from 'zod'\n\nexport const zColor = z.object({\n  colorScheme: z.array(z.string()).nullish(),\n  linearColorScheme: z.array(z.string()).nullish(),\n  colorMapping: z.record(z.string(), z.string()).nullish(),\n})\n\nexport const zLinearColor = z.object({\n  linearColorScheme: z.array(z.string()).nullish(),\n})\n\nexport type Color = {\n  /**\n   * @description 离散颜色配色方案, 颜色配色方案用于定义图表中不同元素的颜色\n   * @example ['#FFCDD2,#F8BBD0,#E1BEE7,#D1C4E9,#C5CAE9,#BBDEFB,#B3E5FC,#B2EBF2,#B2DFDB,#C8E6C9,#DCEDC8,#F0F4C3,#FFF9C4,#FFECB3,#FFE0B2']\n   */\n  colorScheme?: string[]\n  /**\n   * @description 线性渐变颜色配色方案, 线性渐变颜色配色方案用于定义图表中不同元素的颜色\n   * @example ['#FFCDD2, #F8BBD0]\n   */\n  linearColorScheme?: string[]\n  /**\n   * @description 颜色映射, 颜色映射用于将数据值映射到具体的颜色\n   * @example\n   * {\n   *  'profit': 'red',\n   *  'sales': 'blue',\n   * }\n   */\n  colorMapping?: Record<string, string>\n  /**\n   * @description 正负颜色配置, 用于定义图表中正值的颜色\n   */\n  positiveColor?: string\n  /**\n   * @description 正负颜色配置, 用于定义图表中负值的颜色\n   */\n  negativeColor?: string\n}\n","import { z } from 'zod'\nimport type { Datum } from '../properties'\n\nexport type ValueSelector = string | number\n\nexport type PartialDatumSelector = Datum\n\n/**\n * @description 指标选择器, 用于选择数据项中指标字段的值\n */\nexport type MeasureSelector = {\n  /**\n   * @description 指标字段, measures 某一项的 id\n   */\n  field: string\n  /**\n   * @description 操作符\n   * - =: 选择数据项中指标字段的值等于 value 的数据项\n   * - ==: 选择数据项中指标字段的值等于 value 的数据项\n   * - !=: 选择数据项中指标字段的值不等于 value 的数据项\n   * - >: 选择数据项中指标字段的值大于 value 的数据项\n   * - <: 选择数据项中指标字段的值小于 value 的数据项\n   * - >=: 选择数据项中指标字段的值大于等于 value 的数据项\n   * - <=: 选择数据项中指标字段的值小于等于 value 的数据项\n   * - between: 选择数据项中指标字段的值在 value 之间的 data item\n   */\n  operator?: '=' | '==' | '!=' | '>' | '<' | '>=' | '<=' | 'between'\n  /**\n   * @description 操作符\n   * - =: 选择数据项中指标字段的值等于 value 的数据项, 会将值转换为字符串后进行比较, 因此 1 == \"1\" 为 true\n   * - ==: 选择数据项中指标字段的值精准等于 value 的数据项, 不会做任何特殊处理, 因此 1 == \"1\" 为 false\n   * - !=: 选择数据项中指标字段的值不等于 value 的数据项\n   * - >: 选择数据项中指标字段的值大于 value 的数据项\n   * - <: 选择数据项中指标字段的值小于 value 的数据项\n   * - >=: 选择数据项中指标字段的值大于等于 value 的数据项\n   * - <=: 选择数据项中指标字段的值小于等于 value 的数据项\n   * - between: 选择数据项中指标字段的值在 value 之间的 data item\n   * same as operator\n   */\n  op?: '=' | '==' | '!=' | '>' | '<' | '>=' | '<=' | 'between'\n  /**\n   * @description 选择数据项中指标字段的值\n   * - 仅 op 为 between 时, value 为长度为2的数组, 数组中的元素为指标字段的最小值和最大值\n   * - 其他情况, value 为指标字段的单个值\n   */\n  value: string | number | Array<string | number>\n  // /**\n  //  * @description 是否使用原始数据进行数据匹配, 开启后会有更多的数据被匹配到\n  //  * 若下述数据, measures 仅设置了 value, field 为 isHigh 或 isLow, op 为 =, value 为 1,\n  //  * 关闭useOrigin时, 数据项并不会考虑measures之外的字段, 因此field为isHigh或isLow的字段会被忽略\n  //  * 开启useOrigin时, 会直接使用整个数据项进行匹配\n  //  * [\n  //  *  {value: 100, isHigh: 1, isLow: 0},\n  //  *  {value: 200, isHigh: 0, isLow: 1},\n  //  *  {value: 300, isHigh: 1, isLow: 0},\n  //  * ]\n  //  * @default false\n  //  */\n  // useOrigin?: boolean\n}\n\n/**\n * @description 维度选择器, 用于选择数据项中维度字段的值\n */\nexport type DimensionSelector = {\n  /**\n   * @description 维度字段, dimensions 某一项的 id\n   */\n  field: string\n  /**\n   * @description 操作符\n   * - in: 选择数据项中维度字段的值在 value 中的数据项\n   * - not in: 选择数据项中维度字段的值不在 value 中的数据项\n   */\n  operator?: 'in' | 'not in'\n  /**\n   * @description 操作符\n   * - in: 选择数据项中维度字段的值在 value 中的数据项\n   * - not in: 选择数据项中维度字段的值不在 value 中的数据项\n   * same as operator\n   */\n  op?: 'in' | 'not in'\n  /**\n   * @description 选择数据项中维度字段的值, 支持数组\n   */\n  value: string | number | Array<string | number>\n  // /**\n  //  * @description 是否使用原始数据进行数据匹配, 开启后会有更多的数据被匹配到\n  //  * 若下述数据, dimensions 仅设置了 name, field 为 name, op 为 =, value 为 \"high\",\n  //  * 关闭useOrigin时, 数据项并不会考虑dimensions之外的字段, 因此field为name的字段会被忽略\n  //  * 开启useOrigin时, 会直接使用整个数据项进行匹配\n  //  * [\n  //  *  {name: \"low\", isHigh: \"false\", isLow: \"true\"},\n  //  *  {name: \"low\", isHigh: \"false\", isLow: \"true\"},\n  //  *  {name: \"high\", isHigh: \"true\", isLow: \"false\"},\n  //  * ]\n  //  * @default false\n  //  */\n  // useOrigin?: boolean\n}\n\nexport type Selector = ValueSelector | PartialDatumSelector | MeasureSelector | DimensionSelector\n\nexport type Selectors = Array<Selector>\n\nexport const zSelector = z.union([\n  z.string(),\n  z.number(),\n  z.object({\n    field: z.string(),\n    operator: z.enum(['=', '==', '!=', '>', '<', '>=', '<=', 'between']).nullish(),\n    op: z.enum(['=', '==', '!=', '>', '<', '>=', '<=', 'between']).nullish(),\n    value: z.union([z.string(), z.number(), z.array(z.union([z.string(), z.number()]))]),\n  }),\n  z.object({\n    field: z.string(),\n    operator: z.enum(['in', 'not in']).nullish(),\n    op: z.enum(['in', 'not in']).nullish(),\n    value: z.union([z.string(), z.number(), z.array(z.union([z.string(), z.number()]))]),\n  }),\n])\n\nexport const zSelectors = z.array(zSelector)\n","import { z } from 'zod'\nimport { zNumFormat } from '../../format'\nimport { zSelector, zSelectors } from 'src/types/dataSelector'\n\nexport const zLabel = z.object({\n  enable: z.boolean().nullish(),\n  wrap: z.boolean().nullish(),\n  showValue: z.boolean().nullish(),\n  showValuePercent: z.boolean().nullish(),\n  showDimension: z.boolean().nullish(),\n  autoFormat: z.boolean().nullish(),\n  numFormat: zNumFormat.nullish(),\n  labelFontSize: z.number().nullish(),\n  labelFontWeight: z.number().or(z.string()).nullish(),\n  labelBackgroundColor: z.string().nullish(),\n  labelColor: z.string().nullish(),\n  labelColorSmartInvert: z.boolean().nullish(),\n  labelPosition: z.string().nullish(),\n  labelOverlap: z.boolean().nullish(),\n  selector: z.union([zSelector, zSelectors]).nullish(),\n})\n","import { z } from 'zod'\n\nexport type Legend = {\n  /**\n   * 图例功能是否开启\n   * @default true\n   * @example enable: true\n   */\n  enable?: boolean\n  /**\n   * @description 图例边框是否开启\n   * @warning 仅离散图例生效\n   * @default true\n   * @example border: true\n   */\n  border?: boolean\n\n  /**\n   * @description 图例字体颜色\n   */\n  labelColor?: string\n  /**\n   * @description 分页器icon颜色\n   */\n  pagerIconColor?: string\n  /**\n   * @description 分页器icon置灰颜色\n   */\n  pagerIconDisableColor?: string\n  /**\n   * @description 图例字体大小\n   * @example labelFontSize: 10\n   */\n  labelFontSize?: number\n\n  /**\n   * @description 图例字体颜色\n   * @deprecated use labelColor instead\n   */\n  labelFontColor?: string\n\n  /**\n   * @description 图例字体粗细\n   * @example labelFontWeight: 400\n   */\n  labelFontWeight?: number | string\n  /**\n   * @description 图例形状\n   * @warning 仅离散图例生效\n   * @example shapeType: 'circle'\n   */\n  shapeType?:\n    | 'circle'\n    | 'cross'\n    | 'diamond'\n    | 'square'\n    | 'arrow'\n    | 'arrow2Left'\n    | 'arrow2Right'\n    | 'wedge'\n    | 'thinTriangle'\n    | 'triangle'\n    | 'triangleUp'\n    | 'triangleDown'\n    | 'triangleRight'\n    | 'triangleLeft'\n    | 'stroke'\n    | 'star'\n    | 'wye'\n    | 'rect'\n    | 'arrowLeft'\n    | 'arrowRight'\n    | 'rectRound'\n    | 'roundLine'\n  /**\n   * 图例位置\n   * @default 'right'\n   * @example position: 'rightTop'\n   */\n  position?:\n    | 'left'\n    | 'leftTop'\n    | 'leftBottom'\n    | 'lt'\n    | 'lb'\n    | 'top'\n    | 'topLeft'\n    | 'topRight'\n    | 'tl'\n    | 'tr'\n    | 'right'\n    | 'rightTop'\n    | 'rightBottom'\n    | 'rt'\n    | 'rb'\n    | 'bottom'\n    | 'bottomLeft'\n    | 'bottomRight'\n    | 'bl'\n    | 'br'\n\n  /**\n   * @description 存在大量图例时, 最大列数 或 图例最大行数\n   *  如果position为水平方向(bottom, bottomLeft, bottomRight, bl, br, top, topLeft, topRight, tl, tr), maxSize控制显示的列数\n   *  如果position为垂直方向(left, leftTop, leftBottom, lt, lb, right, rightTop, rightBottom, rt, rb), maxSize控制显示的行数\n   *\n   * @warning 仅离散图例生效\n   * @example maxSize: 2\n   * @default 1\n   */\n  maxSize?: number\n}\n\nexport const zLegend = z.object({\n  enable: z.boolean().default(true).nullish(),\n  border: z.boolean().default(true).nullish(),\n  maxSize: z.number().default(1).nullish(),\n  shapeType: z\n    .enum([\n      'circle',\n      'cross',\n      'diamond',\n      'square',\n      'arrow',\n      'arrow2Left',\n      'arrow2Right',\n      'wedge',\n      'thinTriangle',\n      'triangle',\n      'triangleUp',\n      'triangleDown',\n      'triangleRight',\n      'triangleLeft',\n      'stroke',\n      'star',\n      'wye',\n      'rect',\n      'arrowLeft',\n      'arrowRight',\n      'rectRound',\n      'roundLine',\n    ])\n    .default('rectRound')\n    .nullish(),\n  position: z\n    .enum([\n      'left',\n      'leftTop',\n      'leftBottom',\n      'lt',\n      'lb',\n      'top',\n      'topLeft',\n      'topRight',\n      'tl',\n      'tr',\n      'right',\n      'rightTop',\n      'rightBottom',\n      'rt',\n      'rb',\n      'bottom',\n      'bottomLeft',\n      'bottomRight',\n      'bl',\n      'br',\n    ])\n    .default('bottom')\n    .nullish(),\n  labelColor: z.string().default('#fff').nullish(),\n  pagerIconColor: z.string().nullish(),\n  pagerIconDisableColor: z.string().nullish(),\n  labelFontSize: z.number().default(12).nullish(),\n  labelFontWeight: z.number().or(z.string()).default(400).nullish(),\n})\n\nexport type ColorLegend = Pick<Legend, 'position' | 'enable'>\nexport const zColorLegend = z.object({\n  position: z\n    .enum([\n      'left',\n      'leftTop',\n      'leftBottom',\n      'lt',\n      'lb',\n      'top',\n      'topLeft',\n      'topRight',\n      'tl',\n      'tr',\n      'right',\n      'rightTop',\n      'rightBottom',\n      'rt',\n      'rb',\n      'bottom',\n      'bottomLeft',\n      'bottomRight',\n      'bl',\n      'br',\n    ])\n    .default('bottom')\n    .nullish(),\n  enable: z.boolean().default(true).nullish(),\n})\n","import { z } from 'zod'\n\nexport const zTooltip = z.object({\n  enable: z.boolean().default(true).nullish(),\n  borderColor: z.string().nullish(),\n  borderWidth: z.number().nullish(),\n  borderRadius: z.number().nullish(),\n  padding: z.number().or(z.array(z.number()).length(4)).nullish(),\n  backgroundColor: z.string().nullish(),\n  lineHeight: z.number().nullish(),\n  fontSize: z.number().nullish(),\n  lineSpace: z.number().nullish(),\n  keyColor: z.string().nullish(),\n  valueColor: z.string().nullish(),\n  titleColor: z.string().nullish(),\n})\n\nexport type TooltipConfig = z.infer<typeof zTooltip>\n\nexport type Tooltip = {\n  /**\n   * 提示信息功能是否开启\n   * @default true\n   */\n  enable: boolean\n}\n","import { zSelector, zSelectors } from '../../dataSelector'\nimport { z } from 'zod'\n\nexport const zAnnotationPoint = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  text: z.string().or(z.array(z.string())).nullish(),\n  textColor: z.string().default('#ffffff').nullish(),\n  textFontSize: z.number().default(12).nullish(),\n  textFontWeight: z.number().default(400).nullish(),\n  textAlign: z.enum(['left', 'right', 'center']).default('center').nullish(),\n  textBaseline: z.enum(['top', 'middle', 'bottom']).default('middle').nullish(),\n  textBackgroundVisible: z.boolean().default(true).nullish(),\n  textBackgroundColor: z.string().default('#212121').nullish(),\n  textBackgroundBorderColor: z.string().nullish(),\n  textBackgroundBorderWidth: z.number().default(1).nullish(),\n  textBackgroundBorderRadius: z.number().default(4).nullish(),\n  textBackgroundPadding: z.number().nullish(),\n\n  offsetY: z.number().default(0).nullish(),\n  offsetX: z.number().default(0).nullish(),\n})\n","import { zSelector, zSelectors } from '../../dataSelector'\nimport { z } from 'zod'\n\nexport const zAnnotationHorizontalLine = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  yValue: z.union([z.number(), z.string(), z.array(z.union([z.number(), z.string()]))]).nullish(),\n  text: z.string().or(z.array(z.string())).nullish(),\n  textPosition: z\n    .enum(['outsideStart', 'outsideEnd', 'outsideMiddle', 'insideStart', 'insideMiddle', 'insideEnd'])\n    .default('insideEnd')\n    .nullish(),\n  textColor: z.string().default('#ffffff').nullish(),\n  textFontSize: z.number().default(12).nullish(),\n  textFontWeight: z.number().default(400).nullish(),\n  textAlign: z.enum(['left', 'right', 'center']).default('right').nullish(),\n  textBaseline: z.enum(['top', 'middle', 'bottom']).default('top').nullish(),\n\n  lineVisible: z.boolean().default(true).nullish(),\n  lineColor: z.string().default('#212121').nullish(),\n  lineWidth: z.number().default(1).nullish(),\n  lineStyle: z\n    .union([z.literal('solid'), z.literal('dashed'), z.literal('dotted')])\n    .default('dashed')\n    .nullish(),\n\n  textBackgroundVisible: z.boolean().default(true).nullish(),\n  textBackgroundColor: z.string().default('#212121').nullish(),\n  textBackgroundBorderColor: z.string().default('#212121').nullish(),\n  textBackgroundBorderRadius: z.number().default(4).nullish(),\n  textBackgroundBorderWidth: z.number().default(1).nullish(),\n  textBackgroundPadding: z.number().default(2).nullish(),\n})\n","import { zSelector, zSelectors } from '../../dataSelector'\nimport { z } from 'zod'\n\nexport const zAnnotationArea = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  textPosition: z\n    .enum(['top', 'topRight', 'topLeft', 'bottom', 'bottomLeft', 'bottomRight', 'left', 'right'])\n    .default('top')\n    .nullish(),\n  text: z.string().or(z.array(z.string())).nullish(),\n  textColor: z.string().default('#ffffff').nullish(),\n  textFontSize: z.number().default(12).nullish(),\n  textFontWeight: z.number().default(400).nullish(),\n  textAlign: z.enum(['left', 'right', 'center']).default('center').nullish(),\n  textBaseline: z.enum(['top', 'middle', 'bottom']).default('top').nullish(),\n\n  textBackgroundVisible: z.boolean().default(true).nullish(),\n  textBackgroundColor: z.string().default('#191d24').nullish(),\n  textBackgroundBorderColor: z.string().default('#191d24').nullish(),\n  textBackgroundBorderWidth: z.number().default(1).nullish(),\n  textBackgroundBorderRadius: z.number().default(4).nullish(),\n  textBackgroundPadding: z.number().default(4).nullish(),\n\n  areaColor: z.string().default('#888888').nullish(),\n  areaColorOpacity: z.number().default(0.15).nullish(),\n  areaBorderColor: z.string().default('#888888').nullish(),\n  areaBorderWidth: z.number().default(1).nullish(),\n  areaBorderRadius: z.number().default(4).nullish(),\n  areaLineDash: z.array(z.number()).nullish(),\n\n  outerPadding: z.number().default(4).nullish(),\n})\n","import { z } from 'zod'\nimport { zAnnotationPoint } from '../../annotation/zAnnotationPoint'\nimport { zAnnotationHorizontalLine } from '../../annotation/zAnnotationHorizontalLine'\nimport { zAnnotationArea } from '../../annotation/zAnnotationArea'\n\nexport const zAnnotationPointConfig = zAnnotationPoint.omit({ selector: true, text: true }).partial()\n\n// Use pick to explicitly list fields we want to expose in config variants.\nexport const zAnnotationHorizontalLineConfig = zAnnotationHorizontalLine\n  .pick({\n    // only pick fields that exist on the runtime schema\n    lineColor: true,\n    lineWidth: true,\n    lineVisible: true,\n    lineStyle: true,\n\n    textBackgroundVisible: true,\n    textColor: true,\n    textFontSize: true,\n    textFontWeight: true,\n    textBackgroundColor: true,\n    textBackgroundBorderColor: true,\n    textBackgroundBorderWidth: true,\n    textBackgroundBorderRadius: true,\n    textBackgroundPadding: true,\n  })\n  // extend with additional config-only fields that runtime schema doesn't include\n  .extend({\n    endSymbolVisible: z.boolean().nullish(),\n    endSymbolType: z.string().nullish(),\n    endSymbolSize: z.number().nullish(),\n\n    startSymbolVisible: z.boolean().nullish(),\n    startSymbolType: z.string().nullish(),\n    startSymbolSize: z.number().nullish(),\n  })\n  .partial()\n\nexport const zAnnotationVerticalLineConfig = zAnnotationHorizontalLineConfig.clone()\n\nexport const zAnnotationAreaConfig = zAnnotationArea\n  .pick({\n    textColor: true,\n    textFontSize: true,\n    textFontWeight: true,\n\n    textBackgroundVisible: true,\n    textBackgroundColor: true,\n    textBackgroundBorderColor: true,\n    textBackgroundBorderWidth: true,\n    textBackgroundBorderRadius: true,\n    textBackgroundPadding: true,\n\n    areaColor: true,\n    areaColorOpacity: true,\n    areaBorderColor: true,\n    areaBorderWidth: true,\n    areaBorderRadius: true,\n    areaLineDash: true,\n\n    outerPadding: true,\n  })\n  .partial()\n\nexport const zAnnotationConfig = z.object({\n  annotationPoint: zAnnotationPointConfig.nullish(),\n  annotationHorizontalLine: zAnnotationHorizontalLineConfig.nullish(),\n  annotationVerticalLine: zAnnotationVerticalLineConfig.nullish(),\n  annotationArea: zAnnotationAreaConfig.nullish(),\n})\n","import { z } from 'zod'\n\nexport const zPivotChartGridConfig = z.object({\n  borderColor: z.string().nullish(),\n  bodyFontColor: z.string().nullish(),\n  headerFontColor: z.string().nullish(),\n  headerBackgroundColor: z.string().nullish(),\n  hoverHeaderBackgroundColor: z.string().nullish(),\n  hoverHeaderInlineBackgroundColor: z.string().nullish(),\n  outlineBorderLineWidth: z.number().nullish(),\n  frameCornerRadius: z.number().nullish(),\n\n  minChartWidth: z.number().nullish(),\n  minChartHeight: z.number().nullish(),\n\n  titleFontColor: z.string().nullish(),\n  titleFontSize: z.number().nullish(),\n  titleFontWeight: z.string().nullish(),\n\n  chartGridColor: z.string().nullish(),\n  axisLabelColor: z.string().nullish(),\n})\n\nexport type PivotChartGridConfig = z.infer<typeof zPivotChartGridConfig>\n","import { z } from 'zod'\n\nexport const zDimensionLinkage = z.object({\n  enable: z.boolean().nullish(),\n  showTooltip: z.boolean().nullish(),\n  showLabel: z.boolean().nullish(),\n})\n\n/**\n * 透视图表维度联动配置\n */\nexport type DimensionLinkage = {\n  /**\n   * 是否开启透视图表维度联动\n   */\n  enable: boolean\n  /**\n   * 是否显示所有维度对应子图表的Tooltip提示信息\n   */\n  showTooltip?: boolean\n  /**\n   * 是否显示crosshair 对应的标签\n   */\n  showLabel?: boolean\n}\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairLine } from './crosshair'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zDimensionLinkage } from './dimensionLinkage'\n\nexport const zLineConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\n\nexport type LineConfig = z.infer<typeof zLineConfig>\n","import { z } from 'zod'\n\nexport const zStackCornerRadius = z.number().or(z.array(z.number())).default([3, 3, 0, 0])\n\nexport type StackCornerRadius = z.infer<typeof zStackCornerRadius>\n","import { z } from 'zod'\n\nexport const zBarMaxWidth = z.number().or(z.string())\n\nexport type BarMaxWidth = z.infer<typeof zBarMaxWidth>\n\nexport const zBarGapInGroup = z.number().or(z.string())\n\nexport type BarGapInGroup = z.infer<typeof zBarGapInGroup>\n","import { z } from 'zod'\n\nexport const zEcdfRegressionLine = z.object({\n  enable: z.boolean().nullish(),\n  color: z.string().nullish(),\n  lineWidth: z.number().nullish(),\n  lineDash: z.array(z.number()).nullish(),\n  text: z.string().nullish(),\n  textColor: z.string().nullish(),\n  textFontSize: z.number().nullish(),\n  textFontWeight: z.number().nullish(),\n})\n\nexport const zKdeRegressionLine = zEcdfRegressionLine.extend({})\n\nexport const zLinearRegressionLine = zEcdfRegressionLine.extend({\n  confidenceIntervalVisible: z.boolean().nullish(),\n  confidenceIntervalColor: z.string().nullish(),\n  confidenceIntervalOpacity: z.number().nullish(),\n})\n\nexport const zLogisticRegressionLine = zLinearRegressionLine.extend({})\nexport const zLowessRegressionLine = zLinearRegressionLine.extend({})\n\nexport const zPolynomialRegressionLine = zLinearRegressionLine.extend({\n  degree: z.number().nullish(),\n})\n\nexport const zRegressionLine = z.object({\n  ecdfRegressionLine: zEcdfRegressionLine.or(z.array(zEcdfRegressionLine)).nullish(),\n  kdeRegressionLine: zKdeRegressionLine.or(z.array(zKdeRegressionLine)).nullish(),\n  linearRegressionLine: zLinearRegressionLine.or(z.array(zLinearRegressionLine)).nullish(),\n  lowessRegressionLine: zLowessRegressionLine.or(z.array(zLowessRegressionLine)).nullish(),\n  polynomialRegressionLine: zPolynomialRegressionLine.or(z.array(zPolynomialRegressionLine)).nullish(),\n  logisticRegressionLine: zLogisticRegressionLine.or(z.array(zLogisticRegressionLine)).nullish(),\n})\n\nexport type RegressionLineConfig = z.infer<typeof zRegressionLine>\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairRect } from './crosshair'\nimport { zStackCornerRadius } from './stackCornerRadius/stackCornerRadius'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zBarGapInGroup, zBarMaxWidth } from './barWidth'\nimport { zRegressionLine } from '../regressionLine'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zColumnParallelConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  barGapInGroup: zBarGapInGroup.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\nexport const zColumnConfig = zColumnParallelConfig.extend({\n  regressionLine: zRegressionLine.nullish(),\n})\nexport const zColumnPercentConfig = zColumnParallelConfig.extend({})\n\nexport type ColumnConfig = z.infer<typeof zColumnConfig>\nexport type ColumnParallelConfig = z.infer<typeof zColumnParallelConfig>\nexport type ColumnPercentConfig = z.infer<typeof zColumnPercentConfig>\n","import { z } from 'zod'\nimport { zYBandAxis, zXLinearAxis } from './axes'\nimport { zCrosshairRect } from './crosshair'\nimport { zStackCornerRadius } from './stackCornerRadius/stackCornerRadius'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zBarConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYBandAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\nexport const zBarParallelConfig = zBarConfig\nexport const zBarPercentConfig = zBarConfig\n\nexport type BarConfig = z.infer<typeof zBarConfig>\nexport type BarParallelConfig = z.infer<typeof zBarParallelConfig>\nexport type BarPercentConfig = z.infer<typeof zBarPercentConfig>\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairLine } from './crosshair'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zAreaConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\nexport const zAreaPercentConfig = zAreaConfig\n\nexport type AreaConfig = z.infer<typeof zAreaConfig>\nexport type AreaPercentConfig = z.infer<typeof zAreaPercentConfig>\n","import { z } from 'zod'\nimport { zXLinearAxis, zYLinearAxis } from './axes'\nimport { zCrosshairLine } from './crosshair'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zRegressionLine } from '../regressionLine/zRegressionLine'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zScatterConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  size: z.number().or(z.array(z.number())).nullish(),\n  sizeRange: z.number().or(z.array(z.number())).nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n  regressionLine: zRegressionLine.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\n\nexport type ScatterConfig = z.infer<typeof zScatterConfig>\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairRect } from './crosshair'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zDualChartType } from '../chartType'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zDualAxisConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  dualChartType: z.array(zDualChartType).or(zDualChartType).nullish(),\n  alignTicks: z.array(z.boolean()).or(z.boolean()).nullish(),\n  primaryYAxis: z.array(zYLinearAxis).or(zYLinearAxis).nullish(),\n  secondaryYAxis: z.array(zYLinearAxis).or(zYLinearAxis).nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\n\nexport type DualAxisConfig = z.infer<typeof zDualAxisConfig>\n","import { z } from 'zod'\nimport { zLabel } from './zLabel'\n\nexport const zPieLabel = zLabel.extend({\n  labelLayout: z.union([z.literal('arc'), z.literal('labelLine'), z.literal('edge')]).nullish(),\n})\n","import { z } from 'zod'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zPieLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zPivotChartGridConfig } from './pivotGrid'\n\nexport const zPieConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zPieLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  cornerRadius: z.number().nullish(),\n})\nexport const zDonutConfig = zPieConfig\nexport const zRadarConfig = zPieConfig\n\nexport type PieConfig = z.infer<typeof zPieConfig>\nexport type DonutConfig = z.infer<typeof zDonutConfig>\nexport type RadarConfig = z.infer<typeof zRadarConfig>\n","import { z } from 'zod'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zPieLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zPivotChartGridConfig } from './pivotGrid'\n\nexport const zRoseConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zPieLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n})\nexport const zRoseParallelConfig = zRoseConfig\n\nexport type RoseConfig = z.infer<typeof zRoseConfig>\nexport type RoseParallelConfig = z.infer<typeof zRoseParallelConfig>\n","import { z } from 'zod'\n\nexport const zFunnelTransform = z.object({\n  backgroundColor: z.string().nullish(),\n  textColor: z.string().nullish(),\n})\n","import { z } from 'zod'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zFunnelTransform } from './funnelTransform/zFunnelTransform'\nimport { zPivotChartGridConfig } from './pivotGrid'\n\nexport const zFunnelConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  transform: zFunnelTransform.nullish(),\n})\n\nexport type FunnelConfig = z.infer<typeof zFunnelConfig>\n","import { z } from 'zod'\n\nexport const zHeatmapCell = z.object({\n  stroke: z.string().nullish(),\n  lineWidth: z.number().nullish(),\n  cornerRadius: z.number().nullish(),\n})\n","import { z } from 'zod'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zHeatmapCell } from './heatmap/zHeatmap'\n\nexport const zHeatmapConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  cell: zHeatmapCell.nullish(),\n})\n\nexport type HeatmapConfig = z.infer<typeof zHeatmapConfig>\n","import type { z } from 'zod'\nimport { zTableConfig } from './table'\n\nexport const zPivotTableConfig = zTableConfig\nexport type PivotTableConfig = z.infer<typeof zPivotTableConfig>\n","import { z } from 'zod'\n\nexport const zWhiskersConfig = z.number().or(z.array(z.number())).default(1.5)\n\nexport type WhiskersConfig = z.infer<typeof zWhiskersConfig>\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type BoxPlotStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n\n  /**\n   * @description boxPlot图元是否可见\n   */\n  boxVisible?: boolean\n  /**\n   * @description boxPlot图元颜色\n   * @type {string}\n   */\n  boxColor?: string\n  /**\n   * @description boxPlot图元颜色透明度\n   * @type {number}\n   */\n  boxColorOpacity?: number\n  /**\n   * @description boxPlot图元边框颜色\n   * @type {string}\n   */\n  boxBorderColor?: string\n  /**\n   * @description boxPlot图元边框宽度\n   * @type {number}\n   */\n  boxBorderWidth?: number\n  /**\n   * @description boxPlot图元边框透明度\n   * @type {number}\n   */\n  boxBorderOpacity?: number\n}\n\nexport const zBoxPlotStyle = z.object({\n  selector: zSelector.or(zSelectors).nullish(),\n  boxVisible: z.boolean().nullish(),\n  boxColor: z.string().nullish(),\n  boxColorOpacity: z.number().min(0).max(1).nullish(),\n  boxBorderColor: z.string().nullish(),\n  boxBorderWidth: z.number().min(0).nullish(),\n  boxBorderOpacity: z.number().min(0).max(1).nullish(),\n})\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type OutlierStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n\n  /**\n   * @description 点是否可见\n   */\n  pointVisible?: boolean\n  /**\n   * 点大小\n   * @description 点大小\n   */\n  pointSize?: number\n  /**\n   * 点图元颜色\n   * @description 点图元颜色\n   */\n  pointColor?: string\n  /**\n   * 点图元颜色透明度\n   * @description 点图元颜色透明度\n   */\n  pointColorOpacity?: number\n  /**\n   * 点图元边框颜色\n   * @description 点图元边框颜色\n   */\n  pointBorderColor?: string\n  /**\n   * 点图元边框宽度\n   * @description 点图元边框宽度\n   */\n  pointBorderWidth?: number\n  /**\n   * 点图元边框样式\n   * @description 点图元边框样式\n   * @example solid\n   * @example dashed\n   * @example dotted\n   */\n  pointBorderStyle?: 'solid' | 'dashed' | 'dotted'\n}\n\nexport const zOutlierStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).optional(),\n  pointVisible: z.boolean().optional(),\n  pointSize: z.number().optional(),\n  pointColor: z.string().optional(),\n  pointColorOpacity: z.number().min(0).max(1).optional(),\n  pointBorderColor: z.string().optional(),\n  pointBorderWidth: z.number().min(0).optional(),\n  pointBorderStyle: z.enum(['solid', 'dashed', 'dotted']).optional(),\n})\n","import { z } from 'zod'\n\nexport const zBoxMaxWidth = z.number().or(z.string())\n\nexport const zBoxGapInGroup = z.number().or(z.string())\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairRect } from './crosshair'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zWhiskersConfig } from './whiskers'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\nimport { zBoxPlotStyle, zOutlierStyle } from '../markStyle'\nimport { zBoxGapInGroup, zBoxMaxWidth } from './boxWidth'\n\nexport const zBoxplotConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  whiskers: zWhiskersConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n\n  boxPlotStyle: zBoxPlotStyle.omit({ selector: true }).nullish(),\n  outlierStyle: zOutlierStyle.omit({ selector: true }).nullish(),\n  boxMaxWidth: zBoxMaxWidth.nullish(),\n  boxGapInGroup: zBoxGapInGroup.nullish(),\n})\n\nexport type BoxplotConfig = z.infer<typeof zBoxplotConfig>\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairRect } from './crosshair'\nimport { zStackCornerRadius } from './stackCornerRadius/stackCornerRadius'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zRegressionLine } from '../regressionLine'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zHistogramConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n  binCount: z.number().positive().nullish(),\n  binStep: z.number().positive().nullish(),\n  binValueType: z.literal('count').or(z.literal('percentage')).nullish(),\n  regressionLine: zRegressionLine.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\n\nexport type HistogramConfig = z.infer<typeof zHistogramConfig>\n","import { z } from 'zod'\nimport { zTableConfig } from './table'\nimport { zLineConfig } from './line'\nimport { zColumnConfig, zColumnParallelConfig, zColumnPercentConfig } from './column'\nimport { zBarConfig, zBarParallelConfig, zBarPercentConfig } from './bar'\nimport { zAreaConfig, zAreaPercentConfig } from './area'\nimport { zScatterConfig } from './scatter'\nimport { zDualAxisConfig } from './dualAxis'\nimport { zDonutConfig, zPieConfig, zRadarConfig } from './pie'\nimport { zRoseConfig, zRoseParallelConfig } from './rose'\nimport { zFunnelConfig } from './funnel'\nimport { zHeatmapConfig } from './heatmap'\nimport { zPivotTableConfig } from './pivotTable'\nimport { zBoxplotConfig } from './boxplot'\nimport { zHistogramConfig } from './histogram'\n\nexport type Config = z.infer<typeof zConfig>\nexport const zConfig = z.object({\n  table: zTableConfig.nullish(),\n  pivotTable: zPivotTableConfig.nullish(),\n\n  // cartesian\n  line: zLineConfig.nullish(),\n  column: zColumnConfig.nullish(),\n  columnParallel: zColumnParallelConfig.nullish(),\n  columnPercent: zColumnPercentConfig.nullish(),\n  bar: zBarConfig.nullish(),\n  barParallel: zBarParallelConfig.nullish(),\n  barPercent: zBarPercentConfig.nullish(),\n  area: zAreaConfig.nullish(),\n  areaPercent: zAreaPercentConfig.nullish(),\n\n  scatter: zScatterConfig.nullish(),\n  dualAxis: zDualAxisConfig.nullish(),\n\n  // polar\n  rose: zRoseConfig.nullish(),\n  roseParallel: zRoseParallelConfig.nullish(),\n  pie: zPieConfig.nullish(),\n  donut: zDonutConfig.nullish(),\n  radar: zRadarConfig.nullish(),\n  // other\n  funnel: zFunnelConfig.nullish(),\n  heatmap: zHeatmapConfig.nullish(),\n  boxPlot: zBoxplotConfig.nullish(),\n  histogram: zHistogramConfig.nullish(),\n})\n","import { z } from 'zod'\nimport { zConfig } from '../config'\n\nexport const zCustomThemeConfig = z.object({\n  config: zConfig.nullish(),\n})\n\nexport const zCustomTheme = z.record(z.string(), zCustomThemeConfig).nullish()\n\nexport type CustomTheme = z.infer<typeof zCustomTheme>\nexport type CustomThemeConfig = z.infer<typeof zCustomThemeConfig>\n","import { z } from 'zod'\n\nexport const zTheme = z.string()\n\ntype Light = 'light' & { readonly brand: unique symbol }\ntype Dark = 'dark' & { readonly brand: unique symbol }\n\n/**\n * 主题\n * @default light\n * @description 内置 light、dark 两种主题, 新的主题可以通过registerTheme自定义主题.\n */\nexport type Theme = Light | Dark | string\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type BarStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n\n  /**\n   * @description 柱图元(矩形图元)是否可见\n   */\n  barVisible?: boolean\n  /**\n   * @description 柱图元(矩形图元)颜色\n   * @type {string}\n   */\n  barColor?: string\n  /**\n   * @description 柱图元(矩形图元)颜色透明度\n   * @type {number}\n   */\n  barColorOpacity?: number\n  /**\n   * @description 柱图元(矩形图元)边框颜色\n   * @type {string}\n   */\n  barBorderColor?: string\n  /**\n   * @description 柱图元(矩形图元)边框宽度\n   * @type {number}\n   */\n  barBorderWidth?: number\n  /**\n   * @description 柱图元(矩形图元)边框样式\n   * @type {number}\n   * @example solid\n   * @example dashed\n   * @example dotted\n   */\n  barBorderStyle?: 'solid' | 'dashed' | 'dotted'\n  /**\n   * @description 柱图元(矩形图元)圆角\n   * @type {number | number[]}\n   * @example 4\n   * @example [0, 0, 10, 10]\n   */\n  /**\n   * @description 柱图元(矩形图元)描边透明度\n   * @type {number}\n   */\n  barBorderOpacity?: number\n  barRadius?: number | number[]\n}\n\nexport const zBarStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  barVisible: z.boolean().nullish(),\n  barColor: z.string().nullish(),\n  barColorOpacity: z.number().nullish(),\n  barBorderColor: z.string().nullish(),\n  barBorderWidth: z.number().nullish(),\n  barBorderStyle: z.union([z.literal('solid'), z.literal('dashed'), z.literal('dotted')]).nullish(),\n  barRadius: z.union([z.number(), z.array(z.number())]).nullish(),\n})\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type PointStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n\n  /**\n   * @description 点是否可见\n   */\n  pointVisible?: boolean\n  /**\n   * 点大小\n   * @description 点大小\n   */\n  pointSize?: number\n  /**\n   * 点图元颜色\n   * @description 点图元颜色\n   */\n  pointColor?: string\n  /**\n   * 点图元颜色透明度\n   * @description 点图元颜色透明度\n   */\n  pointColorOpacity?: number\n  /**\n   * 点图元边框颜色\n   * @description 点图元边框颜色\n   */\n  pointBorderColor?: string\n  /**\n   * 点图元边框宽度\n   * @description 点图元边框宽度\n   */\n  pointBorderWidth?: number\n  /**\n   * 点图元边框样式\n   * @description 点图元边框样式\n   * @example solid\n   * @example dashed\n   * @example dotted\n   */\n  pointBorderStyle?: 'solid' | 'dashed' | 'dotted'\n}\n\nexport const zPointStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  pointVisible: z.boolean().nullish(),\n  pointSize: z.number().nullish(),\n  pointColor: z.string().nullish(),\n  pointColorOpacity: z.number().nullish(),\n  pointBorderColor: z.string().nullish(),\n  pointBorderWidth: z.number().nullish(),\n  pointBorderStyle: z.union([z.enum(['solid', 'dashed', 'dotted'])]).nullish(),\n})\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type LineStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n\n  /**\n   * @description 线段是否可见\n   */\n  lineVisible?: boolean\n  /**\n   * @description 线段是否平滑\n   * @type {boolean}\n   */\n  lineSmooth?: boolean\n\n  /**\n   * @description 线段颜色\n   */\n  lineColor?: string\n  /**\n   * @description 线段颜色透明度\n   */\n  lineColorOpacity?: number\n  /**\n   * @description 线段宽度\n   */\n  lineWidth?: number\n  /**\n   * @description 线段样式\n   * @example `lineStyle: 'solid'`\n   */\n  lineStyle?: 'solid' | 'dashed' | 'dotted'\n}\n\nexport const zLineStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  lineVisible: z.boolean().nullish(),\n  lineSmooth: z.boolean().nullish(),\n  lineColor: z.string().nullish(),\n  lineColorOpacity: z.number().nullish(),\n  lineWidth: z.number().nullish(),\n  lineStyle: z.union([z.enum(['solid', 'dashed', 'dotted'])]).nullish(),\n})\n","import { z } from 'zod'\nimport { zSelector, zSelectors } from '../../dataSelector'\n\nexport const zAreaStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  areaVisible: z.boolean().nullish(),\n  areaColor: z.string().nullish(),\n  areaColorOpacity: z.number().nullish(),\n})\n","import { z } from 'zod'\nimport { zBarStyle } from './barStyle'\nimport { zPointStyle } from './pointStyle'\nimport { zLineStyle } from './lineStyle'\nimport { zAreaStyle } from './zAreaStyle'\nimport { zBoxPlotStyle } from './boxPlotStyle'\nimport { zOutlierStyle } from './outlierStyle'\n\nexport const zMarkStyle = z.object({\n  barStyle: zBarStyle.or(z.array(zBarStyle)).nullish(),\n  pointStyle: zPointStyle.or(z.array(zPointStyle)).nullish(),\n  lineStyle: zLineStyle.or(z.array(zLineStyle)).nullish(),\n  areaStyle: zAreaStyle.or(z.array(zAreaStyle)).nullish(),\n  boxPlotStyle: zBoxPlotStyle.or(z.array(zBoxPlotStyle)).nullish(),\n  outlierStyle: zOutlierStyle.or(z.array(zOutlierStyle)).nullish(),\n})\n\nexport type MarkStyle = z.infer<typeof zMarkStyle>\n","import { zSelector, zSelectors } from '../../dataSelector'\nimport { z } from 'zod'\n\nexport const zAnnotationVerticalLine = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  xValue: z.union([z.number(), z.string(), z.array(z.union([z.number(), z.string()]))]).nullish(),\n  text: z.string().or(z.array(z.string())).nullish(),\n  textPosition: z\n    .enum(['outsideStart', 'outsideEnd', 'outsideMiddle', 'insideStart', 'insideMiddle', 'insideEnd'])\n    .default('insideEnd')\n    .nullish(),\n  textColor: z.string().default('#ffffff').nullish(),\n  textFontSize: z.number().default(12).nullish(),\n  textFontWeight: z.number().default(400).nullish(),\n  textAlign: z.enum(['left', 'right', 'center']).default('right').nullish(),\n  textBaseline: z.enum(['top', 'middle', 'bottom']).default('top').nullish(),\n\n  textBackgroundVisible: z.boolean().default(true).nullish(),\n  textBackgroundColor: z.string().default('#212121').nullish(),\n  textBackgroundBorderColor: z.string().default('#212121').nullish(),\n  textBackgroundBorderRadius: z.number().default(4).nullish(),\n  textBackgroundBorderWidth: z.number().default(1).nullish(),\n  textBackgroundPadding: z.number().default(2).nullish(),\n\n  lineVisible: z.boolean().default(true).nullish(),\n  lineColor: z.string().default('#212121').nullish(),\n  lineWidth: z.number().default(1).nullish(),\n  lineStyle: z\n    .union([z.literal('solid'), z.literal('dashed'), z.literal('dotted')])\n    .default('dashed')\n    .nullish(),\n})\n","import { z } from 'zod'\nimport { zAnnotationPoint } from './zAnnotationPoint'\nimport { zAnnotationVerticalLine } from './zAnnotationVerticalLine'\nimport { zAnnotationHorizontalLine } from './zAnnotationHorizontalLine'\nimport { zAnnotationArea } from './zAnnotationArea'\n\nexport const zAnnotation = z.object({\n  annotationPoint: zAnnotationPoint.or(z.array(zAnnotationPoint)).nullish(),\n  annotationVerticalLine: zAnnotationVerticalLine.or(z.array(zAnnotationVerticalLine)).nullish(),\n  annotationHorizontalLine: zAnnotationHorizontalLine.or(z.array(zAnnotationHorizontalLine)).nullish(),\n  annotationArea: zAnnotationArea.or(z.array(zAnnotationArea)).nullish(),\n})\n\nexport type Annotation = z.infer<typeof zAnnotation>\n","import { z } from 'zod'\n\nexport const zSort = z.object({\n  order: z.enum(['asc', 'desc']).default('asc'),\n  orderBy: z.string().nullish(),\n  customOrder: z.array(z.any()).nullish(),\n})\n\n/**\n * @description 类目轴排序配置, 支持根据维度或指标排序, 以及自定义排序顺序\n * @default {}\n * @example\n * - order:'asc'\n * - orderBy:'date'\n * 或\n * - customOrder:['2019', '2020', '2021']\n */\nexport type Sort = {\n  /**\n   * @description 排序顺序, 可选值为 'asc' 或 'desc'\n   * @enum ['asc', 'desc']\n   * @example order:'asc'\n   */\n  order?: 'asc' | 'desc'\n\n  /**\n   * @description 排序依赖的字段, 可以是维度id或指标id\n   * @example\n   * - orderBy:'date'\n   * - orderBy:'profit'\n   */\n  orderBy?: string\n\n  /**\n   * @description 自定义排序顺序, 该顺序将直接应用至类目轴\n   */\n  customOrder?: string[]\n}\n","import { z } from 'zod'\n\nexport const zSortLegend = z.object({\n  order: z.enum(['asc', 'desc']).default('asc'),\n  orderBy: z.string().nullish(),\n  customOrder: z.array(z.any()).nullish(),\n})\n\n/**\n * @description 图例排序配置, 支持根据维度或指标排序, 以及自定义排序顺序; 排序数组遵循从左到右或从上到下的顺序\n * @default {}\n * @example\n * - order:'asc'\n * - orderBy:'date'\n * 或\n * - customOrder:['2019', '2020', '2021']\n */\nexport type SortLegend = {\n  /**\n   * @description 排序顺序, 可选值为 'asc' 或 'desc'\n   * @default 'asc'\n   * @enum ['asc', 'desc']\n   * @example order:'asc'\n   */\n  order?: 'asc' | 'desc'\n  /**\n   * @description 排序依赖的字段, 可以是维度id或指标id\n   * @example\n   * - orderBy:'date'\n   * - orderBy:'profit'\n   */\n  orderBy?: string\n  /**\n   * @description 自定义排序顺序, 该顺序将直接应用至图例, 升序从左到右或从上到下, 降序从右到左或从下到上\n   */\n  customOrder?: string[]\n}\n","import { z } from 'zod'\n\nexport const zAnalysis = z.object({\n  orderMapping: z.record(z.string(), z.array(z.string())).nullish(),\n})\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type BodyCellStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n  /**\n   * 单元格背景色\n   */\n  backgroundColor?: string\n  /**\n   * 单元格文字颜色\n   */\n  textColor?: string\n  /**\n   * 单元格文字大小\n   */\n  textFontSize?: number\n  /**\n   * 单元格边框颜色\n   */\n  borderColor?: string\n  /**\n   * 单元格边框线宽\n   */\n  borderLineWidth?: number\n}\n\nexport const zBodyCellStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  backgroundColor: z.string().nullish(),\n  textColor: z.string().nullish(),\n  textFontSize: z.number().nullish(),\n  borderColor: z.string().nullish(),\n  borderLineWidth: z.number().nullish(),\n})\n","import { z } from 'zod'\n\nexport type Locale = 'zh-CN' | 'en-US'\n\nexport type TranslateRecordType = Record<string, { [local in Locale]: string }>\n\nexport const zLocale = z.enum(['zh-CN', 'en-US']).default('zh-CN')\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport { zBackgroundColor, zBodyCellStyle, zDataset, zDimensions, zMeasureTree, zTheme } from '../../properties'\n\nexport const zTable = z.object({\n  chartType: z.literal('table'),\n  dataset: zDataset.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n\n  backgroundColor: zBackgroundColor.nullish(),\n  borderColor: z.string().nullish(),\n  bodyFontSize: z.number().nullish(),\n  bodyFontColor: z.string().nullish(),\n  bodyBackgroundColor: z.string().nullish(),\n  hoverBodyBackgroundColor: z.string().nullish(),\n  hoverBodyInlineBackgroundColor: z.string().nullish(),\n  headerFontSize: z.number().nullish(),\n  headerFontColor: z.string().nullish(),\n  headerBackgroundColor: z.string().nullish(),\n  hoverHeaderBackgroundColor: z.string().nullish(),\n  hoverHeaderInlineBackgroundColor: z.string().nullish(),\n  selectedBorderColor: z.string().nullish(),\n  selectedBackgroundColor: z.string().nullish(),\n  bodyCellStyle: zBodyCellStyle.nullish(),\n\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport { zBackgroundColor, zDataset, zDimensions, zTheme, zMeasures, zBodyCellStyle } from '../../properties'\n\nexport const zPivotTable = z.object({\n  chartType: z.literal('pivotTable'),\n  dataset: zDataset.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasures.nullish(),\n\n  backgroundColor: zBackgroundColor.nullish(),\n  borderColor: z.string().nullish(),\n  bodyFontSize: z.number().nullish(),\n  bodyFontColor: z.string().nullish(),\n  bodyBackgroundColor: z.string().nullish(),\n  hoverBodyBackgroundColor: z.string().nullish(),\n  hoverBodyInlineBackgroundColor: z.string().nullish(),\n  headerFontSize: z.number().nullish(),\n  headerFontColor: z.string().nullish(),\n  headerBackgroundColor: z.string().nullish(),\n  hoverHeaderBackgroundColor: z.string().nullish(),\n  hoverHeaderInlineBackgroundColor: z.string().nullish(),\n  selectedBorderColor: z.string().nullish(),\n  selectedBackgroundColor: z.string().nullish(),\n  bodyCellStyle: zBodyCellStyle.nullish(),\n\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zColor,\n  zCrosshairLine,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zLineStyle,\n  zMeasureTree,\n  zPointStyle,\n  zSort,\n  zSortLegend,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nimport { z } from 'zod'\n\nexport const zLine = z.object({\n  chartType: z.literal('line'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  sort: zSort.nullish(),\n  sortLegend: zSortLegend.nullish(),\n  theme: zTheme.nullish(),\n  pointStyle: z.array(zPointStyle).or(zPointStyle).nullish(),\n  lineStyle: z.array(zLineStyle).or(zLineStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zPolynomialRegressionLine,\n  zSort,\n  zSortLegend,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zColumn = z.object({\n  chartType: z.literal('column'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  sort: zSort.nullish(),\n  sortLegent: zSortLegend.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  polynomialRegressionLine: z.array(zPolynomialRegressionLine).or(zPolynomialRegressionLine).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarGapInGroup,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zColumnParallel = z.object({\n  chartType: z.literal('columnParallel'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  barGapInGroup: zBarGapInGroup.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nimport { z } from 'zod'\n\nexport const zColumnPercent = z.object({\n  chartType: z.literal('columnPercent'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXLinearAxis,\n  zYBandAxis,\n} from '../../properties'\n\nimport { z } from 'zod'\n\nexport const zBar = z.object({\n  chartType: z.literal('bar'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYBandAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarGapInGroup,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXLinearAxis,\n  zYBandAxis,\n} from '../../properties'\n\nexport const zBarParallel = z.object({\n  chartType: z.literal('barParallel'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYBandAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  barGapInGroup: zBarGapInGroup.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXLinearAxis,\n  zYBandAxis,\n} from '../../properties'\n\nexport const zBarPercent = z.object({\n  chartType: z.literal('barPercent'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYBandAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zAreaStyle,\n  zBackgroundColor,\n  zColor,\n  zCrosshairLine,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zLineStyle,\n  zMeasureTree,\n  zPointStyle,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zArea = z.object({\n  chartType: z.literal('area'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  theme: zTheme.nullish(),\n  pointStyle: z.array(zPointStyle).or(zPointStyle).nullish(),\n  lineStyle: z.array(zLineStyle).or(zLineStyle).nullish(),\n  areaStyle: z.array(zAreaStyle).or(zAreaStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zAreaStyle,\n  zBackgroundColor,\n  zColor,\n  zCrosshairLine,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zLineStyle,\n  zMeasureTree,\n  zPointStyle,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nimport { z } from 'zod'\n\nexport const zAreaPercent = z.object({\n  chartType: z.literal('areaPercent'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  theme: zTheme.nullish(),\n  pointStyle: z.array(zPointStyle).or(zPointStyle).nullish(),\n  lineStyle: z.array(zLineStyle).or(zLineStyle).nullish(),\n  areaStyle: z.array(zAreaStyle).or(zAreaStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zColor,\n  zCrosshairLine,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zLinearRegressionLine,\n  zLogisticRegressionLine,\n  zLowessRegressionLine,\n  zMeasureTree,\n  zPointStyle,\n  zPolynomialRegressionLine,\n  zScatterMeasures,\n  zTheme,\n  zTooltip,\n  zXLinearAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zScatter = z.object({\n  chartType: z.literal('scatter'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  scatterMeasures: zScatterMeasures.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  size: z.number().or(z.array(z.number())).nullish(),\n  sizeRange: z.number().or(z.array(z.number())).nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  theme: zTheme.nullish(),\n  pointStyle: z.array(zPointStyle).or(zPointStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  linearRegressionLine: z.array(zLinearRegressionLine).or(zLinearRegressionLine).nullish(),\n  lowessRegressionLine: z.array(zLowessRegressionLine).or(zLowessRegressionLine).nullish(),\n  polynomialRegressionLine: z.array(zPolynomialRegressionLine).or(zPolynomialRegressionLine).nullish(),\n  logisticRegressionLine: z.array(zLogisticRegressionLine).or(zLogisticRegressionLine).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from 'src/types/i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zAreaStyle,\n  zBackgroundColor,\n  zBarGapInGroup,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zDualChartType,\n  zDualMeasures,\n  zLabel,\n  zLegend,\n  zLineStyle,\n  zMeasureTree,\n  zPointStyle,\n  zSort,\n  zSortLegend,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from 'src/types/properties'\n\nexport const zDualAxis = z.object({\n  chartType: z.literal('dualAxis'),\n\n  dataset: zDataset.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  dualMeasures: zDualMeasures.nullish(),\n\n  dualChartType: z.array(zDualChartType).or(zDualChartType).nullish(),\n  alignTicks: z.array(z.boolean()).or(z.boolean()).nullish(),\n\n  primaryYAxis: z.array(zYLinearAxis).or(zYLinearAxis).nullish(),\n  secondaryYAxis: z.array(zYLinearAxis).or(zYLinearAxis).nullish(),\n  xAxis: zXBandAxis.nullish(),\n\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n\n  crosshairRect: zCrosshairRect.nullish(),\n  sort: zSort.nullish(),\n  sortLegend: zSortLegend.nullish(),\n  theme: zTheme.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  barGapInGroup: zBarGapInGroup.nullish(),\n\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  pointStyle: z.array(zPointStyle).or(zPointStyle).nullish(),\n  lineStyle: z.array(zLineStyle).or(zLineStyle).nullish(),\n  areaStyle: z.array(zAreaStyle).or(zAreaStyle).nullish(),\n\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEcdfRegressionLine,\n  zEncoding,\n  zKdeRegressionLine,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n  zXLinearAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zHistogram = z.object({\n  chartType: z.literal('histogram'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  binCount: z.number().positive().nullish(),\n  binStep: z.number().positive().nullish(),\n  binValueType: z.literal('count').or(z.literal('percentage')).nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  ecdfRegressionLine: z.array(zEcdfRegressionLine).or(zEcdfRegressionLine).nullish(),\n  kdeRegressionLine: z.array(zKdeRegressionLine).or(zKdeRegressionLine).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n\nexport type Histogram = z.infer<typeof zHistogram>\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\n\nimport {\n  zBackgroundColor,\n  zColor,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zRose = z.object({\n  chartType: z.literal('rose'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zBackgroundColor,\n  zColor,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zRoseParallel = z.object({\n  chartType: z.literal('roseParallel'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zBackgroundColor,\n  zColor,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLegend,\n  zMeasureTree,\n  zPieLabel,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zPie = z.object({\n  chartType: z.literal('pie'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zPieLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\n\nimport {\n  zBackgroundColor,\n  zColor,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLegend,\n  zMeasureTree,\n  zPieLabel,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zDonut = z.object({\n  chartType: z.literal('donut'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zPieLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\n\nimport {\n  zBackgroundColor,\n  zColor,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zRadar = z.object({\n  chartType: z.literal('radar'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zBackgroundColor,\n  zColor,\n  zColorLegend,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zFunnel = z.object({\n  chartType: z.literal('funnel'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zColorLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\n\nimport {\n  zBackgroundColor,\n  zColor,\n  zColorLegend,\n  zDataset,\n  zDimensions,\n  zLabel,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zHeatmap = z.object({\n  chartType: z.literal('heatmap'),\n  dataset: zDataset.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zColorLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBoxGapInGroup,\n  zBoxMaxWidth,\n  zBoxPlotStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zOutlierStyle,\n  zSort,\n  zSortLegend,\n  zTheme,\n  zTooltip,\n  zWhiskersConfig,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zBoxPlot = z.object({\n  chartType: z.literal('boxPlot'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  sort: zSort.nullish(),\n  sortLegent: zSortLegend.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  boxPlotStyle: z.array(zBoxPlotStyle).or(zBoxPlotStyle).nullish(),\n  outlierStyle: z.array(zOutlierStyle).or(zOutlierStyle).nullish(),\n  theme: zTheme.nullish(),\n  whiskers: zWhiskersConfig.nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n  boxMaxWidth: zBoxMaxWidth.nullish(),\n  boxGapInGroup: zBoxGapInGroup.nullish(),\n})\n","import { z } from 'zod'\n\nimport { zBar } from './chartType/bar'\nimport { zBarParallel } from './chartType/barParallel'\nimport { zColumn } from './chartType/column'\nimport { zColumnParallel } from './chartType/columnParallel'\nimport { zColumnPercent } from './chartType/columnPercent'\nimport { zLine } from './chartType/line'\nimport { zRose } from './chartType/rose'\nimport { zBarPercent } from './chartType/barPercent'\nimport { zPie } from './chartType/pie'\nimport { zDonut } from './chartType/donut'\nimport { zArea } from './chartType/area'\nimport { zAreaPercent } from './chartType/areaPercent'\nimport {\n  zBoxPlot,\n  zDualAxis,\n  zFunnel,\n  zHeatmap,\n  zHistogram,\n  zPivotTable,\n  zRadar,\n  zRoseParallel,\n  zScatter,\n  zTable,\n} from './chartType'\n\nexport const zVSeed = z.discriminatedUnion('chartType', [\n  zTable,\n  zPivotTable,\n  // cartesian\n  zLine,\n  zColumn,\n  zColumnParallel,\n  zColumnPercent,\n  zBar,\n  zBarParallel,\n  zBarPercent,\n  zArea,\n  zAreaPercent,\n  zScatter,\n  zDualAxis,\n  // polar\n  zPie,\n  zDonut,\n  zRose,\n  zRoseParallel,\n  zRadar,\n  // other\n  zFunnel,\n  zHeatmap,\n  zBoxPlot,\n  zHistogram,\n])\n","import { z } from 'zod'\nimport { zBodyCellStyle } from './bodyCellStyle'\n\nexport const zCellStyle = z.object({\n  bodyCellStyle: zBodyCellStyle.nullish(),\n})\n\nexport type CellStyle = z.infer<typeof zCellStyle>\n","import { z } from 'zod'\nimport { zChartType } from './properties/chartType'\nimport { zDataset } from './properties/dataset'\nimport { zDimensionTree } from './properties/dimensions'\nimport { zMeasureTree } from './properties/measures'\nimport { zEncoding } from './properties/encoding'\nimport { zDatasetReshapeInfo } from './properties/datasetReshapeInfo'\nimport { zTheme, zCustomThemeConfig } from './properties/theme'\nimport { zConfig } from './properties/config'\nimport { zAnalysis, zAnnotation, zRegressionLine, zMarkStyle } from './properties'\nimport { zLocale } from './i18n'\nimport { zCellStyle } from './properties/cellStyle/cellStyle'\n\nexport const zAdvancedVSeed = z.object({\n  chartType: zChartType,\n  dataset: zDataset,\n  datasetReshapeInfo: zDatasetReshapeInfo,\n  pivotAllDatasetReshapeInfo: zDatasetReshapeInfo,\n  dimensions: zDimensionTree,\n  measures: zMeasureTree,\n  reshapeMeasures: zMeasureTree.optional(),\n  reshapeDimensions: zDimensionTree.optional(),\n  encoding: zEncoding,\n  config: zConfig,\n  analysis: zAnalysis,\n  theme: zTheme,\n  markStyle: zMarkStyle,\n  cellStyle: zCellStyle,\n  customTheme: zCustomThemeConfig,\n  annotation: zAnnotation,\n  locale: zLocale,\n  regressionLine: zRegressionLine,\n})\n\nexport type AdvancedVSeed = z.infer<typeof zAdvancedVSeed>\n"],"names":["__webpack_require__","e","Object","Symbol","execPipeline","pipeline","context","initialValue","prev","cur","translateMap","Intl","value","segments","values","text","segment","index","translatedText","isNullish","console","locale","intl","buildAdvanced","builder","start","performance","Date","chartType","Error","Builder","advancedVSeed","end","buildSpec","spec","build","preorderTraverse","tree","callback","childrenKey","stack","node","stop","children","Array","i","child","findTreeNodesBy","nodes","result","measureDepth","measures","depth","Math","isMeasureTreeWithChildren","measure","isMeasureTreeWithParentId","normalizeMeasureTree","createEmptyMeasureGroup","currentGroup","measureGroups","item","ANNOTATION_Z_INDEX","LINEAR_AXIS_INNER_OFFSET_TOP","DUAL_AXIS_CHART_COLUMN_Z_INDEX","DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX","DUAL_AXIS_LABEL_Z_INDEX","DEFAULT_PARENT_ID","AXIS_LABEL_SPACE","BAND_AXIS_INNER_OFFSET_IN_PIVOT","ChartTypeEnum","DATUM_HIDE_KEY","isTable","vseed","isPivotTable","isRadar","isAreaPercent","isColumnPercent","isBarPercent","isBarLikeChart","isVTable","isVChart","isPivotChart","isPivot","isCombination","dimensions","dimension","parentIds","unique","getColorItems","datasetReshapeInfo","colorItems","d","colorIdMap","getColorIdMap","advanced","customPipe","themeKey","checkVSeed","dataset","isEmpty","initAdvancedVSeed","isMeasure","isMeasureGroup","isMeasures","defaultMeasures","clonedMeasures","clone","top100dataset","key","undefined","isDimension","isDimensionGroup","findMeasureById","id","findFirstMeasure","findAllMeasures","hasMultipleMeasureInSingleView","m","found","defaultDimensions","clonedDimensions","newDimensions","dim","replaceNullToUndefined","obj","isPlainObject","pipe","mapValues","cellStyle","style","pick","records","tableConfig","config","theme","customTheme","chartConfigTheme","chartConfig","mergedConfig","mergeDeep","_k","mergeArray","chartCustomTheme","arr","themeItem","isString","isNumber","isObjectType","merge","tableAdvancedPipeline","initTable","backgroundColor","dimensionTreeToColumns","columns","treeTreeToColumns","field","groupNode","title","props","createNumFormatter","format","type","ratio","thousandSeparator","prefix","suffix","symbol","fractionDigits","significantDigits","roundingMode","roundingPriority","numFormatterOptions","numFormatter","num","Number","typeSymbol","String","numStr","parts","autoNumFormatter","createFormatter","autoFormatter","createFormatterByMeasure","v","numFormat","autoFormat","formatterFormat","measureTreeToColumns","fieldFormat","formatter","datum","bodyStyle","themeConfig","borderColor","fontColor","fontSize","hoverCellBgColor","hoverInlineColor","headerStyle","themConfig","frameStyle","selectionStyle","nearlyEqual","a","b","epsilon","diff","selector","vchartDatum","selectorMode","vchartKeys","k","omit","selectors","isValueSelector","selectByValue","isMeasureSelector","selectByMeasure","isDimensionSelector","selectByDmension","isPartialDatumSelector","selectByPartial","selectorDatum","finalResult","results","r","op","selectorValueArr","tableStyleMap","pickBodyCellStyle","bodyCellStyle","acc","tableBodyCell","bodyCellStyleList","array","col","matchedStyles","originalDatum","tableSpecPipeline","registerTable","ORIGINAL_DATA","Separator","FoldMeasureName","FoldMeasureId","FoldMeasureValue","MeasureId","MeasureName","FoldPrimaryMeasureValue","FoldSecondaryMeasureValue","FoldXMeasureValue","FoldYMeasureValue","FoldXMeasureId","FoldYMeasureId","XEncoding","YEncoding","AngleEncoding","DetailEncoding","ColorEncoding","ColorIdEncoding","Q1MeasureValue","Q3MeasureValue","LowerWhisker","UpperWhisker","OutliersMeasureId","MedianMeasureId","BinStartMeasureId","BinEndMeasureId","BinCountMeasureId","BinPercentageMeasureId","defaultMeasureId","encodingForPivotTable","vseedMeasures","hasDimensionEncoding","hasMeasureEncoding","encoding","generateDimensionEncoding","generateDefaultDimensionEncoding","generateMeasureEncoding","generateDefaultMeasureEncoding","uniqueDimIds","foldMeasures","options","measureId","measureName","measureValue","colorMeasureId","allowEmptyFold","omitIds","foldInfo","Infinity","ids","j","alias","valueNumber","reshapePivotTable","newDatasets","pivotTableConfig","pivotTableAdvancedPipeline","initPivotTable","pivotColumns","pivotRows","rows","allMeasures","res","titleOnDimension","pivotIndicators","hasRow","foldMapValues","row","table","foldMeasureId","rowHeaderStyle","cornerHeaderStyle","hoverCellColor","pivotTableBodyCell","newIndicators","indicators","ind","newInd","indicatorKey","dataValue","cellHeaderPaths","headerPaths","path","dataConfig","aggregationRules","pivotTableSpecPipeline","registerPivotTable","MeaIdDim","encodingAdapter","noEncodingPipeline","hasEncodingPipeline","addColorToEncoding","isMultiMeasure","defaultEncodingForLine","encodingForLine","color","label","tooltip","buildMeasures","generateMeasuresByParentId","basicMeasuresToMeasureTree","measureTree","parent","isValid","deleteMeasureTreeByCallback","parents","Map","nodesToProcess","visited","Set","deleted","parentList","pickMeasuresForReshape","encodingKeys","deleteDimensionTreeByCallback","dimensionTree","pickDimensionsForReshape","reshapeDimensions","pivotAdapter","pivotPipeline","unfoldDimensions","separator","unfoldInfo","x","y","detail","angle","angleDimensions","xDimensions","yDimensions","colorDimensions","detailDimensions","applyEncoding","colorId","getColorAliasItem","dataReshapeByEncoding","foldMeasureName","foldMeasureValue","colorItemAsId","foldedDataset","finalDataset","colorAdapter","ordinalPipe","linearPipe","isLinearColor","measureIdList","getColorMeasureId","reshapeWithEncoding","uniqueBy","pivotReshapeWithEncoding","datasets","measureGroup","groupId","newSubDataset","reshapeInfo","calcOrder","sortConfig","order","orderBy","sort","aValue","bValue","sortXBandAxis","sortAxis","xField","axisOrderResult","sortLegend","colorIds","orderRes","itemNameOrId","lineConfig","markStyle","annotation","lineAdvancedPipeline","initLine","baseConfig","colorScheme","colorMapping","createSpecifiedForColorMapping","matchedList","colors","accurateMap","name","colorValue","accurateMatchedList","colorKey","colorObj","fuzzyMatchedList","linearColor","linearColorScheme","datasetXY","analysis","orderMapping","fields","progressive","defaultTitleText","idList","f","xBand","pivotAllDatasetReshapeInfo","visible","tick","grid","line","labelAutoHide","labelAutoHideGap","labelAutoLimit","labelAutoLimitLength","labelAutoRotate","labelAutoRotateAngleRange","onlyMeasureId","bandAxis","sampling","allDatasetReshapeInfo","isArray","createLinearFormat","createLinearPercentFormat","percentFormatter","yLinear","zero","nice","inverse","max","min","log","logBase","linearAxis","verticalCrosshairLine","lineColor","labelColor","labelVisible","labelBackgroundColor","crosshair","xAxisConfig","xAxisFormatter","discreteLegend","legend","enable","position","labelFontColor","labelFontSize","pagerIconColor","pagerIconDisableColor","labelFontWeight","maxSize","border","shapeType","orient","legendPosition","labelTextColor","colorLegend","colorMeasure","colorPointStyleFill","stylePipe","pointStyle","customMap","pointStyles","pointBorderColor","pointBorderStyle","pointBorderWidth","pointColor","pointColorOpacity","pointSize","pointVisible","pointStateDimensionHover","point","pointStateHover","colorLineStyleFill","getCurveType","lineSmooth","getCurveTension","lineStyle","lineStyles","lineColorOpacity","lineWidth","lineVisible","dashSegment","curveType","curveTension","_","dashGap","buildLabel","generateMeasureValue","labelAutoFormat","generateMeasurePercent","sum","vseedDimensions","advancedVSeedDimensions","advancedVSeedMeasures","foldInfoList","wrap","showValue","showValuePercent","showDimension","labelOverlap","labelColorSmartInvert","labelStroke","labelPosition","hasDimLabelEncoding","labelDims","labelMeas","data","entry","dimLabels","meaLabels","statistics","measureValueLabel","measurePercentLabel","getTooltipStyle","tooltipConfig","createMarkContent","createDimensionContent","foldMap","encodingColor","dims","meas","colorName","originalData","isSubset","sub","excludeMeasuresIds","ANNOTATION_AREA_TEXT_STYLE_BY_POSITION","generateAnnotationPointPipe","findSelectedDatas","s","generateMarkPoint","annotationPoint","annotationPointList","isHorizontalBar","defaultStyle","markPoint","selectorPoint","textColor","textFontSize","textFontWeight","textAlign","textBaseline","textBackgroundBorderColor","textBackgroundBorderRadius","textBackgroundBorderWidth","textBackgroundColor","textBackgroundPadding","textBackgroundVisible","offsetX","offsetY","selectedData","dx","dy","markPointStyle","marks","mark","annotationVerticalLine","annotationVerticalLineList","positionMap","markLine","xValue","textPosition","generateOneMarkLine","xValueArr","newMarkLine","annotationHorizontalLine","annotationHorizontalLineList","yValue","yValueArr","annotationArea","annotationAreaList","defaultTextPosition","markArea","areaColor","areaColorOpacity","areaBorderColor","areaBorderRadius","areaBorderWidth","areaLineDash","outerPadding","xyList","positionData","yAxisHelper","xAxisHelper","regionRect","minX","maxX","maxY","minY","formatGradientStops","stops","firstInvalidateIndex","newStops","splitLine","splitLineConfig","splitValue","colorTheme","colorConfig","ctx","lineSeries","chart","vchart","lineMark","lineGraphics","points","seg","pt","scale","splitCoordinate","p","lineStroke","areaFill","VUtilColor","attrs","range","clamper","opt","parentNode","seriesSpec","measureValueKey","initPivot","pivotGridStyle","onlyCombination","transparent","bodyFontColor","headerFontColor","headerBackgroundColor","hoverHeaderBackgroundColor","hoverHeaderInlineBackgroundColor","outlineBorderLineWidth","frameCornerRadius","arg","noYAxis","chartPipeline","allMeasureIds","subMeasuresId","invalideMeasuresIds","newDataset","newDatasetReshapeInfo","chartSpec","pivotIndicatorsAsRow","pivotIndicatorsAsCol","datasetPivot","pre","pivotAxisStyle","axisStyle","axis","pivotRowDimensions","rowDimensions","pivotColumnDimensions","columnDimensions","pivotTitle","pivotDiscreteLegend","colorSpecified","legends","pivotColorLegend","dimensionLinkage","labelHoverOnAxis","labelFormat","pivotLine","lineSpecPipeline","registerLine","defaultEncodingForColumn","encodingForColumn","columnConfig","regressionLine","keys","regressionLineConfig","hasLine","columnAdvancedPipeline","initColumn","stackCornerRadius","barMaxWidth","stackInverse","verticalCrosshairRect","rectColor","colorBarStyleFill","barStyle","showStroke","barStyles","barBorderColor","barBorderStyle","barBorderWidth","barColor","barColorOpacity","barBorderOpacity","barRadius","barVisible","annotationAreaBand","bandPosition","xBandWidth","startX","endX","width","middleX","yBandWidth","startY","endY","middleY","defaultRegressionLineColor","defaultRegressionLineLabelX","defaultRegressionLineLabelY","getAlphaByConfidenceLevel","confidenceLevel","columnPolynomialRegressionLine","lineTheme","lineList","lineIndex","lineDash","confidenceIntervalOpacity","confidenceIntervalVisible","childrenMarks","rect","yClamper","fieldX","fieldY","xValues","minPoints","degree","confidenceInterval","evaluateGrid","regressionPolynomial","xVal","filteredData","N","halfBandWidth","linePoints","lineData","intervalData","column","pivotColumn","columnSpecPipeline","registerColumn","pieConfig","areaConfig","areaPercentConfig","barConfig","barParallelConfig","barPercentConfig","columnParallelConfig","columnPercentConfig","donutConfig","roseConfig","roseParallelConfig","radarConfig","funnelConfig","heatmapConfig","columnParallelAdvancedPipeline","initColumnParallel","sameDimensionsMode","isDeepEqual","barGapInGroup","columnParallel","pivotColumnParallel","columnParallelSpecPipeline","registerColumnParallel","columnPercentAdvancedPipeline","percent","columnPercent","pivotColumnPercent","columnPercentSpecPipeline","registerColumnPercent","defaultEncodingForBar","encodingForBar","sortYBandAxis","yField","barAdvancedPipeline","initBar","datasetYX","xLinear","yBand","horizontalCrosshairRect","yAxisConfig","yAxisFormatter","bar","pivotBar","barSpecPipeline","registerBar","barParallelAdvancedPipeline","initBarParallel","barParallel","pivotBarParallel","barParallelSpecPipeline","registerBarParallel","barPercentAdvancedPipeline","barPercent","pivotBarPercent","barPercentSpecPipeline","registerBarPercent","areaAdvancedPipeline","initArea","colorAreaStyleFill","areaStyle","areaStyles","group","areaGroups","groupBy","areaVisible","area","pivotArea","areaSpecPipeline","registerArea","areaPercentAdvancedPipeline","areaPercent","pivotAreaPercent","areaPercentSpecPipeline","registerAreaPercent","defaultEncodingForScatter","encodingForScatter","dimensionsWithoutMeasureId","buildMeasuresForScatter","scatterMeasures","basicMeasuresToScatterMeasures","scatterMeasuresToMeasureTree","basicMeasures","yMeasures","xMeasures","isYAxis","isXAxis","groupChildren","arrPrimaryMeasures","arrSecondaryMeasures","scatterChart","Boolean","isX","isY","scatterConfig","reshapeWithScatterEncoding","unfoldInfoList","pivotReshapeWithScatterEncoding","datasetList","scatterAdvancedPipeline","initScatter","datasetScatter","scatterSize","size","labelScatter","tooltipScatter","dimContent","meaContent","horizontalCrosshairLine","generateRegressionLinePipe","regressionFunction","getOptions","getDefaultRegressionOptions","getMinPoints","colorAttrOptions","groups","groupData","mainColor","ld","NaN","areaPoints","y1","alpha","linearRegressionLine","regressionLinear","lowessRegressionLine","regressionLowess","polynomialRegressionLine","logisticRegressionLine","regressionLogistic","scatter","pivotScatter","scatterSpecPipeline","registerScatter","defaultEncodingForDualAxis","encodingForDualAxis","buildMeasuresForDualAxis","dualMeasures","basicMeasuresToDualMeasures","dualMeasuresToMeasureTree","primaryMeasures","secondaryMeasures","isPrimaryYAxis","isSecondaryYAxis","dualChart","isPrimary","isSecondary","reshapeWithDualEncoding","pivotReshapeWithDualEncoding","dualAxisConfig","dualAxisAdvancedPipeline","series","args","seriesDualAxis","createDualContext","initDualAxisPrimary","initDualAxisSecondary","dualChartTypePrimary","primary","secondary","bothColumn","columnSpec","dualChartTypeSecondary","datasetPrimary","datasetSecondary","labelPrimary","labelSecondary","tooltipPrimary","tooltipSecondary","tooltipDualAxis","barStyleFilter","pointStyleFilter","lineStyleFilter","areaStyleFilter","yLinearPrimary","reshapeInfoId","primaryYAxis","alignTicks","alignTicksConfig","isEmptySecondary","seriesIds","seriesId","yLinearSecondary","secondaryYAxis","onlySecondary","sync","linearColorForDualAxis","annotationPointOfDualAxis","pickedDatum","pickWithout","dualAxis","pivotDualAxis","dualAxisSpecPipeline","registerDualAxis","defaultEncodingForPie","encodingForPie","hasMulti","pieAdvancedPipeline","initPie","colorPieStyleFill","pieStyle","labelPie","pivotHideIndicatorName","addRegionPadding","pie","pivotPie","pieSpecPipeline","registerPie","donutAdvancedPipeline","initDonut","donut","pivotDonut","donutSpecPipeline","registerDonut","defaultEncodingForRose","encodingForRose","roseAdvancedPipeline","initRose","hasNegativeValue","radiusAxis","colorRoseStyleFill","roseStyle","rose","pivotRose","roseSpecPipeline","registerRose","roseParallelAdvancedPipeline","initRoseParallel","roseParallel","pivotRoseParallel","roseParallelSpecPipeline","registerRoseParallel","defaultEncodingForRadar","encodingForRadar","radarAdvancedPipeline","initRadar","radarAngleAxis","radarRadiusAxis","radar","pivotRadar","radarSpecPipeline","registerRadar","defaultEncodingForFunnel","encodingForFunnel","funnelAdvancedPipeline","initFunnel","colorFunnelStyleFill","funnelStyle","funnelTransformStyle","funnel","pivotFunnel","funnelSpecPipeline","registerFunnel","defaultEncodingForHeatmap","encodingForHeatmap","colorDims","heatmapAdvancedPipeline","heatmapColorLegend","val","colorCellStyleFill","cell","tooltipHeatmap","initHeatmap","heatmap","pivotHeatmap","heatmapSpecPipeline","registerHeatmap","boxplotConfig","defaultEncodingForBoxplot","encodingForBoxplot","c","reshapeWithBoxplotEncoding","uniqDims","whiskers","boxPlotDataList","boxPlotData","boxplot","pivotReshapeWithBoxplotEncoding","rowColumnFields","subMeasures","validEncodingIds","boxplotAdvancedPipeline","initBoxplot","boxMaxWidth","boxGapInGroup","datasetBoxplot","boxPlotMeasureKeys","VCHART_OUTLIER_KEY","tooltipBoxplot","valueMeasure","defaultFormatter","measureAliasMapping","tooltipItems","outerlierMeasure","mea","colorBoxPlotStyleFill","boxPlotStyle","boxPlotStyles","boxColor","boxColorOpacity","boxBorderColor","boxBorderWidth","boxVisible","boxBorderOpacity","outlierStyle","outlierStyles","pivotBoxplot","boxplotSpecPipeline","registerBoxPlot","histogramConfig","hasColorEncoding","pickedConfig","histogramXAxisConfig","flattenDatasert","minValue","maxValue","defaultEncodingForHistogram","encodingForHistogram","reshapeWithHistogramEncoding","binCount","binStep","binValueType","valueField","binData","bin","pivotReshapeWithHistogramEncoding","histogramAdvancedPipeline","initHistogram","datasetHistogram","getDefaultXFormatterOfHistogram","getDefaultValueFormatterOfHistogram","tooltipHistogram","defaultXFormatter","defaultValueFormatter","dimFormatter","histogramVerticalCrosshairRect","binRange","binStart","binEnd","annotationPointOfHistogram","histogramSpec","x2Field","kdeRegressionLine","kdeLine","scaleY","viewData","simpleData","kde","ecdfRegressionLine","ecdfLine","ecdf","yRange","y0","leftAxis","histogram","pivotHistogram","histogramSpecPipeline","registerHistogram","getDarkCrosshairLine","getDarkCrosshairRect","getLightCrosshairLine","getLightCrosshairRect","getLightColorScheme","getDarkColorScheme","getLightLinearColorScheme","getDarkLinearColorScheme","getLightColor","getDarkColor","getDefaultLabel","getDarkLabel","getLightLabel","getDefaultLegend","getDarkLegend","getLightLegend","getDefaultTableConfig","getLightTableConfig","getDarkTableConfig","pickPivotChartGridConfig","getLightPivotChartGridConfig","getDarkPivotChartGridConfig","getDefaultTooltip","getLightTooltip","getDarkTooltip","getLightLinearAxis","getLightBandAxis","getDarkLinearAxis","getDarkBandAxis","getDefaultAnnotationPoint","getLightAnnotationPoint","getDefaultAnnotationLine","getLightAnnotationHorizontalLine","getLightAnnotationVerticalLine","getDefaultAnnotationArea","getLightAnnotationArea","getLightAnnotation","getDarkAnnotationPoint","getDarkAnnotationHorizontalLine","getDarkAnnotationVerticalLine","getDarkAnnotationArea","getDarkAnnotation","getLightFunnelTransformTheme","getDarkFunnelTransformTheme","getLightHeatmapCellTheme","getDarkHeatmapCellTheme","getDefaultRegressionLine","getLightRegressionLine","getDarkRegressionLine","getLightBoxPlotStyle","getDarkBoxPlotStyle","getLightOutlierStyle","getDarkOutlierStyle","lightTheme","barBandAxis","crosshairLine","crosshairRect","darkTheme","registerCustomTheme","registerLightTheme","registerDarkTheme","registerAll","updateAdvanced","advancedPipe","updateSpec","specPipe","zChartType","z","zDualChartType","zDatum","zDataset","zDimension","zDimensionGroup","zDimensions","zDimensionTree","zNumFormat","zMeasure","zMeasureGroup","zMeasures","zMeasureTree","zDualMeasure","zDualMeasures","zScatterMeasure","zScatterMeasures","zFoldInfo","zUnfoldInfo","zDatasetReshapeInfo","zEncoding","EncodingEnum","zDimensionEncoding","DimensionEncodingEnum","zMeasureEncoding","MeasureEncodingEnum","zBackgroundColor","zTableConfig","zXBandAxis","zYBandAxis","zXLinearAxis","zYLinearAxis","zCrosshairLine","zCrosshairRect","zColor","zLinearColor","zSelector","zSelectors","zLabel","zLegend","zColorLegend","zTooltip","zAnnotationPoint","zAnnotationHorizontalLine","zAnnotationArea","zAnnotationPointConfig","zAnnotationHorizontalLineConfig","zAnnotationVerticalLineConfig","zAnnotationAreaConfig","zAnnotationConfig","zPivotChartGridConfig","zDimensionLinkage","zLineConfig","zStackCornerRadius","zBarMaxWidth","zBarGapInGroup","zEcdfRegressionLine","zKdeRegressionLine","zLinearRegressionLine","zLogisticRegressionLine","zLowessRegressionLine","zPolynomialRegressionLine","zRegressionLine","zColumnParallelConfig","zColumnConfig","zColumnPercentConfig","zBarConfig","zBarParallelConfig","zBarPercentConfig","zAreaConfig","zAreaPercentConfig","zScatterConfig","zDualAxisConfig","zPieLabel","zPieConfig","zDonutConfig","zRadarConfig","zRoseConfig","zRoseParallelConfig","zFunnelTransform","zFunnelConfig","zHeatmapCell","zHeatmapConfig","zPivotTableConfig","zWhiskersConfig","zBoxPlotStyle","zOutlierStyle","zBoxMaxWidth","zBoxGapInGroup","zBoxplotConfig","zHistogramConfig","zConfig","zCustomThemeConfig","zCustomTheme","zTheme","zBarStyle","zPointStyle","zLineStyle","zAreaStyle","zMarkStyle","zAnnotationVerticalLine","zAnnotation","zSort","zSortLegend","zAnalysis","zBodyCellStyle","zLocale","zTable","zPivotTable","zLine","zColumn","zColumnParallel","zColumnPercent","zBar","zBarParallel","zBarPercent","zArea","zAreaPercent","zScatter","zDualAxis","zHistogram","zRose","zRoseParallel","zPie","zDonut","zRadar","zFunnel","zHeatmap","zBoxPlot","zVSeed","zCellStyle","zAdvancedVSeed"],"mappings":"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"}