{"version":3,"file":"dataReshape/dataReshapeByEncoding.js","sources":["../../../src/dataReshape/dataReshapeByEncoding.ts"],"sourcesContent":["import type { Dataset, Dimension, Encoding, FoldInfo, Measure, Measures, UnfoldInfo } from 'src/types'\nimport { foldMeasures } from './foldMeasures'\nimport { FoldMeasureId, FoldMeasureName, FoldMeasureValue, Separator } from './constant'\nimport { unfoldDimensions } from './unfoldDimensions'\n\nexport const dataReshapeByEncoding = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  measures: Measure[],\n  encoding: Encoding,\n  options?: {\n    foldMeasureId?: string\n    foldMeasureName?: string\n    foldMeasureValue?: string\n    colorItemAsId?: boolean\n    colorMeasureId?: string\n    omitIds?: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n  unfoldInfo: UnfoldInfo\n} => {\n  const {\n    foldMeasureId = FoldMeasureId,\n    foldMeasureName = FoldMeasureName,\n    foldMeasureValue = FoldMeasureValue,\n    colorItemAsId = false,\n    colorMeasureId,\n    omitIds,\n  } = options || {}\n\n  // 合并所有指标为1个指标\n  const { dataset: foldedDataset, foldInfo } = foldMeasures(dataset, measures as Measures, {\n    measureId: foldMeasureId,\n    measureName: foldMeasureName,\n    measureValue: foldMeasureValue,\n    colorMeasureId,\n    omitIds,\n  })\n\n  // 展开指定的维度为指标\n  const { dataset: finalDataset, unfoldInfo } = unfoldDimensions(foldedDataset, dimensions, encoding, {\n    foldMeasureId,\n    separator: Separator,\n    colorItemAsId,\n  })\n  return { dataset: finalDataset, foldInfo, unfoldInfo }\n}\n"],"names":["dataReshapeByEncoding","dataset","dimensions","measures","encoding","options","foldMeasureId","FoldMeasureId","foldMeasureName","FoldMeasureName","foldMeasureValue","FoldMeasureValue","colorItemAsId","colorMeasureId","omitIds","foldedDataset","foldInfo","foldMeasures","finalDataset","unfoldInfo","unfoldDimensions","Separator"],"mappings":";;;AAKO,MAAMA,wBAAwB,CACnCC,SACAC,YACAC,UACAC,UACAC;IAaA,MAAM,EACJC,gBAAgBC,aAAa,EAC7BC,kBAAkBC,eAAe,EACjCC,mBAAmBC,gBAAgB,EACnCC,gBAAgB,KAAK,EACrBC,cAAc,EACdC,OAAO,EACR,GAAGT,WAAW,CAAC;IAGhB,MAAM,EAAE,SAASU,aAAa,EAAEC,QAAQ,EAAE,GAAGC,aAAahB,SAASE,UAAsB;QACvF,WAAWG;QACX,aAAaE;QACb,cAAcE;QACdG;QACAC;IACF;IAGA,MAAM,EAAE,SAASI,YAAY,EAAEC,UAAU,EAAE,GAAGC,iBAAiBL,eAAeb,YAAYE,UAAU;QAClGE;QACA,WAAWe;QACXT;IACF;IACA,OAAO;QAAE,SAASM;QAAcF;QAAUG;IAAW;AACvD"}