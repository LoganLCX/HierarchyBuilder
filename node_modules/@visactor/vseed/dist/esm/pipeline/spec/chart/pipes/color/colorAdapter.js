import { findAllMeasures } from "../../../../utils/index.js";
function colorAdapter(ordinalPipe, linearPipe) {
    return (spec, context)=>{
        const { advancedVSeed, vseed } = context;
        if (isLinearColor(advancedVSeed, vseed)) return linearPipe(spec, context);
        return ordinalPipe(spec, context);
    };
}
const isLinearColor = (advancedVSeed, vseed)=>{
    const { encoding } = advancedVSeed;
    const measures = vseed.measures || advancedVSeed.measures;
    const measureIdList = findAllMeasures(measures).map((measure)=>measure.id);
    const { color } = encoding;
    return color?.length === 1 && measureIdList.includes(color[0]);
};
const getColorMeasureId = (advancedVSeed, vseed)=>{
    if (isLinearColor(advancedVSeed, vseed)) {
        const { encoding } = advancedVSeed;
        const { color } = encoding;
        return color?.[0];
    }
};
export { colorAdapter, getColorMeasureId, isLinearColor };

//# sourceMappingURL=colorAdapter.js.map