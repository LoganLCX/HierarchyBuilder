import { DUAL_AXIS_CHART_COLUMN_Z_INDEX, DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } from "../../../../utils/constant.js";
const dualChartTypePrimary = (spec, context)=>{
    const result = {
        ...spec,
        zIndex: DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX
    };
    const { advancedVSeed, vseed } = context;
    const { chartType } = vseed;
    const { datasetReshapeInfo } = advancedVSeed;
    const index = datasetReshapeInfo[0].index;
    const config = advancedVSeed.config?.[chartType]?.dualChartType || {
        primary: 'column',
        secondary: 'line'
    };
    const primary = Array.isArray(config) ? config[index].primary || config[0].primary : config.primary;
    const secondary = Array.isArray(config) ? config[index].secondary || config[0].secondary : config.secondary;
    const bothColumn = 'column' === primary && 'column' === secondary;
    const type = bothColumn ? 'columnParallel' : primary;
    switch(type){
        case 'line':
            result.type = 'line';
            break;
        case 'column':
            result.type = 'bar';
            result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX;
            break;
        case 'columnParallel':
            {
                const columnSpec = result;
                if (Array.isArray(columnSpec.xField)) columnSpec.xField.push(datasetReshapeInfo[0].unfoldInfo.encodingDetail);
                else if (columnSpec.xField) columnSpec.xField = [
                    columnSpec.xField,
                    datasetReshapeInfo[0].unfoldInfo.encodingDetail
                ];
                columnSpec.type = 'bar';
                result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX;
                break;
            }
        case 'columnPercent':
            result.type = 'bar';
            result.percent = true;
            result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX;
            break;
        case 'area':
            result.type = 'area';
            break;
        case 'areaPercent':
            result.type = 'area';
            result.percent = true;
            break;
        case 'scatter':
            result.type = 'scatter';
            break;
        default:
            result.type = primary;
    }
    return result;
};
const dualChartTypeSecondary = (spec, context)=>{
    const result = {
        ...spec,
        zIndex: DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX
    };
    const { advancedVSeed, vseed } = context;
    const { chartType } = vseed;
    const { datasetReshapeInfo } = advancedVSeed;
    const config = advancedVSeed.config?.[chartType]?.dualChartType || {
        primary: 'column',
        secondary: 'line'
    };
    const index = datasetReshapeInfo[0].index;
    const primary = Array.isArray(config) ? config[index].primary || config[0].primary : config.primary;
    const secondary = Array.isArray(config) ? config[index].secondary || config[0].secondary : config.secondary;
    const bothColumn = 'column' === primary && 'column' === secondary;
    const type = bothColumn ? 'columnParallel' : secondary;
    switch(type){
        case 'line':
            result.type = 'line';
            break;
        case 'column':
            result.type = 'bar';
            result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX;
            break;
        case 'columnParallel':
            {
                const columnSpec = result;
                if (Array.isArray(columnSpec.xField)) columnSpec.xField.push(datasetReshapeInfo[0].unfoldInfo.encodingDetail);
                else if (columnSpec.xField) columnSpec.xField = [
                    columnSpec.xField,
                    datasetReshapeInfo[0].unfoldInfo.encodingDetail
                ];
                columnSpec.type = 'bar';
                result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX;
                break;
            }
        case 'columnPercent':
            result.type = 'bar';
            result.percent = true;
            result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX;
            break;
        case 'area':
            result.type = 'area';
            break;
        case 'areaPercent':
            result.type = 'area';
            result.percent = true;
            break;
        case 'scatter':
            result.type = 'scatter';
            break;
        default:
            result.type = secondary;
    }
    return result;
};
export { dualChartTypePrimary, dualChartTypeSecondary };

//# sourceMappingURL=dualChartType.js.map