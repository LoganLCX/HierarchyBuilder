{"version":3,"file":"pipeline/spec/chart/pipes/crosshair/histogramCrosshair.js","sources":["../../../../../../../src/pipeline/spec/chart/pipes/crosshair/histogramCrosshair.ts"],"sourcesContent":["import type { ICartesianCrosshairSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { verticalCrosshairRect } from './verticalCrosshairRect'\nimport { getDefaultXFormatterOfHistogram } from '../../utils/histogram'\nimport { isArray } from '@visactor/vutils'\n\nexport const histogramVerticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = verticalCrosshairRect(spec, context)\n  if (!result.crosshair) {\n    return result\n  }\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  if (!crosshair.xField) {\n    return result\n  }\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(context.advancedVSeed)\n  crosshair.xField = {\n    ...(crosshair.xField || {}),\n    label: {\n      ...(crosshair.xField?.label || {}),\n      formatMethod: (text) => {\n        if (isArray(text)) {\n          return text\n        }\n        const binRange = `${text}`.split('~')\n        const binStart = defaultXFormatter(+binRange[0])\n        const binEnd = defaultXFormatter(+binRange[1])\n        return binRange.length === 1 ? binStart : `[${binStart}, ${binEnd})`\n      },\n    },\n  }\n\n  return result\n}\n"],"names":["histogramVerticalCrosshairRect","spec","context","result","verticalCrosshairRect","crosshair","defaultXFormatter","getDefaultXFormatterOfHistogram","text","isArray","binRange","binStart","binEnd"],"mappings":";;;AAMO,MAAMA,iCAAiD,CAACC,MAAMC;IACnE,MAAMC,SAASC,sBAAsBH,MAAMC;IAC3C,IAAI,CAACC,OAAO,SAAS,EACnB,OAAOA;IAET,MAAME,YAAYF,OAAO,SAAS;IAClC,IAAI,CAACE,UAAU,MAAM,EACnB,OAAOF;IAET,MAAMG,oBAAoBC,gCAAgCL,QAAQ,aAAa;IAC/EG,UAAU,MAAM,GAAG;QACjB,GAAIA,UAAU,MAAM,IAAI,CAAC,CAAC;QAC1B,OAAO;YACL,GAAIA,UAAU,MAAM,EAAE,SAAS,CAAC,CAAC;YACjC,cAAc,CAACG;gBACb,IAAIC,QAAQD,OACV,OAAOA;gBAET,MAAME,WAAW,GAAGF,MAAM,CAAC,KAAK,CAAC;gBACjC,MAAMG,WAAWL,kBAAkB,CAACI,QAAQ,CAAC,EAAE;gBAC/C,MAAME,SAASN,kBAAkB,CAACI,QAAQ,CAAC,EAAE;gBAC7C,OAAOA,AAAoB,MAApBA,SAAS,MAAM,GAASC,WAAW,CAAC,CAAC,EAAEA,SAAS,EAAE,EAAEC,OAAO,CAAC,CAAC;YACtE;QACF;IACF;IAEA,OAAOT;AACT"}