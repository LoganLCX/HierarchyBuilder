{"version":3,"file":"pipeline/spec/chart/pipes/crosshair/verticalCrosshairLine.js","sources":["../../../../../../../src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairLine.ts"],"sourcesContent":["import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n"],"names":["verticalCrosshairLine","spec","context","result","advancedVSeed","vseed","chartType","config","visible","lineColor","undefined","labelColor","labelVisible","labelBackgroundColor","crosshair","xAxisConfig","v","xAxisFormatter","text"],"mappings":"AAGO,MAAMA,wBAAwC,CAACC,MAAMC;IAC1D,MAAMC,SAAS;QAAE,GAAGF,IAAI;IAAC;IACzB,MAAM,EAAEG,aAAa,EAAEC,KAAK,EAAE,GAAGH;IACjC,MAAM,EAAEI,SAAS,EAAE,GAAGD;IAEtB,MAAME,SAASH,cAAc,MAAM,EAAE,CAACE,UAAoB,EAAE;IAC5D,IAAI,CAACC,QACH,OAAOJ;IAGT,IAAI,CAACA,OAAO,SAAS,EACnBA,OAAO,SAAS,GAAG,CAAC;IAGtB,MAAMK,UAAUD,OAAO,OAAO,IAAI;IAClC,MAAME,YAAYF,OAAO,SAAS,IAAIG;IACtC,MAAMC,aAAaJ,OAAO,UAAU,IAAIG;IACxC,MAAME,eAAeL,OAAO,YAAY,IAAIG;IAC5C,MAAMG,uBAAuBN,OAAO,oBAAoB,IAAIG;IAE5D,MAAMI,YAAYX,OAAO,SAAS;IAClCW,UAAU,MAAM,GAAG;QACjBN;QACA,MAAM;YACJ,MAAM;YACN,OAAO;gBACL,WAAW;gBACX,SAAS;gBACT,QAAQC;gBACR,UAAUF,OAAO,QAAQ,IAAI;oBAAC;oBAAG;iBAAE;YACrC;QACF;QACA,OAAO;YACL,SAASK;YACT,iBAAiB;gBACf,SAASA;gBACT,OAAO;oBACL,MAAMC;gBACR;YACF;YACA,OAAO;gBACL,MAAMF;YACR;QACF;IACF;IACA,MAAMI,cAAcZ,OAAO,IAAI,EAAE,KAAK,CAACa,IAAMA,AAAa,aAAbA,EAAE,MAAM;IACrD,MAAMC,iBAAiBF,aAAa,OAAO;IAC3C,IAAIE,gBACAH,UAAU,MAAM,CAAC,KAAK,CAAE,YAAY,GAAW,CAACI,OAA4BD,eAAeC;IAG/F,OAAOf;AACT"}