{"version":3,"file":"pipeline/spec/chart/pipes/pivotChart/pivotAxisStyle.js","sources":["../../../../../../../src/pipeline/spec/chart/pipes/pivotChart/pivotAxisStyle.ts"],"sourcesContent":["import type { ILineChartSpec } from '@visactor/vchart'\nimport { BAND_AXIS_INNER_OFFSET_IN_PIVOT } from 'src/pipeline/utils/constant'\nimport type { Config, VChartSpecPipe } from 'src/types'\n\nexport const pivotAxisStyle = (axisStyle: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = axisStyle(spec, context) as ILineChartSpec\n\n    if (result.axes) {\n      const { advancedVSeed } = context\n      const { config, chartType } = advancedVSeed\n      const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n      result.axes.forEach((axis: any) => {\n        axis.domainLine = {\n          visible: false,\n        }\n\n        if (themConfig.chartGridColor && axis.grid && axis.grid.visible && axis.grid.style) {\n          axis.grid.style.stroke = themConfig.chartGridColor\n        }\n\n        if (themConfig.axisLabelColor && axis.label && axis.label.visible && axis.label.style) {\n          axis.label.style.fill = themConfig.axisLabelColor\n        }\n\n        if (axis.type === 'band') {\n          if (axis.orient === 'left' || axis.orient === 'right') {\n            axis.innerOffset = {\n              top: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              bottom: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          } else if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.innerOffset = {\n              left: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              right: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          }\n        } else if (axis.type === 'linear') {\n          if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.label.flush = true\n          }\n        }\n      })\n    }\n\n    return result\n  }\n}\n"],"names":["pivotAxisStyle","axisStyle","spec","context","result","advancedVSeed","config","chartType","themConfig","axis","BAND_AXIS_INNER_OFFSET_IN_PIVOT"],"mappings":";AAIO,MAAMA,iBAAiB,CAACC,YACtB,CAACC,MAAMC;QACZ,MAAMC,SAASH,UAAUC,MAAMC;QAE/B,IAAIC,OAAO,IAAI,EAAE;YACf,MAAM,EAAEC,aAAa,EAAE,GAAGF;YAC1B,MAAM,EAAEG,MAAM,EAAEC,SAAS,EAAE,GAAGF;YAC9B,MAAMG,aAAcF,QAAQ,CAACC,UAAU,EAAqB,aAAa,CAAC;YAE1EH,OAAO,IAAI,CAAC,OAAO,CAAC,CAACK;gBACnBA,KAAK,UAAU,GAAG;oBAChB,SAAS;gBACX;gBAEA,IAAID,WAAW,cAAc,IAAIC,KAAK,IAAI,IAAIA,KAAK,IAAI,CAAC,OAAO,IAAIA,KAAK,IAAI,CAAC,KAAK,EAChFA,KAAK,IAAI,CAAC,KAAK,CAAC,MAAM,GAAGD,WAAW,cAAc;gBAGpD,IAAIA,WAAW,cAAc,IAAIC,KAAK,KAAK,IAAIA,KAAK,KAAK,CAAC,OAAO,IAAIA,KAAK,KAAK,CAAC,KAAK,EACnFA,KAAK,KAAK,CAAC,KAAK,CAAC,IAAI,GAAGD,WAAW,cAAc;gBAGnD,IAAIC,AAAc,WAAdA,KAAK,IAAI,EACX;oBAAA,IAAIA,AAAgB,WAAhBA,KAAK,MAAM,IAAeA,AAAgB,YAAhBA,KAAK,MAAM,EACvCA,KAAK,WAAW,GAAG;wBACjB,KAAKC;wBACL,QAAQA;oBACV;yBACK,IAAID,AAAgB,UAAhBA,KAAK,MAAM,IAAcA,AAAgB,aAAhBA,KAAK,MAAM,EAC7CA,KAAK,WAAW,GAAG;wBACjB,MAAMC;wBACN,OAAOA;oBACT;gBACF,OACK,IAAID,AAAc,aAAdA,KAAK,IAAI,EAClB;oBAAA,IAAIA,AAAgB,UAAhBA,KAAK,MAAM,IAAcA,AAAgB,aAAhBA,KAAK,MAAM,EACtCA,KAAK,KAAK,CAAC,KAAK,GAAG;gBACrB;YAEJ;QACF;QAEA,OAAOL;IACT"}