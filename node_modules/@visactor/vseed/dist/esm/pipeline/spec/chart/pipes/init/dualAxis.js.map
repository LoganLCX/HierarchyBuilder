{"version":3,"file":"pipeline/spec/chart/pipes/init/dualAxis.js","sources":["../../../../../../../src/pipeline/spec/chart/pipes/init/dualAxis.ts"],"sourcesContent":["import type { IBarSeriesSpec, ILineSeriesSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initDualAxisPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarSeriesSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList, id } = datasetReshapeInfo[0]\n\n  result.id = `${id}-primary-series`\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.yField = foldInfoList?.[0].measureValue\n  result.animation = true\n\n  return result\n}\n\nexport const initDualAxisSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineSeriesSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList, id } = datasetReshapeInfo[0]\n\n  result.id = `${id}-secondary-series`\n  result.type = 'line'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  if (foldInfoList?.[1]) {\n    result.yField = foldInfoList[1].measureValue\n  }\n\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n  result.animation = true\n\n  return result\n}\n"],"names":["initDualAxisPrimary","spec","context","result","advancedVSeed","datasetReshapeInfo","unfoldInfo","foldInfoList","id","initDualAxisSecondary","vseed","isLinearColor"],"mappings":";AAIO,MAAMA,sBAAsC,CAACC,MAAMC;IACxD,MAAMC,SAAS;QAAE,GAAGF,IAAI;IAAC;IACzB,MAAM,EAAEG,aAAa,EAAE,GAAGF;IAC1B,MAAM,EAAEG,kBAAkB,EAAE,GAAGD;IAC/B,MAAM,EAAEE,UAAU,EAAEC,YAAY,EAAEC,EAAE,EAAE,GAAGH,kBAAkB,CAAC,EAAE;IAE9DF,OAAO,EAAE,GAAG,GAAGK,GAAG,eAAe,CAAC;IAClCL,OAAO,IAAI,GAAG;IACdA,OAAO,SAAS,GAAG;IACnBA,OAAO,MAAM,GAAGG,WAAW,SAAS;IACpCH,OAAO,WAAW,GAAGG,WAAW,eAAe;IAE/CH,OAAO,MAAM,GAAGI,cAAc,CAAC,EAAE,CAAC;IAClCJ,OAAO,SAAS,GAAG;IAEnB,OAAOA;AACT;AAEO,MAAMM,wBAAwC,CAACR,MAAMC;IAC1D,MAAMC,SAAS;QAAE,GAAGF,IAAI;IAAC;IACzB,MAAM,EAAEG,aAAa,EAAEM,KAAK,EAAE,GAAGR;IACjC,MAAM,EAAEG,kBAAkB,EAAE,GAAGD;IAC/B,MAAM,EAAEE,UAAU,EAAEC,YAAY,EAAEC,EAAE,EAAE,GAAGH,kBAAkB,CAAC,EAAE;IAE9DF,OAAO,EAAE,GAAG,GAAGK,GAAG,iBAAiB,CAAC;IACpCL,OAAO,IAAI,GAAG;IACdA,OAAO,SAAS,GAAG;IACnBA,OAAO,MAAM,GAAGG,WAAW,SAAS;IACpC,IAAIC,cAAc,CAAC,EAAE,EACnBJ,OAAO,MAAM,GAAGI,YAAY,CAAC,EAAE,CAAC,YAAY;IAG9CJ,OAAO,WAAW,GAAGQ,cAAcP,eAAeM,SAASJ,WAAW,cAAc,GAAGA,WAAW,eAAe;IAEjHH,OAAO,SAAS,GAAG;IAEnB,OAAOA;AACT"}