import { isPivotChart } from "../../../../utils/index.js";
const datasetPrimary = (spec, context)=>{
    const { advancedVSeed, vseed } = context;
    const { analysis, datasetReshapeInfo } = advancedVSeed;
    const orderMapping = analysis?.orderMapping || {};
    const { unfoldInfo } = datasetReshapeInfo[0];
    const x = unfoldInfo.encodingX;
    const colorId = unfoldInfo.encodingColorId;
    const id = datasetReshapeInfo[0].id;
    const fields = {};
    if (x) {
        const order = orderMapping[x];
        if (order) fields[x] = {
            sortIndex: 0,
            domain: order,
            lockStatisticsByDomain: true
        };
        else fields[x] = {
            sortIndex: 0
        };
    }
    if (colorId) {
        const order = orderMapping[colorId];
        if (order) fields[colorId] = {
            sortIndex: 0,
            domain: order,
            lockStatisticsByDomain: true
        };
        else fields[colorId] = {
            sortIndex: 0
        };
    }
    return {
        ...spec,
        data: {
            id: `${id}-primary-dataset`,
            values: isPivotChart(vseed) ? void 0 : advancedVSeed.dataset,
            fields: fields
        }
    };
};
const datasetSecondary = (spec, context)=>{
    const { advancedVSeed, vseed } = context;
    const { analysis, datasetReshapeInfo } = advancedVSeed;
    const orderMapping = analysis?.orderMapping || {};
    const { unfoldInfo } = datasetReshapeInfo[0];
    const x = unfoldInfo.encodingX;
    const colorId = unfoldInfo.encodingColorId;
    const id = datasetReshapeInfo[0].id;
    const fields = {};
    if (x) {
        const order = orderMapping[x];
        if (order) fields[x] = {
            sortIndex: 0,
            domain: order,
            lockStatisticsByDomain: true
        };
        else fields[x] = {
            sortIndex: 0
        };
    }
    if (colorId) {
        const order = orderMapping[colorId];
        if (order) fields[colorId] = {
            sortIndex: 0,
            domain: order,
            lockStatisticsByDomain: true
        };
        else fields[colorId] = {
            sortIndex: 0
        };
    }
    return {
        ...spec,
        data: {
            id: `${id}-secondary-dataset`,
            values: isPivotChart(vseed) ? void 0 : advancedVSeed.dataset,
            fields: fields
        }
    };
};
export { datasetPrimary, datasetSecondary };

//# sourceMappingURL=datasetDualAxis.js.map