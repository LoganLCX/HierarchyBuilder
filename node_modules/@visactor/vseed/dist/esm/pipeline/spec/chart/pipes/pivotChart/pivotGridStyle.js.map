{"version":3,"file":"pipeline/spec/chart/pipes/pivotChart/pivotGridStyle.js","sources":["../../../../../../../src/pipeline/spec/chart/pipes/pivotChart/pivotGridStyle.ts"],"sourcesContent":["import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { isCombination, isPivot } from 'src/pipeline/utils'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\nimport { isNullish } from 'remeda'\n\nexport const pivotGridStyle: PivotChartSpecPipe = (spec, context) => {\n  const { vseed, advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n  const onlyCombination = !isPivot(vseed) && isCombination(vseed)\n\n  const result = { ...spec } as PivotChartConstructorOptions\n  const transparent = 'rgba(0,0,0,0)'\n\n  const borderColor = themConfig.borderColor ?? '#e3e5eb'\n  const bodyFontColor = themConfig.bodyFontColor ?? '#141414'\n  const headerFontColor = themConfig.headerFontColor ?? '#21252c'\n  const headerBackgroundColor = themConfig.headerBackgroundColor ?? 'rgba(0,0,0,0)'\n  const hoverHeaderBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderBackgroundColor ?? '#D9DDE4')\n  const hoverHeaderInlineBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderInlineBackgroundColor ?? '#D9DDE455')\n  const outlineBorderLineWidth = themConfig.outlineBorderLineWidth ?? 0\n  const frameCornerRadius = themConfig.frameCornerRadius ?? 0\n\n  if (!isNullish(themConfig.minChartWidth)) {\n    result.defaultColWidth = themConfig.minChartWidth\n  }\n\n  if (!isNullish(themConfig.minChartHeight)) {\n    result.defaultRowHeight = themConfig.minChartHeight\n  }\n\n  return {\n    ...result,\n    theme: {\n      underlayBackgroundColor: transparent,\n      bodyStyle: {\n        borderColor,\n        color: bodyFontColor,\n        borderLineWidth: (arg: { row: number; col: number; table: any }) => {\n          const noYAxis =\n            chartType === 'pie' ||\n            chartType === 'rose' ||\n            chartType === 'donut' ||\n            chartType === 'funnel' ||\n            chartType === 'radar' ||\n            chartType === 'roseParallel'\n\n          return [\n            arg.row === 0 ? outlineBorderLineWidth : 1,\n            outlineBorderLineWidth,\n            0,\n            arg.col === 0 || (noYAxis && arg.col === 1 && arg.table.colCount <= 2) ? outlineBorderLineWidth : 1,\n          ]\n        },\n        bgColor: transparent,\n        hover: {\n          cellBgColor: 'transparent',\n        },\n      },\n      headerStyle: {\n        borderColor,\n        fontSize: 12,\n        // borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        borderLineWidth: (arg: { row: number; col: number }) => {\n          return [outlineBorderLineWidth, outlineBorderLineWidth, 1, arg.col === 0 ? outlineBorderLineWidth : 1]\n        },\n        color: headerFontColor,\n        textAlign: 'center',\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      rowHeaderStyle: {\n        borderColor,\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, 1, 0, outlineBorderLineWidth]\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerHeaderStyle: {\n        borderColor,\n        textAlign: 'center',\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        fontWeight: 'bold',\n        borderLineWidth: [outlineBorderLineWidth, 1, 1, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerLeftBottomCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightTopCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: 0,\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      rightFrozenStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, outlineBorderLineWidth, 0, 1]\n        },\n        frameStyle: {\n          borderLineWidth: 0,\n        },\n        hover: {\n          borderLineWidth: 0,\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightBottomCellStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n\n      bottomFrozenStyle: {\n        borderColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      selectionStyle: {\n        cellBgColor: '',\n        cellBorderColor: '',\n      },\n      frameStyle: {\n        borderColor,\n        cornerRadius: frameCornerRadius,\n        borderLineWidth: outlineBorderLineWidth,\n      },\n\n      axisStyle: {\n        leftAxisStyle: {\n          cellPaddingLeft: 10,\n        },\n        bottomAxisStyle: {\n          cellPaddingBottom: 4,\n        },\n        rightAxisStyle: {\n          cellPaddingRight: 4,\n        },\n      },\n      scrollStyle: {\n        visible: 'scrolling',\n        hoverOn: false,\n      },\n    },\n  }\n}\n"],"names":["pivotGridStyle","spec","context","vseed","advancedVSeed","config","chartType","themConfig","onlyCombination","isPivot","isCombination","result","transparent","borderColor","bodyFontColor","headerFontColor","headerBackgroundColor","hoverHeaderBackgroundColor","hoverHeaderInlineBackgroundColor","outlineBorderLineWidth","frameCornerRadius","isNullish","arg","noYAxis","undefined"],"mappings":";;AAKO,MAAMA,iBAAqC,CAACC,MAAMC;IACvD,MAAM,EAAEC,KAAK,EAAEC,aAAa,EAAE,GAAGF;IACjC,MAAM,EAAEG,MAAM,EAAEC,SAAS,EAAE,GAAGF;IAC9B,MAAMG,aAAcF,QAAQ,CAACC,UAAU,EAAqB,aAAa,CAAC;IAE1E,MAAME,kBAAkB,CAACC,QAAQN,UAAUO,cAAcP;IAEzD,MAAMQ,SAAS;QAAE,GAAGV,IAAI;IAAC;IACzB,MAAMW,cAAc;IAEpB,MAAMC,cAAcN,WAAW,WAAW,IAAI;IAC9C,MAAMO,gBAAgBP,WAAW,aAAa,IAAI;IAClD,MAAMQ,kBAAkBR,WAAW,eAAe,IAAI;IACtD,MAAMS,wBAAwBT,WAAW,qBAAqB,IAAI;IAClE,MAAMU,6BAA6BT,kBAC/BI,cACCL,WAAW,0BAA0B,IAAI;IAC9C,MAAMW,mCAAmCV,kBACrCI,cACCL,WAAW,gCAAgC,IAAI;IACpD,MAAMY,yBAAyBZ,WAAW,sBAAsB,IAAI;IACpE,MAAMa,oBAAoBb,WAAW,iBAAiB,IAAI;IAE1D,IAAI,CAACc,UAAUd,WAAW,aAAa,GACrCI,OAAO,eAAe,GAAGJ,WAAW,aAAa;IAGnD,IAAI,CAACc,UAAUd,WAAW,cAAc,GACtCI,OAAO,gBAAgB,GAAGJ,WAAW,cAAc;IAGrD,OAAO;QACL,GAAGI,MAAM;QACT,OAAO;YACL,yBAAyBC;YACzB,WAAW;gBACTC;gBACA,OAAOC;gBACP,iBAAiB,CAACQ;oBAChB,MAAMC,UACJjB,AAAc,UAAdA,aACAA,AAAc,WAAdA,aACAA,AAAc,YAAdA,aACAA,AAAc,aAAdA,aACAA,AAAc,YAAdA,aACAA,AAAc,mBAAdA;oBAEF,OAAO;wBACO,MAAZgB,IAAI,GAAG,GAASH,yBAAyB;wBACzCA;wBACA;wBACY,MAAZG,IAAI,GAAG,IAAWC,WAAWD,AAAY,MAAZA,IAAI,GAAG,IAAUA,IAAI,KAAK,CAAC,QAAQ,IAAI,IAAKH,yBAAyB;qBACnG;gBACH;gBACA,SAASP;gBACT,OAAO;oBACL,aAAa;gBACf;YACF;YACA,aAAa;gBACXC;gBACA,UAAU;gBAEV,iBAAiB,CAACS,MACT;wBAACH;wBAAwBA;wBAAwB;wBAAe,MAAZG,IAAI,GAAG,GAASH,yBAAyB;qBAAE;gBAExG,OAAOJ;gBACP,WAAW;gBACX,SAASC;gBACT,OAAO;oBACL,aAAaC;oBACb,kBAAkBC,oCAAoCM;oBACtD,qBAAqBN,oCAAoCM;gBAC3D;YACF;YACA,gBAAgB;gBACdX;gBACA,UAAU;gBACV,OAAOE;gBACP,SAAS;oBAAC;oBAAG;oBAAI;oBAAG;iBAAE;gBACtB,iBAAiB,CAACO,MACT;wBAAa,MAAZA,IAAI,GAAG,GAASH,yBAAyB;wBAAG;wBAAG;wBAAGA;qBAAuB;gBAEnF,SAASH;gBACT,OAAO;oBACL,aAAaC;oBACb,kBAAkBC,oCAAoCM;oBACtD,qBAAqBN,oCAAoCM;gBAC3D;YACF;YACA,mBAAmB;gBACjBX;gBACA,WAAW;gBACX,UAAU;gBACV,OAAOE;gBACP,SAAS;oBAAC;oBAAG;oBAAI;oBAAG;iBAAE;gBACtB,YAAY;gBACZ,iBAAiB;oBAACI;oBAAwB;oBAAG;oBAAGA;iBAAuB;gBACvE,SAASH;gBACT,YAAY;oBACVH;gBACF;gBACA,OAAO;oBACL,aAAaI;oBACb,kBAAkBC,oCAAoCM;oBACtD,qBAAqBN,oCAAoCM;gBAC3D;YACF;YACA,2BAA2B;gBACzBX;gBACA,iBAAiB;oBAACM;oBAAwB;oBAAGA;oBAAwBA;iBAAuB;gBAC5F,SAASH;gBACT,YAAY;oBACVH;oBACA,iBAAiB;wBAAC;wBAAG;wBAAGM;wBAAwBA;qBAAuB;gBACzE;gBACA,OAAO;oBACL,aAAaF;gBACf;YACF;YACA,yBAAyB;gBACvBJ;gBACA,iBAAiB;oBAACM;oBAAwBA;oBAAwB;oBAAG;iBAAE;gBACvE,YAAY;oBACVN;oBACA,iBAAiB;gBACnB;gBACA,SAASG;gBACT,OAAO;oBACL,aAAaC;gBACf;YACF;YACA,kBAAkB;gBAChBJ;gBACA,SAASG;gBACT,iBAAiB,CAACM,MACT;wBAAa,MAAZA,IAAI,GAAG,GAASH,yBAAyB;wBAAGA;wBAAwB;wBAAG;qBAAE;gBAEnF,YAAY;oBACV,iBAAiB;gBACnB;gBACA,OAAO;oBACL,iBAAiB;oBACjB,aAAaF;gBACf;YACF;YACA,4BAA4B;gBAC1BJ;gBACA,SAASG;gBACT,iBAAiB;oBAAC;oBAAGG;oBAAwBA;oBAAwB;iBAAE;gBACvE,YAAY;oBACVN;oBACA,iBAAiB;wBAAC;wBAAGM;wBAAwBA;wBAAwB;qBAAE;gBACzE;gBACA,OAAO;oBACL,aAAaF;gBACf;YACF;YAEA,mBAAmB;gBACjBJ;gBACA,iBAAiB;oBAAC;oBAAGM;oBAAwBA;oBAAwB;iBAAE;gBACvE,SAASH;gBACT,OAAO;oBACL,aAAaC;gBACf;YACF;YACA,gBAAgB;gBACd,aAAa;gBACb,iBAAiB;YACnB;YACA,YAAY;gBACVJ;gBACA,cAAcO;gBACd,iBAAiBD;YACnB;YAEA,WAAW;gBACT,eAAe;oBACb,iBAAiB;gBACnB;gBACA,iBAAiB;oBACf,mBAAmB;gBACrB;gBACA,gBAAgB;oBACd,kBAAkB;gBACpB;YACF;YACA,aAAa;gBACX,SAAS;gBACT,SAAS;YACX;QACF;IACF;AACF"}