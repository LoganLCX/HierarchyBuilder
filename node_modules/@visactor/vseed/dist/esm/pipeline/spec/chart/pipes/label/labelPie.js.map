{"version":3,"file":"pipeline/spec/chart/pipes/label/labelPie.js","sources":["../../../../../../../src/pipeline/spec/chart/pipes/label/labelPie.ts"],"sourcesContent":["import type { IPieChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, PieLabel, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: PieLabel }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as IPieChartSpec['label']\n  if (label.labelLayout) {\n    ;(result.label as any)!.layout = {\n      align: label.labelLayout,\n    }\n  }\n  return result\n}\n"],"names":["labelPie","spec","context","result","advancedVSeed","vseed","datasetReshapeInfo","chartType","encoding","baseConfig","foldInfo","label","buildLabel"],"mappings":";AAIO,MAAMA,WAA2B,CAACC,MAAMC;IAC7C,MAAMC,SAAS;QAAE,GAAGF,IAAI;IAAC;IACzB,MAAM,EAAEG,aAAa,EAAEC,KAAK,EAAE,GAAGH;IACjC,MAAM,EAAEI,kBAAkB,EAAE,GAAGF;IAC/B,MAAM,EAAEG,SAAS,EAAEC,QAAQ,EAAE,GAAGJ;IAChC,MAAMK,aAAaL,cAAc,MAAM,CAACG,UAAU;IAClD,MAAMG,WAAWJ,kBAAkB,CAAC,EAAE,CAAC,QAAQ;IAE/C,MAAM,EAAEK,KAAK,EAAE,GAAGF;IAElBN,OAAO,KAAK,GAAGS,WACbD,OACAN,MAAM,QAAQ,EACdA,MAAM,UAAU,EAChBD,cAAc,UAAU,EACxBA,cAAc,QAAQ,EACtBI,UACA;QAACE;KAAS;IAEZ,IAAIC,MAAM,WAAW,EACjBR,OAAO,KAAK,CAAU,MAAM,GAAG;QAC/B,OAAOQ,MAAM,WAAW;IAC1B;IAEF,OAAOR;AACT"}