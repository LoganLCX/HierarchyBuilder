{"version":3,"file":"pipeline/utils/measures/find.js","sources":["../../../../../src/pipeline/utils/measures/find.ts"],"sourcesContent":["import type { Measure, MeasureGroup, MeasureTree } from 'src/types'\nimport { preorderTraverse } from '../tree'\n\nexport const findMeasureById = (measures: MeasureTree = [], id: string): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      if (node.id === id) {\n        result = node\n        return true\n      }\n    }\n    return false\n  })\n  return result\n}\n\nexport const findFirstMeasure = (measures: MeasureTree = []): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result = node\n      return true\n    }\n    return false\n  })\n  return result\n}\n\nexport const findAllMeasures = (measures: MeasureTree = []): Measure[] => {\n  if (!measures) return []\n  const result: Measure[] = []\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result.push(node)\n    }\n    return false\n  })\n  return result\n}\n\nexport const hasMultipleMeasureInSingleView = (measures: MeasureTree = []): boolean => {\n  if (measures.every((m) => !('children' in m))) {\n    return measures.length > 1\n  }\n  let found = false\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if ((node as MeasureGroup).children && (node as MeasureGroup).children!.length > 1) {\n      found = true\n      return true\n    }\n    return false\n  })\n  return found\n}\n"],"names":["findMeasureById","measures","id","result","preorderTraverse","node","findFirstMeasure","findAllMeasures","hasMultipleMeasureInSingleView","m","found"],"mappings":";AAGO,MAAMA,kBAAkB,CAACC,WAAwB,EAAE,EAAEC;IAC1D,IAAI,CAACD,UAAU;IACf,IAAIE;IAEJC,iBAAsCH,UAAU,CAACI;QAC/C,IAAI,CAAE,eAAcA,IAAG,GACrB;YAAA,IAAIA,KAAK,EAAE,KAAKH,IAAI;gBAClBC,SAASE;gBACT,OAAO;YACT;QAAA;QAEF,OAAO;IACT;IACA,OAAOF;AACT;AAEO,MAAMG,mBAAmB,CAACL,WAAwB,EAAE;IACzD,IAAI,CAACA,UAAU;IACf,IAAIE;IACJC,iBAAsCH,UAAU,CAACI;QAC/C,IAAI,CAAE,eAAcA,IAAG,GAAI;YACzBF,SAASE;YACT,OAAO;QACT;QACA,OAAO;IACT;IACA,OAAOF;AACT;AAEO,MAAMI,kBAAkB,CAACN,WAAwB,EAAE;IACxD,IAAI,CAACA,UAAU,OAAO,EAAE;IACxB,MAAME,SAAoB,EAAE;IAC5BC,iBAAsCH,UAAU,CAACI;QAC/C,IAAI,CAAE,eAAcA,IAAG,GACrBF,OAAO,IAAI,CAACE;QAEd,OAAO;IACT;IACA,OAAOF;AACT;AAEO,MAAMK,iCAAiC,CAACP,WAAwB,EAAE;IACvE,IAAIA,SAAS,KAAK,CAAC,CAACQ,IAAM,CAAE,eAAcA,CAAAA,IACxC,OAAOR,SAAS,MAAM,GAAG;IAE3B,IAAIS,QAAQ;IACZN,iBAAsCH,UAAU,CAACI;QAC/C,IAAKA,KAAsB,QAAQ,IAAKA,KAAsB,QAAQ,CAAE,MAAM,GAAG,GAAG;YAClFK,QAAQ;YACR,OAAO;QACT;QACA,OAAO;IACT;IACA,OAAOA;AACT"}