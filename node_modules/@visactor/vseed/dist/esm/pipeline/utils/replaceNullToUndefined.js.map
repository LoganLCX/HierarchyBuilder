{"version":3,"file":"pipeline/utils/replaceNullToUndefined.js","sources":["../../../../src/pipeline/utils/replaceNullToUndefined.ts"],"sourcesContent":["import { isPlainObject, mapValues, pipe } from 'remeda'\n\n// 递归类型，将所有 null 替换为 undefined\ntype NullToUndefined<T> = T extends null\n  ? undefined\n  : T extends (infer U)[]\n    ? NullToUndefined<U>[]\n    : T extends object\n      ? { [K in keyof T]: NullToUndefined<T[K]> }\n      : T\n\nexport const replaceNullToUndefined = <T>(obj: T): NullToUndefined<T> => {\n  if (obj === null) {\n    return undefined as NullToUndefined<T>\n  }\n  if (Array.isArray(obj)) {\n    // 递归处理数组元素\n    return obj.map(replaceNullToUndefined) as NullToUndefined<T>\n  }\n  if (isPlainObject(obj)) {\n    // 使用 remeda 的 mapValues 递归处理对象属性\n    return pipe(\n      obj as object,\n      mapValues((value) => replaceNullToUndefined(value)),\n    ) as NullToUndefined<T>\n  }\n  return obj as NullToUndefined<T>\n}\n"],"names":["replaceNullToUndefined","obj","Array","isPlainObject","pipe","mapValues","value"],"mappings":";AAWO,MAAMA,yBAAyB,CAAIC;IACxC,IAAIA,AAAQ,SAARA,KACF;IAEF,IAAIC,MAAM,OAAO,CAACD,MAEhB,OAAOA,IAAI,GAAG,CAACD;IAEjB,IAAIG,cAAcF,MAEhB,OAAOG,KACLH,KACAI,UAAU,CAACC,QAAUN,uBAAuBM;IAGhD,OAAOL;AACT"}