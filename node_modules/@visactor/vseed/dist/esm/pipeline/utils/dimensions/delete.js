import { isDimension, isDimensionGroup } from "./typeGuard.js";
const deleteDimensionTreeByCallback = (dimensionTree, callback)=>{
    if (!dimensionTree) return dimensionTree;
    const stack = [
        ...dimensionTree
    ].reverse();
    const parents = new Map();
    dimensionTree.forEach((node)=>{
        parents.set(node, dimensionTree);
    });
    const nodesToProcess = [];
    const visited = new Set();
    while(stack.length > 0){
        const node = stack[stack.length - 1];
        if (isDimensionGroup(node) && node.children && !visited.has(node)) {
            visited.add(node);
            const children = node.children.slice().reverse();
            for (const child of children){
                parents.set(child, node.children);
                stack.push(child);
            }
        } else {
            stack.pop();
            nodesToProcess.push(node);
        }
    }
    for (const node of nodesToProcess){
        const parentList = parents.get(node);
        if (parentList) {
            const index = parentList.indexOf(node);
            if (isDimension(node)) {
                if (callback?.(node, index, parentList)) parentList.splice(index, 1);
            }
        }
    }
    return dimensionTree;
};
export { deleteDimensionTreeByCallback };

//# sourceMappingURL=delete.js.map