{"version":3,"file":"pipeline/advanced/table/pipes/default/defaultMeasureId.js","sources":["../../../../../../../src/pipeline/advanced/table/pipes/default/defaultMeasureId.ts"],"sourcesContent":["import { MeasureId, MeasureName } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport type { AdvancedPipe, Dimension, DimensionTree } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n  const measures = findAllMeasures(advancedVSeed.measures as DimensionTree)\n\n  // 如果没有指标名称维度，则默认添加指标名称维度\n  if (measures.length > 1 && !result.dimensions?.some((dim) => dim.id === MeasureName)) {\n    result.dimensions?.push({\n      id: MeasureId,\n      alias: intl.i18n`指标名称`,\n      encoding: 'row',\n    } as Dimension)\n  }\n\n  return result\n}\n"],"names":["defaultMeasureId","advancedVSeed","result","measures","findAllMeasures","dim","MeasureName","MeasureId","intl"],"mappings":";;;AAKO,MAAMA,mBAAiC,CAACC;IAC7C,MAAMC,SAAS;QAAE,GAAGD,aAAa;IAAC;IAClC,MAAME,WAAWC,gBAAgBH,cAAc,QAAQ;IAGvD,IAAIE,SAAS,MAAM,GAAG,KAAK,CAACD,OAAO,UAAU,EAAE,KAAK,CAACG,MAAQA,IAAI,EAAE,KAAKC,cACtEJ,OAAO,UAAU,EAAE,KAAK;QACtB,IAAIK;QACJ,OAAOC,KAAK,IAAI,CAAC,IAAI,CAAC;QACtB,UAAU;IACZ;IAGF,OAAON;AACT"}