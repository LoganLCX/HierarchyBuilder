{"version":3,"file":"pipeline/advanced/chart/pipes/analysis/common.js","sources":["../../../../../../../src/pipeline/advanced/chart/pipes/analysis/common.ts"],"sourcesContent":["import { sort, unique } from 'remeda'\nimport type { Dataset, Datum } from 'src/types'\nimport type { Sort } from 'src/types/properties/analysis/sort'\n\nexport const calcOrder = (sortConfig: Sort, id: string, dataset: Dataset): string[] => {\n  if (sortConfig.customOrder) {\n    return sortConfig.customOrder\n  }\n\n  const order = sortConfig.order || 'asc'\n  const orderBy = sortConfig.orderBy\n\n  const res = sort(dataset, (a, b) => {\n    const aValue = a[orderBy || id] as string | number\n    const bValue = b[orderBy || id] as string | number\n\n    if (order === 'asc') {\n      if (aValue < bValue) {\n        return -1\n      }\n      if (aValue > bValue) {\n        return 1\n      }\n      return 0\n    }\n    if (aValue > bValue) {\n      return -1\n    }\n    if (aValue < bValue) {\n      return 1\n    }\n    return 0\n  })\n\n  return unique(res.map((item: Datum) => item[id] as string))\n}\n"],"names":["calcOrder","sortConfig","id","dataset","order","orderBy","res","sort","a","b","aValue","bValue","unique","item"],"mappings":";AAIO,MAAMA,YAAY,CAACC,YAAkBC,IAAYC;IACtD,IAAIF,WAAW,WAAW,EACxB,OAAOA,WAAW,WAAW;IAG/B,MAAMG,QAAQH,WAAW,KAAK,IAAI;IAClC,MAAMI,UAAUJ,WAAW,OAAO;IAElC,MAAMK,MAAMC,KAAKJ,SAAS,CAACK,GAAGC;QAC5B,MAAMC,SAASF,CAAC,CAACH,WAAWH,GAAG;QAC/B,MAAMS,SAASF,CAAC,CAACJ,WAAWH,GAAG;QAE/B,IAAIE,AAAU,UAAVA,OAAiB;YACnB,IAAIM,SAASC,QACX,OAAO;YAET,IAAID,SAASC,QACX,OAAO;YAET,OAAO;QACT;QACA,IAAID,SAASC,QACX,OAAO;QAET,IAAID,SAASC,QACX,OAAO;QAET,OAAO;IACT;IAEA,OAAOC,OAAON,IAAI,GAAG,CAAC,CAACO,OAAgBA,IAAI,CAACX,GAAG;AACjD"}