{"version":3,"file":"pipeline/advanced/chart/pipes/analysis/sortXBand.js","sources":["../../../../../../../src/pipeline/advanced/chart/pipes/analysis/sortXBand.ts"],"sourcesContent":["import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortXBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const xField = unfoldInfo.encodingX\n  if (!sortAxis || !xField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, xField, dataset.flat(2))\n\n  result.analysis.orderMapping[xField] = axisOrderResult\n\n  return result\n}\n"],"names":["sortXBandAxis","advancedVSeed","context","result","vseed","sortAxis","datasetReshapeInfo","dataset","unfoldInfo","xField","axisOrderResult","calcOrder"],"mappings":";AAGO,MAAMA,gBAA8B,CAACC,eAAeC;IACzD,MAAMC,SAAS;QAAE,GAAGF,aAAa;IAAC;IAClC,MAAM,EAAEG,KAAK,EAAE,GAAGF;IAClB,MAAM,EAAE,MAAMG,QAAQ,EAAE,GAAGD;IAC3B,MAAM,EAAEE,kBAAkB,EAAEC,OAAO,EAAE,GAAGN;IACxC,MAAM,EAAEO,UAAU,EAAE,GAAGF,kBAAkB,CAAC,EAAE;IAC5C,MAAMG,SAASD,WAAW,SAAS;IACnC,IAAI,CAACH,YAAY,CAACI,QAChB,OAAOR;IAET,IAAI,CAACE,OAAO,QAAQ,EAAEA,OAAO,QAAQ,GAAG,CAAC;IACzC,IAAI,CAACA,OAAO,QAAQ,CAAC,YAAY,EAAEA,OAAO,QAAQ,CAAC,YAAY,GAAG,CAAC;IAEnE,MAAMO,kBAAkBC,UAAUN,UAAUI,QAAQF,QAAQ,IAAI,CAAC;IAEjEJ,OAAO,QAAQ,CAAC,YAAY,CAACM,OAAO,GAAGC;IAEvC,OAAOP;AACT"}