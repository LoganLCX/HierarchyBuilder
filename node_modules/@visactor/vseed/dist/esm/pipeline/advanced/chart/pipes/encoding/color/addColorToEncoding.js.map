{"version":3,"file":"pipeline/advanced/chart/pipes/encoding/color/addColorToEncoding.js","sources":["../../../../../../../../src/pipeline/advanced/chart/pipes/encoding/color/addColorToEncoding.ts"],"sourcesContent":["import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { Dimensions, Encoding } from 'src/types'\n\n/**\n * @description 为 encoding 添加 color 编码, 多指标场景, 会将 MeasureId 也添加到 color 编码中.\n * @param dimensions\n * @param encoding\n * @param isMultiMeasure\n */\nexport const addColorToEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n  const measureId = dimensions.find((item) => item.id === MeasureId)\n  if (isMultiMeasure && measureId && !measureId.encoding) {\n    encoding.color.push(MeasureId)\n  }\n  if (encoding.color.length === 0) {\n    encoding.color = [MeasureId]\n  }\n}\n"],"names":["addColorToEncoding","dimensions","encoding","isMultiMeasure","unique","item","measureId","MeasureId"],"mappings":";;AAUO,MAAMA,qBAAqB,CAACC,YAAwBC,UAAoBC;IAC7ED,SAAS,KAAK,GAAGE,OAAOH,WAAW,MAAM,CAAC,CAACI,OAASA,AAAkB,YAAlBA,KAAK,QAAQ,EAAc,GAAG,CAAC,CAACA,OAASA,KAAK,EAAE;IACpG,MAAMC,YAAYL,WAAW,IAAI,CAAC,CAACI,OAASA,KAAK,EAAE,KAAKE;IACxD,IAAIJ,kBAAkBG,aAAa,CAACA,UAAU,QAAQ,EACpDJ,SAAS,KAAK,CAAC,IAAI,CAACK;IAEtB,IAAIL,AAA0B,MAA1BA,SAAS,KAAK,CAAC,MAAM,EACvBA,SAAS,KAAK,GAAG;QAACK;KAAU;AAEhC"}