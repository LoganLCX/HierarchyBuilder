{"version":3,"file":"i18n/i18n.js","sources":["../../../src/i18n/i18n.ts"],"sourcesContent":["import { isNullish } from 'remeda'\nimport { translateMap } from './i18nData'\nimport type { Locale, TranslateRecordType } from '../types'\n\nclass Intl {\n  private static instance: Intl\n\n  private translateMap: TranslateRecordType = translateMap\n  private locale: Locale = 'zh-CN'\n\n  canTranslate = (value: string) => !!this.translateMap[value]\n\n  /**\n   * @example i18n`指标名称`\n   */\n  i18n = (segments: TemplateStringsArray, ...values: Array<number | string>) => {\n    const text = segments.map((segment, index) => segment + (values[index] || '')).join('')\n    const translatedText = this.translateMap?.[text]?.[this.locale]\n    if (isNullish(translatedText)) {\n      console.warn(`i18n ${this.locale} no translate: ${text}`)\n      return text\n    }\n    return translatedText\n  }\n\n  setLocale = (locale: Locale): void => {\n    this.locale = locale\n  }\n\n  getLocale: () => Locale = () => this.locale\n\n  public static getInstance() {\n    if (!Intl.instance) {\n      Intl.instance = new Intl()\n    }\n\n    return Intl.instance\n  }\n}\n\nconst intl = Intl.getInstance()\n\nexport { intl }\n"],"names":["Intl","translateMap","value","segments","values","text","segment","index","translatedText","isNullish","console","locale","intl"],"mappings":";;AAIA,MAAMA;IACJ,OAAe,SAAc;IAErB,eAAoCC,aAAY;IAChD,SAAiB,QAAO;IAEhC,eAAe,CAACC,QAAkB,CAAC,CAAC,IAAI,CAAC,YAAY,CAACA,MAAM;IAK5D,OAAO,CAACC,UAAgC,GAAGC;QACzC,MAAMC,OAAOF,SAAS,GAAG,CAAC,CAACG,SAASC,QAAUD,UAAWF,CAAAA,MAAM,CAACG,MAAM,IAAI,EAAC,GAAI,IAAI,CAAC;QACpF,MAAMC,iBAAiB,IAAI,CAAC,YAAY,EAAE,CAACH,KAAK,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC;QAC/D,IAAII,UAAUD,iBAAiB;YAC7BE,QAAQ,IAAI,CAAC,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,eAAe,EAAEL,MAAM;YACxD,OAAOA;QACT;QACA,OAAOG;IACT,EAAC;IAED,YAAY,CAACG;QACX,IAAI,CAAC,MAAM,GAAGA;IAChB,EAAC;IAED,YAA0B,IAAM,IAAI,CAAC,MAAM;IAE3C,OAAc,cAAc;QAC1B,IAAI,CAACX,KAAK,QAAQ,EAChBA,KAAK,QAAQ,GAAG,IAAIA;QAGtB,OAAOA,KAAK,QAAQ;IACtB;AACF;AAEA,MAAMY,OAAOZ,KAAK,WAAW"}