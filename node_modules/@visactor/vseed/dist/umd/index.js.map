{"version":3,"file":"index.js","sources":["webpack/runtime/define_property_getters","webpack/runtime/has_own_property","webpack/runtime/make_namespace_object","../../src/pipeline/utils/pipeline.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-JK3VNB42.js","../../src/i18n/i18nData.ts","../../src/i18n/i18n.ts","../../src/builder/builder/buildAdvanced.ts","../../src/builder/builder/buildSpec.ts","../../src/builder/builder/build.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-ANXBDSUI.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-3GOCSNFN.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-LFJW7BOT.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-QJLMYOTX.js","../../src/pipeline/utils/tree/traverse.ts","../../src/pipeline/utils/measures/depth.ts","../../src/pipeline/advanced/chart/pipes/measures/utils.ts","../../src/pipeline/utils/constant.ts","../../src/pipeline/utils/chatType.ts","../../src/builder/builder/advanced/colorItems.ts","../../src/builder/builder/builder.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-VCYTMP4D.js","../../src/pipeline/utils/valid/checkVSeed.ts","../../src/pipeline/advanced/table/pipes/init/initAdvancedVSeed.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-D6FCK2GA.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-WIMGWYZL.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-BCBB46UE.js","../../src/pipeline/utils/measures/typeGuard.ts","../../src/pipeline/advanced/table/pipes/default/defaultMeasures.ts","../../src/pipeline/utils/dimensions/typeGuard.ts","../../src/pipeline/utils/measures/find.ts","../../src/pipeline/advanced/table/pipes/default/defaultDimensions.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-2T7K3PFL.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-BZNENX2T.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-3ZJAREUD.js","../../src/pipeline/utils/replaceNullToUndefined.ts","../../src/pipeline/advanced/table/pipes/cellStyle/cellStyle.ts","../../src/pipeline/advanced/table/pipes/records/records.ts","../../src/pipeline/advanced/table/pipes/config/tableConfig.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-PDQFB3TV.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-SFZGYJFI.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-6GTAPB47.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-NMC53JVB.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-5S4PYKVY.js","../../src/pipeline/advanced/chart/pipes/theme/theme.ts","../../src/pipeline/advanced/table/pipeline/table.ts","../../src/pipeline/spec/table/pipes/init/table.ts","../../src/pipeline/spec/table/pipes/columns/dimensionsToColumns.ts","../../src/pipeline/utils/format/createNumFormatter.ts","../../src/pipeline/utils/format/createFormatter.ts","../../src/pipeline/utils/format/createFormatterByMeasure.ts","../../src/pipeline/spec/table/pipes/columns/measuresToColumns.ts","../../src/pipeline/spec/table/pipes/theme/bodyStyle.ts","../../src/pipeline/spec/table/pipes/theme/headerStyle.ts","../../src/pipeline/spec/table/pipes/theme/frameStyle.ts","../../src/pipeline/spec/table/pipes/theme/selectionStyle.ts","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/isType.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/isArray.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/isValid.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/array.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-AIG3BDKO.js","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-KI5X74E2.js","../../src/dataSelector/selector.ts","../../src/pipeline/spec/table/pipes/cellStyle/common.ts","../../src/pipeline/spec/table/pipes/cellStyle/table.ts","../../src/pipeline/spec/table/pipeline/table.ts","../../src/builder/register/chartType/table.ts","../../src/dataReshape/constant.ts","../../src/pipeline/advanced/table/pipes/default/defaultMeasureId.ts","../../src/pipeline/advanced/table/pipes/encoding/pivotTable.ts","../../src/dataReshape/foldMeasures.ts","../../src/pipeline/advanced/table/pipes/reshape/reshapePivotTable.ts","../../src/pipeline/advanced/table/pipes/config/pivotTableConfig.ts","../../src/pipeline/advanced/table/pipeline/pivotTable.ts","../../src/pipeline/spec/table/pipes/init/pivotTable.ts","../../src/pipeline/spec/table/pipes/columns/pivotColumns.ts","../../src/pipeline/spec/table/pipes/rows/pivotRows.ts","../../src/pipeline/spec/table/pipes/corner/titleOnDimension.ts","../../src/pipeline/spec/table/pipes/indicators/pivotIndicators.ts","../../src/pipeline/spec/table/pipes/theme/rowHeaderStyle.ts","../../src/pipeline/spec/table/pipes/theme/cornerHeaderStyle.ts","../../src/pipeline/spec/table/pipes/cellStyle/pivot.ts","../../src/pipeline/spec/table/pipes/indicators/pivotDataConfig.ts","../../src/pipeline/spec/table/pipeline/pivotTable.ts","../../src/builder/register/chartType/pivotTable.ts","../../src/pipeline/advanced/chart/pipes/init/initAdvancedVSeed.ts","../../src/pipeline/advanced/chart/pipes/default/defaultMeasures.ts","../../src/pipeline/advanced/chart/pipes/default/defaultDimensions.ts","../../src/pipeline/advanced/chart/pipes/default/defaultMeasureId.ts","../../src/pipeline/advanced/chart/pipes/encoding/adapter/encodingAdapter.ts","../../src/pipeline/advanced/chart/pipes/encoding/color/addColorToEncoding.ts","../../src/pipeline/advanced/chart/pipes/encoding/line.ts","../../src/pipeline/advanced/chart/pipes/measures/buildMeasures.ts","../../src/pipeline/utils/measures/delete.ts","../../src/pipeline/advanced/chart/pipes/measures/pickMeasuresForReshape.ts","../../src/pipeline/utils/dimensions/delete.ts","../../src/pipeline/advanced/chart/pipes/dimensions/pickDimensionsForReshape.ts","../../src/pipeline/advanced/chart/pipes/pivot/pivotAdapter.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-7ZI6JRPB.js","../../src/dataReshape/unfoldDimensions.ts","../../src/dataReshape/dataReshapeByEncoding.ts","../../src/pipeline/spec/chart/pipes/color/colorAdapter.ts","../../src/pipeline/advanced/chart/pipes/reshape/reshapeWithEncoding.ts","../../src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithEncoding.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-NFFV4IQT.js","../../src/pipeline/advanced/chart/pipes/analysis/common.ts","../../src/pipeline/advanced/chart/pipes/analysis/sortXBand.ts","../../src/pipeline/advanced/chart/pipes/analysis/sortLegend.ts","../../src/pipeline/advanced/chart/pipes/config/line.ts","../../src/pipeline/advanced/chart/pipes/markStyle/markStyle.ts","../../src/pipeline/advanced/chart/pipes/annotation/annotation.ts","../../src/pipeline/advanced/chart/pipeline/line.ts","../../src/pipeline/spec/chart/pipes/init/line.ts","../../src/pipeline/spec/chart/pipes/color/color.ts","../../src/pipeline/spec/chart/pipes/color/linearColor.ts","../../src/pipeline/spec/chart/pipes/backgroundColor/background.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetXY.ts","../../src/pipeline/spec/chart/pipes/dataset/progressive.ts","../../src/pipeline/spec/chart/pipes/axes/title/defaultTitleText.ts","../../src/pipeline/spec/chart/pipes/axes/xBand.ts","../../src/pipeline/spec/chart/pipes/axes/format/linearFormat.ts","../../src/pipeline/spec/chart/pipes/axes/yLinear.ts","../../src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairLine.ts","../../src/pipeline/spec/chart/pipes/legend/discreteLegend.ts","../../src/pipeline/spec/chart/pipes/legend/colorLegend.ts","../../src/pipeline/spec/chart/pipes/color/colorPointStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/pointStyle.ts","../../src/pipeline/spec/chart/pipes/markStyle/pointState.ts","../../src/pipeline/spec/chart/pipes/color/colorLineStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/curve/curve.ts","../../src/pipeline/spec/chart/pipes/markStyle/lineStyle.ts","../../src/pipeline/spec/chart/pipes/label/label.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipStyle.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltip.ts","../../src/pipeline/spec/chart/pipes/annotation/utils.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationPointCommon.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationPoint.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-BO3LQZNF.js","../../src/pipeline/spec/chart/pipes/annotation/annotationVerticalLine.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationHorizontalLine.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationArea.ts","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/isNumber.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/isNil.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/clamp.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/color/hslToRgb.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/color/rgbToHsl.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/color/Color.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/clamper.js","../../src/pipeline/spec/chart/pipes/annotation/splitLine.ts","../../src/pipeline/spec/chart/pipes/init/pivot.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotGridStyle.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotIndicators.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetPivot.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotAxisStyle.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotRowDimensions.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotColumnDimensions.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotTitle.ts","../../src/pipeline/spec/chart/pipes/legend/pivotDiscreteLegend.ts","../../src/pipeline/spec/chart/pipes/legend/pivotColorLegend.ts","../../src/pipeline/spec/chart/pipes/pivotChart/dimensionLinkage.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotAdapter.ts","../../src/pipeline/spec/chart/pipeline/line.ts","../../src/builder/register/chartType/line.ts","../../src/pipeline/advanced/chart/pipes/encoding/column.ts","../../src/pipeline/advanced/chart/pipes/config/column.ts","../../src/pipeline/advanced/chart/pipes/regressionLine/regressionLine.ts","../../src/pipeline/advanced/chart/pipeline/column.ts","../../src/pipeline/spec/chart/pipes/init/column.ts","../../src/pipeline/spec/chart/pipes/stack/stackCornerRadius.ts","../../src/pipeline/spec/chart/pipes/barWidth/barMaxWidth.ts","../../src/pipeline/spec/chart/pipes/stack/stack.ts","../../src/pipeline/spec/chart/pipes/crosshair/verticalCrosshairRect.ts","../../src/pipeline/spec/chart/pipes/color/colorBarStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/barStyle.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationAreaBand.ts","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/regression-utils.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/regression-linear.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/regression-polynomial.js","../../src/pipeline/spec/chart/pipes/regressionLine/common.ts","../../src/pipeline/spec/chart/pipes/regressionLine/columnRegressionLine.ts","../../src/pipeline/spec/chart/pipeline/column.ts","../../src/builder/register/chartType/column.ts","../../src/pipeline/advanced/chart/pipes/config/pie.ts","../../src/pipeline/advanced/chart/pipes/config/index.ts","../../src/pipeline/advanced/chart/pipeline/columnParallel.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-HGKLN5KY.js","../../src/pipeline/spec/chart/pipes/init/columnParallel.ts","../../src/pipeline/spec/chart/pipes/barWidth/barGapInGroup.ts","../../src/pipeline/spec/chart/pipeline/columnParallel.ts","../../src/builder/register/chartType/columnParallel.ts","../../src/pipeline/advanced/chart/pipeline/columnPercent.ts","../../src/pipeline/spec/chart/pipes/percent/percent.ts","../../src/pipeline/spec/chart/pipeline/columnPercent.ts","../../src/builder/register/chartType/columnPercent.ts","../../src/pipeline/advanced/chart/pipes/encoding/bar.ts","../../src/pipeline/advanced/chart/pipes/analysis/sortYBand.ts","../../src/pipeline/advanced/chart/pipeline/bar.ts","../../src/pipeline/spec/chart/pipes/init/bar.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetYX.ts","../../src/pipeline/spec/chart/pipes/axes/xLinear.ts","../../src/pipeline/spec/chart/pipes/axes/yBand.ts","../../src/pipeline/spec/chart/pipes/crosshair/horizontalCrosshairRect.ts","../../src/pipeline/spec/chart/pipeline/bar.ts","../../src/builder/register/chartType/bar.ts","../../src/pipeline/advanced/chart/pipeline/barParallel.ts","../../src/pipeline/spec/chart/pipes/init/barParallel.ts","../../src/pipeline/spec/chart/pipeline/barParallel.ts","../../src/builder/register/chartType/barParallel.ts","../../src/pipeline/advanced/chart/pipeline/barPercent.ts","../../src/pipeline/spec/chart/pipeline/barPercent.ts","../../src/builder/register/chartType/barPercent.ts","../../src/pipeline/advanced/chart/pipeline/area.ts","../../src/pipeline/spec/chart/pipes/init/area.ts","../../src/pipeline/spec/chart/pipes/color/colorAreaStyleFill.ts","../../../../node_modules/.pnpm/remeda@2.28.0/node_modules/remeda/dist/chunk-HVPVHFDT.js","../../src/pipeline/spec/chart/pipes/markStyle/areaStyle.ts","../../src/pipeline/spec/chart/pipeline/area.ts","../../src/builder/register/chartType/area.ts","../../src/pipeline/advanced/chart/pipeline/areaPercent.ts","../../src/pipeline/spec/chart/pipeline/areaPercent.ts","../../src/builder/register/chartType/areaPercent.ts","../../src/pipeline/advanced/chart/pipes/encoding/scatter.ts","../../src/pipeline/advanced/chart/pipes/measures/buildMeasuresForScatter.ts","../../src/pipeline/advanced/chart/pipes/config/scatter.ts","../../src/pipeline/advanced/chart/pipes/reshape/reshapeWithScatterEncoding.ts","../../src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithScatterEncoding.ts","../../src/pipeline/advanced/chart/pipeline/scatter.ts","../../src/pipeline/spec/chart/pipes/init/scatter.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetScatter.ts","../../src/pipeline/spec/chart/pipes/size/scatterSize.ts","../../src/pipeline/spec/chart/pipes/label/labelScatter.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipScatter.ts","../../src/pipeline/spec/chart/pipes/crosshair/horizontalCrosshairLine.ts","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/regression-lowess.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/regression-logistic.js","../../src/pipeline/spec/chart/pipes/regressionLine/linearRegressionLine.ts","../../src/pipeline/spec/chart/pipeline/scatter.ts","../../src/builder/register/chartType/scatter.ts","../../src/pipeline/advanced/chart/pipes/encoding/dualAxis.ts","../../src/pipeline/advanced/chart/pipes/measures/buildMeasuresForDualAxis.ts","../../src/pipeline/advanced/chart/pipes/reshape/reshapeWithDualEncoding.ts","../../src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithDualEncoding.ts","../../src/pipeline/advanced/chart/pipes/config/dualAxis.ts","../../src/pipeline/advanced/chart/pipeline/dualAxis.ts","../../src/pipeline/spec/chart/pipes/series/series.ts","../../src/pipeline/spec/chart/pipes/init/dualAxis.ts","../../src/pipeline/spec/chart/pipes/dual/dualChartType.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetDualAxis.ts","../../src/pipeline/spec/chart/pipes/label/labelDualAxis.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipDualAxis.ts","../../src/pipeline/spec/chart/pipes/pipeFilter/barStyleFilter.ts","../../src/pipeline/spec/chart/pipes/pipeFilter/pointStyleFilter.ts","../../src/pipeline/spec/chart/pipes/pipeFilter/lineStyleFilter.ts","../../src/pipeline/spec/chart/pipes/pipeFilter/areaStyleFilter.ts","../../src/pipeline/spec/chart/pipes/axes/yLinearPrimary.ts","../../src/pipeline/spec/chart/pipes/axes/yLinearSecondary.ts","../../src/pipeline/spec/chart/pipes/color/linearColorForDualAxis.ts","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/isObjectLike.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/isPlainObject.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/isString.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/pickWithout.js","../../src/pipeline/spec/chart/pipes/annotation/annotationPointOfDualAxis.ts","../../src/pipeline/spec/chart/pipeline/dualAxis.ts","../../src/builder/register/chartType/dualAxis.ts","../../src/pipeline/advanced/chart/pipes/encoding/pie.ts","../../src/pipeline/advanced/chart/pipeline/pie.ts","../../src/pipeline/spec/chart/pipes/init/pie.ts","../../src/pipeline/spec/chart/pipes/color/colorPieStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/pieStyle.ts","../../src/pipeline/spec/chart/pipes/label/labelPie.ts","../../src/pipeline/spec/chart/pipes/pivotChart/pivotHideIndicatorName.ts","../../src/pipeline/spec/chart/pipes/region/addRegionPadding.ts","../../src/pipeline/spec/chart/pipeline/pie.ts","../../src/builder/register/chartType/pie.ts","../../src/pipeline/advanced/chart/pipeline/donut.ts","../../src/pipeline/spec/chart/pipes/init/donut.ts","../../src/pipeline/spec/chart/pipeline/donut.ts","../../src/builder/register/chartType/donut.ts","../../src/pipeline/advanced/chart/pipes/encoding/rose.ts","../../src/pipeline/advanced/chart/pipeline/rose.ts","../../src/pipeline/spec/chart/pipes/init/rose.ts","../../src/pipeline/spec/chart/pipes/axes/radius.ts","../../src/pipeline/spec/chart/pipes/color/colorRoseStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/roseStyle.ts","../../src/pipeline/spec/chart/pipeline/rose.ts","../../src/builder/register/chartType/rose.ts","../../src/pipeline/advanced/chart/pipeline/roseParallel.ts","../../src/pipeline/spec/chart/pipes/init/roseParallel.ts","../../src/pipeline/spec/chart/pipeline/roseParallel.ts","../../src/builder/register/chartType/roseParallel.ts","../../src/pipeline/advanced/chart/pipes/encoding/radar.ts","../../src/pipeline/advanced/chart/pipeline/radar.ts","../../src/pipeline/spec/chart/pipes/init/radar.ts","../../src/pipeline/spec/chart/pipes/axes/radarAngle.ts","../../src/pipeline/spec/chart/pipes/axes/radarRadius.ts","../../src/pipeline/spec/chart/pipeline/radar.ts","../../src/builder/register/chartType/radar.ts","../../src/pipeline/advanced/chart/pipes/encoding/funnel.ts","../../src/pipeline/advanced/chart/pipeline/funnel.ts","../../src/pipeline/spec/chart/pipes/init/funnel.ts","../../src/pipeline/spec/chart/pipes/color/colorFunnelStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/funnelStyle.ts","../../src/pipeline/spec/chart/pipes/markStyle/funnelTransformStyle.ts","../../src/pipeline/spec/chart/pipeline/funnel.ts","../../src/builder/register/chartType/funnel.ts","../../src/pipeline/advanced/chart/pipes/encoding/heatmap.ts","../../src/pipeline/advanced/chart/pipeline/heatmap.ts","../../src/pipeline/spec/chart/pipes/legend/heatmapColorLegend.ts","../../src/pipeline/spec/chart/pipes/color/colorCellStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/cellStyle.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipHeatmap.ts","../../src/pipeline/spec/chart/pipes/init/heatmap.ts","../../src/pipeline/spec/chart/pipeline/heatmap.ts","../../src/builder/register/chartType/heatmap.ts","../../src/pipeline/advanced/chart/pipes/config/boxplot.ts","../../src/pipeline/advanced/chart/pipes/encoding/boxplot.ts","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/toNumber.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/quantileSorted.js","../../../../node_modules/.pnpm/@visactor+vdataset@1.0.19/node_modules/@visactor/vdataset/es/transform/boxplot.js","../../src/pipeline/advanced/chart/pipes/reshape/reshapeWithBoxplotEncoding.ts","../../src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithBoxplotEncoding.ts","../../src/pipeline/advanced/chart/pipeline/boxplot.ts","../../src/pipeline/spec/chart/pipes/init/boxplot.ts","../../src/pipeline/spec/chart/pipes/boxWidth/boxMaxWidth.ts","../../src/pipeline/spec/chart/pipes/boxWidth/boxGapInGroup.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetBoxplot.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipBoxplot.ts","../../src/pipeline/spec/chart/pipes/color/colorBoxPlotStyleFill.ts","../../src/pipeline/spec/chart/pipes/markStyle/boxPlotStyle.ts","../../src/pipeline/spec/chart/pipes/markStyle/outlierStyle.ts","../../src/pipeline/spec/chart/pipeline/boxplot.ts","../../src/builder/register/chartType/boxplot.ts","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/isArrayLike.js","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/merge.js","../../src/pipeline/advanced/chart/pipes/config/histogram.ts","../../src/pipeline/advanced/chart/pipes/encoding/histogram.ts","../../../../node_modules/.pnpm/@visactor+vdataset@1.0.19/node_modules/@visactor/vdataset/es/transform/bin.js","../../src/pipeline/advanced/chart/pipes/reshape/reshapeWithHistogramEncoding.ts","../../src/pipeline/advanced/chart/pipes/reshape/pivotReshapeWithHistogramEncoding.ts","../../src/pipeline/advanced/chart/pipeline/histogram.ts","../../src/pipeline/spec/chart/pipes/init/histogram.ts","../../src/pipeline/spec/chart/pipes/dataset/datasetHistogram.ts","../../src/pipeline/spec/chart/utils/histogram.ts","../../src/pipeline/spec/chart/pipes/tooltip/tooltipHistogram.ts","../../src/pipeline/spec/chart/pipes/crosshair/histogramCrosshair.ts","../../src/pipeline/spec/chart/pipes/annotation/annotationPointOfHistogram.ts","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/kde.js","../../src/pipeline/spec/chart/pipes/regressionLine/kdeRegressionLine.ts","../../../../node_modules/.pnpm/@visactor+vutils@1.0.19/node_modules/@visactor/vutils/es/common/ecdf.js","../../src/pipeline/spec/chart/pipes/regressionLine/ecdfRegressionLine.ts","../../src/pipeline/spec/chart/pipeline/histogram.ts","../../src/builder/register/chartType/histogram.ts","../../src/theme/common/crosshair.ts","../../src/theme/common/color.ts","../../src/theme/common/label.ts","../../src/theme/common/legend.ts","../../src/theme/common/table.ts","../../src/theme/common/tooltip.ts","../../src/theme/common/axes.ts","../../src/theme/common/annotaion.ts","../../src/theme/common/funnelTransform.ts","../../src/theme/common/heatmapCell.ts","../../src/theme/common/regressionLine.ts","../../src/theme/common/boxPlot.ts","../../src/theme/light/light.ts","../../src/theme/dark/dark.ts","../../src/builder/register/theme/custom.ts","../../src/builder/register/theme/light.ts","../../src/builder/register/theme/dark.ts","../../src/builder/register/all.ts","../../src/builder/register/custom.ts","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/core.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/regexes.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/util.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/checks.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/doc.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/errors.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/parse.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/versions.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/schemas.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/registries.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/core/api.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/classic/iso.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/classic/errors.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/classic/parse.js","../../../../node_modules/.pnpm/zod@4.0.14/node_modules/zod/v4/classic/schemas.js","../../src/types/properties/chartType/chartType.ts","../../src/types/properties/chartType/dualChartType.ts","../../src/types/properties/dataset/dataset.ts","../../src/types/properties/dimensions/zDimensions.ts","../../src/types/properties/format/numFormat.ts","../../src/types/properties/measures/zMeasures.ts","../../src/types/properties/measures/zDualMeasures.ts","../../src/types/properties/measures/zScatterMeasures.ts","../../src/types/properties/datasetReshapeInfo/zDatasetReshapeInfo.ts","../../src/types/properties/encoding/zEncoding.ts","../../src/types/properties/encoding/zDimensionEncoding.ts","../../src/types/properties/encoding/zMeasureEncoding.ts","../../src/types/properties/config/backgroundColor/backgroundColor.ts","../../src/types/properties/config/table.ts","../../src/types/properties/config/axes/zBandAxis.ts","../../src/types/properties/config/axes/zLinearAxis.ts","../../src/types/properties/config/crosshair/zCrosshair.ts","../../src/types/properties/config/color/color.ts","../../src/types/dataSelector/selector.ts","../../src/types/properties/config/label/zLabel.ts","../../src/types/properties/config/legend/legend.ts","../../src/types/properties/config/tooltip/tooltip.ts","../../src/types/properties/annotation/zAnnotationPoint.ts","../../src/types/properties/annotation/zAnnotationHorizontalLine.ts","../../src/types/properties/annotation/zAnnotationArea.ts","../../src/types/properties/config/annotation/zAnnotaion.ts","../../src/types/properties/config/pivotGrid/pivotGrid.ts","../../src/types/properties/config/dimensionLinkage/dimensionLinkage.ts","../../src/types/properties/config/line.ts","../../src/types/properties/config/stackCornerRadius/stackCornerRadius.ts","../../src/types/properties/config/barWidth/index.ts","../../src/types/properties/regressionLine/zRegressionLine.ts","../../src/types/properties/config/column.ts","../../src/types/properties/config/bar.ts","../../src/types/properties/config/area.ts","../../src/types/properties/config/scatter.ts","../../src/types/properties/config/dualAxis.ts","../../src/types/properties/config/label/zPieLabel.ts","../../src/types/properties/config/pie.ts","../../src/types/properties/config/rose.ts","../../src/types/properties/config/funnelTransform/zFunnelTransform.ts","../../src/types/properties/config/funnel.ts","../../src/types/properties/config/heatmap/zHeatmap.ts","../../src/types/properties/config/heatmap.ts","../../src/types/properties/config/pivotTable.ts","../../src/types/properties/config/whiskers/index.ts","../../src/types/properties/markStyle/boxPlotStyle.ts","../../src/types/properties/markStyle/outlierStyle.ts","../../src/types/properties/config/boxWidth/zBoxWidth.ts","../../src/types/properties/config/boxplot.ts","../../src/types/properties/config/histogram.ts","../../src/types/properties/config/config.ts","../../src/types/properties/theme/customTheme.ts","../../src/types/properties/theme/theme.ts","../../src/types/properties/markStyle/barStyle.ts","../../src/types/properties/markStyle/pointStyle.ts","../../src/types/properties/markStyle/lineStyle.ts","../../src/types/properties/markStyle/zAreaStyle.ts","../../src/types/properties/markStyle/markStyle.ts","../../src/types/properties/annotation/zAnnotationVerticalLine.ts","../../src/types/properties/annotation/annotation.ts","../../src/types/properties/analysis/sort.ts","../../src/types/properties/analysis/sortLegend.ts","../../src/types/properties/analysis/analysis.ts","../../src/types/properties/cellStyle/bodyCellStyle.ts","../../src/types/i18n/i18n.ts","../../src/types/chartType/table/zTable.ts","../../src/types/chartType/pivotTable/zPivotTable.ts","../../src/types/chartType/line/zLine.ts","../../src/types/chartType/column/zColumn.ts","../../src/types/chartType/columnParallel/zColumnParallel.ts","../../src/types/chartType/columnPercent/zColumnPercent.ts","../../src/types/chartType/bar/zBar.ts","../../src/types/chartType/barParallel/zBarParallel.ts","../../src/types/chartType/barPercent/zBarPercent.ts","../../src/types/chartType/area/zArea.ts","../../src/types/chartType/areaPercent/zAreaPercent.ts","../../src/types/chartType/scatter/zScatter.ts","../../src/types/chartType/dualAxis/zDualAxis.ts","../../src/types/chartType/histogram/zHistogram.ts","../../src/types/chartType/rose/zRose.ts","../../src/types/chartType/roseParallel/zRoseParallel.ts","../../src/types/chartType/pie/zPie.ts","../../src/types/chartType/donut/zDonut.ts","../../src/types/chartType/radar/zRadar.ts","../../src/types/chartType/funnel/zFunnel.ts","../../src/types/chartType/heatmap/zHeatmap.ts","../../src/types/chartType/boxPlot/zBoxPlot.ts","../../src/types/zVseed.ts","../../src/types/properties/cellStyle/cellStyle.ts","../../src/types/advancedVSeed.ts"],"sourcesContent":["__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n            Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n        }\n    }\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import type { ExecPipelineType, Pipe } from 'src/types'\n\n/**\n * 执行pipeline, 每个pipe负责构建结果的一部分, 构建完成后得到完整的目标结果\n * @param pipeline pipeline数组, 每个pipe负责构建结果的一部分\n * @param initialValue 初始值\n * @param context 上下文\n * @returns 执行后的结果\n */\nexport const execPipeline: ExecPipelineType = <T, U>(\n  pipeline: Array<Pipe<T, U>>,\n  context: U,\n  initialValue: Partial<T> = {},\n): T => {\n  const result = pipeline.reduce((prev, cur) => {\n    return cur(prev, context)\n  }, initialValue)\n  return result as T\n}\n","function n(e){return e==null}export{n as a};\n","import type { TranslateRecordType } from '../types'\n\nexport const translateMap: TranslateRecordType = {\n  指标名称: {\n    'en-US': 'MeasureName',\n    'zh-CN': '指标名称',\n  },\n  指标Id: {\n    'en-US': 'MeasureId',\n    'zh-CN': '指标Id',\n  },\n  指标值: {\n    'en-US': 'MeasureValue',\n    'zh-CN': '指标值',\n  },\n  异常点: {\n    'en-US': 'Outlier',\n    'zh-CN': '异常点',\n  },\n  上边界: {\n    'en-US': 'Upper Whisker',\n    'zh-CN': '上边界',\n  },\n  上四分位数: {\n    'en-US': 'Q3',\n    'zh-CN': '75分位数',\n  },\n  中位数: {\n    'en-US': 'Q2',\n    'zh-CN': '中位数',\n  },\n  下四分位数: {\n    'en-US': 'Q1',\n    'zh-CN': '25分位数',\n  },\n  下边界: {\n    'en-US': 'Lower Whisker',\n    'zh-CN': '下边界',\n  },\n}\n","import { isNullish } from 'remeda'\nimport { translateMap } from './i18nData'\nimport type { Locale, TranslateRecordType } from '../types'\n\nclass Intl {\n  private static instance: Intl\n\n  private translateMap: TranslateRecordType = translateMap\n  private locale: Locale = 'zh-CN'\n\n  canTranslate = (value: string) => !!this.translateMap[value]\n\n  /**\n   * @example i18n`指标名称`\n   */\n  i18n = (segments: TemplateStringsArray, ...values: Array<number | string>) => {\n    const text = segments.map((segment, index) => segment + (values[index] || '')).join('')\n    const translatedText = this.translateMap?.[text]?.[this.locale]\n    if (isNullish(translatedText)) {\n      console.warn(`i18n ${this.locale} no translate: ${text}`)\n      return text\n    }\n    return translatedText\n  }\n\n  setLocale = (locale: Locale): void => {\n    this.locale = locale\n  }\n\n  getLocale: () => Locale = () => this.locale\n\n  public static getInstance() {\n    if (!Intl.instance) {\n      Intl.instance = new Intl()\n    }\n\n    return Intl.instance\n  }\n}\n\nconst intl = Intl.getInstance()\n\nexport { intl }\n","import type { AdvancedPipelineContext, AdvancedVSeed } from 'src/types'\nimport { execPipeline } from '../../pipeline'\nimport { Builder } from './builder'\nimport { intl } from 'src/i18n'\n\nexport const buildAdvanced = (builder: Builder): AdvancedVSeed | null => {\n  const start = typeof performance !== 'undefined' ? performance.now() : Date.now()\n  const { chartType } = builder.vseed\n  if (!chartType) {\n    throw new Error('chartType is nil in buildAdvanced')\n  }\n\n  const pipeline = Builder.getAdvancedPipeline(chartType)\n  if (!pipeline) {\n    throw new Error(\n      `please invoke registerAll or register ${chartType} before build, no advanced pipeline for chartType ${chartType}`,\n    )\n  }\n\n  const context: AdvancedPipelineContext = {\n    vseed: builder.vseed,\n    customTheme: Builder.getThemeMap(),\n  }\n  if (builder.locale) {\n    intl.setLocale(builder.locale)\n  }\n\n  try {\n    const advancedVSeed = execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pipeline, context)\n    builder.advancedVSeed = advancedVSeed\n    return advancedVSeed\n  } catch (e) {\n    console.error(e)\n    throw new Error(`buildAdvanced error: ${(e as Error).message}.\\ndetails info in console`)\n  } finally {\n    const end = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    builder.performance['buildAdvanced'] = `${(end - start).toFixed(4)}ms`\n  }\n}\n","import type { Spec, VChartSpecPipeline } from 'src/types'\nimport { Builder } from './builder'\nimport type { AdvancedVSeed, SpecPipelineContext } from 'src/types'\nimport { execPipeline } from '../../pipeline'\nimport { intl } from 'src/i18n'\nimport type { ISpec } from '@visactor/vchart'\n\nexport const buildSpec = (builder: Builder, advancedVSeed: AdvancedVSeed): Spec => {\n  const start = typeof performance !== 'undefined' ? performance.now() : Date.now()\n\n  const { chartType } = builder.vseed\n\n  const pipeline = Builder.getSpecPipeline(chartType)\n  if (!pipeline) {\n    throw new Error(\n      `please invoke registerAll or register ${chartType} before build, no spec pipeline for chartType ${chartType}`,\n    )\n  }\n\n  const context: SpecPipelineContext = {\n    vseed: builder.vseed,\n    advancedVSeed,\n  }\n  if (builder.locale) {\n    intl.setLocale(builder.locale)\n  }\n\n  try {\n    const spec = execPipeline<ISpec, SpecPipelineContext>(pipeline as VChartSpecPipeline, context)\n    builder.spec = spec\n    return spec\n  } catch (e) {\n    console.error(e)\n    throw new Error(`buildSpec error: ${(e as Error).message}.\\ndetails info in console`)\n  } finally {\n    const end = typeof performance !== 'undefined' ? performance.now() : Date.now()\n    builder.performance['buildSpec'] = `${(end - start).toFixed(4)}ms`\n  }\n}\n","import type { Spec } from 'src/types'\nimport type { Builder } from './builder'\n\nexport const build = (builder: Builder): Spec => {\n  const advancedVSeed = builder.buildAdvanced()\n  if (!advancedVSeed) {\n    throw new Error('advancedVSeed is null')\n  }\n  const spec = builder.buildSpec(advancedVSeed)\n  return spec\n}\n","var e={done:!0,hasNext:!1},s={done:!1,hasNext:!1},a=()=>e,o=t=>({hasNext:!0,next:t,done:!1});export{s as a,a as b,o as c};\n","import{a as A}from\"./chunk-ANXBDSUI.js\";function C(t,...o){let n=t,u=o.map(e=>\"lazy\"in e?y(e):void 0),p=0;for(;p<o.length;){if(u[p]===void 0||!B(n)){let i=o[p];n=i(n),p+=1;continue}let r=[];for(let i=p;i<o.length;i++){let l=u[i];if(l===void 0||(r.push(l),l.isSingle))break}let a=[];for(let i of n)if(f(i,a,r))break;let{isSingle:s}=r.at(-1);n=s?a[0]:a,p+=r.length}return n}function f(t,o,n){if(n.length===0)return o.push(t),!1;let u=t,p=A,e=!1;for(let[r,a]of n.entries()){let{index:s,items:i}=a;if(i.push(u),p=a(u,s,i),a.index+=1,p.hasNext){if(p.hasMany??!1){for(let l of p.next)if(f(l,o,n.slice(r+1)))return!0;return e}u=p.next}if(!p.hasNext)break;p.done&&(e=!0)}return p.hasNext&&o.push(u),e}function y(t){let{lazy:o,lazyArgs:n}=t,u=o(...n);return Object.assign(u,{isSingle:o.single??!1,index:0,items:[]})}function B(t){return typeof t==\"string\"||typeof t==\"object\"&&t!==null&&Symbol.iterator in t}export{C as a};\n","import{a as o}from\"./chunk-3GOCSNFN.js\";function y(t,i){let a=i.length-t.length;if(a===1){let[n,...r]=i;return o(n,{lazy:t,lazyArgs:r})}if(a===0){let n={lazy:t,lazyArgs:i};return Object.assign(e=>o(e,n),n)}throw new Error(\"Wrong number of arguments\")}export{y as a};\n","import{a as r}from\"./chunk-LFJW7BOT.js\";import{a as n}from\"./chunk-ANXBDSUI.js\";function i(...e){return r(a,e)}function a(){let e=new Set;return t=>e.has(t)?n:(e.add(t),{done:!1,hasNext:!0,next:t})}export{i as a};\n","/**\n * 支持泛型与可配置子节点键名的非递归前序遍历\n * @param tree 根节点数组\n * @param callback 遍历时对每个节点执行的回调，返回 true 时停止遍历\n * @param childrenKey 子节点键名（默认 'children'）\n */\ntype WithChildren<Node, K extends string> = Node & { [P in K]?: Node[] }\n\nexport const preorderTraverse = <Node, K extends string = 'children'>(\n  tree: Node[],\n  callback: (node: Node) => boolean,\n  childrenKey: K = 'children' as K,\n) => {\n  if (!tree || tree.length === 0) return\n\n  const stack: Node[] = [...tree].reverse()\n\n  while (stack.length > 0) {\n    const node = stack.pop() as Node\n    const stop = callback(node)\n    if (stop === true) {\n      return\n    }\n\n    const children = (node as WithChildren<Node, K>)[childrenKey]\n    if (Array.isArray(children) && children.length > 0) {\n      for (let i = children.length - 1; i >= 0; i--) {\n        const child = children[i]\n        stack.push(child)\n      }\n    }\n  }\n}\n\nexport const findTreeNodesBy = <Node, K extends string = 'children'>(\n  nodes: Node[] = [],\n  callback: (node: Node) => boolean,\n  childrenKey: K = 'children' as K,\n): Node[] => {\n  if (!nodes) return []\n  const result: Node[] = []\n  preorderTraverse<Node, K>(nodes, (node) => {\n    if (!(childrenKey in (node as WithChildren<Node, K>))) {\n      if (callback(node)) {\n        result.push(node)\n      }\n    }\n    return false\n  })\n  return result\n}\n","import type { Measure, MeasureTree } from 'src/types'\nimport { preorderTraverse } from '../tree/traverse'\n\n/**\n * 获取measures的深度\n * @param measures\n * @param id\n * @returns\n */\nexport const measureDepth = (measures: MeasureTree = []): number => {\n  if (!measures) return 0\n  let depth = 1\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if ('children' in node) {\n      depth = Math.max(depth, 1 + measureDepth(node.children as MeasureTree))\n    }\n    return false\n  })\n  return depth\n}\n","import type { MeasureGroup, MeasureTree } from 'src/types'\n\n/**\n * @description 检查是否为指标树, 指标树深度大于1. 如果存在一个指标为组, 即有children配置, 则认为是指标树.\n * @param vseed vseed\n * @returns\n */\nexport const isMeasureTreeWithChildren = <T extends MeasureTree>(measures?: T) => {\n  if (!measures) {\n    return false\n  }\n\n  return measures.some((measure) => 'children' in measure)\n}\n\n/**\n * @description 检查是否为指标树, 指标树存在parentId. 如果存在一个指标有parentId, 则认为是指标树.\n * @param vseed vseed\n * @returns\n */\nexport const isMeasureTreeWithParentId = <T extends MeasureTree>(measures?: T) => {\n  if (!measures) {\n    return false\n  }\n\n  return measures.some((measure) => 'parentId' in measure)\n}\n\n/**\n * @description 保证指标树中的每一组都有children, 没有children的指标, 会被放到一个默认的指标组中.\n * @param measures 指标树\n * @returns\n */\nexport const normalizeMeasureTree = (measures: MeasureTree) => {\n  const createEmptyMeasureGroup = (): MeasureGroup => {\n    return {\n      id: 'group',\n      alias: '',\n      children: [],\n    }\n  }\n\n  let currentGroup: MeasureGroup = createEmptyMeasureGroup()\n  const measureGroups: MeasureGroup[] = []\n  for (const measure of measures) {\n    if ('children' in measure) {\n      // 当前指标组之前的所有独立指标成组\n      if (currentGroup.children?.length) {\n        currentGroup.id = [currentGroup.id, ...currentGroup.children.map((item) => item.id)].join('-')\n        currentGroup.alias = currentGroup.children.map((item) => item.alias).join('-')\n        measureGroups.push(currentGroup)\n        currentGroup = createEmptyMeasureGroup()\n      }\n      // 当前是指标组\n      measureGroups.push(measure)\n    } else {\n      currentGroup.children?.push(measure)\n    }\n  }\n\n  // 最后一组\n  if (currentGroup.children?.length) {\n    currentGroup.id = [currentGroup.id, ...currentGroup.children.map((item) => item.id)].join('-')\n    currentGroup.alias = currentGroup.children.map((item) => item.alias).join('-')\n    measureGroups.push(currentGroup)\n    currentGroup = createEmptyMeasureGroup()\n  }\n\n  return measureGroups\n}\n","// 标注层 z-index\nexport const ANNOTATION_Z_INDEX = 1000\n// 线性轴 顶部空隙 预留5px\nexport const LINEAR_AXIS_INNER_OFFSET_TOP = 12\n// 双轴图 柱图 ZIndex\nexport const DUAL_AXIS_CHART_COLUMN_Z_INDEX = 1000\n// 双轴图 非柱图 ZIndex\nexport const DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX = 1001\n// 双轴图 标注层 ZIndex\nexport const DUAL_AXIS_LABEL_Z_INDEX = 1002\n// 默认父级id\nexport const DEFAULT_PARENT_ID = '__DefaultParentId__'\n// 轴标签间距\nexport const AXIS_LABEL_SPACE = 8\n// 透视轴 band 类型内边距\nexport const BAND_AXIS_INNER_OFFSET_IN_PIVOT = 2\n\n// 图表类型枚举\nexport const ChartTypeEnum = {\n  Table: 'table',\n  PivotTable: 'pivotTable',\n  // cartesian\n  Line: 'line',\n  Column: 'column',\n  ColumnPercent: 'columnPercent',\n  ColumnParallel: 'columnParallel',\n  Bar: 'bar',\n  BarPercent: 'barPercent',\n  BarParallel: 'barParallel',\n  Area: 'area',\n  AreaPercent: 'areaPercent',\n  DualAxis: 'dualAxis',\n  Scatter: 'scatter',\n  // polar\n  Rose: 'rose',\n  RoseParallel: 'roseParallel',\n  Pie: 'pie',\n  Donut: 'donut',\n  Radar: 'radar',\n  // other\n  Funnel: 'funnel',\n  Heatmap: 'heatmap',\n  Boxplot: 'boxPlot',\n  Histogram: 'histogram',\n} as const\n\n// Heatmap hide cell\nexport const DATUM_HIDE_KEY = '__VSEED_HideItem__'\n","import { type Dimensions, type DimensionGroup, type DimensionTree, type VSeed, type Measure } from 'src/types'\nimport { measureDepth } from './measures'\nimport { isMeasureTreeWithChildren, isMeasureTreeWithParentId } from '../advanced/chart/pipes/measures/utils'\nimport { unique } from 'remeda'\nimport { ChartTypeEnum, DEFAULT_PARENT_ID } from './constant'\n\nexport const isTable = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.Table\n}\nexport const isPivotTable = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.PivotTable\n}\nexport const isRadar = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.Radar\n}\nexport const isAreaPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.AreaPercent\n}\nexport const isColumnPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.ColumnPercent\n}\nexport const isBarPercent = (vseed: VSeed) => {\n  return vseed.chartType === ChartTypeEnum.BarPercent\n}\n\nexport const isBarLikeChart = (vseed: VSeed) => {\n  return (\n    vseed.chartType === ChartTypeEnum.Bar ||\n    vseed.chartType === ChartTypeEnum.BarPercent ||\n    vseed.chartType === ChartTypeEnum.BarParallel\n  )\n}\n\nexport const isVTable = (vseed: VSeed) => {\n  return ['table', 'pivotTable'].includes(vseed.chartType)\n}\nexport const isVChart = (vseed: VSeed): boolean => {\n  return !isVTable(vseed)\n}\n\n/**\n * @description 透视图表或组合图\n * - 透视图表定义: 存在 column 或 row的 encoding\n * - 组合图表定义: 存在多组指标的情况\n * - 透视组合图表: 存在 column 或 row的 encoding 且 存在多组指标的情况\n * 上述三者都只能使用 VTable.PivotChart 绘制\n */\nexport const isPivotChart = (vseed: VSeed) => {\n  if (isVTable(vseed)) {\n    return false\n  }\n\n  if (isPivot(vseed)) {\n    return true\n  }\n\n  return isCombination(vseed)\n}\n\n/**\n * @description 存在column 或 row的encoding\n */\nexport const isPivot = (vseed: VSeed) => {\n  const { dimensions = [] } = vseed as {\n    dimensions: Dimensions\n  }\n\n  return dimensions && dimensions.some((dimension) => dimension.encoding === 'row' || dimension.encoding === 'column')\n}\n/**\n * @description 不存在column 或 row的encoding, 但是有多组指标的情况\n */\nexport const isCombination = (vseed: VSeed) => {\n  if (isMeasureTreeWithParentId(vseed.measures)) {\n    const parentIds = vseed.measures?.map((measure: Measure) => measure.parentId || DEFAULT_PARENT_ID)\n    return parentIds && unique(parentIds).length > 1\n  }\n\n  if (vseed.chartType === 'dualAxis' || vseed.chartType === 'scatter') {\n    if (vseed.chartType === 'scatter') {\n      if (isMeasureTreeWithChildren(vseed.measures)) {\n        const depth = measureDepth(vseed.measures)\n        return depth === 3\n      }\n\n      if (vseed.scatterMeasures && vseed.scatterMeasures.length > 1) {\n        return true\n      }\n      return false\n    }\n    if (vseed.chartType === 'dualAxis') {\n      if (isMeasureTreeWithChildren(vseed.measures)) {\n        const depth = measureDepth(vseed.measures)\n        return depth === 3\n      }\n\n      if (vseed.dualMeasures && vseed.dualMeasures.length > 1) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  const { measures = [] } = vseed as {\n    measures: DimensionTree\n    dimensions: Dimensions\n  }\n\n  const hasMeasureGroup = measures && measures.some((measure: DimensionGroup) => measure && measure.children)\n\n  return hasMeasureGroup\n}\n","import { unique } from 'remeda'\nimport type { Builder } from '../builder'\nimport { isPivotTable, isTable } from 'src/pipeline'\n\nexport const getColorItems = (builder: Builder): { id: string; alias: string }[] => {\n  const advancedVSeed = builder.advancedVSeed\n\n  if (!advancedVSeed || isTable(builder.vseed) || isPivotTable(builder.vseed)) {\n    return []\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const colorItems = unique(datasetReshapeInfo.flatMap((d) => d.unfoldInfo.colorItems))\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  return colorItems.map((d) => ({\n    id: d,\n    alias: colorIdMap[d]?.alias,\n  }))\n}\n\nexport const getColorIdMap = (builder: Builder): Record<string, { id: string; alias: string }> => {\n  const advancedVSeed = builder.advancedVSeed\n\n  if (!advancedVSeed || isTable(builder.vseed) || isPivotTable(builder.vseed)) {\n    return {}\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  return colorIdMap\n}\n","import type {\n  AdvancedPipe,\n  AdvancedPipeline,\n  AdvancedVSeed,\n  ChartType,\n  CustomThemeConfig,\n  Locale,\n  Spec,\n  SpecPipe,\n  SpecPipeline,\n  VSeed,\n  VSeedBuilder,\n} from 'src/types'\nimport { buildAdvanced } from './buildAdvanced'\nimport { buildSpec } from './buildSpec'\nimport { build } from './build'\nimport { intl } from 'src/i18n'\nimport { getColorIdMap, getColorItems } from './advanced'\n\nexport class Builder implements VSeedBuilder {\n  private _vseed: VSeed\n  private _advancedVSeed: AdvancedVSeed | null = null\n  private _spec: Spec | null = null\n  private _performance: Record<string, string | number> = {}\n\n  private _locale: Locale\n\n  constructor(vseed: VSeed) {\n    this._vseed = vseed\n    this._locale = vseed.locale || intl.getLocale()\n  }\n\n  get locale() {\n    return this._locale\n  }\n\n  /**\n   * @description 构建spec\n   * @returns spec\n   */\n  build = <T extends Spec>(): T => build(this) as T\n\n  /**\n   * @description 构建spec\n   * @param advanced 高级配置\n   * @returns spec\n   */\n  buildSpec = (advanced: AdvancedVSeed): Spec => buildSpec(this, advanced)\n\n  /**\n   * @description 构建spec\n   * @returns AdvancedVSeed | null\n   */\n  buildAdvanced = (): AdvancedVSeed | null => buildAdvanced(this)\n\n  /**\n   * @description 获取颜色项, 颜色项可以重复,\n   * @returns 颜色项\n   */\n  getColorItems = () => getColorItems(this)\n\n  /**\n   * @description 获取颜色id映射\n   * @returns 颜色id映射\n   */\n  getColorIdMap = () => getColorIdMap(this)\n\n  /**\n   * @description 获取vseed\n   * @returns vseed\n   */\n  get vseed() {\n    return this._vseed\n  }\n\n  /**\n   * @description 设置vseed\n   * @param value vseed\n   */\n  set vseed(value) {\n    this._vseed = value\n  }\n\n  /**\n   * @description 获取advancedVSeed\n   * @returns advancedVSeed\n   */\n  get advancedVSeed() {\n    return this._advancedVSeed\n  }\n\n  /**\n   *\n   * @description 设置advancedVSeed\n   * @param value advancedVSeed\n   */\n  set advancedVSeed(value) {\n    this._advancedVSeed = value\n  }\n\n  /**\n   * @description 获取spec\n   * @returns spec\n   */\n  get spec() {\n    return this._spec\n  }\n\n  /**\n   * @description 设置spec\n   * @param value spec\n   */\n  set spec(value) {\n    this._spec = value\n  }\n\n  /**\n   * @description 获取performance, 统计了构建spec和advancedVSeed的时间\n   * @returns performance\n   */\n  get performance() {\n    return this._performance\n  }\n\n  /**\n   * @description 设置performance\n   * @param value performance\n   */\n  set performance(value) {\n    this._performance = value\n  }\n\n  /**\n   * @description 获取advancedPipeline\n   * @param chartType 图表类型\n   * @returns advancedPipeline\n   */\n  static getAdvancedPipeline = (chartType: ChartType) => {\n    const customPipe = Builder._customAdvancedPipe[chartType] as AdvancedPipe\n    const pipeline = Builder._advancedPipelineMap[chartType] as AdvancedPipeline\n    if (customPipe) {\n      pipeline.push(customPipe)\n    }\n    return pipeline\n  }\n\n  /**\n   * @description 获取specPipeline\n   * @param chartType 图表类型\n   * @returns specPipeline\n   */\n\n  static getSpecPipeline = (chartType: ChartType) => {\n    const customPipe = Builder._customSpecPipe[chartType] as SpecPipe\n    const pipeline = Builder._specPipelineMap[chartType] as SpecPipeline\n    if (customPipe) {\n      pipeline.push(customPipe)\n    }\n    return pipeline\n  }\n\n  /**\n   * @description 根据主题key获取主题配置\n   * @param themeKey 主题key\n   * @example Builder.getTheme('light'), 获取浅色主题\n   * @returns 主题配置\n   */\n  static getTheme = (themeKey?: string) => Builder._themeMap[themeKey || 'light']\n\n  /**\n   * @description 获取主题配置映射表\n   * @example Builder.getThemeMap()\n   * @returns 主题配置映射表\n   */\n  static getThemeMap = () => Builder._themeMap\n\n  /**\n   * @description 从vseed创建builder\n   * @param vseed 完整的vseed DSL\n   * @returns builder\n   */\n  static from = (vseed: VSeed) => new Builder(vseed)\n\n  static _advancedPipelineMap: Partial<Record<ChartType, AdvancedPipeline>> = {}\n  static _specPipelineMap: Partial<Record<ChartType, SpecPipeline>> = {}\n  static _customAdvancedPipe: Partial<Record<ChartType, AdvancedPipe>> = {}\n  static _customSpecPipe: Partial<Record<ChartType, SpecPipe>> = {}\n  static _themeMap: Record<string, CustomThemeConfig> = {}\n}\n","function n(e){return e===void 0?!0:typeof e==\"string\"||Array.isArray(e)?e.length===0:Object.keys(e).length===0}export{n as a};\n","import { isEmpty } from 'remeda'\nimport type { VSeed } from 'src/types'\n\nexport const checkVSeed = (vseed: VSeed) => {\n  const { chartType, dataset, dimensions, measures } = vseed\n  if (!chartType) {\n    throw new Error('chartType is required')\n  }\n  if (!dataset || isEmpty(dataset)) {\n    throw new Error('dataset is required, and must be an array')\n  }\n  if (dimensions && !Array.isArray(dimensions)) {\n    throw new Error('dimensions must be an array')\n  }\n  if (measures && !Array.isArray(measures)) {\n    throw new Error('measures must be an array')\n  }\n}\n","import { checkVSeed } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const initAdvancedVSeed: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType, locale } = vseed\n\n  checkVSeed(vseed)\n\n  return {\n    ...advancedVSeed,\n    chartType,\n    locale: locale || 'zh-CN',\n  } as AdvancedVSeed\n}\n","function u(o,n,a){let t=r=>o(r,...n);return a===void 0?t:Object.assign(t,{lazy:a,lazyArgs:n})}export{u as a};\n","import{a as t}from\"./chunk-D6FCK2GA.js\";function u(r,n,o){let a=r.length-n.length;if(a===0)return r(...n);if(a===1)return t(r,n,o);throw new Error(\"Wrong number of arguments\")}export{u as a};\n","import{a as y}from\"./chunk-WIMGWYZL.js\";function d(...n){return y(u,n)}function u(n,o=[],t=[]){if(typeof n==\"function\")return n;if(typeof n!=\"object\"||n===null)return structuredClone(n);let r=Object.getPrototypeOf(n);if(!Array.isArray(n)&&r!==null&&r!==Object.prototype)return structuredClone(n);let e=o.indexOf(n);return e!==-1?t[e]:(o.push(n),Array.isArray(n)?p(n,o,t):i(n,o,t))}function i(n,o,t){let r={};t.push(r);for(let[e,c]of Object.entries(n))r[e]=u(c,o,t);return r}function p(n,o,t){let r=[];t.push(r);for(let[e,c]of n.entries())r[e]=u(c,o,t);return r}export{d as a};\n","import type { Measure, MeasureGroup } from 'src/types'\n\nexport const isMeasure = (measure: Measure | MeasureGroup): measure is Measure => {\n  return !('children' in measure)\n}\n\nexport const isMeasureGroup = (measure: Measure | MeasureGroup): measure is MeasureGroup => {\n  return 'children' in measure\n}\n\nexport const isMeasures = (measures: Measure[] | MeasureGroup[]): measures is Measure[] => {\n  return measures.every(isMeasure)\n}\n","import { clone } from 'remeda'\nimport { isMeasure, preorderTraverse } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum } from 'src/types'\n\n/**\n * @description 如果用户没有配置 measures, 则基于 dataset 构建默认的 measures\n */\nexport const defaultMeasures: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { measures, dataset } = vseed\n\n  if (measures && measures.length > 0) {\n    const clonedMeasures = clone(measures)\n    preorderTraverse(clonedMeasures, (node) => {\n      if (isMeasure(node)) {\n        node.alias = node.alias || node.id\n      }\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      measures: clonedMeasures,\n    }\n  }\n\n  const top100dataset = dataset.slice(0, 100)\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n  const defaultMeasures = Object.keys(sample)\n    .filter((key) => {\n      return top100dataset.some((item) => typeof item[key] === 'number') && !['', null, undefined].includes(key)\n    })\n    .map((measure) => ({\n      id: measure,\n      alias: measure,\n    }))\n\n  return {\n    ...advancedVSeed,\n    measures: defaultMeasures,\n  }\n}\n","import type { Dimension, DimensionGroup } from 'src/types'\n\nexport const isDimension = (dimension: Dimension | DimensionGroup): dimension is Dimension => {\n  return !('children' in dimension)\n}\n\nexport const isDimensionGroup = (dimension: Dimension | DimensionGroup): dimension is DimensionGroup => {\n  return 'children' in dimension\n}\n\n// export const isDimensions = (dimensions: Dimension[] | DimensionGroup[]): dimensions is Dimension[] => {\n//   return dimensions.every(isDimension)\n// }\n","import type { Measure, MeasureGroup, MeasureTree } from 'src/types'\nimport { preorderTraverse } from '../tree'\n\nexport const findMeasureById = (measures: MeasureTree = [], id: string): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      if (node.id === id) {\n        result = node\n        return true\n      }\n    }\n    return false\n  })\n  return result\n}\n\nexport const findFirstMeasure = (measures: MeasureTree = []): Measure | undefined => {\n  if (!measures) return undefined\n  let result: Measure | undefined\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result = node\n      return true\n    }\n    return false\n  })\n  return result\n}\n\nexport const findAllMeasures = (measures: MeasureTree = []): Measure[] => {\n  if (!measures) return []\n  const result: Measure[] = []\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if (!('children' in node)) {\n      result.push(node)\n    }\n    return false\n  })\n  return result\n}\n\nexport const hasMultipleMeasureInSingleView = (measures: MeasureTree = []): boolean => {\n  if (measures.every((m) => !('children' in m))) {\n    return measures.length > 1\n  }\n  let found = false\n  preorderTraverse<Measure, 'children'>(measures, (node) => {\n    if ((node as MeasureGroup).children && (node as MeasureGroup).children!.length > 1) {\n      found = true\n      return true\n    }\n    return false\n  })\n  return found\n}\n","import { clone } from 'remeda'\nimport { findAllMeasures, isDimension, preorderTraverse } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum, Dimensions, DimensionTree } from 'src/types'\n\nexport const defaultDimensions: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dimensions, dataset } = vseed\n\n  if (dimensions && dimensions.length > 0) {\n    const clonedDimensions = clone(dimensions)\n    preorderTraverse(clonedDimensions, (node) => {\n      if (isDimension(node)) {\n        node.alias = node.alias || node.id\n      }\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      dimensions: clonedDimensions,\n    }\n  }\n\n  const measures = findAllMeasures(advancedVSeed.measures as DimensionTree)\n\n  const top100dataset = dataset.slice(0, 100)\n\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n\n  const newDimensions = Object.keys(sample)\n    .filter(\n      (key) =>\n        top100dataset.some((item) => typeof item[key] === 'string') &&\n        !['', null, undefined].includes(key) &&\n        !measures.some((measure) => measure.id === key),\n    )\n    .map((dim) => ({\n      id: dim,\n      alias: dim,\n    })) as Dimensions\n\n  return {\n    ...result,\n    dimensions: newDimensions,\n  }\n}\n","import{a as t}from\"./chunk-WIMGWYZL.js\";function i(...e){return t(o,e)}function o(e,s){let r={};for(let n of s)n in e&&(r[n]=e[n]);return r}export{i as a};\n","function r(o){if(typeof o!=\"object\"||o===null)return!1;let e=Object.getPrototypeOf(o);return e===null||e===Object.prototype}export{r as a};\n","import{a as t}from\"./chunk-WIMGWYZL.js\";function i(...e){return t(o,e)}function o(e,r){let a={};for(let[n,u]of Object.entries(e)){let l=r(u,n,e);a[n]=l}return a}export{i as a};\n","import { isPlainObject, mapValues, pipe } from 'remeda'\n\n// 递归类型，将所有 null 替换为 undefined\ntype NullToUndefined<T> = T extends null\n  ? undefined\n  : T extends (infer U)[]\n    ? NullToUndefined<U>[]\n    : T extends object\n      ? { [K in keyof T]: NullToUndefined<T[K]> }\n      : T\n\nexport const replaceNullToUndefined = <T>(obj: T): NullToUndefined<T> => {\n  if (obj === null) {\n    return undefined as NullToUndefined<T>\n  }\n  if (Array.isArray(obj)) {\n    // 递归处理数组元素\n    return obj.map(replaceNullToUndefined) as NullToUndefined<T>\n  }\n  if (isPlainObject(obj)) {\n    // 使用 remeda 的 mapValues 递归处理对象属性\n    return pipe(\n      obj as object,\n      mapValues((value) => replaceNullToUndefined(value)),\n    ) as NullToUndefined<T>\n  }\n  return obj as NullToUndefined<T>\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const cellStyle: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n\n  const pickedCellStyle = pick(vseed, ['bodyCellStyle']) as AdvancedVSeed['cellStyle']\n\n  const style = replaceNullToUndefined(pickedCellStyle)\n\n  return { ...advancedVSeed, cellStyle: style }\n}\n","import type { AdvancedPipe } from 'src/types'\n\nexport const records: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { dataset } = vseed\n  return {\n    ...advancedVSeed,\n    dataset,\n  }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, Config } from 'src/types'\n\nexport const tableConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const config = pick(vseed, [\n    'backgroundColor',\n    'bodyFontSize',\n    'bodyFontColor',\n    'bodyBackgroundColor',\n    'headerFontSize',\n    'headerFontColor',\n    'headerBackgroundColor',\n    'hoverHeaderBackgroundColor',\n    'hoverHeaderInlineBackgroundColor',\n    'selectedBorderColor',\n    'selectedBackgroundColor',\n  ]) as Config['pivotTable']\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result\n}\n","import{a as o}from\"./chunk-BZNENX2T.js\";import{a as u}from\"./chunk-WIMGWYZL.js\";function D(...e){return u(s,e)}function s(e,t){let r={...e,...t};for(let n in t){if(!(n in e))continue;let{[n]:i}=e;if(!o(i))continue;let{[n]:c}=t;o(c)&&(r[n]=s(i,c))}return r}export{D as a};\n","function t(r){return typeof r==\"string\"}export{t as a};\n","function e(r){return typeof r==\"number\"&&!Number.isNaN(r)}export{e as a};\n","function o(e){return typeof e==\"object\"&&e!==null}export{o as a};\n","import{a as r}from\"./chunk-WIMGWYZL.js\";function t(...e){return r(u,e)}var u=(e,o)=>({...e,...o});export{t as a};\n","import { clone, isNullish, isNumber, isObjectType, isString, merge, mergeDeep } from 'remeda'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const theme: AdvancedPipe = (advancedVSeed, context) => {\n  const { customTheme, vseed } = context\n  const { theme = 'light', chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  } as AdvancedVSeed\n\n  if (!customTheme || !customTheme[theme]) {\n    return result\n  }\n\n  const chartConfigTheme = customTheme?.[theme].config?.[chartType]\n  if (chartConfigTheme) {\n    const chartConfig = result.config?.[chartType] || {}\n    const mergedConfig = mergeDeep(chartConfigTheme, clone(chartConfig))\n\n    // 数组项不会被Merge, 需要将1个主题配置, 合并到数组的每一项\n    for (const _k in mergedConfig) {\n      const key = _k as keyof typeof mergedConfig\n      // 配置的第一层, 如果是数组, 则数组的每一项目和主题配置合并\n      if (Array.isArray(mergedConfig[key])) {\n        mergedConfig[key] = mergeArray(mergedConfig[key], chartConfigTheme[key])\n      }\n    }\n\n    result.config = {\n      [chartType]: mergedConfig,\n    }\n  }\n\n  const chartCustomTheme = customTheme?.[theme]?.config?.[chartType]\n\n  result.customTheme = {\n    config: {\n      [chartType]: chartCustomTheme,\n    },\n  }\n\n  return result\n}\n\nconst mergeArray = <Destination extends Array<object>, Source extends object | number | string | undefined | null>(\n  arr: Destination,\n  themeItem: Source,\n): Destination => {\n  if (isNullish(themeItem) || isString(themeItem) || isNumber(themeItem)) {\n    return arr\n  }\n\n  if (!Array.isArray(arr)) {\n    return arr\n  }\n\n  if (arr.some((d) => !isObjectType(d))) {\n    return arr\n  }\n\n  return arr.map((item) => {\n    return merge(themeItem, item)\n  }) as Destination\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport { initAdvancedVSeed, records, tableConfig, defaultMeasures, defaultDimensions, cellStyle } from '../pipes'\nimport { theme } from '../../chart/pipes'\n\nexport const tableAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  cellStyle,\n\n  records,\n  tableConfig,\n  theme,\n]\n","import type { ListTableConstructorOptions } from '@visactor/vtable'\nimport type { ListTableSpecPipe } from 'src/types'\n\nexport const initTable: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const { config } = advancedVSeed\n  const { backgroundColor = 'transparent' } = config.table || {}\n\n  return {\n    ...spec,\n    records: dataset,\n    widthMode: 'standard',\n    defaultHeaderColWidth: 'auto',\n    heightMode: 'autoHeight',\n    autoWrapText: true,\n    columnResizeMode: 'all',\n    showHeader: true,\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    animationAppear: {\n      duration: 300,\n      delay: 250,\n      type: 'one-by-one',\n      direction: 'row',\n    },\n    hover: {\n      highlightMode: 'row',\n    },\n    theme: {\n      cellInnerBorder: false,\n      underlayBackgroundColor: backgroundColor,\n    },\n  } as ListTableConstructorOptions\n}\n","import type { ColumnsDefine, ListTableConstructorOptions } from '@visactor/vtable'\nimport { isMeasure } from 'src/pipeline/utils'\nimport type { Dimension, DimensionGroup, DimensionTree, ListTableSpecPipe } from 'src/types'\n\nexport const dimensionTreeToColumns: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const dimensions = (advancedVSeed as unknown as { dimensions: DimensionTree }).dimensions\n  const result = { ...spec } as ListTableConstructorOptions\n  const eachNode = (node: Dimension | DimensionGroup) => {\n    if (isMeasure(node)) {\n      return {\n        width: 'auto',\n      }\n    }\n\n    return {}\n  }\n  const columns = treeTreeToColumns<Dimension, DimensionGroup>(dimensions, eachNode)\n\n  return {\n    ...result,\n    columns: [...(result.columns || []), ...columns] as ListTableConstructorOptions['columns'],\n  }\n}\n\nconst treeTreeToColumns = <\n  T extends { id: string; alias?: string },\n  U extends { id: string; alias?: string; children?: (T | U)[] },\n>(\n  tree: (T | U)[],\n  callback?: (node: T | U) => object,\n): ColumnsDefine[] => {\n  const result = tree.map((item) => {\n    if ('children' in item && Array.isArray(item.children)) {\n      const groupNode = item as unknown as U\n      const field = groupNode.id\n      const title = groupNode.alias ?? groupNode.id\n      const props = callback?.(groupNode) || {}\n      // group\n      return {\n        field,\n        title,\n        columns: treeTreeToColumns(item.children, callback),\n        ...props,\n      }\n    } else {\n      const field = item.id\n      const title = item.alias ?? item.id\n      const props = callback?.(item) || {}\n      // leaf\n      return {\n        field,\n        title,\n        ...props,\n      }\n    }\n  }) as unknown as ColumnsDefine[]\n\n  return result || []\n}\n","import { isNumber } from 'remeda'\nimport { intl } from '../../../i18n'\nimport type { Formatter, Locale, NumFormat } from 'src/types'\n\nexport const createNumFormatter = (format?: Partial<NumFormat>, locale: Locale = intl.getLocale()): Formatter => {\n  const {\n    type = 'number',\n    ratio = 1,\n    thousandSeparator = true,\n    prefix = '',\n    suffix = '',\n    symbol = '',\n    fractionDigits = 2,\n    significantDigits,\n    roundingMode = 'halfExpand',\n    roundingPriority = 'auto',\n  } = format || {}\n\n  const numFormatterOptions: Intl.NumberFormatOptions = {\n    style: 'decimal',\n    notation: type === 'scientific' ? 'scientific' : 'standard',\n    // @ts-expect-error roundingMode is not in NumberFormatOptions\n    roundingMode,\n    roundingPriority,\n  }\n\n  if (isNumber(fractionDigits)) {\n    if (fractionDigits >= 0) {\n      numFormatterOptions.minimumFractionDigits = fractionDigits\n      numFormatterOptions.maximumFractionDigits = fractionDigits\n    }\n  }\n  if (isNumber(significantDigits) && significantDigits > 0) {\n    if (significantDigits > 0) {\n      numFormatterOptions.minimumSignificantDigits = significantDigits\n      numFormatterOptions.maximumSignificantDigits = significantDigits\n    }\n  }\n\n  const numFormatter = new Intl.NumberFormat(locale, { ...numFormatterOptions, useGrouping: thousandSeparator })\n\n  return (value?: number | string) => {\n    let num = Number(value)\n    let typeSymbol = ''\n    if (Number.isNaN(num)) {\n      return String(value)\n    }\n\n    // apply ratio for percent/permille\n    if (type === 'percent') {\n      num *= 100\n      typeSymbol = '%'\n    } else if (type === 'permille') {\n      num *= 1000\n      typeSymbol = '‰'\n    } else if (type === 'number') {\n      num = num / (ratio || 1)\n    }\n\n    // format value\n    let numStr = numFormatter.format(num)\n\n    // add thousand separator\n    if (thousandSeparator) {\n      const parts = numStr.split('.')\n      parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n      numStr = parts.join('.')\n    }\n\n    const validSymbol = symbol ?? ''\n\n    // add symbol, typeSymbol, prefix and suffix\n    return `${prefix}${numStr}${typeSymbol}${validSymbol}${suffix}`\n  }\n}\n\nexport const autoNumFormatter = (value?: number | string, locale: Locale = intl.getLocale()): string => {\n  if (value === undefined || value === null) return String(value)\n  const num = Number(value)\n  if (Number.isNaN(num)) return String(value)\n\n  const numFormatterOptions: Intl.NumberFormatOptions = {\n    style: 'decimal',\n    notation: 'compact',\n    useGrouping: true,\n  }\n  numFormatterOptions.minimumFractionDigits = 0\n  numFormatterOptions.maximumFractionDigits = 2\n\n  const numFormatter = new Intl.NumberFormat(locale, { ...numFormatterOptions })\n\n  return numFormatter.format(Number(value))\n}\n","import type { Formatter, Locale, NumFormat } from 'src/types'\nimport { autoNumFormatter, createNumFormatter } from './createNumFormatter'\nimport { intl } from 'src/i18n'\n\nexport const createFormatter = (format: Partial<NumFormat>, locale?: Locale): Formatter => {\n  return createNumFormatter(format, locale)\n}\n\nexport const autoFormatter = (value?: number | string, locale: Locale = intl.getLocale()): string => {\n  return autoNumFormatter(value, locale)\n}\n","import type { Formatter, Measure } from 'src/types'\nimport { autoFormatter, createFormatter } from './createFormatter'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const createFormatterByMeasure = (measure?: Measure): Formatter => {\n  if (!measure) {\n    return (v) => String(v)\n  }\n  const { numFormat, format, autoFormat } = measure\n\n  const formatterFormat = numFormat || format || {}\n\n  if (autoFormat === true) {\n    return autoFormatter\n  }\n\n  if (isNullish(autoFormat) && isEmpty(formatterFormat)) {\n    return autoFormatter\n  }\n\n  if (!isEmpty(formatterFormat)) {\n    return createFormatter(formatterFormat)\n  }\n\n  return (v) => String(v)\n}\n","import type { ColumnsDefine, ListTableConstructorOptions } from '@visactor/vtable'\nimport { createFormatterByMeasure, isMeasure } from 'src/pipeline/utils'\nimport type { MeasureGroup, Measure, MeasureTree, ListTableSpecPipe, Datum } from 'src/types'\n\nexport const measureTreeToColumns: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const measures = (advancedVSeed as unknown as { measures: MeasureTree }).measures\n  const result = { ...spec } as ListTableConstructorOptions\n\n  const eachNode = (node: Measure | MeasureGroup) => {\n    if (isMeasure(node)) {\n      return {\n        width: 'auto',\n        fieldFormat: fieldFormat(node),\n      }\n    }\n\n    return {}\n  }\n  const columns = treeTreeToColumns<Measure, MeasureGroup>(measures, eachNode)\n  return {\n    ...result,\n    columns: [...(result.columns || []), ...columns] as ListTableConstructorOptions['columns'],\n  }\n}\n\nconst fieldFormat = (node: Measure) => {\n  const formatter = createFormatterByMeasure(node)\n\n  return (datum: Datum) => {\n    const { id } = node\n    const value = datum[id] as number | string | undefined\n    return formatter(value)\n  }\n}\nconst treeTreeToColumns = <\n  T extends { id: string; alias?: string },\n  U extends { id: string; alias?: string; children?: (T | U)[] },\n>(\n  tree: (T | U)[],\n  callback?: (node: T | U) => object,\n): ColumnsDefine[] => {\n  const result = tree.map((item) => {\n    if ('children' in item && Array.isArray(item.children)) {\n      const groupNode = item as unknown as U\n      const field = groupNode.id\n      const title = groupNode.alias ?? groupNode.id\n      const props = callback?.(groupNode) || {}\n      // group\n      return {\n        field,\n        title,\n        columns: treeTreeToColumns(item.children, callback),\n        ...props,\n      }\n    } else {\n      const field = item.id\n      const title = item.alias ?? item.id\n      const props = callback?.(item) || {}\n      // leaf\n      return {\n        field,\n        title,\n        ...props,\n      }\n    }\n  }) as unknown as ColumnsDefine[]\n\n  return result || []\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const bodyStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { chartType, config } = advancedVSeed\n  const themeConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themeConfig) return result\n\n  // basic\n  const borderColor = themeConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themeConfig.bodyBackgroundColor || '#fff'\n  const fontColor = themeConfig.bodyFontColor || '#1B1F23'\n  const fontSize = themeConfig.bodyFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themeConfig.hoverBodyBackgroundColor || '#bedaff'\n  const hoverInlineColor = themeConfig.hoverBodyInlineBackgroundColor || '#bedaff'\n\n  if (!result.theme) result.theme = {}\n  ;(result.theme as ThemeLike).bodyStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'right',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    color: fontColor,\n    fontSize: fontSize,\n    fontStyle: 'normal',\n    fontWeight: 'normal',\n    fontVariant: 'normal',\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const headerStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themConfig.hoverHeaderBackgroundColor || '#bedaff'\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor || '#bedaff'\n\n  ;(result.theme as ThemeLike).headerStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'center',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 0, 1, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const frameStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n\n  ;(result.theme as ThemeLike).frameStyle = {\n    borderColor,\n    borderLineWidth: 1,\n    cornerRadius: 4,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const selectionStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  const borderColor = themConfig.selectedBorderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.selectedBackgroundColor || 'rgb(224, 224, 224, 0.5)'\n\n  ;(result.theme as ThemeLike).selectionStyle = {\n    cellBorderColor: borderColor,\n    cellBorderLineWidth: 2,\n    cellBgColor: backgroundColor,\n  }\n\n  return result\n}\n","const isType = (value, type) => Object.prototype.toString.call(value) === `[object ${type}]`;\n\nexport default isType;\n//# sourceMappingURL=isType.js.map\n","import isType from \"./isType\";\n\nconst isArray = value => Array.isArray ? Array.isArray(value) : isType(value, \"Array\");\n\nexport default isArray;\n//# sourceMappingURL=isArray.js.map","const isValid = value => null != value;\n\nexport default isValid;\n//# sourceMappingURL=isValid.js.map\n","import isArray from \"./isArray\";\n\nimport isArrayLike from \"./isArrayLike\";\n\nimport isValid from \"./isValid\";\n\nexport function array(arr) {\n    return isValid(arr) ? isArray(arr) ? arr : [ arr ] : [];\n}\n\nexport function last(val) {\n    if (isArrayLike(val)) {\n        return val[val.length - 1];\n    }\n}\n\nexport const span = arr => arr.length <= 1 ? 0 : last(arr) - arr[0];\n\nexport const maxInArray = (arr, compareFn) => {\n    var _a;\n    if (0 === arr.length) return;\n    let max = arr[0];\n    for (let i = 1; i < arr.length; i++) {\n        const value = arr[i];\n        (null !== (_a = null == compareFn ? void 0 : compareFn(value, max)) && void 0 !== _a ? _a : value - max) > 0 && (max = value);\n    }\n    return max;\n};\n\nexport const minInArray = (arr, compareFn) => {\n    var _a;\n    if (0 === arr.length) return;\n    let min = arr[0];\n    for (let i = 1; i < arr.length; i++) {\n        const value = arr[i];\n        (null !== (_a = null == compareFn ? void 0 : compareFn(value, min)) && void 0 !== _a ? _a : value - min) < 0 && (min = value);\n    }\n    return min;\n};\n\nexport function arrayEqual(a, b) {\n    if (!isArray(a) || !isArray(b)) return !1;\n    if (a.length !== b.length) return !1;\n    for (let i = 0; i < a.length; i++) if (a[i] !== b[i]) return !1;\n    return !0;\n}\n\nexport function uniqArray(arr) {\n    return arr && isArray(arr) ? Array.from(new Set(array(arr))) : arr;\n}\n\nexport function shuffleArray(arr, random = Math.random) {\n    let j, x, i = arr.length;\n    for (;i; ) j = Math.floor(random() * i), x = arr[--i], arr[i] = arr[j], arr[j] = x;\n    return arr;\n}\n\nexport function flattenArray(arr) {\n    if (!isArray(arr)) return [ arr ];\n    const result = [];\n    for (const value of arr) result.push(...flattenArray(value));\n    return result;\n}\n//# sourceMappingURL=array.js.map","import{a as t}from\"./chunk-WIMGWYZL.js\";function i(...e){return t(n,e)}var n=(e,r)=>e.length>=r;export{i as a};\n","import{a as n}from\"./chunk-AIG3BDKO.js\";import{a as i}from\"./chunk-WIMGWYZL.js\";function y(...t){return i(f,t)}function f(t,e){if(!n(e,1))return{...t};if(!n(e,2)){let{[e[0]]:r,...m}=t;return m}let o={...t};for(let r of e)delete o[r];return o}export{y as a};\n","import type { Datum } from 'src/types'\nimport type {\n  DimensionSelector,\n  MeasureSelector,\n  PartialDatumSelector,\n  Selector,\n  Selectors,\n  ValueSelector,\n} from '../types/dataSelector'\nimport { omit } from 'remeda'\n\n/**\n * 判断两个数字是否“近似相等”\n */\nfunction nearlyEqual(a: number, b: number, epsilon = 1e-8) {\n  // NaN 直接不相等\n  if (Number.isNaN(a) || Number.isNaN(b)) return false\n  // 引用同一个数 或 完全相等\n  if (a === b) return true\n  const diff = Math.abs(a - b)\n  return diff <= epsilon\n}\n\nexport const selector = (\n  vchartDatum: Datum,\n  selector: Selector | Selectors | undefined | null,\n  selectorMode: 'And' | 'Or' = 'And',\n) => {\n  // 无有效选择器, 则认为全部匹配成功\n  if (!selector) {\n    return true\n  }\n\n  // 过滤掉 vchart 相关字段\n  const vchartKeys = Object.keys(vchartDatum).filter((k) => k.toLocaleLowerCase().startsWith('__vchart'))\n  const datum = omit(vchartDatum, vchartKeys) as Datum\n\n  // 统一处理选择器为数组\n  const selectors = (Array.isArray(selector) ? selector : [selector]) as Selectors\n\n  return selectors[selectorMode === 'And' ? 'every' : 'some']((selector) => {\n    // 1. 字符串或数字\n    if (isValueSelector(selector)) {\n      return selectByValue(selector, datum)\n    }\n\n    // 2. 指标选择器\n    else if (isMeasureSelector(selector)) {\n      return selectByMeasure(selector, datum)\n    }\n    // 3. 维度选择器\n    else if (isDimensionSelector(selector)) {\n      return selectByDmension(selector, datum)\n    }\n    // 4. 部分数据对象选择器\n    else if (isPartialDatumSelector(selector)) {\n      return selectByPartial(selector, datum)\n    }\n\n    return false\n  })\n}\n\nexport const selectorDatum = (datum: Datum, selector: Selector | Selectors | undefined | null): Datum[] => {\n  // 无有效选择器, 则认为全部匹配成功\n  if (!selector) {\n    return []\n  }\n\n  // 统一处理选择器为数组\n  const selectors = (Array.isArray(selector) ? selector : [selector]) as Selectors\n  let finalResult: Datum[] = []\n\n  for (const selector of selectors) {\n    const results: Datum[] = []\n    // 1. 字符串或数字\n    if (isValueSelector(selector)) {\n      Object.entries(datum).forEach(([key, value]) => {\n        if (value === selector) {\n          results.push({ [key]: value } as Datum)\n        }\n      })\n    } else if (isMeasureSelector(selector) && selectByMeasure(selector, datum)) {\n      results.push({ [selector.field]: datum[selector.field] } as Datum)\n    } else if (isDimensionSelector(selector) && selectByDmension(selector, datum)) {\n      results.push({ [selector.field]: datum[selector.field] } as Datum)\n    } else if (isPartialDatumSelector(selector) && selectByPartial(selector, datum)) {\n      results.push(selector)\n    }\n\n    if (results.length) {\n      if (finalResult.length) {\n        finalResult = finalResult.flatMap((prev) => {\n          return results.map((r) => {\n            return {\n              ...prev,\n              ...r,\n            }\n          })\n        })\n      } else {\n        finalResult = results\n      }\n    } else {\n      finalResult = []\n      break\n    }\n  }\n\n  return finalResult\n}\n\nexport const isValueSelector = (selector: Selector): selector is ValueSelector => {\n  return typeof selector === 'string' || typeof selector === 'number'\n}\n\nexport const isPartialDatumSelector = (selector: Selector): selector is PartialDatumSelector => {\n  return typeof selector === 'object' && selector !== null\n}\n\nexport const isMeasureSelector = (selector: Selector): selector is MeasureSelector => {\n  return (\n    typeof selector === 'object' &&\n    selector !== null &&\n    'field' in selector &&\n    ('operator' in selector || 'op' in selector) &&\n    'value' in selector &&\n    (['=', '==', '!=', '>', '<', '>=', '<=', 'between'].includes(selector.operator as string) ||\n      ['=', '==', '!=', '>', '<', '>=', '<=', 'between'].includes(selector.op as string))\n  )\n}\n\nexport const isDimensionSelector = (selector: Selector): selector is DimensionSelector => {\n  return (\n    typeof selector === 'object' &&\n    selector !== null &&\n    'field' in selector &&\n    ('operator' in selector || 'op' in selector) &&\n    'value' in selector &&\n    (['in', 'not in'].includes(selector.operator as string) || ['in', 'not in'].includes(selector.op as string))\n  )\n}\n\nexport const selectByMeasure = (selector: MeasureSelector, datum: Datum) => {\n  const op = selector.operator || selector.op\n  const selectorValueArr = Array.isArray(selector.value) ? selector.value : [selector.value]\n\n  switch (op) {\n    case '=':\n      if (\n        String(datum[selector.field]) === String(selectorValueArr[0]) ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '==':\n      if (datum[selector.field] === selectorValueArr[0]) {\n        return true\n      }\n      break\n    case '!=':\n      if (datum[selector.field] !== selectorValueArr[0]) {\n        return true\n      }\n      break\n    case '>':\n      if (\n        datum[selector.field] > selectorValueArr[0] &&\n        !nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '<':\n      if (\n        datum[selector.field] < selectorValueArr[0] &&\n        !nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '>=':\n      if (\n        datum[selector.field] >= selectorValueArr[0] ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case '<=':\n      if (\n        datum[selector.field] <= selectorValueArr[0] ||\n        nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))\n      ) {\n        return true\n      }\n      break\n    case 'between':\n      if (\n        Array.isArray(selector.value) &&\n        (datum[selector.field] >= selectorValueArr[0] ||\n          nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[0]))) &&\n        (datum[selector.field] <= selectorValueArr[1] ||\n          nearlyEqual(Number(datum[selector.field]), Number(selectorValueArr[1])))\n      ) {\n        return true\n      }\n      break\n  }\n  return false\n}\n\nexport const selectByDmension = (selector: DimensionSelector, datum: Datum) => {\n  const op = selector.operator || selector.op\n  const selectorValueArr = Array.isArray(selector.value) ? selector.value : [selector.value]\n  switch (op) {\n    case 'in':\n      if (selectorValueArr.includes(datum[selector.field] as string | number)) {\n        return true\n      }\n      break\n    case 'not in':\n      if (!selectorValueArr.includes(datum[selector.field] as string | number)) {\n        return true\n      }\n      break\n  }\n\n  return false\n}\n\nexport const selectByPartial = (selector: PartialDatumSelector, datum: Datum) => {\n  return Object.keys(selector).every((key) => datum[key] === selector[key])\n}\n\nexport const selectByValue = (selector: ValueSelector, datum: Datum) => {\n  return Object.values(datum).some((v) => v === selector)\n}\n","import type { BodyCellStyle } from 'src/types'\n\nconst tableStyleMap = {\n  backgroundColor: 'bgColor',\n  textColor: 'color',\n  textFontSize: 'fontSize',\n  borderColor: 'borderColor',\n  borderLineWidth: 'borderLineWidth',\n}\n\nexport const pickBodyCellStyle = (bodyCellStyle: BodyCellStyle) => {\n  return (Object.keys(tableStyleMap) as Array<keyof typeof tableStyleMap>).reduce<Record<string, any>>((acc, key) => {\n    if (key in bodyCellStyle) {\n      acc[tableStyleMap[key]] = bodyCellStyle[key]\n    }\n\n    return acc\n  }, {})\n}\n","import type { ListTableConstructorOptions, ColumnDefine } from '@visactor/vtable'\nimport { array } from '@visactor/vutils'\nimport { isNullish, isNumber, isPlainObject, isString } from 'remeda'\nimport { selector } from 'src/dataSelector/selector'\nimport type { BodyCellStyle, ListTableSpecPipe } from 'src/types'\nimport type { MeasureSelector, Selectors } from 'src/types/dataSelector'\nimport { pickBodyCellStyle } from './common'\nimport { preorderTraverse } from 'src/pipeline/utils/tree/traverse'\n\nexport const tableBodyCell: ListTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { cellStyle } = advancedVSeed\n  const bodyCellStyle = cellStyle?.bodyCellStyle\n\n  if (!bodyCellStyle) {\n    return spec as ListTableConstructorOptions\n  }\n  const bodyCellStyleList = array(bodyCellStyle) as BodyCellStyle[]\n  const columns = (spec as ListTableConstructorOptions).columns || []\n  const setStyleOfColumn = (col: ColumnDefine) => {\n    const field = col.field as string\n    const matchedStyles = bodyCellStyleList.filter((style) => {\n      if (isNullish(style.selector)) {\n        return true\n      }\n      const selectors = array(style.selector) as Selectors\n\n      return selectors.some((selector) => {\n        return isPlainObject(selector)\n          ? isNullish(selector.field) || (selector as MeasureSelector).field === field\n          : isNumber(selector) || isString(selector)\n      })\n    })\n\n    if (!matchedStyles.length) {\n      return false\n    }\n\n    col.style = (datum: any) => {\n      const originalDatum = {\n        [field]: datum.dataValue,\n      }\n\n      const mergedStyle = matchedStyles.reduce<Record<string, any>>((result, style) => {\n        if (selector(originalDatum, style.selector)) {\n          return {\n            ...result,\n            ...pickBodyCellStyle(style),\n          }\n        }\n\n        return result\n      }, {})\n\n      return mergedStyle\n    }\n    return false\n  }\n\n  preorderTraverse<ColumnDefine, 'columns'>(columns, setStyleOfColumn, 'columns')\n\n  return spec as ListTableConstructorOptions\n}\n","import type { SpecPipeline } from 'src/types'\nimport {\n  initTable,\n  dimensionTreeToColumns,\n  measureTreeToColumns,\n  bodyStyle,\n  headerStyle,\n  frameStyle,\n  selectionStyle,\n  tableBodyCell,\n} from '../pipes'\n\nexport const tableSpecPipeline: SpecPipeline = [\n  initTable,\n  dimensionTreeToColumns,\n  measureTreeToColumns,\n  bodyStyle,\n  headerStyle,\n  frameStyle,\n  selectionStyle,\n  tableBodyCell,\n]\n","import { tableAdvancedPipeline, tableSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerTable = () => {\n  Builder._advancedPipelineMap['table'] = tableAdvancedPipeline\n  Builder._specPipelineMap['table'] = tableSpecPipeline\n}\n","// Reshape\nexport const ORIGINAL_DATA = '__OriginalData__'\nexport const Separator = '-'\n\n// Measures\nexport const FoldMeasureName = '__MeaName__'\nexport const FoldMeasureId = '__MeaId__'\nexport const FoldMeasureValue = '__MeaValue__'\nexport const MeasureId = FoldMeasureId\nexport const MeasureName = FoldMeasureName\n\n// Measures For DualAxis\nexport const FoldPrimaryMeasureValue = '__MeaPrimaryValue__'\nexport const FoldSecondaryMeasureValue = '__MeaSecondaryValue__'\n\n// Measures For Scatter\nexport const FoldXMeasureValue = '__MeaXValue__'\nexport const FoldYMeasureValue = '__MeaYValue__'\nexport const FoldXMeasureId = '__MeaXId__'\nexport const FoldYMeasureId = '__MeaYId__'\n// Encoding\nexport const XEncoding = '__Dim_X__'\nexport const YEncoding = '__Dim_Y__'\nexport const AngleEncoding = '__Dim_Angle__'\nexport const DetailEncoding = '__Dim_Detail__'\nexport const ColorEncoding = '__Dim_Color__'\nexport const ColorIdEncoding = '__Dim_ColorId__'\n\n// Measures For boxPlot\nexport const Q1MeasureValue = '__Q1__'\nexport const Q3MeasureValue = '__Q3__'\nexport const LowerWhisker = '__Lower_Whisker__'\nexport const UpperWhisker = '__Upper_Whisker__'\nexport const OutliersMeasureId = '__Outliers__'\nexport const MedianMeasureId = '__Meadian__'\n\n// Measures For Histogram\nexport const BinStartMeasureId = '__BinStart__'\nexport const BinEndMeasureId = '__BinEnd__'\nexport const BinCountMeasureId = '__BinCount__'\nexport const BinPercentageMeasureId = '__BinPercentage__'\n","import { MeasureId, MeasureName } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport type { AdvancedPipe, Dimension, DimensionTree } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n  const measures = findAllMeasures(advancedVSeed.measures as DimensionTree)\n\n  // 如果没有指标名称维度，则默认添加指标名称维度\n  if (measures.length > 1 && !result.dimensions?.some((dim) => dim.id === MeasureName)) {\n    result.dimensions?.push({\n      id: MeasureId,\n      alias: intl.i18n`指标名称`,\n      encoding: 'row',\n    } as Dimension)\n  }\n\n  return result\n}\n","import { unique } from 'remeda'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\n\nexport const encodingForPivotTable: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.tooltip = uniqueDimIds\n  encoding.row = []\n  encoding.column = []\n\n  uniqueDimIds.forEach((item, index) => {\n    if (index % 2 === 0) {\n      encoding.column!.push(item)\n    } else {\n      encoding.row!.push(item)\n    }\n  })\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.tooltip = uniqueDimIds\n  encoding.row = []\n  encoding.column = []\n\n  dimensions.forEach((dim, index) => {\n    const id = dim.id\n    if (dim.encoding === 'row') {\n      encoding.row!.push(id)\n    } else if (dim.encoding === 'column') {\n      encoding.column!.push(id)\n    } else {\n      if (index % 2 === 0) {\n        encoding.column!.push(id)\n      } else {\n        encoding.row!.push(id)\n      }\n    }\n  })\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.tooltip = unique(measures.map((item) => item.id))\n  encoding.detail = unique(\n    measures.filter((item) => item.encoding === 'detail' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.tooltip = measures.map((item) => item.id)\n  encoding.detail = unique(\n    measures.filter((item) => item.encoding === 'detail' || !item.encoding).map((item) => item.id),\n  )\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type { Dataset, FoldInfo, Measures } from 'src/types'\nimport { ColorEncoding, ColorIdEncoding, ORIGINAL_DATA } from './constant'\nimport { omit } from 'remeda'\n\n/**\n * 折叠指定的指标\n * @description 合并指定的指标为1个, 无论多少个, 都能转换为1个, 取名为fold, 意为折叠后混合在一起.\n */\nexport const foldMeasures = (\n  dataset: Dataset,\n  measures: Measures,\n  options: {\n    measureId: string\n    measureName: string\n    measureValue: string\n    colorMeasureId?: string\n    allowEmptyFold?: boolean\n    omitIds?: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n} => {\n  const { measureId, measureName, measureValue, colorMeasureId, allowEmptyFold = true, omitIds = [] } = options || {}\n\n  const foldInfo: FoldInfo = {\n    measureId,\n    measureName,\n    measureValue,\n    statistics: {\n      max: -Infinity,\n      min: Infinity,\n      sum: 0,\n      count: 0,\n      colorMin: Infinity,\n      colorMax: -Infinity,\n    },\n    foldMap: {},\n  }\n\n  if (!allowEmptyFold && measures.length === 0) {\n    return {\n      dataset,\n      foldInfo,\n    }\n  }\n\n  const result: Dataset = new Array(dataset.length * measures.length) as Dataset\n  let index = 0\n  const ids = measures.map((d) => d.id)\n  for (let i = 0; i < dataset.length; i++) {\n    for (let j = 0; j < measures.length; j++) {\n      const datum: Record<string, any> = omit({ ...dataset[i] }, [...ids, ...omitIds])\n\n      datum[ORIGINAL_DATA] = dataset[i]\n\n      const measure = measures[j]\n      const { id, alias } = measure\n\n      datum[id] = dataset[i][id] as unknown\n      datum[measureId] = id\n      datum[measureName] = alias || id\n      datum[measureValue] = dataset[i][id] as unknown\n\n      if (colorMeasureId) {\n        const value = (datum[ORIGINAL_DATA] as Record<string, string | number>)[colorMeasureId]\n        datum[ColorEncoding] = value\n        datum[ColorIdEncoding] = colorMeasureId\n\n        const valueNumber = Number(value)\n        foldInfo.statistics.colorMin = Math.min(foldInfo.statistics.colorMin, valueNumber)\n        foldInfo.statistics.colorMax = Math.max(foldInfo.statistics.colorMax, valueNumber)\n      }\n\n      const valueNumber = Number(datum[id])\n      foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n      foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n      foldInfo.statistics.sum += valueNumber\n      foldInfo.statistics.count++\n\n      foldInfo.foldMap[id] = alias\n      result[index++] = datum\n    }\n  }\n\n  return {\n    dataset: result,\n    foldInfo,\n  }\n}\n","import { FoldMeasureId, FoldMeasureName, foldMeasures, FoldMeasureValue } from 'src/dataReshape'\nimport {} from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, DatasetReshapeInfo, PivotTable } from 'src/types'\n\nexport const reshapePivotTable: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as PivotTable\n  const { dimensions, measures } = advancedVSeed\n  const { dataset: newDatasets, foldInfo } = foldMeasures(dataset, findAllMeasures(measures), {\n    measureId: FoldMeasureId,\n    measureName: FoldMeasureName,\n    measureValue: FoldMeasureValue,\n    allowEmptyFold: false,\n  })\n\n  const datasetReshapeInfo = [\n    {\n      id: String(chartType),\n      index: 0,\n      foldInfo,\n    },\n  ] as unknown as DatasetReshapeInfo\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n    dimensions,\n    measures,\n  }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, Config } from 'src/types'\n\nexport const pivotTableConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const config = pick(vseed, [\n    'backgroundColor',\n    'bodyFontSize',\n    'bodyFontColor',\n    'bodyBackgroundColor',\n    'headerFontSize',\n    'headerFontColor',\n    'headerBackgroundColor',\n    'hoverHeaderBackgroundColor',\n    'hoverHeaderInlineBackgroundColor',\n    'selectedBorderColor',\n    'selectedBackgroundColor',\n  ]) as Config['table']\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport { theme } from '../../chart/pipes'\nimport {\n  cellStyle,\n  defaultDimensions,\n  defaultMeasureId,\n  defaultMeasures,\n  encodingForPivotTable,\n  initAdvancedVSeed,\n  pivotTableConfig,\n  reshapePivotTable,\n} from '../pipes'\n\nexport const pivotTableAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  cellStyle,\n\n  encodingForPivotTable,\n  reshapePivotTable,\n  pivotTableConfig,\n  theme,\n]\n","import type { PivotTableConstructorOptions } from '@visactor/vtable'\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const initPivotTable: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const { config } = advancedVSeed\n  const { backgroundColor = 'transparent' } = config.pivotTable || {}\n  return {\n    ...spec,\n    records: dataset,\n    widthMode: 'standard',\n    defaultHeaderColWidth: 'auto',\n    heightMode: 'autoHeight',\n    autoWrapText: true,\n    columnResizeMode: 'all',\n    columnResizeType: 'column',\n    showColumnHeader: true,\n    showRowHeader: true,\n    select: {\n      highlightMode: 'cell',\n      headerSelectMode: 'inline',\n    },\n    hover: {\n      highlightMode: 'cross',\n    },\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    corner: {\n      titleOnDimension: 'all',\n    },\n    widthAdaptiveMode: 'all',\n    animationAppear: {\n      duration: 300,\n      delay: 250,\n      type: 'one-by-one',\n      direction: 'row',\n    },\n    theme: {\n      cellInnerBorder: false,\n      underlayBackgroundColor: backgroundColor,\n    },\n  } as PivotTableConstructorOptions\n}\n","import type { PivotTableConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotColumns: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { encoding } = advancedVSeed\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  const columns = dimensions.filter((item) => encoding.column?.includes(item.id))\n\n  return {\n    ...spec,\n    columns: columns.map((item) => {\n      return {\n        dimensionKey: item.id,\n        title: item.alias || item.id,\n        width: 'auto',\n      }\n    }),\n  } as PivotTableConstructorOptions\n}\n","import { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils/measures/find'\nimport type { Dimensions, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotRows: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  const { encoding, measures } = advancedVSeed\n  const rows = dimensions.filter((item) => encoding.row?.includes(item.id))\n  const allMeasures = findAllMeasures(measures)\n\n  return {\n    ...spec,\n    rows: rows.map((item) => {\n      const res = {\n        dimensionKey: item.id,\n        title: item.alias || item.id,\n        width: 'auto',\n      }\n\n      if (item.id === MeasureId) {\n        ;(res as any).headerFormat = (measureId: string) => {\n          const measure = allMeasures.find((m) => m.id === measureId)\n\n          return measure?.alias ?? measureId\n        }\n      }\n\n      return res\n    }),\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const titleOnDimension: PivotTableSpecPipe = (spec) => {\n  const { rows = [], columns = [] } = spec\n\n  return {\n    ...spec,\n    corner: {\n      titleOnDimension: (rows as any[]).length <= 1 && (columns as any[]).length >= 1 ? 'column' : 'row',\n    },\n  }\n}\n","import type { PivotChartConstructorOptions, BaseTableAPI } from '@visactor/vtable'\nimport { isNumber } from 'remeda'\nimport { intl } from 'src/i18n'\nimport { createFormatterByMeasure, findMeasureById } from 'src/pipeline/utils'\nimport type { Datum, FoldInfo, MeasureTree, PivotTableSpecPipe } from 'src/types'\n\nexport const pivotIndicators: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { measures, datasetReshapeInfo } = advancedVSeed\n  const { foldInfo } = datasetReshapeInfo[0]\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n  const hasRow = ((spec as any)?.rows as any[])?.length > 0\n  const foldMapValues = Object.values(foldInfo.foldMap)\n\n  return {\n    ...spec,\n    indicatorTitle: intl.i18n`指标名称`,\n    indicatorsAsCol: hasRow,\n    hideIndicatorName: hasRow,\n    indicators: [\n      {\n        cellType: 'text',\n        indicatorKey: foldInfo.measureValue,\n        title: foldMapValues.length > 1 ? '' : foldMapValues[0],\n        width: 'auto',\n        format: fieldFormat(measures, foldInfo as FoldInfo),\n      },\n    ] as unknown as PivotChartConstructorOptions['indicators'],\n  }\n}\n\nconst fieldFormat = (measures: MeasureTree, foldInfo: FoldInfo) => {\n  return (value: number | string, col?: number, row?: number, table?: BaseTableAPI) => {\n    if (!isNumber(col) || !isNumber(row) || !table) {\n      return value\n    }\n\n    const datum = table.getCellOriginRecord(col, row) as Datum[]\n    if (!datum[0]) {\n      return value\n    }\n    const { measureId: foldMeasureId } = foldInfo\n    const measureId = datum[0][foldMeasureId] as string\n    const measure = findMeasureById(measures, measureId)\n    const formatter = createFormatterByMeasure(measure)\n    return formatter(value)\n  }\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const rowHeaderStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverCellBgColor = themConfig.hoverHeaderBackgroundColor || '#bedaff'\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor || '#bedaff'\n\n  ;(result.theme as ThemeLike).rowHeaderStyle = {\n    borderColor: borderColor,\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'left',\n    hover: {\n      cellBgColor: hoverCellBgColor,\n      inlineRowBgColor: hoverInlineColor,\n      inlineColumnBgColor: hoverInlineColor,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 1, 0, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { PivotTableSpecPipe, TableConfig } from 'src/types'\nimport type { ThemeLike, WithTheme } from './type'\n\nexport const cornerHeaderStyle: PivotTableSpecPipe = (spec, context) => {\n  const result = { ...spec } as Partial<typeof spec> & WithTheme\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = config?.[chartType] as TableConfig\n\n  if (!result.theme || !themConfig) return result\n\n  // basic\n  const borderColor = themConfig.borderColor || 'rgb(224, 224, 224)'\n  const backgroundColor = themConfig.headerBackgroundColor || '#EEF1F5'\n  const fontColor = themConfig.headerFontColor || '#1B1F23'\n  const fontSize = themConfig.headerFontSize || 12\n  // Interaction\n  const hoverInlineColor = themConfig.hoverHeaderInlineBackgroundColor\n  const hoverCellColor = themConfig.hoverHeaderBackgroundColor\n\n  ;(result.theme as ThemeLike).cornerHeaderStyle = {\n    borderColor: [borderColor, borderColor],\n    borderLineWidth: 1,\n    padding: [8, 12, 8, 12],\n    textAlign: 'left',\n    hover: {\n      cellBgColor: hoverCellColor || undefined,\n      inlineRowBgColor: hoverInlineColor || undefined,\n      inlineColumnBgColor: hoverInlineColor || undefined,\n    },\n    frameStyle: {\n      borderColor: borderColor,\n      borderLineWidth: [0, 1, 1, 0],\n    },\n    fontSize: fontSize,\n    fontVariant: 'normal',\n    fontStyle: 'normal',\n    fontWeight: 'bold',\n    color: fontColor,\n    bgColor: backgroundColor,\n    lineHeight: fontSize * 1.5,\n  }\n\n  return result\n}\n","import type { IIndicator, PivotTableConstructorOptions } from '@visactor/vtable'\nimport { array } from '@visactor/vutils'\nimport { isNullish, isString } from 'remeda'\nimport { selector } from 'src/dataSelector/selector'\nimport type { BodyCellStyle, Datum, PivotTableSpecPipe } from 'src/types'\nimport { pickBodyCellStyle } from './common'\nimport { FoldMeasureValue, MeasureId } from 'src/dataReshape'\n\nexport const pivotTableBodyCell: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { cellStyle } = advancedVSeed\n  const bodyCellStyle = cellStyle?.bodyCellStyle\n\n  if (!bodyCellStyle) {\n    return spec as PivotTableConstructorOptions\n  }\n  const bodyCellStyleList = array(bodyCellStyle) as BodyCellStyle[]\n  const indicators = (spec as PivotTableConstructorOptions).indicators || []\n\n  const newIndicators = indicators.map((ind) => {\n    const newInd = isString(ind)\n      ? ({\n          indicatorKey: ind,\n        } as IIndicator)\n      : ind\n\n    const { indicatorKey } = newInd\n\n    newInd.style = (datum: any) => {\n      const { dataValue, cellHeaderPaths } = datum\n      const headerPaths = [...cellHeaderPaths.colHeaderPaths, ...cellHeaderPaths.rowHeaderPaths]\n\n      const originalDatum: Datum = {\n        [indicatorKey]: dataValue,\n      }\n\n      headerPaths.forEach((path: any) => {\n        if (path.dimensionKey) {\n          originalDatum[path.dimensionKey] = path.value\n        }\n      })\n\n      if (!isNullish(originalDatum[MeasureId]) && !isNullish(originalDatum[FoldMeasureValue])) {\n        originalDatum[originalDatum[MeasureId]] = originalDatum[FoldMeasureValue]\n      }\n\n      const mergedStyle = bodyCellStyleList.reduce<Record<string, any>>((result, style) => {\n        if (selector(originalDatum, style.selector)) {\n          return {\n            ...result,\n            ...pickBodyCellStyle(style),\n          }\n        }\n\n        return result\n      }, {})\n\n      return mergedStyle\n    }\n    return newInd\n  })\n  return {\n    ...spec,\n    indicators: newIndicators,\n  } as PivotTableConstructorOptions\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { PivotTableSpecPipe } from 'src/types'\n\nexport const dataConfig: PivotTableSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const measures = findAllMeasures(advancedVSeed.measures)\n\n  const aggregationRules = measures.map((measure) => ({\n    field: measure.id,\n    aggregationType: 'NONE',\n    indicatorKey: measure.id,\n  }))\n\n  return {\n    ...spec,\n    dataConfig: {\n      aggregationRules,\n    },\n  }\n}\n","import type { SpecPipeline } from 'src/types'\nimport {\n  initPivotTable,\n  pivotColumns,\n  pivotRows,\n  pivotIndicators,\n  bodyStyle,\n  headerStyle,\n  rowHeaderStyle,\n  cornerHeaderStyle,\n  frameStyle,\n  selectionStyle,\n  titleOnDimension,\n  pivotTableBodyCell,\n} from '../pipes'\nimport { dataConfig } from '../pipes/indicators/pivotDataConfig'\n\nexport const pivotTableSpecPipeline: SpecPipeline = [\n  initPivotTable,\n  pivotColumns,\n  pivotRows,\n  titleOnDimension,\n  pivotIndicators,\n  bodyStyle,\n  headerStyle,\n  rowHeaderStyle,\n  cornerHeaderStyle,\n  frameStyle,\n  selectionStyle,\n  dataConfig,\n  pivotTableBodyCell,\n]\n","import { pivotTableAdvancedPipeline, pivotTableSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerPivotTable = () => {\n  Builder._advancedPipelineMap['pivotTable'] = pivotTableAdvancedPipeline\n  Builder._specPipelineMap['pivotTable'] = pivotTableSpecPipeline\n}\n","import { checkVSeed } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const initAdvancedVSeed: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType, locale } = vseed\n\n  checkVSeed(vseed)\n\n  return {\n    ...advancedVSeed,\n    chartType,\n    locale: locale || 'zh-CN',\n  } as AdvancedVSeed\n}\n","import { clone } from 'remeda'\nimport type { AdvancedPipe, Datum } from 'src/types'\nimport { preorderTraverse } from 'src/pipeline/utils'\n/**\n * @description 如果用户没有配置 measures, 则基于 dataset 构建默认的 measures\n */\nexport const defaultMeasures: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { measures, dataset } = vseed\n\n  if (measures && measures.length > 0) {\n    const clonedMeasures = clone(measures)\n    preorderTraverse(clonedMeasures, (node) => {\n      node.alias = node.alias || node.id\n\n      return false\n    })\n    return {\n      ...advancedVSeed,\n      measures: clonedMeasures,\n    }\n  }\n\n  const top100dataset = dataset.slice(0, 100)\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n  const defaultMeasures = Object.keys(sample)\n    .filter((key) => {\n      return top100dataset.some((item) => typeof item[key] === 'number') && !['', null, undefined].includes(key)\n    })\n    .map((measure) => ({\n      id: measure,\n      alias: measure,\n    }))\n\n  return {\n    ...advancedVSeed,\n    measures: defaultMeasures,\n  }\n}\n","import { clone } from 'remeda'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Datum, Dimensions, DimensionTree } from 'src/types'\n\nexport const defaultDimensions: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dimensions, dataset } = vseed\n\n  if (dimensions && dimensions.length > 0) {\n    return {\n      ...result,\n      dimensions: clone(dimensions.map((dim) => ({ ...dim, alias: dim.alias || dim.id }))),\n    }\n  }\n\n  const measures = findAllMeasures(advancedVSeed.measures as DimensionTree)\n\n  const top100dataset = dataset.slice(0, 100)\n\n  const sample = top100dataset.reduce<Datum>((prev, cur) => {\n    return { ...prev, ...cur }\n  }, {})\n\n  const newDimensions = Object.keys(sample)\n    .filter(\n      (key) =>\n        top100dataset.some((item) => typeof item[key] === 'string') &&\n        !['', null, undefined].includes(key) &&\n        !measures.some((measure) => measure.id === key),\n    )\n    .map((dim) => ({\n      id: dim,\n      alias: dim,\n    })) as Dimensions\n\n  return {\n    ...result,\n    dimensions: newDimensions,\n  }\n}\n","import { MeasureId } from 'src/dataReshape'\nimport { intl } from 'src/i18n'\nimport type { AdvancedPipe, Dimension } from 'src/types'\n\nexport const defaultMeasureId: AdvancedPipe = (advancedVSeed) => {\n  const result = { ...advancedVSeed }\n\n  const MeaIdDim: Dimension = {\n    id: MeasureId,\n    alias: intl.i18n`指标Id`,\n  }\n\n  // 如果没有指标Id维度，则默认添加指标Id维度\n  if (!result.dimensions?.some((dim) => dim.id === MeasureId)) {\n    result.dimensions?.push(MeaIdDim)\n  }\n\n  return result\n}\n","import type {\n  AdvancedPipe,\n  AdvancedPipeline,\n  AdvancedPipelineContext,\n  AdvancedVSeed,\n  Dimension,\n  Measure,\n} from 'src/types'\nimport { execPipeline } from 'src/pipeline/utils'\n\nexport const encodingAdapter = (\n  noEncodingPipeline: AdvancedPipeline,\n  hasEncodingPipeline: AdvancedPipeline,\n): AdvancedPipe => {\n  return (advancedVSeed, context) => {\n    const { dimensions = [], measures = [] } = advancedVSeed\n    const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n    const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n    const hasEncoding = hasDimensionEncoding || hasMeasureEncoding\n\n    if (hasEncoding) {\n      return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(hasEncodingPipeline, context, advancedVSeed)\n    }\n    return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(noEncodingPipeline, context, advancedVSeed)\n  }\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { Dimensions, Encoding } from 'src/types'\n\n/**\n * @description 为 encoding 添加 color 编码, 多指标场景, 会将 MeasureId 也添加到 color 编码中.\n * @param dimensions\n * @param encoding\n * @param isMultiMeasure\n */\nexport const addColorToEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n  const measureId = dimensions.find((item) => item.id === MeasureId)\n  if (isMultiMeasure && measureId && !measureId.encoding) {\n    encoding.color.push(MeasureId)\n  }\n  if (encoding.color.length === 0) {\n    encoding.color = [MeasureId]\n  }\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForLine: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForLine: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1)\n  encoding.color = uniqueDimIds.slice(1)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标Id之外的所有维度\n  encoding.detail = [] // 折线图暂不支持细分\n  encoding.label = []\n  encoding.row = []\n  encoding.column = []\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipe, MeasureGroup, Measures, MeasureTree, VSeed } from 'src/types'\nimport { isMeasureTreeWithChildren, isMeasureTreeWithParentId, normalizeMeasureTree } from './utils'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\nimport { isValid } from '@visactor/vutils'\n\nexport const buildMeasures: AdvancedPipe = (advancedVSeed) => {\n  // 带Children的指标树, 不进行任何处理\n  if (isMeasureTreeWithChildren(advancedVSeed.measures)) {\n    advancedVSeed.measures = normalizeMeasureTree(advancedVSeed.measures as MeasureTree)\n    return advancedVSeed\n  }\n  // 带parentId的指标树, 转换为带children的指标树\n  if (isMeasureTreeWithParentId(advancedVSeed.measures)) {\n    advancedVSeed.measures = generateMeasuresByParentId(advancedVSeed.measures as Measures)\n    return advancedVSeed\n  }\n\n  /**\n   * 透视图表, 自动生成指标树\n   */\n  if (isPivotChart(advancedVSeed as VSeed)) {\n    advancedVSeed.measures = basicMeasuresToMeasureTree(advancedVSeed.measures as Measures)\n  }\n\n  return advancedVSeed\n}\n\nconst generateMeasuresByParentId = (measures: Measures): MeasureTree => {\n  const measureTree: MeasureGroup[] = []\n\n  measures.forEach((measure) => {\n    const parent = measureTree.find((item) => item.id === measure.parentId)\n    if (parent && 'children' in parent) {\n      parent.children = parent.children || []\n\n      if (parent.children.length > 0) {\n        parent.alias += `-${measure.alias ?? measure.id}`\n      }\n\n      parent.children.push(measure)\n    } else if (isValid(measure.parentId)) {\n      measureTree.push({\n        id: measure.parentId,\n        alias: measure.alias ?? measure.id,\n        children: [measure],\n      })\n    } else {\n      measureTree.push({\n        id: DEFAULT_PARENT_ID,\n        alias: measure.alias ?? measure.id, // 当分组只有单个指标的时候，分组alias 设置为该指标的别名或者id\n        children: [measure],\n      })\n    }\n  })\n\n  return measureTree\n}\n\nconst basicMeasuresToMeasureTree = (measures: Measures): MeasureTree => {\n  const id = measures.map((item) => item.id).join('-')\n  const alias = measures.map((item) => item.alias || item.id).join('-')\n  return [\n    {\n      id,\n      alias,\n      children: measures,\n    },\n  ]\n}\n","import type { Measure, MeasureGroup, MeasureTree } from 'src/types'\nimport { isMeasure, isMeasureGroup } from './typeGuard'\n\n/**\n * @description 删除 measureTree 中符合 callback 条件的节点\n * @param measureTree 待删除的 measureTree\n * @param callback 回调函数，用于判断是否删除当前节点\n * @returns 删除的度量\n */\nexport const deleteMeasureTreeByCallback = <T extends MeasureTree>(\n  measureTree?: T,\n  callback?: (measure: Measure, index: number, measures: (Measure | MeasureGroup)[]) => boolean,\n): Measure[] => {\n  if (!measureTree) {\n    return undefined as unknown as Measure[]\n  }\n  const stack: (Measure | MeasureGroup)[] = [...measureTree].reverse()\n  const parents = new Map<Measure | MeasureGroup, (Measure | MeasureGroup)[]>()\n\n  measureTree.forEach((node) => {\n    parents.set(node, measureTree)\n  })\n\n  const nodesToProcess: Measure[] = []\n  const visited = new Set<Measure | MeasureGroup>()\n\n  while (stack.length > 0) {\n    const node = stack[stack.length - 1]\n\n    if (isMeasureGroup(node) && node.children && !visited.has(node)) {\n      visited.add(node)\n      const children = node.children.slice().reverse()\n      for (const child of children) {\n        parents.set(child, node.children)\n        stack.push(child)\n      }\n    } else {\n      stack.pop()\n      nodesToProcess.push(node as Measure)\n    }\n  }\n  const deleted: Measure[] = []\n\n  for (const node of nodesToProcess) {\n    const parentList = parents.get(node)\n\n    if (parentList) {\n      const index = parentList.indexOf(node)\n      if (isMeasure(node)) {\n        if (callback?.(node, index, parentList)) {\n          parentList.splice(index, 1)\n          deleted.push(node)\n        }\n      }\n    }\n  }\n\n  return deleted\n}\n","import { clone } from 'remeda'\nimport { deleteMeasureTreeByCallback } from 'src/index'\nimport type { AdvancedPipe, Measure } from 'src/types'\n\nexport const pickMeasuresForReshape = (encodingKeys: string[]): AdvancedPipe => {\n  return (advancedVSeed) => {\n    const clonedMeasures = clone(advancedVSeed.measures)\n\n    const deleteBy = (measure: Measure) => encodingKeys.includes(measure.encoding as string)\n\n    deleteMeasureTreeByCallback(clonedMeasures, deleteBy)\n\n    return {\n      ...advancedVSeed,\n      reshapeMeasures: clonedMeasures,\n    }\n  }\n}\n","import type { Dimension, DimensionGroup, DimensionTree } from 'src/types'\nimport { isDimension, isDimensionGroup } from './typeGuard'\n\n/**\n * @description 删除 dimensionTree 中符合 callback 条件的节点\n * @param dimensionTree 待删除的 dimensionTree\n * @param callback 回调函数，用于判断是否删除当前节点\n * @returns 删除后的 dimensionTree\n */\nexport const deleteDimensionTreeByCallback = <T extends DimensionTree>(\n  dimensionTree?: T,\n  callback?: (dimension: Dimension, index: number, dimensions: (Dimension | DimensionGroup)[]) => boolean,\n) => {\n  if (!dimensionTree) {\n    return dimensionTree\n  }\n  const stack: (Dimension | DimensionGroup)[] = [...dimensionTree].reverse()\n  const parents = new Map<Dimension | DimensionGroup, (Dimension | DimensionGroup)[]>()\n\n  dimensionTree.forEach((node) => {\n    parents.set(node, dimensionTree)\n  })\n\n  const nodesToProcess: (Dimension | DimensionGroup)[] = []\n  const visited = new Set<Dimension | DimensionGroup>()\n\n  while (stack.length > 0) {\n    const node = stack[stack.length - 1]\n\n    if (isDimensionGroup(node) && node.children && !visited.has(node)) {\n      visited.add(node)\n      const children = node.children.slice().reverse()\n      for (const child of children) {\n        parents.set(child, node.children)\n        stack.push(child)\n      }\n    } else {\n      stack.pop()\n      nodesToProcess.push(node)\n    }\n  }\n\n  for (const node of nodesToProcess) {\n    const parentList = parents.get(node)\n\n    if (parentList) {\n      const index = parentList.indexOf(node)\n      if (isDimension(node)) {\n        if (callback?.(node, index, parentList)) {\n          parentList.splice(index, 1)\n        }\n      }\n    }\n  }\n\n  return dimensionTree\n}\n","import { clone } from 'remeda'\nimport { deleteDimensionTreeByCallback } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension } from 'src/types'\n\nexport const pickDimensionsForReshape: AdvancedPipe = (advancedVSeed) => {\n  const deleteBy = (dimension: Dimension) => dimension.encoding === 'tooltip' || dimension.encoding === 'label'\n  const reshapeDimensions = clone(advancedVSeed.dimensions)\n  deleteDimensionTreeByCallback(reshapeDimensions, deleteBy)\n\n  return {\n    ...advancedVSeed,\n    reshapeDimensions,\n  }\n}\n","import type { AdvancedPipe, AdvancedPipeline, AdvancedPipelineContext, AdvancedVSeed } from 'src/types'\nimport { execPipeline, isPivotChart } from 'src/pipeline/utils'\n\nexport const pivotAdapter = (pipeline: AdvancedPipeline, pivotPipeline: AdvancedPipeline): AdvancedPipe => {\n  return (advancedVSeed, context) => {\n    const { vseed } = context\n    const usePivotChart = isPivotChart(vseed)\n\n    if (usePivotChart) {\n      return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pivotPipeline, context, advancedVSeed)\n    }\n\n    return execPipeline<AdvancedVSeed, AdvancedPipelineContext>(pipeline, context, advancedVSeed)\n  }\n}\n","import{a as o}from\"./chunk-LFJW7BOT.js\";import{a}from\"./chunk-ANXBDSUI.js\";function T(...e){return o(y,e)}function y(e){let u=e,n=new Set;return(t,i,d)=>{let r=u(t,i,d);return n.has(r)?a:(n.add(r),{done:!1,hasNext:!0,next:t})}}export{T as a};\n","import type { Dataset, Datum, Dimension, Encoding, UnfoldInfo } from 'src/types'\nimport {\n  AngleEncoding,\n  XEncoding,\n  YEncoding,\n  ColorEncoding,\n  DetailEncoding,\n  ColorIdEncoding,\n  MeasureId,\n  MeasureName,\n} from './constant'\n\n/**\n * @description 展开并合并视觉通道的维度, 在foldMeasures后合并维度, 所以不需要进行笛卡尔积\n * @param dataset 原始数据集\n * @param dimensions 维度\n * @param encoding 编码\n * @param options\n * @returns\n */\nexport const unfoldDimensions = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  encoding: Encoding,\n  options: {\n    foldMeasureId: string\n    separator: string\n    colorItemAsId: boolean\n  },\n): {\n  dataset: Dataset\n  unfoldInfo: UnfoldInfo\n} => {\n  const { separator } = options\n\n  const unfoldInfo: UnfoldInfo = {\n    encodingAngle: AngleEncoding,\n    encodingX: XEncoding,\n    encodingY: YEncoding,\n    encodingDetail: DetailEncoding,\n    encodingColor: ColorEncoding,\n    encodingColorId: ColorIdEncoding,\n\n    colorItems: [],\n    colorIdMap: {},\n  }\n\n  // 每个通道对应的维度\n  const { color, x, y, detail, angle } = encoding\n  const angleDimensions = angle ? dimensions.filter((dim) => angle.includes(dim.id)) : []\n  const xDimensions = x ? dimensions.filter((dim) => x.includes(dim.id)) : []\n  const yDimensions = y ? dimensions.filter((dim) => y.includes(dim.id)) : []\n  const colorDimensions = color ? dimensions.filter((dim) => color.includes(dim.id)) : []\n  const detailDimensions = detail ? dimensions.filter((dim) => detail.includes(dim.id)) : []\n\n  // 离散图例项\n  const colorItems = new Set<string>()\n  const colorIdMap: Record<string, { id: string; alias: string }> = {}\n\n  // 遍历数据集, 按通道合并维度\n  for (let i = 0; i < dataset.length; i++) {\n    // 应用编码至Datum上\n    const datum = dataset[i]\n\n    /**\n     * !important 这是全仓库, 最最最重要的五行代码, 贯穿VSeed整个生命周期, 是化繁为简的绝对核心\n     * 1. 点睛之笔: 呼应foldMeasures, 此时此刻的datum一定是单点数据, 维度合并不可能造成任何冲突.\n     * 2. 数据即通道\n     * 3. 利用需要合并的维度, 直接进行join, 即可生成新的维度, 与指标彻底解耦;\n     * 4. 以下通道均在一次遍历中完成, 不存在性能问题\n     * 5. 以下通道均可放入多个维度\n     */\n    applyEncoding(AngleEncoding, angleDimensions, datum, separator)\n    applyEncoding(XEncoding, xDimensions, datum, separator)\n    applyEncoding(YEncoding, yDimensions, datum, separator)\n    applyEncoding(ColorEncoding, colorDimensions, datum, separator)\n    applyEncoding(DetailEncoding, detailDimensions, datum, separator)\n\n    // 处理离散的颜色图例\n    if (!colorDimensions.length || !datum[ColorEncoding]) {\n      // 无颜色通道, 则跳过\n      continue\n    }\n    const colorId = String(datum[ColorEncoding] ?? '')\n\n    datum[ColorIdEncoding] = colorId\n\n    colorIdMap[colorId] = {\n      id: colorId,\n      alias: getColorAliasItem(ColorEncoding, colorDimensions, datum, separator),\n    }\n    colorItems.add(colorId)\n  }\n\n  unfoldInfo.colorItems = Array.from(colorItems)\n  unfoldInfo.colorIdMap = colorIdMap\n\n  return {\n    dataset,\n    unfoldInfo,\n  }\n}\n\n/**\n * @description 应用编码至数据中, 此方法会原地修改数据\n * @param encoding 编码\n * @param dimensions 维度\n * @param datum 数据\n * @param separator 分隔符\n * @returns undefined\n */\nconst applyEncoding = (encoding: string, dimensions: Dimension[], datum: Datum, separator: string) => {\n  if (encoding && dimensions.length) {\n    datum[encoding] = dimensions.map((dim) => String(datum[dim.id])).join(separator)\n  }\n}\n\nconst getColorAliasItem = (encoding: string, dimensions: Dimension[], datum: Datum, separator: string) => {\n  if (encoding && dimensions.length) {\n    return dimensions\n      .map((dim) => {\n        if (dim.id === MeasureId) {\n          return String(datum[MeasureName])\n        }\n\n        return String(datum[dim.id])\n      })\n      .join(separator)\n  }\n  return ''\n}\n","import type { Dataset, Dimension, Encoding, FoldInfo, Measure, Measures, UnfoldInfo } from 'src/types'\nimport { foldMeasures } from './foldMeasures'\nimport { FoldMeasureId, FoldMeasureName, FoldMeasureValue, Separator } from './constant'\nimport { unfoldDimensions } from './unfoldDimensions'\n\nexport const dataReshapeByEncoding = (\n  dataset: Dataset,\n  dimensions: Dimension[],\n  measures: Measure[],\n  encoding: Encoding,\n  options?: {\n    foldMeasureId?: string\n    foldMeasureName?: string\n    foldMeasureValue?: string\n    colorItemAsId?: boolean\n    colorMeasureId?: string\n    omitIds?: string[]\n  },\n): {\n  dataset: Dataset\n  foldInfo: FoldInfo\n  unfoldInfo: UnfoldInfo\n} => {\n  const {\n    foldMeasureId = FoldMeasureId,\n    foldMeasureName = FoldMeasureName,\n    foldMeasureValue = FoldMeasureValue,\n    colorItemAsId = false,\n    colorMeasureId,\n    omitIds,\n  } = options || {}\n\n  // 合并所有指标为1个指标\n  const { dataset: foldedDataset, foldInfo } = foldMeasures(dataset, measures as Measures, {\n    measureId: foldMeasureId,\n    measureName: foldMeasureName,\n    measureValue: foldMeasureValue,\n    colorMeasureId,\n    omitIds,\n  })\n\n  // 展开指定的维度为指标\n  const { dataset: finalDataset, unfoldInfo } = unfoldDimensions(foldedDataset, dimensions, encoding, {\n    foldMeasureId,\n    separator: Separator,\n    colorItemAsId,\n  })\n  return { dataset: finalDataset, foldInfo, unfoldInfo }\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedVSeed, PivotChartSpecPipe, VChartSpecPipe, VSeed, Pipe, SpecPipelineContext } from 'src/types'\n\nexport function colorAdapter(ordinalPipe: PivotChartSpecPipe, linearPipe: PivotChartSpecPipe): PivotChartSpecPipe\nexport function colorAdapter(ordinalPipe: VChartSpecPipe, linearPipe: VChartSpecPipe): VChartSpecPipe\nexport function colorAdapter<TSpec>(\n  ordinalPipe: Pipe<TSpec, SpecPipelineContext>,\n  linearPipe: Pipe<TSpec, SpecPipelineContext>,\n) {\n  return (spec: Partial<TSpec>, context: SpecPipelineContext) => {\n    const { advancedVSeed, vseed } = context\n    if (isLinearColor(advancedVSeed, vseed)) {\n      return linearPipe(spec, context)\n    }\n    return ordinalPipe(spec, context)\n  }\n}\n\nexport const isLinearColor = <T extends AdvancedVSeed, U extends VSeed>(advancedVSeed: T, vseed: U) => {\n  const { encoding } = advancedVSeed\n  const measures = vseed.measures || advancedVSeed.measures\n  const measureIdList = findAllMeasures(measures).map((measure) => measure.id)\n  const { color } = encoding\n  return color?.length === 1 && measureIdList.includes(color[0])\n}\n\nexport const getColorMeasureId = <T extends AdvancedVSeed, U extends VSeed>(\n  advancedVSeed: T,\n  vseed: U,\n): string | undefined => {\n  if (isLinearColor(advancedVSeed, vseed)) {\n    const { encoding } = advancedVSeed\n    const { color } = encoding\n    return color?.[0]\n  }\n  return undefined\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, ColumnParallel, Encoding } from 'src/types'\n\nexport const reshapeWithEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding } = advancedVSeed\n\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const {\n    dataset: newDatasets,\n    foldInfo,\n    unfoldInfo,\n  } = dataReshapeByEncoding(\n    dataset,\n    uniqueBy(advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? [], (item) => item.id),\n    uniqueBy(findAllMeasures(advancedVSeed.reshapeMeasures ?? advancedVSeed.measures), (item) => item.id),\n    encoding as Encoding,\n    {\n      colorItemAsId: false,\n      colorMeasureId,\n    },\n  )\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Encoding,\n  MeasureGroup,\n} from 'src/types'\n\nexport const pivotReshapeWithEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  const allMeasures = findAllMeasures(measures)\n  const measureGroups: MeasureGroup[] = []\n  if (measures) {\n    measures.forEach((measure: MeasureGroup) => {\n      if (measure.children && measure.children.length > 0) {\n        measureGroups.push(measure)\n      }\n    })\n  }\n\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measureGroup, index) => {\n    const measures = measureGroup.children\n    if (!measures) {\n      return\n    }\n    const groupId = measureGroup.id\n    const {\n      dataset: newSubDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item) => item.id),\n      uniqueBy(measures, (item) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: `${FoldMeasureValue}${groupId}`,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasures.map((item) => item.id),\n      },\n    )\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newSubDataset)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import{a as n}from\"./chunk-WIMGWYZL.js\";function m(...r){return n(o,r)}function o(r,t){let e=[...r];return e.sort(t),e}export{m as a};\n","import { sort, unique } from 'remeda'\nimport type { Dataset, Datum } from 'src/types'\nimport type { Sort } from 'src/types/properties/analysis/sort'\n\nexport const calcOrder = (sortConfig: Sort, id: string, dataset: Dataset): string[] => {\n  if (sortConfig.customOrder) {\n    return sortConfig.customOrder\n  }\n\n  const order = sortConfig.order || 'asc'\n  const orderBy = sortConfig.orderBy\n\n  const res = sort(dataset, (a, b) => {\n    const aValue = a[orderBy || id] as string | number\n    const bValue = b[orderBy || id] as string | number\n\n    if (order === 'asc') {\n      if (aValue < bValue) {\n        return -1\n      }\n      if (aValue > bValue) {\n        return 1\n      }\n      return 0\n    }\n    if (aValue > bValue) {\n      return -1\n    }\n    if (aValue < bValue) {\n      return 1\n    }\n    return 0\n  })\n\n  return unique(res.map((item: Datum) => item[id] as string))\n}\n","import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortXBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const xField = unfoldInfo.encodingX\n  if (!sortAxis || !xField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, xField, dataset.flat(2))\n\n  result.analysis.orderMapping[xField] = axisOrderResult\n\n  return result\n}\n","import type { AdvancedPipe, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortLegend: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sortLegend } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed\n  const colorId = datasetReshapeInfo?.[0]?.unfoldInfo?.encodingColorId\n  const colorIdMap = datasetReshapeInfo?.[0]?.unfoldInfo?.colorIdMap ?? {}\n  const colorItems = datasetReshapeInfo?.[0]?.unfoldInfo?.colorItems\n  if (!sortLegend || !colorId || !colorIdMap || !colorItems) {\n    return advancedVSeed\n  }\n\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  if (sortLegend.customOrder) {\n    const colorIds = Object.keys(colorIdMap)\n    // 先根据名称匹配, 若名称不存在, 则根据id匹配, 从而兼容名称和id的两种情况\n    const orderRes = sortLegend.customOrder.map((itemNameOrId) => {\n      return colorIds.find((id) => {\n        return colorIdMap[id]?.alias === itemNameOrId || colorIdMap[id]?.id === itemNameOrId || id === itemNameOrId\n      }) as string\n    })\n    result.analysis.orderMapping[colorId] = orderRes\n    return result\n  }\n\n  const orderRes = calcOrder(sortLegend, colorId, dataset?.flat(2) || [])\n  result.analysis.orderMapping[colorId] = orderRes\n\n  return result\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const lineConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairLine',\n    'dimensionLinkage',\n  ]) as Config['line']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const markStyle: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n\n  const pickedMarkStyle = pick(vseed, [\n    'barStyle',\n    'pointStyle',\n    'lineStyle',\n    'areaStyle',\n    'boxPlotStyle',\n    'outlierStyle',\n  ]) as AdvancedVSeed['markStyle']\n\n  const markStyle = replaceNullToUndefined(pickedMarkStyle)\n\n  return { ...advancedVSeed, markStyle }\n}\n","import { pick } from 'remeda'\nimport type { AdvancedPipe, AdvancedVSeed } from 'src/types'\n\nexport const annotation: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const annotation = pick(vseed, [\n    'annotationPoint',\n    'annotationHorizontalLine',\n    'annotationVerticalLine',\n    'annotationArea',\n  ]) as AdvancedVSeed['annotation']\n\n  return { ...advancedVSeed, annotation }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  lineConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForLine,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const lineAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForLine, buildMeasures],\n    [encodingForLine, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  lineConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'line'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = foldInfo.measureValue\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const color: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const colorItems = unfoldInfo.colorItems\n  const colorIdMap = unfoldInfo.colorIdMap\n\n  const { color } = baseConfig\n  const { colorScheme, colorMapping } = color\n\n  result.color = {\n    type: 'ordinal',\n    domain: colorItems,\n    range: colorScheme,\n    specified: createSpecifiedForColorMapping(colorMapping, colorIdMap, colorItems),\n  } as ILineChartSpec['color']\n  return result\n}\n\nexport const createSpecifiedForColorMapping = (\n  colorMapping?: Record<string, string>,\n  colorIdMap?: Record<string, { id: string; alias: string }>,\n  colorItems?: string[],\n) => {\n  if (!colorMapping || !colorIdMap || !colorItems) {\n    return undefined\n  }\n\n  const matchedList: string[] = []\n\n  // 名称越长优先级越高: 按名称长度降, 优先匹配名称长的, 避免一个短的名称匹配到了超多个长的\n  const colors = Object.entries(colorMapping).sort((a, b) => b[0].length - a[0].length)\n  // 准确匹配\n  const accurateMap = colors.reduce(\n    (prev, cur) => {\n      const name = cur[0]\n      const colorValue = cur[1]\n\n      const accurateMatchedList = Object.entries(colorIdMap).filter(([colorKey, colorObj]) => {\n        return colorKey === name || colorObj.alias === name || colorObj.id === name\n      })\n      accurateMatchedList.forEach((item) => {\n        prev[item[0]] = colorValue\n        matchedList.push(name)\n      })\n\n      return prev\n    },\n    {} as Record<string, string>,\n  )\n\n  // 模糊匹配\n  const fuzzyMap = colors.reduce(\n    (prev, cur) => {\n      const name = cur[0]\n      const colorValue = cur[1]\n      if (matchedList.includes(name)) {\n        return prev\n      }\n\n      const fuzzyMatchedList = Object.entries(colorIdMap).filter(([colorKey, colorObj]) => {\n        return colorKey.includes(name) || colorObj.alias.includes(name) || colorObj.id.includes(name)\n      })\n      fuzzyMatchedList.forEach((item) => {\n        // 已经匹配有值, 则不重复匹配\n        if (prev[item[0]]) {\n          return\n        }\n        prev[item[0]] = colorValue\n      })\n\n      return prev\n    },\n    {} as Record<string, string>,\n  )\n\n  // 合并, 准确匹配的优先级高\n  return {\n    ...fuzzyMap,\n    ...accurateMap,\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const linearColor: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const { color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  result.color = {\n    type: 'linear',\n    range: linearColorScheme || colorScheme || [],\n    domain: [\n      {\n        dataId: id,\n        fields: [unfoldInfo.encodingColor],\n      },\n    ],\n  }\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { BackgroundColor, VChartSpecPipe } from 'src/types'\n\nexport const backgroundColor: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { backgroundColor: BackgroundColor }\n\n  const { backgroundColor } = baseConfig\n\n  return {\n    ...result,\n    background: backgroundColor,\n  }\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetXY: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const orderMapping = analysis?.orderMapping || {}\n  const angle = unfoldInfo.encodingAngle\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n  if (angle) {\n    fields[angle] = {\n      sortIndex: 0,\n    }\n  }\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ILineSeriesSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const progressive: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as ILineSeriesSpec\n  // const { advancedVSeed } = context\n  // const { dataset = [] } = advancedVSeed\n  // const size = dataset.length\n\n  // if (size < 5000) {\n  //   return result\n  // }\n\n  result.large = false\n  result.largeThreshold = Infinity\n  result.progressiveStep = 400\n  result.progressiveThreshold = Infinity\n\n  return result\n}\n","import { findAllMeasures } from 'src/pipeline/utils'\nimport type { Dimensions, MeasureTree } from 'src/types'\n\nexport const defaultTitleText = (measures: MeasureTree, dimensions: Dimensions, idList: string[] = []) => {\n  const allMeasures = findAllMeasures(measures)\n  return idList\n    .map((id) => {\n      const alias = [...allMeasures, ...dimensions].find((f) => f.id === id)?.alias || ''\n      return alias\n    })\n    .join(' & ')\n}\n","import type { ICartesianBandAxisSpec, ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis } from 'src/types'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { AXIS_LABEL_SPACE } from 'src/pipeline/utils'\nimport { MeasureId } from 'src/dataReshape'\nimport { isArray } from '@visactor/vutils'\n\nexport const xBand: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures, dimensions, encoding, datasetReshapeInfo, pivotAllDatasetReshapeInfo } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'column']?.xAxis ?? {}) as XBandAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n    labelAutoHide,\n    labelAutoHideGap,\n    labelAutoLimit,\n    labelAutoLimitLength = 80,\n    labelAutoRotate,\n    labelAutoRotateAngleRange,\n  } = config\n\n  const sampling = !(labelAutoHide || labelAutoRotate || labelAutoLimit)\n  const onlyMeasureId = (encoding.x || []).filter((v) => v !== MeasureId).length === 0\n\n  const bandAxis = {\n    visible,\n    type: 'band',\n    orient: 'bottom',\n    maxHeight: labelAutoLimitLength + 60,\n    sampling,\n    hover: true,\n    label: {\n      visible: label?.visible,\n      flush: true,\n      space: AXIS_LABEL_SPACE,\n      style: {\n        maxLineWidth: labelAutoLimitLength,\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n\n      // 防重叠相关\n      minGap: labelAutoHideGap,\n      autoHide: labelAutoHide,\n      autoHideMethod: 'greedy',\n      autoHideSeparation: labelAutoHideGap,\n      autoLimit: labelAutoLimit,\n      autoRotate: labelAutoRotate,\n      autoRotateAngle: labelAutoRotateAngleRange,\n      lastVisible: true,\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.x as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    paddingInner: [0.15, 0.1],\n    paddingOuter: [0.075, 0.1],\n  } as ICartesianBandAxisSpec\n  if (onlyMeasureId && bandAxis.label) {\n    const allDatasetReshapeInfo = pivotAllDatasetReshapeInfo || datasetReshapeInfo\n    const colorIdMap = allDatasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n      return { ...prev, ...cur.unfoldInfo.colorIdMap }\n    }, {})\n\n    bandAxis.label.formatMethod = (text: string | string[]) => {\n      return isArray(text) ? text : (colorIdMap[String(text)]?.alias ?? text)\n    }\n  }\n\n  result.axes = [...result.axes, bandAxis] as ISpec['axes']\n  return result\n}\n","import { isEmpty, isNullish } from 'remeda'\nimport { autoFormatter } from 'src/pipeline/utils'\nimport type { Formatter, NumFormat } from 'src/types'\n\nexport const createLinearFormat = (\n  value: string | number,\n  autoFormat: boolean | undefined,\n  numFormat: NumFormat,\n  formatter: Formatter,\n) => {\n  if (isNullish(autoFormat) && isEmpty(numFormat)) {\n    return autoFormatter(value)\n  }\n\n  if (autoFormat === true) {\n    return autoFormatter(value)\n  }\n\n  if (!isEmpty(numFormat)) {\n    return formatter(value)\n  }\n\n  return String(value)\n}\n\nexport const createLinearPercentFormat = (\n  value: string | number,\n  autoFormat: boolean | undefined,\n  numFormat: NumFormat,\n  formatter: Formatter,\n  percentFormatter: Formatter,\n) => {\n  if (isNullish(autoFormat) && isEmpty(numFormat)) {\n    return percentFormatter(value)\n  }\n\n  if (autoFormat === true) {\n    return percentFormatter(value)\n  }\n\n  if (!isEmpty(numFormat)) {\n    return formatter(value)\n  }\n\n  return String(value)\n}\n","import type { ISpec } from '@visactor/vchart'\nimport {\n  AXIS_LABEL_SPACE,\n  createNumFormatter,\n  isAreaPercent,\n  isBarPercent,\n  isColumnPercent,\n  isPivotChart,\n  LINEAR_AXIS_INNER_OFFSET_TOP,\n} from 'src/pipeline/utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\n\nexport const yLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures, dimensions, encoding } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'column']?.yAxis ?? {}) as YLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n    autoFormat,\n    numFormat = {},\n  } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const linearAxis = {\n    ...(isPivot\n      ? {\n          range: {\n            min,\n            max,\n          },\n        }\n      : {\n          min,\n          max,\n        }),\n    visible,\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient: 'left',\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod: (value: string) => {\n        if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n          return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n        }\n        return createLinearFormat(value, autoFormat, numFormat, formatter)\n      },\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    innerOffset: {\n      top: LINEAR_AXIS_INNER_OFFSET_TOP,\n      // bottom: LINEAR_AXIS_INNER_OFFSET_TOP,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { Legend, VChartSpecPipe } from 'src/types'\n\nexport const discreteLegend: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend }\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { legend } = baseConfig\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    pagerIconColor,\n    pagerIconDisableColor,\n    labelFontWeight,\n    maxSize = 1,\n    border,\n    shapeType = 'rectRound',\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n  const labelTextColor = labelColor || labelFontColor\n\n  result.legends = {\n    type: 'discrete',\n    visible: enable,\n    maxCol: Math.max(1, maxSize),\n    maxRow: Math.max(1, maxSize),\n    autoPage: true,\n    orient,\n    position: legendPosition,\n    item: {\n      focus: true,\n      maxWidth: '30%',\n      focusIconStyle: {\n        size: labelFontSize + 2,\n        fill: labelTextColor,\n        fontWeight: labelFontWeight,\n      },\n      shape: {\n        space: border ? 6 : 4,\n        style: (item) => {\n          return {\n            symbolType: shapeType,\n            size: border ? 8 : 10,\n            fillOpacity: 1,\n            opacity: 1,\n            stroke: false,\n            outerBorder: border\n              ? {\n                  stroke: item.shape.fill,\n                  distance: 3,\n                  lineWidth: 1,\n                }\n              : null,\n          }\n        },\n        state: {\n          unSelected: {\n            opacity: 0.2,\n            fillOpacity: 1, // 覆盖 vchart 里的默认值\n          },\n        },\n      },\n      label: {\n        formatMethod: (value) => {\n          return unfoldInfo.colorIdMap[String(value)]?.alias ?? value\n        },\n        style: {\n          fontSize: labelFontSize,\n          fill: labelColor || labelFontColor,\n          fontWeight: labelFontWeight,\n        },\n        state: {\n          unSelected: {\n            fill: labelColor || labelFontColor, // 覆盖vchart里面的默认值\n            fillOpacity: 0.8, // 覆盖 vchart 里的默认值\n          },\n        },\n      },\n      background: {\n        state: {\n          selectedHover: {\n            fill: labelColor || labelFontColor,\n            fillOpacity: 0.05,\n          },\n          unSelectedHover: {\n            fill: null,\n          },\n        },\n      },\n    },\n    pager: {\n      textStyle: {\n        fill: labelTextColor,\n      },\n      handler: {\n        style: {\n          fill: pagerIconColor,\n        },\n        state: {\n          disable: {\n            fill: pagerIconDisableColor,\n          },\n        },\n      },\n    },\n    padding: 0,\n  }\n  return result\n}\n","import { createFormatterByMeasure, findTreeNodesBy } from 'src/pipeline/utils'\nimport type { Legend, Measure, VChartSpecPipe } from 'src/types'\n\nexport const colorLegend: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType, measures = [] } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend }\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { legend } = baseConfig\n  const { enable, position = 'bottom', labelFontColor, labelColor, labelFontSize = 12, labelFontWeight } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  result.legends = {\n    type: 'color',\n    visible: enable,\n    orient,\n    position: legendPosition,\n    padding: 0,\n    field: unfoldInfo.encodingColor,\n    maxWidth: '30%',\n    handlerText: {\n      visible: true,\n      style: {\n        fill: labelColor || labelFontColor,\n        fontSize: labelFontSize,\n        fontWeight: labelFontWeight,\n      },\n    },\n  }\n  const colorMeasure = findTreeNodesBy<Measure>(measures, (m) => m.encoding === 'color')?.[0]\n  if (colorMeasure) {\n    const formatter = createFormatterByMeasure(colorMeasure)\n    result.legends.handlerText!.formatter = formatter\n  }\n  return result\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorPointStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as ILineChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.point?.style) {\n        result.point.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, PointStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const pointStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle } = advancedVSeed\n  const { pointStyle } = markStyle\n  const result = {\n    ...spec,\n    point: {\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(pointStyle) || isEmpty(pointStyle)) {\n    return result\n  }\n\n  const pointStyles = (Array.isArray(pointStyle) ? pointStyle : [pointStyle]) as PointStyle[]\n\n  const customMap = pointStyles.reduce<object>((result, style, index) => {\n    const {\n      pointBorderColor,\n      pointBorderStyle,\n      pointBorderWidth = 1,\n      pointColor,\n      pointColorOpacity,\n      pointSize,\n      pointVisible = true,\n    } = style\n\n    const lineDash = pointBorderStyle === 'dashed' ? [5, 2] : pointBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: pointVisible,\n          size: pointSize,\n          fill: pointColor,\n          fillOpacity: pointColorOpacity,\n          innerBorder: {\n            stroke: pointBorderColor,\n            lineWidth: pointBorderWidth,\n            distance: (pointBorderWidth || 0) / 2,\n            lineDash: lineDash,\n          },\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    point: {\n      ...result.point,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport type { IScatterChartSpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe } from 'src/types'\n\nexport const pointStateDimensionHover: VChartSpecPipe = (spec) => {\n  const point = (spec as IScatterChartSpec).point || {}\n  const result = {\n    ...spec,\n    point: {\n      ...point,\n      state: {\n        ...(point.state || {}),\n        dimension_hover: {\n          scaleX: 1.4,\n          scaleY: 1.4,\n          outerBorder: {\n            lineWidth: 4,\n            strokeOpacity: 0.25,\n            distance: 2,\n          },\n        },\n      },\n    },\n  } as IScatterChartSpec\n  return result\n}\n\nexport const pointStateHover: VChartSpecPipe = (spec, context) => {\n  const point = (spec as IScatterChartSpec).point || {}\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const result = {\n    ...spec,\n    point: {\n      ...point,\n      state: {\n        ...(point.state || {}),\n        hover: {\n          scaleX: 1.4,\n          scaleY: 1.4,\n          stroke: (datum: Datum, context: unknown) => {\n            const field = unfoldInfo.encodingColorId\n            const color = (context as any).seriesColor(datum[field] as string)\n            return color\n          },\n          fillOpacity: 0.6,\n          lineWidth: 1,\n        },\n      },\n    },\n  } as IScatterChartSpec\n  return result\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorLineStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as ILineChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.line?.style) {\n        result.line.style.stroke = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import { isRadar } from 'src/pipeline/utils'\nimport type { VSeed } from 'src/types'\n\nexport const getCurveType = (vseed: VSeed, lineSmooth: boolean = false): string => {\n  if (!lineSmooth) {\n    return 'linear'\n  }\n\n  /**\n   * Tip: 长期来看, 由VChart封装好雷达图与面积图的曲线类型差异, 是一个更好的选择.\n   */\n  return isRadar(vseed) ? 'catmullRomClosed' : 'monotone'\n}\n\nexport const getCurveTension = (vseed: VSeed, lineSmooth: boolean = false): number => {\n  if (!lineSmooth) {\n    return 0\n  }\n\n  /**\n   * Tip: 长期来看, 由VChart封装好雷达图与面积图的曲线类型差异, 是一个更好的选择.\n   */\n  return isRadar(vseed) ? 0.4 : 0\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, LineStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { getCurveTension, getCurveType } from './curve'\n\nexport const lineStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle } = advancedVSeed\n  const { lineStyle } = markStyle\n  const result = {\n    ...spec,\n    line: {\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(lineStyle) || isEmpty(lineStyle)) {\n    return result\n  }\n\n  const lineStyles = (Array.isArray(lineStyle) ? lineStyle : [lineStyle]) as LineStyle[]\n\n  const customMap = lineStyles.reduce<object>((result, style, index) => {\n    const { lineColor, lineColorOpacity, lineSmooth, lineStyle, lineWidth = 2, lineVisible = true } = style\n\n    const dashSegment = lineWidth * 2\n    const dashGap = lineWidth\n\n    const lineDash =\n      lineStyle === 'dashed' ? [dashSegment, dashSegment] : lineStyle === 'dotted' ? [dashGap / 2, dashGap * 2] : [0, 0]\n\n    const curveType = getCurveType(context.vseed, lineSmooth)\n    const curveTension = getCurveTension(context.vseed, lineSmooth)\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (\n          _: Datum,\n          node: {\n            renderNode: {\n              context: {\n                data: Datum[]\n              }\n            }\n          },\n        ) => {\n          const lineData = node.renderNode.context.data\n          for (const d of lineData) {\n            if (selector(d, style.selector)) {\n              return true\n            }\n          }\n          return false\n        },\n        style: {\n          visible: lineVisible,\n          curveType: curveType,\n          curveTension: curveTension,\n          strokeOpacity: lineColorOpacity,\n          stroke: lineColor,\n          lineWidth: lineWidth,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    line: {\n      ...result.line,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport { createFormatter, createFormatterByMeasure, DATUM_HIDE_KEY, findMeasureById } from '../../../../utils'\nimport type {\n  Datum,\n  Dimension,\n  Dimensions,\n  Encoding,\n  FoldInfo,\n  Formatter,\n  Label,\n  Measure,\n  Measures,\n  NumFormat,\n  VChartSpecPipe,\n} from 'src/types'\nimport { isNumber, merge, uniqueBy } from 'remeda'\nimport { selector } from 'src/dataSelector'\nimport { MeasureId } from 'src/dataReshape/constant'\n\nexport const label: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as ILineChartSpec['label']\n\n  return result\n}\n\nexport const generateMeasureValue = (\n  value: number | string,\n  measure: Measure,\n  labelAutoFormat?: boolean,\n  numFormat: NumFormat = {},\n) => {\n  const format = merge(numFormat, measure.numFormat || measure.format)\n  const mergedMeasure = { ...measure, numFormat: format, autoFormat: labelAutoFormat || measure.autoFormat }\n\n  const formatter = createFormatterByMeasure(mergedMeasure)\n  return formatter(value)\n}\n\nexport const generateMeasurePercent = (value: number | string, sum: number, formatter: Formatter) => {\n  if (value === undefined || value === null) return String(value)\n  const num = Number(value)\n  if (Number.isNaN(num)) return String(value)\n\n  const percentValue = num / sum\n  return formatter(percentValue)\n}\n\nexport const buildLabel = (\n  label: Label,\n  vseedMeasures: Measures = [],\n  vseedDimensions: Dimensions = [],\n  advancedVSeedDimensions: Dimensions,\n  advancedVSeedMeasures: Measures,\n  encoding: Encoding,\n  foldInfoList: FoldInfo[],\n) => {\n  const {\n    enable,\n    wrap,\n    showValue,\n    showValuePercent,\n    showDimension,\n    labelOverlap,\n    labelColorSmartInvert,\n    labelStroke,\n    labelColor,\n    labelFontSize,\n    labelFontWeight,\n    labelBackgroundColor,\n    labelPosition,\n    autoFormat,\n    numFormat = {},\n  } = label\n\n  const hasDimLabelEncoding = vseedDimensions.some((item) => encoding.label?.includes(item.id))\n\n  const labelDims = uniqueBy(\n    hasDimLabelEncoding\n      ? vseedDimensions.filter((item) => encoding.label?.includes(item.id))\n      : showDimension\n        ? advancedVSeedDimensions.filter((d) => d.id !== MeasureId)\n        : [],\n    (item: Dimension) => item.id,\n  )\n\n  const labelMeas = uniqueBy(\n    vseedMeasures.filter((item) => encoding.label?.includes(item.id)),\n    (item: Measure) => item.id,\n  )\n\n  const percentFormat: NumFormat = merge(numFormat, {\n    type: 'percent',\n  } as NumFormat)\n\n  const percentFormatter = createFormatter(percentFormat)\n\n  const result = {\n    visible: enable,\n    dataFilter: (data: Datum[]) => {\n      return data.filter((entry) => {\n        return entry.data?.[DATUM_HIDE_KEY] !== true && selector(entry.data as Datum, label.selector, 'Or')\n      })\n    },\n    formatMethod: (_: unknown, datum: Datum) => {\n      const result = []\n\n      const dimLabels = labelDims.map((item: Dimension) => {\n        const id = item.id\n        return datum[id] as number | string\n      })\n\n      const meaLabels = labelMeas.map((item: Measure) =>\n        generateMeasureValue(datum[item.id] as number | string, item, autoFormat, numFormat),\n      )\n\n      result.push(...dimLabels)\n\n      foldInfoList.forEach((foldInfo) => {\n        const { measureId, measureValue, statistics } = foldInfo\n        const measure = findMeasureById(advancedVSeedMeasures, datum[measureId] as string)\n        if (measure) {\n          const measureValueLabel = generateMeasureValue(\n            datum[measureValue] as number | string,\n            measure,\n            autoFormat,\n            numFormat,\n          )\n          // 饼图/环图需要使用实际占比数据\n          const measurePercentLabel = isNumber(datum['__VCHART_ARC_RATIO'])\n            ? generateMeasurePercent(datum['__VCHART_ARC_RATIO'], 1, percentFormatter)\n            : generateMeasurePercent(datum[measureValue] as number | string, statistics.sum, percentFormatter)\n          if (showValue) {\n            result.push(measureValueLabel)\n          }\n          if (showValuePercent) {\n            result.push(measurePercentLabel)\n          }\n        }\n      })\n\n      result.push(...meaLabels)\n\n      if (wrap) {\n        return result\n      }\n      return result.join(' ')\n    },\n    position: labelPosition,\n    style: {\n      stroke: labelStroke,\n      fill: labelColor,\n      fontSize: labelFontSize,\n      fontWeight: labelFontWeight,\n      background: labelBackgroundColor,\n    },\n    smartInvert: labelColorSmartInvert,\n  }\n\n  if (labelOverlap) {\n    ;(result as any).overlap = {\n      hideOnHit: true,\n      clampForce: true,\n    }\n  }\n\n  return result\n}\n","import type { ITooltipSpec } from '@visactor/vchart'\nimport type { TooltipConfig } from 'src/types/properties'\n\nexport const getTooltipStyle = (tooltipConfig: TooltipConfig) => {\n  return {\n    panel: {\n      padding: tooltipConfig.padding,\n      border: {\n        radius: tooltipConfig.borderRadius,\n        width: tooltipConfig.borderWidth,\n        color: tooltipConfig.borderColor,\n      },\n      backgroundColor: tooltipConfig.backgroundColor,\n    },\n    keyLabel: {\n      lineHeight: tooltipConfig.lineHeight,\n      fontSize: tooltipConfig.fontSize,\n      fontColor: tooltipConfig.keyColor,\n    },\n    valueLabel: {\n      lineHeight: tooltipConfig.lineHeight,\n      fontSize: tooltipConfig.fontSize,\n      fontColor: tooltipConfig.valueColor,\n      fontWeight: 'medium',\n    },\n    titleLabel: {\n      fontSize: tooltipConfig.fontSize,\n      lineHeight: tooltipConfig.lineHeight,\n      fontColor: tooltipConfig.titleColor,\n      fontWeight: 'bold',\n    },\n  } as ITooltipSpec['style']\n}\n","import { pipe, uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Measures, VChartSpecPipe, TooltipConfig, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\n\nexport const tooltip: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { measures, datasetReshapeInfo, chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: TooltipConfig }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable = true } = tooltip\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: !!enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        foldInfo,\n        unfoldInfo,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, measures, foldInfo, unfoldInfo),\n    },\n  }\n  return result\n}\n\nexport const createDimensionContent = (\n  dimensions: Dimensions,\n  measures: Measures,\n  foldInfo: FoldInfo,\n  unfoldInfo: UnfoldInfo,\n) => {\n  const { measureId, measureValue, foldMap } = foldInfo\n  const { encodingColor } = unfoldInfo\n\n  return [\n    {\n      visible: true,\n      shapeType: 'rectRound',\n      hasShape: true,\n      key: dimensions.some((d) => d.encoding === 'color')\n        ? (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[encodingColor] as string)) || ''\n            return unfoldInfo.colorIdMap[key].alias ?? key\n          }\n        : (v: unknown) => {\n            const datum = v as Datum\n            const key = (datum && (datum[measureId] as string)) || ''\n            return foldMap[key] ?? key\n          },\n      value: (v: unknown) => {\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    },\n  ]\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures,\n  foldInfo: FoldInfo,\n  unfoldInfo: UnfoldInfo,\n) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item) => item.id),\n    uniqueBy((item) => item.alias),\n  )\n  const meas = pipe(\n    measures.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item) => item.id),\n    uniqueBy((item) => item.alias),\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const defaultContent = {\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const { measureName } = foldInfo\n      const { encodingColor: colorName } = unfoldInfo\n\n      const datum = v as Datum\n      return (datum && (datum[measureName || colorName] as string)) || ''\n    },\n    value: (v: unknown) => {\n      const { measureId, measureValue } = foldInfo\n\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const value = datum[measureValue] as string | number\n      const id = datum[measureId] as string\n      const measure = findMeasureById(measures, id)\n      if (!measure) {\n        return String(value)\n      }\n\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }\n\n  return [...dimContent, defaultContent, ...meaContent]\n}\n","import type { Datum } from 'src/types'\n\nexport const isSubset = (sub: Datum, obj: Datum, excludeMeasuresIds?: string[]) => {\n  return Object.entries(sub).every(([key, value]) => {\n    if (excludeMeasuresIds && excludeMeasuresIds.includes(key)) {\n      return false\n    }\n\n    if (typeof value === 'string') {\n      return obj[key] === value\n    }\n    if (typeof value === 'number') {\n      return obj[key] === value\n    }\n    return true\n  })\n}\n\nexport const ANNOTATION_AREA_TEXT_STYLE_BY_POSITION = {\n  top: {\n    textAlign: 'center',\n    textBaseline: 'top',\n  },\n  topRight: {\n    textAlign: 'right',\n    textBaseline: 'top',\n  },\n  topLeft: {\n    textAlign: 'left',\n    textBaseline: 'top',\n  },\n  bottom: {\n    textAlign: 'center',\n    textBaseline: 'bottom',\n  },\n  bottomLeft: {\n    textAlign: 'left',\n    textBaseline: 'bottom',\n  },\n  bottomRight: {\n    textAlign: 'right',\n    textBaseline: 'bottom',\n  },\n  left: {\n    textAlign: 'left',\n    textBaseline: 'middle',\n  },\n  right: {\n    textAlign: 'right',\n    textBaseline: 'middle',\n  },\n}\n","import type { ISpec, IMarkPointSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, Selector, Selectors, SpecPipelineContext, VChartSpecPipe, VSeed } from 'src/types'\nimport { isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const generateAnnotationPointPipe = (options: {\n  findSelectedDatas?: (\n    dataset: Datum[],\n    selector: Selector | Selectors | undefined | null,\n    spec: ISpec,\n    context: SpecPipelineContext,\n  ) => Datum[]\n  generateMarkPoint?: (datum: Datum, spec: ISpec, context: SpecPipelineContext) => IMarkPointSpec[] | undefined\n}) => {\n  const findSelectedDatas = options.findSelectedDatas ?? ((dataset, s) => dataset.filter((datum) => selector(datum, s)))\n  const generateMarkPoint =\n    options.generateMarkPoint ??\n    ((datum: Datum) => {\n      return [\n        {\n          coordinate: (data: Datum[]) => {\n            return data.find((item) => isSubset(datum, item))\n          },\n        },\n      ]\n    })\n\n  return ((spec: ISpec, context: SpecPipelineContext) => {\n    const { advancedVSeed, vseed } = context\n    const { annotation, config } = advancedVSeed\n\n    if (!annotation || !annotation.annotationPoint) {\n      return spec\n    }\n\n    const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationPoint\n    const { annotationPoint } = annotation\n    const annotationPointList = Array.isArray(annotationPoint) ? annotationPoint : [annotationPoint]\n    const isHorizontalBar = isBarLikeChart(advancedVSeed as VSeed)\n    const defaultStyle = isHorizontalBar\n      ? {\n          textAlign: 'right',\n          textBaseline: 'middle',\n        }\n      : {\n          textAlign: 'center',\n          textBaseline: 'top',\n        }\n\n    const markPoint = annotationPointList.flatMap((annotationPoint) => {\n      const {\n        selector: selectorPoint,\n        text = '',\n        textColor = theme?.textColor ?? '#ffffff',\n        textFontSize = theme?.textFontSize ?? 12,\n        textFontWeight = theme?.textFontWeight ?? 400,\n        textAlign = defaultStyle.textAlign,\n        textBaseline = defaultStyle.textBaseline,\n        textBackgroundBorderColor = theme?.textBackgroundBorderColor,\n        textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n        textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n        textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n        textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n        textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n        offsetX = theme?.offsetX ?? 0,\n        offsetY = theme?.offsetY ?? 0,\n      } = annotationPoint\n\n      const dataset = advancedVSeed.dataset.flat()\n      const selectedData = selectorPoint ? findSelectedDatas(dataset, selectorPoint, spec, context) : []\n      const dx = -10 - (isHorizontalBar ? (textFontSize as number) : 0) // 由于vchart tag实现问题，需要设置这个强制偏移量\n      const dy = isHorizontalBar ? 0 : (textFontSize as number)\n      const markPointStyle = {\n        zIndex: ANNOTATION_Z_INDEX,\n        regionRelative: true,\n        itemLine: {\n          visible: false,\n        },\n        itemContent: {\n          offsetY,\n          offsetX,\n          confine: true,\n          text: {\n            text: text,\n            style: {\n              opacity: 0.95,\n              visible: true,\n              textAlign: textAlign,\n              textBaseline: textBaseline,\n              fill: textColor,\n              stroke: textBackgroundColor,\n              lineWidth: 1,\n              fontSize: textFontSize,\n              fontWeight: textFontWeight,\n              dx,\n              dy,\n            },\n            labelBackground: {\n              visible: textBackgroundVisible,\n              padding: textBackgroundPadding,\n              style: {\n                opacity: 0.95,\n                cornerRadius: textBackgroundBorderRadius ?? 4,\n                fill: textBackgroundColor,\n                stroke: textBackgroundBorderColor,\n                lineWidth: textBackgroundBorderWidth,\n                dx,\n                dy,\n              },\n            },\n          },\n        },\n      } as Partial<IMarkPointSpec>\n\n      return selectedData.reduce((res: IMarkPointSpec[], datum) => {\n        const marks = generateMarkPoint(datum, spec, context)\n\n        if (marks && marks.length) {\n          marks.forEach((mark) => {\n            res.push({\n              ...markPointStyle,\n              ...mark,\n            } as IMarkPointSpec)\n          })\n        }\n\n        return res\n      }, [])\n    }) as unknown as IMarkPointSpec[]\n\n    return {\n      ...spec,\n      markPoint,\n    } as ISpec\n  }) as VChartSpecPipe\n}\n","import type { VChartSpecPipe } from 'src/types'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPoint: VChartSpecPipe = generateAnnotationPointPipe({})\n","function o(r){return Array.isArray(r)}export{o as a};\n","import type { ILineChartSpec, IMarkLineSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isArray, isNumber, isString } from 'remeda'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\n\nexport const annotationVerticalLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, datasetReshapeInfo, config } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  if (!annotation || !annotation.annotationVerticalLine) {\n    return spec\n  }\n\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationVerticalLine\n  const { annotationVerticalLine } = annotation\n  const annotationVerticalLineList = Array.isArray(annotationVerticalLine)\n    ? annotationVerticalLine\n    : [annotationVerticalLine]\n\n  const positionMap = {\n    outsideStart: 'start',\n    outsideEnd: 'end',\n    outsideMiddle: 'middle',\n    insideStart: 'insideStartTop',\n    insideMiddle: 'insideMiddleTop',\n    insideEnd: 'insideEndTop',\n  }\n  const markLine = annotationVerticalLineList.flatMap((annotationVerticalLine) => {\n    const {\n      selector: selectorPoint,\n      xValue,\n      text = '',\n      textPosition = 'insideEnd',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n      textAlign = 'center',\n      textBaseline = 'top',\n\n      lineColor = theme?.lineColor ?? '#212121',\n      lineStyle = theme?.lineStyle ?? 'dashed',\n      lineVisible = theme?.lineStyle ?? true,\n      lineWidth = theme?.lineWidth ?? 1,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#212121',\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n    } = annotationVerticalLine\n\n    const dataset = advancedVSeed.dataset.flat()\n\n    const generateOneMarkLine = (x: number | string) => ({\n      x,\n      autoRange: true,\n      zIndex: ANNOTATION_Z_INDEX,\n      line: {\n        style: {\n          visible: lineVisible,\n          stroke: lineColor,\n          lineStyle: lineStyle,\n          lineWidth: lineWidth,\n          lineDash: lineStyle === 'dashed' ? [5, 2] : lineStyle === 'dotted' ? [2, 5] : [0],\n        },\n      },\n      label: {\n        confine: true,\n        text: text,\n        position: (positionMap as any)[textPosition || 'insideEnd'],\n        style: {\n          opacity: 0.95,\n          dx: 5,\n          visible: true,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          fill: textColor,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            dx: 5,\n            cornerRadius: textBackgroundBorderRadius,\n            fill: textBackgroundColor,\n            fillOpacity: 1,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n          },\n        },\n      },\n      startSymbol: {\n        visible: theme?.startSymbolVisible ?? true,\n        symbolType: theme?.startSymbolType ?? 'triangleDown',\n        size: 5 + (lineWidth || 1),\n        style: {\n          dy: -3,\n          fill: lineColor,\n        },\n      },\n      endSymbol: {\n        visible: theme?.endSymbolVisible ?? false,\n        symbolType: theme?.endSymbolType ?? 'arrow',\n        size: 10 + (lineWidth || 1),\n        style: {\n          dy: 4,\n          fill: lineColor,\n        },\n      },\n    })\n\n    if ((!selectorPoint && isArray(xValue)) || isString(xValue) || isNumber(xValue)) {\n      const xValueArr = Array.isArray(xValue) ? xValue : [xValue]\n      return xValueArr.map(generateOneMarkLine)\n    }\n\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n\n    return selectedData.map((datum) => {\n      if (datum[unfoldInfo.encodingX]) {\n        return generateOneMarkLine(datum[unfoldInfo.encodingX] as string)\n      }\n      if (datum[foldInfo.measureValue]) {\n        return generateOneMarkLine(datum[foldInfo.measureValue] as string)\n      }\n      return {}\n    })\n  }) as IMarkLineSpec[]\n\n  const specMarkLine = ((spec as ILineChartSpec).markLine as IMarkLineSpec[]) || []\n  const newMarkLine = [...specMarkLine, ...(markLine || [])]\n\n  return {\n    ...spec,\n    markLine: newMarkLine,\n  }\n}\n","import type { ILineChartSpec, IMarkLineSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isArray, isNumber, isString } from 'remeda'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\n\nexport const annotationHorizontalLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, datasetReshapeInfo, config } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  if (!annotation || !annotation.annotationHorizontalLine) {\n    return spec\n  }\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationHorizontalLine\n  const { annotationHorizontalLine } = annotation\n  const annotationHorizontalLineList = Array.isArray(annotationHorizontalLine)\n    ? annotationHorizontalLine\n    : [annotationHorizontalLine]\n\n  const positionMap = {\n    outsideStart: 'start',\n    outsideEnd: 'end',\n    outsideMiddle: 'middle',\n    insideStart: 'insideStartTop',\n    insideMiddle: 'insideMiddleTop',\n    insideEnd: 'insideEndTop',\n  }\n\n  const markLine = annotationHorizontalLineList.flatMap((annotationHorizontalLine) => {\n    const {\n      selector: selectorPoint,\n      yValue,\n      text = '',\n      textPosition = 'insideEnd',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n      textAlign = 'right',\n      textBaseline = 'bottom',\n\n      lineColor = theme?.lineColor ?? '#212121',\n      lineStyle = theme?.lineStyle ?? 'dashed',\n      lineVisible = theme?.lineStyle ?? true,\n      lineWidth = theme?.lineWidth ?? 1,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#212121',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#212121',\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 2,\n    } = annotationHorizontalLine\n\n    const dataset = advancedVSeed.dataset.flat()\n\n    const generateOneMarkLine = (y: string | number) => {\n      return {\n        y,\n        autoRange: true,\n        zIndex: ANNOTATION_Z_INDEX,\n        line: {\n          style: {\n            visible: lineVisible,\n            stroke: lineColor,\n            lineWidth: lineWidth,\n            lineDash: lineStyle === 'dashed' ? [5, 2] : lineStyle === 'dotted' ? [2, 5] : [0],\n          },\n        },\n        label: {\n          confine: true,\n          text: text,\n          position: (positionMap as any)[textPosition || 'insideEnd'],\n          style: {\n            opacity: 0.95,\n            visible: true,\n            dy: 4,\n            stroke: textBackgroundColor,\n            lineWidth: 1,\n            textAlign: textAlign,\n            textBaseline: textBaseline,\n            fill: textColor,\n            fontSize: textFontSize,\n            fontWeight: textFontWeight,\n          },\n          labelBackground: {\n            visible: textBackgroundVisible,\n            padding: textBackgroundPadding,\n            style: {\n              opacity: 0.95,\n              dy: 4,\n              cornerRadius: textBackgroundBorderRadius,\n              fill: textBackgroundColor,\n              stroke: textBackgroundBorderColor,\n              lineWidth: textBackgroundBorderWidth,\n              fillOpacity: 1,\n            },\n          },\n        },\n        startSymbol: {\n          visible: theme?.startSymbolVisible ?? true,\n          symbolType: theme?.startSymbolType ?? 'triangleDown',\n          size: 5 + (lineWidth || 1),\n          style: {\n            dx: 3,\n            fill: lineColor,\n          },\n        },\n        endSymbol: {\n          visible: theme?.endSymbolVisible ?? false,\n          symbolType: theme?.endSymbolType ?? 'arrow',\n          size: 10 + (lineWidth || 1),\n          style: {\n            dx: -4,\n            fill: lineColor,\n          },\n        },\n      }\n    }\n    if ((!selectorPoint && isArray(yValue)) || isString(yValue) || isNumber(yValue)) {\n      const yValueArr = Array.isArray(yValue) ? yValue : [yValue]\n      return yValueArr.map(generateOneMarkLine)\n    }\n\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n\n    return selectedData.map((datum) => {\n      if (datum[unfoldInfo.encodingY]) {\n        return generateOneMarkLine(datum[unfoldInfo.encodingY] as string)\n      }\n      if (datum[foldInfo.measureValue]) {\n        return generateOneMarkLine(datum[foldInfo.measureValue] as string)\n      }\n      return {}\n    })\n  }) as IMarkLineSpec[]\n  const specMarkLine = ((spec as ILineChartSpec).markLine as IMarkLineSpec[]) || []\n  const newMarkLine = [...specMarkLine, ...(markLine || [])]\n  return {\n    ...spec,\n    markLine: newMarkLine,\n  }\n}\n","/**\n * @description 适用于线图、面积图等的区块标注，计算标注区块的时候，只考虑点的大小\n */\nimport type { ICartesianSeries, ILineChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, VChartSpecPipe, VSeed } from 'src/types'\nimport { ANNOTATION_AREA_TEXT_STYLE_BY_POSITION, isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const annotationArea: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationArea) {\n    return spec\n  }\n\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationArea\n  const { annotationArea } = annotation\n  const annotationAreaList = Array.isArray(annotationArea) ? annotationArea : [annotationArea]\n\n  const positionMap = {\n    top: 'insideTop',\n    topRight: 'insideTopRight',\n    topLeft: 'insideTopLeft',\n    bottom: 'insideBottom',\n    bottomLeft: 'insideBottomLeft',\n    bottomRight: 'insideBottomRight',\n    left: 'insideLeft',\n    right: 'insideRight',\n  }\n  const defaultTextPosition = isBarLikeChart(advancedVSeed as VSeed) ? 'right' : 'top'\n\n  const markArea = annotationAreaList.flatMap((annotationArea) => {\n    const {\n      selector: selectorPoint,\n      text = '',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#191d24',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#191d24',\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 4,\n\n      areaColor = theme?.areaColor ?? '#888888',\n      areaColorOpacity = theme?.areaColorOpacity ?? 0.15,\n      areaBorderColor = theme?.areaBorderColor ?? '#888888',\n      areaBorderRadius = theme?.areaBorderRadius ?? 4,\n      areaBorderWidth = theme?.areaBorderWidth ?? 1,\n      areaLineDash = theme?.areaLineDash,\n\n      outerPadding = theme?.outerPadding ?? 4,\n    } = annotationArea\n\n    const dataset = advancedVSeed.dataset.flat()\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n    const textPosition: string = annotationArea.textPosition ?? defaultTextPosition\n    const textAlign =\n      annotationArea.textAlign ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textAlign\n    const textBaseline =\n      annotationArea.textBaseline ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textBaseline\n\n    return {\n      zIndex: ANNOTATION_Z_INDEX,\n      regionRelative: true,\n      positions: (data: Datum[], context: ICartesianSeries) => {\n        const positionData = data.filter((item) => selectedData.some((datum) => isSubset(datum, item)))\n        const xyList = positionData.map((datum) => context.dataToPosition(datum) as { x: number; y: number })\n\n        const yAxisHelper = context.getYAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n        const xAxisHelper = context.getXAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n\n        if (typeof xAxisHelper?.getBandwidth === 'function') {\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const minX = Math.min(...xyList.map((item) => item.x)) - (outerPadding || 4)\n          const maxX = Math.max(...xyList.map((item) => item.x)) + (outerPadding || 4)\n          const minY = 0\n          const maxY = regionRect.height\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        if (typeof yAxisHelper?.getBandwidth === 'function') {\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const minY = Math.min(...xyList.map((item) => item.y)) - (outerPadding || 4)\n          const maxY = Math.max(...xyList.map((item) => item.y)) + (outerPadding || 4)\n          const minX = 0\n          const maxX = regionRect.width\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        return []\n      },\n      label: {\n        position: (positionMap as any)[textPosition],\n        visible: true,\n        text: text,\n        style: {\n          opacity: 0.95,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          fill: textColor,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            cornerRadius: textBackgroundBorderRadius ?? 4,\n            fill: textBackgroundColor,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n            fillOpacity: 1,\n          },\n        },\n      },\n      area: {\n        style: {\n          visible: true,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n          stroke: areaBorderColor,\n          lineWidth: areaBorderWidth,\n          cornerRadius: areaBorderRadius,\n          lineDash: areaLineDash,\n        },\n      },\n    }\n  }) as ILineChartSpec['markArea']\n\n  return {\n    ...spec,\n    markArea: markArea,\n  }\n}\n","import isType from \"./isType\";\n\nconst isNumber = (value, fuzzy = !1) => {\n    const type = typeof value;\n    return fuzzy ? \"number\" === type : \"number\" === type || isType(value, \"Number\");\n};\n\nexport default isNumber;\n//# sourceMappingURL=isNumber.js.map","const isNil = value => null == value;\n\nexport default isNil;\n//# sourceMappingURL=isNil.js.map","const clamp = function(input, min, max) {\n    return input < min ? min : input > max ? max : input;\n};\n\nexport default clamp;\n//# sourceMappingURL=clamp.js.map","export default function hslToRgb(h, s, l) {\n    s /= 100, l /= 100;\n    const c = (1 - Math.abs(2 * l - 1)) * s, x = c * (1 - Math.abs(h / 60 % 2 - 1)), m = l - c / 2;\n    let r = 0, g = 0, b = 0;\n    return 0 <= h && h < 60 ? (r = c, g = x, b = 0) : 60 <= h && h < 120 ? (r = x, g = c, \n    b = 0) : 120 <= h && h < 180 ? (r = 0, g = c, b = x) : 180 <= h && h < 240 ? (r = 0, \n    g = x, b = c) : 240 <= h && h < 300 ? (r = x, g = 0, b = c) : 300 <= h && h < 360 && (r = c, \n    g = 0, b = x), r = Math.round(255 * (r + m)), g = Math.round(255 * (g + m)), b = Math.round(255 * (b + m)), \n    {\n        r: r,\n        g: g,\n        b: b\n    };\n}\n//# sourceMappingURL=hslToRgb.js.map","export default function rgbToHsl(r, g, b) {\n    r /= 255, g /= 255, b /= 255;\n    const cMin = Math.min(r, g, b), cMax = Math.max(r, g, b), delta = cMax - cMin;\n    let h = 0, s = 0, l = 0;\n    return h = 0 === delta ? 0 : cMax === r ? (g - b) / delta % 6 : cMax === g ? (b - r) / delta + 2 : (r - g) / delta + 4, \n    h = Math.round(60 * h), h < 0 && (h += 360), l = (cMax + cMin) / 2, s = 0 === delta ? 0 : delta / (1 - Math.abs(2 * l - 1)), \n    s = +(100 * s).toFixed(1), l = +(100 * l).toFixed(1), {\n        h: h,\n        s: s,\n        l: l\n    };\n}\n//# sourceMappingURL=rgbToHsl.js.map","import { clamp, isArray, isNil, isNumber, isValid } from \"../common\";\n\nimport hslToRgb from \"./hslToRgb\";\n\nimport rgbToHsl from \"./rgbToHsl\";\n\nconst REG_HEX = /^#([0-9a-f]{3,8})$/, DEFAULT_COLORS_OPACITY = {\n    transparent: 4294967040\n};\n\nexport const DEFAULT_COLORS = {\n    aliceblue: 15792383,\n    antiquewhite: 16444375,\n    aqua: 65535,\n    aquamarine: 8388564,\n    azure: 15794175,\n    beige: 16119260,\n    bisque: 16770244,\n    black: 0,\n    blanchedalmond: 16772045,\n    blue: 255,\n    blueviolet: 9055202,\n    brown: 10824234,\n    burlywood: 14596231,\n    cadetblue: 6266528,\n    chartreuse: 8388352,\n    chocolate: 13789470,\n    coral: 16744272,\n    cornflowerblue: 6591981,\n    cornsilk: 16775388,\n    crimson: 14423100,\n    cyan: 65535,\n    darkblue: 139,\n    darkcyan: 35723,\n    darkgoldenrod: 12092939,\n    darkgray: 11119017,\n    darkgreen: 25600,\n    darkgrey: 11119017,\n    darkkhaki: 12433259,\n    darkmagenta: 9109643,\n    darkolivegreen: 5597999,\n    darkorange: 16747520,\n    darkorchid: 10040012,\n    darkred: 9109504,\n    darksalmon: 15308410,\n    darkseagreen: 9419919,\n    darkslateblue: 4734347,\n    darkslategray: 3100495,\n    darkslategrey: 3100495,\n    darkturquoise: 52945,\n    darkviolet: 9699539,\n    deeppink: 16716947,\n    deepskyblue: 49151,\n    dimgray: 6908265,\n    dimgrey: 6908265,\n    dodgerblue: 2003199,\n    firebrick: 11674146,\n    floralwhite: 16775920,\n    forestgreen: 2263842,\n    fuchsia: 16711935,\n    gainsboro: 14474460,\n    ghostwhite: 16316671,\n    gold: 16766720,\n    goldenrod: 14329120,\n    gray: 8421504,\n    green: 32768,\n    greenyellow: 11403055,\n    grey: 8421504,\n    honeydew: 15794160,\n    hotpink: 16738740,\n    indianred: 13458524,\n    indigo: 4915330,\n    ivory: 16777200,\n    khaki: 15787660,\n    lavender: 15132410,\n    lavenderblush: 16773365,\n    lawngreen: 8190976,\n    lemonchiffon: 16775885,\n    lightblue: 11393254,\n    lightcoral: 15761536,\n    lightcyan: 14745599,\n    lightgoldenrodyellow: 16448210,\n    lightgray: 13882323,\n    lightgreen: 9498256,\n    lightgrey: 13882323,\n    lightpink: 16758465,\n    lightsalmon: 16752762,\n    lightseagreen: 2142890,\n    lightskyblue: 8900346,\n    lightslategray: 7833753,\n    lightslategrey: 7833753,\n    lightsteelblue: 11584734,\n    lightyellow: 16777184,\n    lime: 65280,\n    limegreen: 3329330,\n    linen: 16445670,\n    magenta: 16711935,\n    maroon: 8388608,\n    mediumaquamarine: 6737322,\n    mediumblue: 205,\n    mediumorchid: 12211667,\n    mediumpurple: 9662683,\n    mediumseagreen: 3978097,\n    mediumslateblue: 8087790,\n    mediumspringgreen: 64154,\n    mediumturquoise: 4772300,\n    mediumvioletred: 13047173,\n    midnightblue: 1644912,\n    mintcream: 16121850,\n    mistyrose: 16770273,\n    moccasin: 16770229,\n    navajowhite: 16768685,\n    navy: 128,\n    oldlace: 16643558,\n    olive: 8421376,\n    olivedrab: 7048739,\n    orange: 16753920,\n    orangered: 16729344,\n    orchid: 14315734,\n    palegoldenrod: 15657130,\n    palegreen: 10025880,\n    paleturquoise: 11529966,\n    palevioletred: 14381203,\n    papayawhip: 16773077,\n    peachpuff: 16767673,\n    peru: 13468991,\n    pink: 16761035,\n    plum: 14524637,\n    powderblue: 11591910,\n    purple: 8388736,\n    rebeccapurple: 6697881,\n    red: 16711680,\n    rosybrown: 12357519,\n    royalblue: 4286945,\n    saddlebrown: 9127187,\n    salmon: 16416882,\n    sandybrown: 16032864,\n    seagreen: 3050327,\n    seashell: 16774638,\n    sienna: 10506797,\n    silver: 12632256,\n    skyblue: 8900331,\n    slateblue: 6970061,\n    slategray: 7372944,\n    slategrey: 7372944,\n    snow: 16775930,\n    springgreen: 65407,\n    steelblue: 4620980,\n    tan: 13808780,\n    teal: 32896,\n    thistle: 14204888,\n    tomato: 16737095,\n    turquoise: 4251856,\n    violet: 15631086,\n    wheat: 16113331,\n    white: 16777215,\n    whitesmoke: 16119285,\n    yellow: 16776960,\n    yellowgreen: 10145074\n};\n\nfunction hex(value) {\n    return ((value = Math.max(0, Math.min(255, Math.round(value) || 0))) < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction rgb(value) {\n    return isNumber(value) ? new RGB(value >> 16, value >> 8 & 255, 255 & value, 1) : isArray(value) ? new RGB(value[0], value[1], value[2]) : new RGB(255, 255, 255);\n}\n\nfunction rgba(value) {\n    return isNumber(value) ? new RGB(value >>> 24, value >>> 16 & 255, value >>> 8 & 255, 255 & value) : isArray(value) ? new RGB(value[0], value[1], value[2], value[3]) : new RGB(255, 255, 255, 1);\n}\n\nfunction SRGBToLinear(c) {\n    return c < .04045 ? .0773993808 * c : Math.pow(.9478672986 * c + .0521327014, 2.4);\n}\n\nfunction LinearToSRGB(c) {\n    return c < .0031308 ? 12.92 * c : 1.055 * Math.pow(c, .41666) - .055;\n}\n\nconst setHex = (formatValue, forceHex) => {\n    const isHex = REG_HEX.exec(formatValue);\n    if (forceHex || isHex) {\n        const hex = parseInt(isHex[1], 16), hexLength = isHex[1].length;\n        return 3 === hexLength ? new RGB((hex >> 8 & 15) + ((hex >> 8 & 15) << 4), (hex >> 4 & 15) + ((hex >> 4 & 15) << 4), (15 & hex) + ((15 & hex) << 4), 1) : 6 === hexLength ? rgb(hex) : 8 === hexLength ? new RGB(hex >> 24 & 255, hex >> 16 & 255, hex >> 8 & 255, (255 & hex) / 255) : null;\n    }\n};\n\nexport class Color {\n    static Brighter(source, b = 1) {\n        return 1 === b ? source : new Color(source).brighter(b).toRGBA();\n    }\n    static SetOpacity(source, o = 1) {\n        return 1 === o ? source : new Color(source).setOpacity(o).toRGBA();\n    }\n    static getColorBrightness(source, model = \"hsl\") {\n        const color = source instanceof Color ? source : new Color(source);\n        switch (model) {\n          case \"hsv\":\n          default:\n            return color.getHSVBrightness();\n\n          case \"hsl\":\n            return color.getHSLBrightness();\n\n          case \"lum\":\n            return color.getLuminance();\n\n          case \"lum2\":\n            return color.getLuminance2();\n\n          case \"lum3\":\n            return color.getLuminance3();\n\n          case \"wcag\":\n            return color.getLuminanceWCAG();\n        }\n    }\n    static parseColorString(value) {\n        if (isValid(DEFAULT_COLORS_OPACITY[value])) return rgba(DEFAULT_COLORS_OPACITY[value]);\n        if (isValid(DEFAULT_COLORS[value])) return rgb(DEFAULT_COLORS[value]);\n        const formatValue = `${value}`.trim().toLowerCase(), hexRes = setHex(formatValue);\n        if (void 0 !== hexRes) return hexRes;\n        if (/^(rgb|RGB|rgba|RGBA)/.test(formatValue)) {\n            const aColor = formatValue.replace(/(?:\\(|\\)|rgba|RGBA|rgb|RGB)*/g, \"\").split(\",\");\n            return new RGB(parseInt(aColor[0], 10), parseInt(aColor[1], 10), parseInt(aColor[2], 10), parseFloat(aColor[3]));\n        }\n        if (/^(hsl|HSL|hsla|HSLA)/.test(formatValue)) {\n            const aColor = formatValue.replace(/(?:\\(|\\)|hsla|HSLA|hsl|HSL)*/g, \"\").split(\",\"), rgb = hslToRgb(parseInt(aColor[0], 10), parseInt(aColor[1], 10), parseInt(aColor[2], 10));\n            return new RGB(rgb.r, rgb.g, rgb.b, parseFloat(aColor[3]));\n        }\n    }\n    constructor(value) {\n        const color = Color.parseColorString(value);\n        color ? this.color = color : (console.warn(`Warn: 传入${value}无法解析为Color`), this.color = new RGB(255, 255, 255));\n    }\n    toRGBA() {\n        return this.color.formatRgb();\n    }\n    toString() {\n        return this.color.formatRgb();\n    }\n    toHex() {\n        return this.color.formatHex();\n    }\n    toHsl() {\n        return this.color.formatHsl();\n    }\n    brighter(k) {\n        const {r: r, g: g, b: b} = this.color;\n        return this.color.r = Math.max(0, Math.min(255, Math.floor(r * k))), this.color.g = Math.max(0, Math.min(255, Math.floor(g * k))), \n        this.color.b = Math.max(0, Math.min(255, Math.floor(b * k))), this;\n    }\n    add(color) {\n        const {r: r, g: g, b: b} = this.color;\n        return this.color.r += Math.min(255, r + color.color.r), this.color.g += Math.min(255, g + color.color.g), \n        this.color.b += Math.min(255, b + color.color.b), this;\n    }\n    sub(color) {\n        return this.color.r = Math.max(0, this.color.r - color.color.r), this.color.g = Math.max(0, this.color.g - color.color.g), \n        this.color.b = Math.max(0, this.color.b - color.color.b), this;\n    }\n    multiply(color) {\n        const {r: r, g: g, b: b} = this.color;\n        return this.color.r = Math.max(0, Math.min(255, Math.floor(r * color.color.r))), \n        this.color.g = Math.max(0, Math.min(255, Math.floor(g * color.color.g))), this.color.b = Math.max(0, Math.min(255, Math.floor(b * color.color.b))), \n        this;\n    }\n    getHSVBrightness() {\n        return Math.max(this.color.r, this.color.g, this.color.b) / 255;\n    }\n    getHSLBrightness() {\n        return .5 * (Math.max(this.color.r, this.color.g, this.color.b) / 255 + Math.min(this.color.r, this.color.g, this.color.b) / 255);\n    }\n    setHsl(h, s, l) {\n        const opacity = this.color.opacity, hsl = rgbToHsl(this.color.r, this.color.g, this.color.b), rgb = hslToRgb(isNil(h) ? hsl.h : clamp(h, 0, 360), isNil(s) ? hsl.s : s >= 0 && s <= 1 ? 100 * s : s, isNil(l) ? hsl.l : l <= 1 && l >= 0 ? 100 * l : l);\n        return this.color = new RGB(rgb.r, rgb.g, rgb.b, opacity), this;\n    }\n    setRGB(r, g, b) {\n        return !isNil(r) && (this.color.r = r), !isNil(g) && (this.color.g = g), !isNil(b) && (this.color.b = b), \n        this;\n    }\n    setHex(value) {\n        const formatValue = `${value}`.trim().toLowerCase(), res = setHex(formatValue, !0);\n        return null != res ? res : this;\n    }\n    setColorName(name) {\n        const hex = DEFAULT_COLORS[name.toLowerCase()];\n        return void 0 !== hex ? this.setHex(hex) : console.warn(\"THREE.Color: Unknown color \" + name), \n        this;\n    }\n    setScalar(scalar) {\n        return this.color.r = scalar, this.color.g = scalar, this.color.b = scalar, this;\n    }\n    setOpacity(o = 1) {\n        return this.color.opacity = o, this;\n    }\n    getLuminance() {\n        return (.2126 * this.color.r + .7152 * this.color.g + .0722 * this.color.b) / 255;\n    }\n    getLuminance2() {\n        return (.2627 * this.color.r + .678 * this.color.g + .0593 * this.color.b) / 255;\n    }\n    getLuminance3() {\n        return (.299 * this.color.r + .587 * this.color.g + .114 * this.color.b) / 255;\n    }\n    getLuminanceWCAG() {\n        const RsRGB = this.color.r / 255, GsRGB = this.color.g / 255, BsRGB = this.color.b / 255;\n        let R, G, B;\n        R = RsRGB <= .03928 ? RsRGB / 12.92 : Math.pow((RsRGB + .055) / 1.055, 2.4), G = GsRGB <= .03928 ? GsRGB / 12.92 : Math.pow((GsRGB + .055) / 1.055, 2.4), \n        B = BsRGB <= .03928 ? BsRGB / 12.92 : Math.pow((BsRGB + .055) / 1.055, 2.4);\n        return .2126 * R + .7152 * G + .0722 * B;\n    }\n    clone() {\n        return new Color(this.color.toString());\n    }\n    copyGammaToLinear(color, gammaFactor = 2) {\n        return this.color.r = Math.pow(color.color.r, gammaFactor), this.color.g = Math.pow(color.color.g, gammaFactor), \n        this.color.b = Math.pow(color.color.b, gammaFactor), this;\n    }\n    copyLinearToGamma(color, gammaFactor = 2) {\n        const safeInverse = gammaFactor > 0 ? 1 / gammaFactor : 1;\n        return this.color.r = Math.pow(color.color.r, safeInverse), this.color.g = Math.pow(color.color.g, safeInverse), \n        this.color.b = Math.pow(color.color.b, safeInverse), this;\n    }\n    convertGammaToLinear(gammaFactor) {\n        return this.copyGammaToLinear(this, gammaFactor), this;\n    }\n    convertLinearToGamma(gammaFactor) {\n        return this.copyLinearToGamma(this, gammaFactor), this;\n    }\n    copySRGBToLinear(color) {\n        return this.color.r = SRGBToLinear(color.color.r), this.color.g = SRGBToLinear(color.color.g), \n        this.color.b = SRGBToLinear(color.color.b), this;\n    }\n    copyLinearToSRGB(color) {\n        return this.color.r = LinearToSRGB(color.color.r), this.color.g = LinearToSRGB(color.color.g), \n        this.color.b = LinearToSRGB(color.color.b), this;\n    }\n    convertSRGBToLinear() {\n        return this.copySRGBToLinear(this), this;\n    }\n    convertLinearToSRGB() {\n        return this.copyLinearToSRGB(this), this;\n    }\n}\n\nexport class RGB {\n    constructor(r, g, b, opacity) {\n        this.r = isNaN(+r) ? 255 : Math.max(0, Math.min(255, +r)), this.g = isNaN(+g) ? 255 : Math.max(0, Math.min(255, +g)), \n        this.b = isNaN(+b) ? 255 : Math.max(0, Math.min(255, +b)), isValid(opacity) ? this.opacity = isNaN(+opacity) ? 1 : Math.max(0, Math.min(1, +opacity)) : this.opacity = 1;\n    }\n    formatHex() {\n        return `#${hex(this.r) + hex(this.g) + hex(this.b) + (1 === this.opacity ? \"\" : hex(255 * this.opacity))}`;\n    }\n    formatRgb() {\n        const opacity = this.opacity;\n        return `${1 === opacity ? \"rgb(\" : \"rgba(\"}${this.r},${this.g},${this.b}${1 === opacity ? \")\" : `,${opacity})`}`;\n    }\n    formatHsl() {\n        const opacity = this.opacity, {h: h, s: s, l: l} = rgbToHsl(this.r, this.g, this.b);\n        return `${1 === opacity ? \"hsl(\" : \"hsla(\"}${h},${s}%,${l}%${1 === opacity ? \")\" : `,${opacity})`}`;\n    }\n    toString() {\n        return this.formatHex();\n    }\n}\n//# sourceMappingURL=Color.js.map","export function clamper(a, b) {\n    let t;\n    return a > b && (t = a, a = b, b = t), x => Math.max(a, Math.min(b, x));\n}\n//# sourceMappingURL=clamper.js.map","import type { ICartesianSeries, IChart, ILineChartSpec, IVChart } from '@visactor/vchart'\nimport { array, clamper, Color as VUtilColor } from '@visactor/vutils'\nimport { isNullish, isNumber, isPlainObject } from 'remeda'\nimport type { AnnotationHorizontalLine, VChartSpecPipe, Color } from 'src/types'\n\ninterface SplitConfig {\n  points: { x: number; y: number }[]\n  splitCoordinate: number\n  lineStroke: {\n    gradient: string\n    x0: number\n    x1: number\n    y0: number\n    y1: number\n    stops: {\n      color: string\n      offset: number\n    }[]\n  }\n  areaFill: {\n    gradient: string\n    x0: number\n    x1: number\n    y0: number\n    y1: number\n    stops: {\n      color: string\n      offset: number\n    }[]\n  }\n}\n\nconst formatGradientStops = (stops: { color: string; offset: number }[]) => {\n  const firstInvalidateIndex = stops.findIndex((stop) => stop.offset < 0 || stop.offset > 1)\n\n  if (firstInvalidateIndex >= 0) {\n    if (stops[firstInvalidateIndex].offset > 1) {\n      const newStops = stops.slice(0, firstInvalidateIndex + 1)\n      newStops[newStops.length - 1].offset = 1\n\n      return newStops\n    }\n    const newStops = stops.slice(firstInvalidateIndex + 1)\n\n    newStops[0].offset = 0\n    return newStops\n  }\n\n  return stops\n}\n\nexport const splitLine: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { annotation, chartType, datasetReshapeInfo } = advancedVSeed\n\n  if (!annotation || !annotation.annotationHorizontalLine) {\n    return spec\n  }\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  const splitLineConfig = array(annotation.annotationHorizontalLine).find(\n    (item) => !!(item as AnnotationHorizontalLine).splitLine,\n  ) as AnnotationHorizontalLine | undefined\n\n  const splitValue = +(splitLineConfig?.yValue as number | string)\n\n  if (Number.isNaN(splitValue) || !isNumber(splitValue)) {\n    return spec\n  }\n  const result = { ...spec } as Partial<ILineChartSpec>\n  const colorTheme = baseConfig?.color ?? {}\n  const colorConfig = {\n    positiveColor: colorTheme.positiveColor || 'red',\n    negativeColor: colorTheme.negativeColor || 'green',\n    ...(isPlainObject(splitLineConfig?.splitLine) ? splitLineConfig?.splitLine : {}),\n  }\n\n  const groupMark = {\n    type: 'group',\n    name: 'annotationHorizontalLine-splitLine',\n    zIndex: 300,\n    style: {\n      splitConfig: (datum: any, ctx: any) => {\n        const vchart = ctx.vchart as IVChart\n        const chart = vchart.getChart() as IChart\n        const lineSeries = chart.getAllSeries().find((s) => s.type === 'line' || s.type === 'area') as ICartesianSeries\n\n        if (!lineSeries) {\n          return\n        }\n        const lineMark = lineSeries.getMarkInName('line') ?? lineSeries.getMarkInName('area')\n\n        if (!lineMark) {\n          return\n        }\n        const lineGraphics = lineMark.getGraphics()\n\n        if (!lineGraphics || lineGraphics.length !== 1 || !lineGraphics[0]) {\n          return\n        }\n        const points = ((lineGraphics[0].attribute as any).points ?? []) as { x: number; y: number }[]\n\n        if ((lineGraphics[0].attribute as any).segments?.length) {\n          ;((lineGraphics[0].attribute as any).segments as any[]).forEach(\n            (seg: { points: { x: number; y: number }[] }) => {\n              seg.points.forEach((pt: { x: number; y: number }) => {\n                points.push({ x: pt.x, y: pt.y })\n              })\n            },\n          )\n        }\n\n        if (!points || !points.length) {\n          return\n        }\n        const scale = lineSeries.getYAxisHelper().getScale!(0)\n        const splitCoordinate = scale.scale(splitValue)\n        const minY = Math.min(...points.map((p) => p.y))\n        const maxY = Math.max(...points.map((p) => p.y))\n        const ratio = (splitCoordinate - minY) / (maxY - minY)\n\n        const lineStroke = {\n          gradient: 'linear',\n          x0: 0,\n          x1: 0,\n          y0: 0,\n          y1: 1,\n          stops: formatGradientStops([\n            {\n              color: colorConfig.positiveColor,\n              offset: 0,\n            },\n            {\n              color: colorConfig.positiveColor,\n              offset: ratio,\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: ratio + 0.0000001,\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: 1,\n            },\n          ]),\n        }\n        const areaFill = {\n          gradient: 'linear',\n          x0: 0,\n          x1: 0,\n          y0: 0,\n          y1: 1,\n          stops: formatGradientStops([\n            {\n              color: colorConfig.positiveColor,\n              offset: 0,\n            },\n            {\n              color: new VUtilColor(colorConfig.positiveColor).setOpacity(0).toRGBA(),\n              offset: ratio,\n            },\n            {\n              offset: ratio + 0.0000001,\n              color: new VUtilColor(colorConfig.negativeColor).setOpacity(0).toRGBA(),\n            },\n            {\n              color: colorConfig.negativeColor,\n              offset: 1,\n            },\n          ]),\n        }\n        const attrs: any = {\n          segments: null,\n          points,\n        }\n\n        if (lineGraphics[0].type === 'area') {\n          attrs.stroke = lineStroke\n          attrs.fill = areaFill\n        } else {\n          attrs.stroke = lineStroke\n        }\n\n        lineGraphics[0].setAttributes(attrs as unknown as Record<string, any>)\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n        lineGraphics[0].setFinalAttributes?.(attrs)\n        const start = lineSeries.getRegion().getLayoutStartPoint()\n        const range = scale.range() as number[]\n\n        return {\n          points: points.map((entry) => ({ x: entry.x + start.x, y: entry.y + start.y })),\n          splitCoordinate: clamper(range[0], range[range.length - 1])(splitCoordinate as number) + start.y,\n          areaFill,\n          lineStroke,\n        } as SplitConfig\n      },\n    },\n    children: [\n      {\n        type: 'area',\n        interactive: false,\n        zIndex: 500,\n        style: {\n          fillOpacity: 0.5,\n          points: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.splitConfig) {\n              const { points, splitCoordinate } = parentNode.attribute.splitConfig as SplitConfig\n\n              return points.map((entry: { x: number; y: number }) => {\n                return {\n                  ...entry,\n                  y1: splitCoordinate,\n                }\n              })\n            }\n\n            return []\n          },\n          fill: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.splitConfig) {\n              const { areaFill } = parentNode.attribute.splitConfig as SplitConfig\n\n              return areaFill\n            }\n\n            return\n          },\n        },\n      },\n    ],\n  }\n\n  if (!result.customMark) {\n    result.customMark = []\n  }\n\n  ;(result.customMark as any[]).push(groupMark)\n\n  const seriesSpec =\n    result.type === 'line' || result.type === 'area'\n      ? result\n      : result.series?.find((s) => s.type === 'line' || s.type === 'area')\n\n  if (seriesSpec) {\n    if (!seriesSpec.point) {\n      seriesSpec.point = {}\n    }\n    if (!seriesSpec.line) {\n      seriesSpec.line = {}\n    }\n\n    if (!seriesSpec.point.style) {\n      seriesSpec.point.style = {}\n    }\n    if (!seriesSpec.line.style) {\n      seriesSpec.line.style = {}\n    }\n\n    const measureValueKey = datasetReshapeInfo[0].foldInfo.measureValue\n\n    seriesSpec.point.style.fill = (datum) => {\n      return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n    }\n    seriesSpec.line.style.stroke = (datum) => {\n      return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n    }\n    if (seriesSpec.label && (seriesSpec.label as any).visible && isNullish((seriesSpec.label as any).style?.fill)) {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ;(seriesSpec.label as any).style = {\n        ...(seriesSpec.label as any).style,\n        fill: (datum: any) => {\n          return datum?.[measureValueKey] < splitValue ? colorConfig.negativeColor : colorConfig.positiveColor\n        },\n      }\n    }\n  }\n\n  return result\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { PivotChartSpecPipe } from 'src/types'\n\nexport const initPivot: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    animation: true,\n    rows: [],\n    columns: [],\n    indicators: [],\n    records: [],\n    widthMode: 'standard',\n    autoFillWidth: true,\n    defaultHeaderColWidth: 'auto',\n    defaultColWidth: 240,\n\n    heightMode: 'standard',\n    autoFillHeight: true,\n    defaultRowHeight: 180,\n    defaultHeaderRowHeight: 'auto',\n\n    indicatorsAsCol: false,\n    select: {\n      highlightMode: 'cell',\n      headerSelectMode: 'inline',\n    },\n    hover: {\n      highlightMode: 'cross',\n    },\n    tooltip: {\n      isShowOverflowTextTooltip: true,\n    },\n    corner: {\n      titleOnDimension: 'row',\n    },\n    animationAppear: {\n      duration: 600,\n      type: 'all',\n      direction: 'row',\n    },\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { isCombination, isPivot } from 'src/pipeline/utils'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\nimport { isNullish } from 'remeda'\n\nexport const pivotGridStyle: PivotChartSpecPipe = (spec, context) => {\n  const { vseed, advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n  const onlyCombination = !isPivot(vseed) && isCombination(vseed)\n\n  const result = { ...spec } as PivotChartConstructorOptions\n  const transparent = 'rgba(0,0,0,0)'\n\n  const borderColor = themConfig.borderColor ?? '#e3e5eb'\n  const bodyFontColor = themConfig.bodyFontColor ?? '#141414'\n  const headerFontColor = themConfig.headerFontColor ?? '#21252c'\n  const headerBackgroundColor = themConfig.headerBackgroundColor ?? 'rgba(0,0,0,0)'\n  const hoverHeaderBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderBackgroundColor ?? '#D9DDE4')\n  const hoverHeaderInlineBackgroundColor = onlyCombination\n    ? transparent\n    : (themConfig.hoverHeaderInlineBackgroundColor ?? '#D9DDE455')\n  const outlineBorderLineWidth = themConfig.outlineBorderLineWidth ?? 0\n  const frameCornerRadius = themConfig.frameCornerRadius ?? 0\n\n  if (!isNullish(themConfig.minChartWidth)) {\n    result.defaultColWidth = themConfig.minChartWidth\n  }\n\n  if (!isNullish(themConfig.minChartHeight)) {\n    result.defaultRowHeight = themConfig.minChartHeight\n  }\n\n  return {\n    ...result,\n    theme: {\n      underlayBackgroundColor: transparent,\n      bodyStyle: {\n        borderColor,\n        color: bodyFontColor,\n        borderLineWidth: (arg: { row: number; col: number; table: any }) => {\n          const noYAxis =\n            chartType === 'pie' ||\n            chartType === 'rose' ||\n            chartType === 'donut' ||\n            chartType === 'funnel' ||\n            chartType === 'radar' ||\n            chartType === 'roseParallel'\n\n          return [\n            arg.row === 0 ? outlineBorderLineWidth : 1,\n            outlineBorderLineWidth,\n            0,\n            arg.col === 0 || (noYAxis && arg.col === 1 && arg.table.colCount <= 2) ? outlineBorderLineWidth : 1,\n          ]\n        },\n        bgColor: transparent,\n        hover: {\n          cellBgColor: 'transparent',\n        },\n      },\n      headerStyle: {\n        borderColor,\n        fontSize: 12,\n        // borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        borderLineWidth: (arg: { row: number; col: number }) => {\n          return [outlineBorderLineWidth, outlineBorderLineWidth, 1, arg.col === 0 ? outlineBorderLineWidth : 1]\n        },\n        color: headerFontColor,\n        textAlign: 'center',\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      rowHeaderStyle: {\n        borderColor,\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, 1, 0, outlineBorderLineWidth]\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerHeaderStyle: {\n        borderColor,\n        textAlign: 'center',\n        fontSize: 12,\n        color: headerFontColor,\n        padding: [0, 12, 0, 4],\n        fontWeight: 'bold',\n        borderLineWidth: [outlineBorderLineWidth, 1, 1, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n          inlineRowBgColor: hoverHeaderInlineBackgroundColor || undefined,\n          inlineColumnBgColor: hoverHeaderInlineBackgroundColor || undefined,\n        },\n      },\n      cornerLeftBottomCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        bgColor: headerBackgroundColor,\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, 0, outlineBorderLineWidth, outlineBorderLineWidth],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightTopCellStyle: {\n        borderColor,\n        borderLineWidth: [outlineBorderLineWidth, outlineBorderLineWidth, 1, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: 0,\n        },\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      rightFrozenStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: (arg: { row: number }) => {\n          return [arg.row === 0 ? outlineBorderLineWidth : 1, outlineBorderLineWidth, 0, 1]\n        },\n        frameStyle: {\n          borderLineWidth: 0,\n        },\n        hover: {\n          borderLineWidth: 0,\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      cornerRightBottomCellStyle: {\n        borderColor,\n        bgColor: headerBackgroundColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        frameStyle: {\n          borderColor,\n          borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        },\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n\n      bottomFrozenStyle: {\n        borderColor,\n        borderLineWidth: [1, outlineBorderLineWidth, outlineBorderLineWidth, 1],\n        bgColor: headerBackgroundColor,\n        hover: {\n          cellBgColor: hoverHeaderBackgroundColor,\n        },\n      },\n      selectionStyle: {\n        cellBgColor: '',\n        cellBorderColor: '',\n      },\n      frameStyle: {\n        borderColor,\n        cornerRadius: frameCornerRadius,\n        borderLineWidth: outlineBorderLineWidth,\n      },\n\n      axisStyle: {\n        leftAxisStyle: {\n          cellPaddingLeft: 10,\n        },\n        bottomAxisStyle: {\n          cellPaddingBottom: 4,\n        },\n        rightAxisStyle: {\n          cellPaddingRight: 4,\n        },\n      },\n      scrollStyle: {\n        visible: 'scrolling',\n        hoverOn: false,\n      },\n    },\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { execPipeline } from '../../../../utils'\nimport type {\n  Dataset,\n  Encoding,\n  MeasureGroup,\n  PivotChartSpecPipe,\n  SpecPipelineContext,\n  VChartSpecPipe,\n} from 'src/types'\nimport { unique } from 'remeda'\n\nexport const pivotIndicators =\n  (chartPipeline: VChartSpecPipe[]): PivotChartSpecPipe =>\n  (spec, context): Partial<PivotChartConstructorOptions> => {\n    const result = { ...spec } as PivotChartConstructorOptions\n    const { advancedVSeed } = context\n    const { measures, datasetReshapeInfo, dataset, encoding } = advancedVSeed\n\n    const colorItems = unique(datasetReshapeInfo.flatMap((d) => d.unfoldInfo.colorItems))\n    const allMeasureIds = unique(datasetReshapeInfo.flatMap((d) => Object.keys(d.foldInfo.foldMap || {})))\n\n    const indicators = datasetReshapeInfo.map((reshapeInfo, index) => {\n      const measureGroup = measures?.find((d) => `${d.id}` === reshapeInfo.id) as MeasureGroup\n      const subMeasuresId = (measureGroup?.children || []).map((d) => d.id)\n      const invalideMeasuresIds = allMeasureIds.filter((id) => !subMeasuresId.includes(id))\n\n      const newDataset = dataset[index] as Dataset\n      const newDatasetReshapeInfo = [\n        {\n          ...reshapeInfo,\n          unfoldInfo: { ...reshapeInfo.unfoldInfo, colorItems },\n        },\n      ]\n      const newContext: SpecPipelineContext = {\n        ...context,\n        advancedVSeed: {\n          ...advancedVSeed,\n          pivotAllDatasetReshapeInfo: datasetReshapeInfo,\n          datasetReshapeInfo: newDatasetReshapeInfo,\n          encoding: Object.keys(encoding).reduce((res, key) => {\n            res[key as keyof Encoding] = encoding[key as keyof Encoding]?.filter((e) => {\n              return !invalideMeasuresIds.includes(e)\n            }) as string[]\n\n            return res\n          }, {} as Encoding),\n          dataset: newDataset,\n        },\n      }\n\n      const chartSpec = execPipeline(chartPipeline, newContext, {})\n      return {\n        indicatorKey: `${reshapeInfo.id}`,\n        title: measureGroup?.alias,\n        cellType: 'chart',\n        chartModule: 'vchart',\n        chartSpec: chartSpec,\n        style: {\n          padding: [1, 1, 0, 1],\n        },\n      }\n    })\n\n    return {\n      ...result,\n      indicators: indicators,\n    } as Partial<PivotChartConstructorOptions>\n  }\n\nexport const pivotIndicatorsAsRow: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    indicatorsAsCol: false,\n  }\n}\n\nexport const pivotIndicatorsAsCol: PivotChartSpecPipe = (spec) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n\n  return {\n    ...result,\n    indicatorsAsCol: true,\n  }\n}\n","import type { PivotChartSpecPipe } from 'src/types'\n\nexport const datasetPivot: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { dataset, datasetReshapeInfo } = advancedVSeed\n  const records = dataset.reduce((pre, cur, index) => {\n    const id = datasetReshapeInfo[index].id\n    pre[id] = cur\n    return pre\n  }, {})\n  return {\n    ...result,\n    records: records,\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport { BAND_AXIS_INNER_OFFSET_IN_PIVOT } from 'src/pipeline/utils/constant'\nimport type { Config, VChartSpecPipe } from 'src/types'\n\nexport const pivotAxisStyle = (axisStyle: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = axisStyle(spec, context) as ILineChartSpec\n\n    if (result.axes) {\n      const { advancedVSeed } = context\n      const { config, chartType } = advancedVSeed\n      const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n      result.axes.forEach((axis: any) => {\n        axis.domainLine = {\n          visible: false,\n        }\n\n        if (themConfig.chartGridColor && axis.grid && axis.grid.visible && axis.grid.style) {\n          axis.grid.style.stroke = themConfig.chartGridColor\n        }\n\n        if (themConfig.axisLabelColor && axis.label && axis.label.visible && axis.label.style) {\n          axis.label.style.fill = themConfig.axisLabelColor\n        }\n\n        if (axis.type === 'band') {\n          if (axis.orient === 'left' || axis.orient === 'right') {\n            axis.innerOffset = {\n              top: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              bottom: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          } else if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.innerOffset = {\n              left: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n              right: BAND_AXIS_INNER_OFFSET_IN_PIVOT,\n            }\n          }\n        } else if (axis.type === 'linear') {\n          if (axis.orient === 'top' || axis.orient === 'bottom') {\n            axis.label.flush = true\n          }\n        }\n      })\n    }\n\n    return result\n  }\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotRowDimensions: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n  if (!dimensions) {\n    return result\n  }\n  const rowDimensions = dimensions.filter((dim) => dim.encoding === 'row')\n  const rows = rowDimensions.map((dim) => ({\n    dimensionKey: dim.id,\n    title: dim.alias || dim.id,\n  }))\n  return {\n    ...result,\n    rows: rows,\n  } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Dimensions, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotColumnDimensions: PivotChartSpecPipe = (spec, context): Partial<PivotChartConstructorOptions> => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const dimensions = advancedVSeed.dimensions as Dimensions\n\n  if (!dimensions) {\n    return result\n  }\n  const columnDimensions = dimensions.filter((dim) => dim.encoding === 'column')\n  const columns = columnDimensions.map((dim) => ({\n    dimensionKey: dim.id,\n    title: dim.alias || dim.id,\n  })) as unknown\n\n  return {\n    ...result,\n    columns: columns,\n  } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Config, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotTitle: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { config, chartType } = advancedVSeed\n  const themConfig = (config?.[chartType] as Config['line'])?.pivotGrid ?? {}\n\n  if (result.columns && result.columns.length > 0) {\n    result.title = {\n      text: (spec as unknown as { columns: { title: string }[] }).columns.map((entry) => entry.title).join('/'),\n      align: 'center',\n      orient: 'top',\n      padding: [2, 0, 0, 0],\n      textStyle: {\n        fontSize: themConfig.titleFontSize ?? 12,\n        fill: themConfig.titleFontColor ?? '#000',\n        fontWeight: themConfig.titleFontWeight ?? 'bold',\n      },\n    }\n  }\n\n  return result\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { unique } from 'remeda'\nimport type { Color, Legend, PivotChartSpecPipe } from 'src/types'\nimport { createSpecifiedForColorMapping } from '../color/color'\n\nexport const pivotDiscreteLegend: PivotChartSpecPipe = (spec, context): Partial<PivotChartConstructorOptions> => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend; color: Color }\n\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const colorItems = unique(\n    datasetReshapeInfo.flatMap((d) => {\n      return d.unfoldInfo.colorItems\n    }),\n  )\n\n  const colorIdMap = datasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n    return { ...prev, ...cur.unfoldInfo.colorIdMap }\n  }, {})\n\n  const { legend, color } = baseConfig\n  const { colorScheme, colorMapping } = color\n\n  const colorSpecified = createSpecifiedForColorMapping(colorMapping, colorIdMap, colorItems)\n\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight = 400,\n    maxSize = 1,\n    border,\n    shapeType = 'rectRound',\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  const legends = {\n    padding: 0,\n    visible: enable,\n    type: 'discrete',\n    orient,\n    position: legendPosition,\n    maxCol: Math.max(1, maxSize),\n    maxRow: Math.max(1, maxSize),\n    data: colorItems.map((d: string, index: number) => {\n      const color = colorSpecified?.[d] ?? colorScheme?.[index % colorScheme.length]\n      return {\n        label: d,\n        shape: {\n          outerBorder: border\n            ? {\n                stroke: color,\n                distance: 3,\n                lineWidth: 1,\n              }\n            : undefined,\n          fill: color,\n        },\n      }\n    }),\n\n    item: {\n      focus: true,\n      maxWidth: '30%',\n      focusIconStyle: {\n        size: labelFontSize + 2,\n        fill: labelColor || labelFontColor,\n        fontWeight: labelFontWeight,\n      },\n      shape: {\n        space: border ? 6 : 4,\n        style: {\n          symbolType: shapeType,\n          size: border ? 8 : 10,\n        },\n      },\n      label: {\n        formatMethod: (value: string) => {\n          return colorIdMap[value]?.alias ?? value\n        },\n        style: {\n          fontSize: labelFontSize,\n          fill: labelColor || labelFontColor,\n          fontWeight: labelFontWeight,\n        },\n      },\n      background: {\n        state: {\n          selectedHover: {\n            fill: labelColor || labelFontColor,\n            fillOpacity: 0.05,\n          },\n        },\n      },\n    },\n  }\n  return { ...result, legends } as Partial<PivotChartConstructorOptions>\n}\n","import type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport type { Color, Legend, PivotChartSpecPipe } from 'src/types'\n\nexport const pivotColorLegend: PivotChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as PivotChartConstructorOptions\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { legend: Legend; color: Color }\n\n  if (!baseConfig || !baseConfig.legend) {\n    return result\n  }\n\n  const { datasetReshapeInfo } = advancedVSeed\n  const max = Math.max(...datasetReshapeInfo.map((d) => d.foldInfo.statistics.colorMin))\n  const min = Math.min(...datasetReshapeInfo.map((d) => d.foldInfo.statistics.colorMax))\n  const { legend, color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  const {\n    enable,\n    position = 'bottom',\n    labelFontColor,\n    labelColor,\n    labelFontSize = 12,\n    labelFontWeight = 400,\n  } = legend || {}\n\n  const orient = ['bottom', 'bottomLeft', 'bottomRight', 'bl', 'br'].includes(position)\n    ? 'bottom'\n    : ['top', 'topLeft', 'topRight', 'tl', 'tr'].includes(position)\n      ? 'top'\n      : ['left', 'leftTop', 'leftBottom', 'lt', 'lb'].includes(position)\n        ? 'left'\n        : 'right'\n\n  const legendPosition = ['topLeft', 'bottomLeft', 'leftTop', 'rightTop', 'lt', 'rt', 'tl', 'bl'].includes(position)\n    ? 'start'\n    : ['topRight', 'bottomRight', 'leftBottom', 'rightBottom', 'lb', 'rb', 'rt', 'br'].includes(position)\n      ? 'end'\n      : 'middle'\n\n  const legends = {\n    visible: enable,\n    type: 'color',\n    orient,\n    position: legendPosition,\n\n    colors: linearColorScheme || colorScheme || [],\n    value: [min, max],\n    min: min,\n    max: max,\n\n    maxWidth: '30%',\n    handlerText: {\n      visible: true,\n      style: {\n        fill: labelColor || labelFontColor,\n        fontSize: labelFontSize,\n        fontWeight: labelFontWeight,\n      },\n    },\n  } as unknown\n  return { ...result, legends } as Partial<PivotChartConstructorOptions>\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { DimensionLinkage, PivotChartSpecPipe } from 'src/types'\n\nexport const dimensionLinkage: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = (advancedVSeed.config?.[chartType as 'line']?.dimensionLinkage ?? {}) as DimensionLinkage\n\n  if (config.enable === false) {\n    return spec\n  }\n\n  const indicators = spec.indicators\n  const labelHoverOnAxis = {}\n  const chartSpec = (indicators as any)?.[0]?.chartSpec as ILineChartSpec\n  const crosshair = chartSpec?.crosshair as ICartesianCrosshairSpec\n\n  if (crosshair?.xField) {\n    const labelFormat = crosshair.xField.label?.formatMethod\n    ;(labelHoverOnAxis as any).bottom = {\n      visible: config.showLabel ?? crosshair.xField.label?.visible ?? true,\n      background: crosshair.xField.label?.labelBackground,\n      textStyle: crosshair.xField.label?.style,\n      formatMethod: labelFormat\n        ? (text: string | string[] | number) => (text || text === 0 ? labelFormat(text) : null)\n        : undefined,\n    }\n  }\n  if (crosshair?.yField) {\n    const labelFormat = crosshair.yField.label?.formatMethod\n    ;(labelHoverOnAxis as any).left = {\n      visible: config.showLabel ?? crosshair.yField.label?.visible ?? true,\n      background: crosshair.yField.label?.labelBackground,\n      textStyle: crosshair.yField.label?.style,\n      formatMethod: labelFormat\n        ? (text: string | string[] | number) => (text || text === 0 ? labelFormat(text) : null)\n        : undefined,\n    }\n  }\n\n  if (indicators && indicators.length) {\n    indicators.forEach((ind) => {\n      const crosshair = (ind as any)?.chartSpec?.crosshair as ICartesianCrosshairSpec\n\n      if (crosshair?.xField) {\n        crosshair.xField.label = { visible: false }\n      }\n\n      if (crosshair?.yField) {\n        crosshair.yField.label = { visible: false }\n      }\n    })\n  }\n\n  spec.chartDimensionLinkage = {\n    showTooltip: config.showTooltip ?? (chartSpec?.tooltip?.dimension?.visible as boolean) ?? true,\n    heightLimitToShowTooltipForLastRow: 60,\n    widthLimitToShowTooltipForLastColumn: 90,\n    labelHoverOnAxis,\n  }\n\n  return spec\n}\n","import type {\n  PivotChartSpecPipe,\n  PivotChartSpecPipeline,\n  SpecPipe,\n  SpecPipelineContext,\n  VChartSpecPipe,\n  VChartSpecPipeline,\n} from 'src/types'\nimport type { ISpec } from '@visactor/vchart'\nimport type { PivotChartConstructorOptions } from '@visactor/vtable'\nimport { execPipeline, isPivotChart } from '../../../../utils'\n\nexport const pivotAdapter = (pipeline: VChartSpecPipeline, pivotPipeline: PivotChartSpecPipeline): SpecPipe => {\n  const adapted = ((spec: unknown, context: SpecPipelineContext) => {\n    const { vseed } = context\n    const usePivotChart = isPivotChart(vseed)\n    if (usePivotChart) {\n      return execPipeline<PivotChartConstructorOptions, SpecPipelineContext>(\n        pivotPipeline,\n        context,\n        spec as Partial<PivotChartConstructorOptions>,\n      )\n    }\n    return execPipeline<ISpec, SpecPipelineContext>(pipeline, context, spec as Partial<ISpec>)\n  }) as VChartSpecPipe & PivotChartSpecPipe\n\n  return adapted as unknown as SpecPipe\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  xBand,\n  yLinear,\n  initLine,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorLineStyleFill,\n  colorPointStyleFill,\n  pivotColorLegend,\n  pivotTitle,\n  pivotAxisStyle,\n  splitLine,\n  dimensionLinkage,\n} from '../pipes'\n\nconst line: VChartSpecPipeline = [\n  initLine,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  verticalCrosshairLine,\n  colorAdapter(discreteLegend, colorLegend),\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  label,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  splitLine,\n]\n\nconst pivotLine: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initLine,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    label,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    splitLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const lineSpecPipeline = [pivotAdapter(line, pivotLine)]\n","import { lineAdvancedPipeline, lineSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerLine = () => {\n  Builder._advancedPipelineMap['line'] = lineAdvancedPipeline\n  Builder._specPipelineMap['line'] = lineSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForColumn: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForColumn: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const columnConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'stackCornerRadius',\n    'barMaxWidth',\n    'barGapInGroup',\n\n    'dimensionLinkage',\n  ]) as Config['column']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import type { AdvancedPipe, RegressionLineConfig } from 'src/types'\n\nexport const regressionLine: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  let keys = [] as string[]\n\n  if (vseed.chartType === 'histogram') {\n    keys = ['kdeRegressionLine', 'ecdfRegressionLine']\n  } else if (vseed.chartType === 'scatter') {\n    keys = ['linearRegressionLine', 'lowessRegressionLine', 'polynomialRegressionLine', 'logisticRegressionLine']\n  } else if (vseed.chartType === 'column') {\n    keys = ['polynomialRegressionLine']\n  }\n\n  if (keys.length) {\n    const regressionLineConfig: RegressionLineConfig = {}\n    let hasLine = false\n\n    keys.forEach((key: string) => {\n      if ((vseed as any)[key]) {\n        hasLine = true\n        regressionLineConfig[key as keyof RegressionLineConfig] = (vseed as any)[key]\n      }\n    })\n\n    return hasLine\n      ? {\n          ...advancedVSeed,\n          regressionLine: regressionLineConfig,\n        }\n      : advancedVSeed\n  }\n\n  return advancedVSeed\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  columnConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  regressionLine,\n} from '../pipes'\n\nexport const columnAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForColumn, buildMeasures],\n    [encodingForColumn, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnConfig,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initColumn: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { FoldMeasureId } from 'src/dataReshape/constant'\nimport type { Datum, VChartSpecPipe, StackCornerRadius } from 'src/types'\n\nexport const stackCornerRadius: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const stackCornerRadius = advancedVSeed.config?.[chartType as 'column']?.stackCornerRadius as StackCornerRadius\n\n  if (chartType === 'dualAxis' && (spec as any).type !== 'bar') {\n    return spec\n  }\n\n  return {\n    ...spec,\n    stackCornerRadius: (_: unknown, datum: Datum) => {\n      if (datum && datum[datum[FoldMeasureId]] > 0) {\n        return stackCornerRadius\n      }\n\n      return 0\n    },\n  } as IBarChartSpec\n}\n","import { isNullish } from 'remeda'\nimport type { BarMaxWidth, VChartSpecPipe } from 'src/types'\n\nexport const barMaxWidth: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const barMaxWidth = advancedVSeed.config?.[chartType as 'column']?.barMaxWidth as BarMaxWidth\n\n  if (!isNullish(barMaxWidth)) {\n    return {\n      ...spec,\n      barMaxWidth,\n    }\n  }\n\n  return spec\n}\n","import type { IAreaChartSpec, IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const stackInverse: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IAreaChartSpec | IBarChartSpec\n  result.stackInverse = true\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const verticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'column']?.crosshairRect\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const rectColor = config.rectColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || false\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.xField = {\n    visible,\n    line: {\n      type: 'rect',\n      style: {\n        lineWidth: 0,\n        opacity: 0.26,\n        fill: rectColor,\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const xAxisConfig = result.axes?.find((v) => v.orient === 'bottom')\n  const xAxisFormatter = xAxisConfig?.label?.formatMethod\n  if (xAxisFormatter) {\n    ;(crosshair.xField.label!.formatMethod as any) = (text: string | string[]) => xAxisFormatter(text)\n  }\n\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorBarStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IBarChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.bar?.style) {\n        result.bar.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { BarStyle, Datum, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const barStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle, dataset = [] } = advancedVSeed\n  const { barStyle } = markStyle\n\n  const showStroke = dataset.length <= 100\n\n  const result = {\n    ...spec,\n    bar: {\n      style: {\n        visible: true,\n        fillOpacity: 1,\n        lineWidth: showStroke ? 1 : 0,\n      },\n      state: {\n        hover: {\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  } as IBarChartSpec\n\n  if (isNullish(barStyle) || isEmpty(barStyle)) {\n    return result\n  }\n\n  const barStyles = (Array.isArray(barStyle) ? barStyle : [barStyle]) as BarStyle[]\n\n  const customMap = barStyles.reduce<object>((result, style, index) => {\n    const {\n      barBorderColor,\n      barBorderStyle,\n      barBorderWidth = 1,\n      barColor,\n      barColorOpacity,\n      barBorderOpacity,\n      barRadius,\n      barVisible = true,\n    } = style\n\n    const lineDash = barBorderStyle === 'dashed' ? [5, 2] : barBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: barVisible,\n          fill: barColor,\n          fillOpacity: barColorOpacity,\n          cornerRadius: barRadius,\n          lineWidth: barBorderWidth,\n          stroke: barBorderColor,\n          strokeOpacity: barBorderOpacity,\n          lineDash: lineDash,\n        },\n      },\n    }\n  }, {})\n\n  result.bar!.state = {\n    ...result.bar!.state,\n    ...customMap,\n  }\n\n  return result\n}\n","import { type ICartesianSeries, type ILineChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, VChartSpecPipe, VSeed } from 'src/types'\nimport { ANNOTATION_AREA_TEXT_STYLE_BY_POSITION, isSubset } from './utils'\nimport { ANNOTATION_Z_INDEX } from '../../../../utils/constant'\nimport { isBarLikeChart } from 'src/pipeline/utils/chatType'\n\nexport const annotationAreaBand: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { annotation, config } = advancedVSeed\n\n  if (!annotation || !annotation.annotationArea) {\n    return spec\n  }\n  const theme = config?.[vseed.chartType as 'column']?.annotation?.annotationArea\n  const { annotationArea } = annotation\n  const annotationAreaList = Array.isArray(annotationArea) ? annotationArea : [annotationArea]\n\n  const positionMap = {\n    top: 'insideTop',\n    topRight: 'insideTopRight',\n    topLeft: 'insideTopLeft',\n    bottom: 'insideBottom',\n    bottomLeft: 'insideBottomLeft',\n    bottomRight: 'insideBottomRight',\n    left: 'insideLeft',\n    right: 'insideRight',\n  }\n  const defaultTextPosition = isBarLikeChart(advancedVSeed as VSeed) ? 'right' : 'top'\n\n  const markArea = annotationAreaList.flatMap((annotationArea) => {\n    const {\n      selector: selectorPoint,\n      text = '',\n      textColor = theme?.textColor ?? '#ffffff',\n      textFontSize = theme?.textFontSize ?? 12,\n      textFontWeight = theme?.textFontWeight ?? 400,\n\n      textBackgroundVisible = theme?.textBackgroundVisible ?? true,\n      textBackgroundColor = theme?.textBackgroundColor ?? '#191d24',\n      textBackgroundBorderColor = theme?.textBackgroundBorderColor ?? '#191d24',\n      textBackgroundBorderWidth = theme?.textBackgroundBorderWidth ?? 1,\n      textBackgroundBorderRadius = theme?.textBackgroundBorderRadius ?? 4,\n      textBackgroundPadding = theme?.textBackgroundPadding ?? 4,\n\n      areaColor = theme?.areaColor ?? '#888888',\n      areaColorOpacity = theme?.areaColorOpacity ?? 0.15,\n      areaBorderColor = theme?.areaBorderColor ?? '#888888',\n      areaBorderRadius = theme?.areaBorderRadius ?? 4,\n      areaBorderWidth = theme?.areaBorderWidth ?? 1,\n      areaLineDash = theme?.areaLineDash,\n\n      outerPadding = theme?.outerPadding ?? 4,\n    } = annotationArea\n    const textPosition: string = annotationArea.textPosition ?? defaultTextPosition\n    const textAlign =\n      annotationArea.textAlign ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textAlign\n    const textBaseline =\n      annotationArea.textBaseline ??\n      ANNOTATION_AREA_TEXT_STYLE_BY_POSITION[textPosition as keyof typeof ANNOTATION_AREA_TEXT_STYLE_BY_POSITION]\n        .textBaseline\n\n    const dataset = advancedVSeed.dataset.flat()\n    const selectedData = selectorPoint ? dataset.filter((datum) => selector(datum, selectorPoint)) : []\n\n    return {\n      zIndex: ANNOTATION_Z_INDEX,\n      regionRelative: true,\n      // coordinates: selectedData,\n      positions: (data: Datum[], context: ICartesianSeries & { _scaleConfig?: { bandPosition?: number } }) => {\n        const positionData = data.filter((item) => selectedData.some((datum) => isSubset(datum, item)))\n        const xyList = positionData.map((datum) => context.dataToPosition(datum) as { x: number; y: number })\n\n        const bandPosition = context?._scaleConfig?.bandPosition || 0\n\n        const yAxisHelper = context.getYAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n        const xAxisHelper = context.getXAxisHelper() as unknown as {\n          getBandwidth: (depth?: number) => number\n          getScale: () => {\n            range: () => number[]\n          }\n        }\n\n        if (typeof xAxisHelper?.getBandwidth === 'function') {\n          const depth = context.fieldX.length ?? 0\n          const xBandWidth = xAxisHelper?.getBandwidth?.(depth - 1)\n          const regionRect = context.getRegion().getLayoutRect()\n          const startX = Math.min(...xyList.map((item) => item.x)) - (outerPadding || 4)\n          const endX = Math.max(...xyList.map((item) => item.x)) + (outerPadding || 4)\n\n          const width = endX - startX + xBandWidth\n          const middleX = (endX + startX) / 2 + xBandWidth * (0.5 - bandPosition)\n\n          const minX = middleX - width / 2\n          const maxX = middleX + width / 2\n\n          const minY = 0\n          const maxY = regionRect.height\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        if (typeof yAxisHelper?.getBandwidth === 'function') {\n          const depth = context.fieldY.length ?? 0\n          const yBandWidth = yAxisHelper?.getBandwidth?.(depth - 1)\n          const regionRect = context.getRegion().getLayoutRect()\n\n          const startY = Math.min(...xyList.map((item) => item.y)) - (outerPadding || 4)\n          const endY = Math.max(...xyList.map((item) => item.y)) + (outerPadding || 4)\n          const width = endY - startY + yBandWidth\n          const middleY = (endY + startY) / 2 + yBandWidth * (0.5 - bandPosition)\n\n          const minY = middleY - width / 2\n          const maxY = middleY + width / 2\n          const minX = 0\n          const maxX = regionRect.width\n\n          return [\n            // 左上\n            {\n              x: minX,\n              y: minY,\n            },\n            // 右上\n            {\n              x: maxX,\n              y: minY,\n            },\n            // 右下\n            {\n              x: maxX,\n              y: maxY,\n            },\n            // 左下\n            {\n              x: minX,\n              y: maxY,\n            },\n          ]\n        }\n\n        return []\n      },\n      label: {\n        position: positionMap[textPosition as 'bottom'],\n        visible: true,\n        text: text,\n        style: {\n          opacity: 0.95,\n          textAlign: textAlign,\n          textBaseline: textBaseline,\n          stroke: textBackgroundColor,\n          lineWidth: 1,\n          fill: textColor,\n          fontSize: textFontSize,\n          fontWeight: textFontWeight,\n        },\n\n        labelBackground: {\n          visible: textBackgroundVisible,\n          padding: textBackgroundPadding,\n          style: {\n            opacity: 0.95,\n            cornerRadius: textBackgroundBorderRadius ?? 4,\n            fill: textBackgroundColor,\n            stroke: textBackgroundBorderColor,\n            lineWidth: textBackgroundBorderWidth,\n            fillOpacity: 1,\n          },\n        },\n      },\n      area: {\n        style: {\n          visible: true,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n          stroke: areaBorderColor,\n          lineWidth: areaBorderWidth,\n          cornerRadius: areaBorderRadius,\n          lineDash: areaLineDash,\n        },\n      },\n    }\n  }) as ILineChartSpec['markArea']\n\n  return {\n    ...spec,\n    markArea: markArea,\n  }\n}\n","import isNil from \"./isNil\";\n\nexport function invNorm(p) {\n    if (p <= 0 || p >= 1) return 0;\n    const c1 = -.00778489400243029, c2 = -.322396458041136, c3 = -2.40075827716184, c4 = -2.54973253934373, c5 = 4.37466414146497, c6 = 2.93816398269878, d1 = .00778469570904146, d2 = .32246712907004, d3 = 2.445134137143, d4 = 3.75440866190742;\n    let q, r;\n    return p < .02425 ? (q = Math.sqrt(-2 * Math.log(p)), (((((c1 * q + c2) * q + c3) * q + c4) * q + c5) * q + c6) / ((((d1 * q + d2) * q + d3) * q + d4) * q + 1)) : p <= .97575 ? (q = p - .5, \n    r = q * q, (((((-39.6968302866538 * r + 220.946098424521) * r - 275.928510446969) * r + 138.357751867269) * r - 30.6647980661472) * r + 2.50662827745924) * q / (((((-54.4760987982241 * r + 161.585836858041) * r - 155.698979859887) * r + 66.8013118877197) * r - 13.2806815528857) * r + 1)) : (q = Math.sqrt(-2 * Math.log(1 - p)), \n    -(((((c1 * q + c2) * q + c3) * q + c4) * q + c5) * q + c6) / ((((d1 * q + d2) * q + d3) * q + d4) * q + 1));\n}\n\nexport function computeLinearCIComponents(data, x, y, predict) {\n    let min = 1 / 0, max = -1 / 0, n = 0, sumX = 0;\n    for (let i = 0; i < data.length; i++) {\n        const d = data[i];\n        let dx = x(d), dy = y(d);\n        !isNil(dx) && (dx = +dx) >= dx && !isNil(dy) && (dy = +dy) >= dy && (dx < min && (min = dx), \n        dx > max && (max = dx), n++, sumX += dx);\n    }\n    if (0 === n) return {\n        min: min,\n        max: max,\n        n: n,\n        X: 0,\n        SSE: 0,\n        Sxx: 0\n    };\n    const X = sumX / n;\n    let SSE = 0, Sxx = 0;\n    for (let i = 0; i < data.length; i++) {\n        const d = data[i];\n        let dx = x(d), dy = y(d);\n        if (!isNil(dx) && (dx = +dx) >= dx && !isNil(dy) && (dy = +dy) >= dy) {\n            const r = dy - predict(dx);\n            SSE += r * r;\n            const dxc = dx - X;\n            Sxx += dxc * dxc;\n        }\n    }\n    return {\n        min: min,\n        max: max,\n        n: n,\n        X: X,\n        SSE: SSE,\n        Sxx: Sxx\n    };\n}\n\nexport function stdErrorsAt(px, comps) {\n    const {n: n, X: X, Sxx: Sxx, SSE: SSE} = comps, s2 = n > 2 ? SSE / (n - 2) : 0;\n    return {\n        seMean: Sxx > 0 ? Math.sqrt(s2 * (1 / n + (px - X) * (px - X) / Sxx)) : Math.sqrt(s2 / n),\n        sePred: Math.sqrt(s2 * (1 + 1 / n + (Sxx > 0 ? (px - X) * (px - X) / Sxx : 0)))\n    };\n}\n\nexport default {\n    invNorm: invNorm,\n    computeLinearCIComponents: computeLinearCIComponents,\n    stdErrorsAt: stdErrorsAt\n};\n//# sourceMappingURL=regression-utils.js.map\n","import isNil from \"./isNil\";\n\nimport { computeLinearCIComponents, invNorm, stdErrorsAt } from \"./regression-utils\";\n\nexport function ordinaryLeastSquares(uX, uY, uXY, uX2) {\n    const denom = uX2 - uX * uX;\n    if (Math.abs(denom) < Number.EPSILON) return {\n        a: uY,\n        b: 0\n    };\n    const b = (uXY - uX * uY) / denom;\n    return {\n        a: uY - b * uX,\n        b: b\n    };\n}\n\nexport function visitPoints(data, x, y, callback) {\n    for (let i = 0; i < data.length; i++) {\n        const d = data[i];\n        let xi = x(d), yi = y(d);\n        !isNil(xi) && (xi = +xi) >= xi && !isNil(yi) && (yi = +yi) >= yi && callback(xi, yi, i);\n    }\n}\n\nexport function rSquared(data, x, y, uY, predict) {\n    let ssr = 0, sst = 0;\n    for (let i = 0; i < data.length; i++) {\n        const d = data[i];\n        let yi = y(d);\n        if (!isNil(yi) && (yi = +yi) >= yi) {\n            const r = yi - predict(x(d));\n            ssr += r * r;\n            const t = yi - uY;\n            sst += t * t;\n        }\n    }\n    return 0 === sst ? 0 : 1 - ssr / sst;\n}\n\nexport function regressionLinear(data, x = (d => d.x), y = (d => d.y), options) {\n    var _a;\n    const alpha = null !== (_a = null == options ? void 0 : options.alpha) && void 0 !== _a ? _a : .05;\n    let n = 0, meanX = 0, meanY = 0, meanXY = 0, meanX2 = 0;\n    visitPoints(data, x, y, ((xi, yi) => {\n        n++, meanX += (xi - meanX) / n, meanY += (yi - meanY) / n, meanXY += (xi * yi - meanXY) / n, \n        meanX2 += (xi * xi - meanX2) / n;\n    }));\n    const {a: a, b: b} = ordinaryLeastSquares(meanX, meanY, meanXY, meanX2), predict = xx => a + b * xx, comps = computeLinearCIComponents(data, x, y, predict);\n    return {\n        coef: {\n            a: a,\n            b: b\n        },\n        predict: predict,\n        rSquared: rSquared(data, x, y, meanY, predict),\n        evaluateGrid: function(N) {\n            const out = [];\n            if (0 === comps.n || N <= 0) return out;\n            if (comps.min === comps.max) {\n                for (let i = 0; i < N; i++) out.push({\n                    x: comps.min,\n                    y: predict(comps.min)\n                });\n                return out;\n            }\n            const step = (comps.max - comps.min) / (N - 1);\n            for (let i = 0; i < N; i++) {\n                const px = i === N - 1 ? comps.max : comps.min + step * i;\n                out.push({\n                    x: px,\n                    y: predict(px)\n                });\n            }\n            return out;\n        },\n        confidenceInterval: function(N = 50) {\n            const out = [];\n            if (0 === comps.n || N <= 0) return out;\n            const z = invNorm(1 - alpha / 2);\n            if (comps.min === comps.max) {\n                const m = predict(comps.min), errs = stdErrorsAt(comps.min, comps);\n                for (let i = 0; i < N; i++) out.push({\n                    x: comps.min,\n                    mean: m,\n                    lower: m - z * errs.seMean,\n                    upper: m + z * errs.seMean,\n                    predLower: m - z * errs.sePred,\n                    predUpper: m + z * errs.sePred\n                });\n                return out;\n            }\n            const step = (comps.max - comps.min) / (N - 1);\n            for (let i = 0; i < N; i++) {\n                const px = i === N - 1 ? comps.max : comps.min + step * i, m = predict(px), errs = stdErrorsAt(px, comps);\n                out.push({\n                    x: px,\n                    mean: m,\n                    lower: m - z * errs.seMean,\n                    upper: m + z * errs.seMean,\n                    predLower: m - z * errs.sePred,\n                    predUpper: m + z * errs.sePred\n                });\n            }\n            return out;\n        }\n    };\n}\n\nexport default {\n    ordinaryLeastSquares: ordinaryLeastSquares,\n    visitPoints: visitPoints,\n    rSquared: rSquared,\n    regressionLinear: regressionLinear\n};\n//# sourceMappingURL=regression-linear.js.map\n","import { visitPoints, rSquared } from \"./regression-linear\";\n\nimport isNil from \"./isNil\";\n\nimport { computeLinearCIComponents, invNorm, stdErrorsAt } from \"./regression-utils\";\n\nfunction solveLinearSystem(A, b) {\n    const n = b.length, M = new Array(n);\n    for (let i = 0; i < n; i++) M[i] = A[i].slice(), M[i].push(b[i]);\n    for (let k = 0; k < n; k++) {\n        let maxRow = k, maxVal = Math.abs(M[k][k]);\n        for (let i = k + 1; i < n; i++) {\n            const v = Math.abs(M[i][k]);\n            v > maxVal && (maxVal = v, maxRow = i);\n        }\n        if (maxRow !== k) {\n            const tmp = M[k];\n            M[k] = M[maxRow], M[maxRow] = tmp;\n        }\n        if (Math.abs(M[k][k]) < 1e-12) {\n            return new Array(n).fill(0);\n        }\n        for (let j = k + 1; j <= n; j++) M[k][j] = M[k][j] / M[k][k];\n        M[k][k] = 1;\n        for (let i = 0; i < n; i++) {\n            if (i === k) continue;\n            const factor = M[i][k];\n            if (0 !== factor) {\n                for (let j = k + 1; j <= n; j++) M[i][j] -= factor * M[k][j];\n                M[i][k] = 0;\n            }\n        }\n    }\n    const x = new Array(n);\n    for (let i = 0; i < n; i++) x[i] = M[i][n];\n    return x;\n}\n\nexport function regressionPolynomial(data, x = (d => d.x), y = (d => d.y), options = {}) {\n    var _a, _b;\n    let degree = null !== (_a = options.degree) && void 0 !== _a ? _a : 0;\n    degree < 0 && (degree = 0);\n    const alpha = null !== (_b = options.alpha) && void 0 !== _b ? _b : .05, m = degree + 1, sums = new Array(2 * degree + 1).fill(0);\n    visitPoints(data, x, y, ((dx, dy) => {\n        let xp = 1;\n        for (let k = 0; k < sums.length; k++) sums[k] += xp, xp *= dx;\n    }));\n    const A = new Array(m);\n    for (let i = 0; i < m; i++) {\n        A[i] = new Array(m).fill(0);\n        for (let j = 0; j < m; j++) A[i][j] = sums[i + j];\n    }\n    const B = new Array(m).fill(0);\n    visitPoints(data, x, y, ((dx, dy) => {\n        let xp = 1;\n        for (let k = 0; k < m; k++) B[k] += dy * xp, xp *= dx;\n    }));\n    const coef = solveLinearSystem(A, B), predict = xx => {\n        let xp = 1, v = 0;\n        for (let k = 0; k < coef.length; k++) v += coef[k] * xp, xp *= xx;\n        return v;\n    };\n    return {\n        degree: degree,\n        coef: coef,\n        predict: predict,\n        rSquared: rSquared(data, x, y, (() => {\n            let sum = 0, cnt = 0;\n            return visitPoints(data, x, y, ((_dx, dy) => {\n                sum += dy, cnt++;\n            })), 0 === cnt ? 0 : sum / cnt;\n        })(), predict),\n        evaluateGrid(N) {\n            const out = [];\n            if (N <= 0) return out;\n            let min = 1 / 0, max = -1 / 0;\n            if (visitPoints(data, x, y, (dx => {\n                isNil(dx) || (dx < min && (min = dx), dx > max && (max = dx));\n            })), min === 1 / 0 || max === -1 / 0) return out;\n            if (min === max) {\n                const v = predict(min);\n                for (let i = 0; i < N; i++) out.push({\n                    x: min,\n                    y: v\n                });\n                return out;\n            }\n            const step = (max - min) / (N - 1);\n            for (let i = 0; i < N; i++) {\n                const px = i === N - 1 ? max : min + step * i;\n                out.push({\n                    x: px,\n                    y: predict(px)\n                });\n            }\n            return out;\n        },\n        confidenceInterval(N = 50) {\n            const out = [];\n            if (N <= 0) return out;\n            const comps = computeLinearCIComponents(data, x, y, predict);\n            if (0 === comps.n) return out;\n            const z = Math.abs(invNorm(1 - alpha / 2));\n            if (comps.min === comps.max) {\n                const v = predict(comps.min), errs = stdErrorsAt(comps.min, comps);\n                for (let i = 0; i < N; i++) out.push({\n                    x: comps.min,\n                    mean: v,\n                    lower: v - z * errs.seMean,\n                    upper: v + z * errs.seMean,\n                    predLower: v - z * errs.sePred,\n                    predUpper: v + z * errs.sePred\n                });\n                return out;\n            }\n            const step = (comps.max - comps.min) / (N - 1);\n            for (let i = 0; i < N; i++) {\n                const px = i === N - 1 ? comps.max : comps.min + step * i, yh = predict(px), errs = stdErrorsAt(px, comps);\n                out.push({\n                    x: px,\n                    mean: yh,\n                    lower: yh - z * errs.seMean,\n                    upper: yh + z * errs.seMean,\n                    predLower: yh - z * errs.sePred,\n                    predUpper: yh + z * errs.sePred\n                });\n            }\n            return out;\n        }\n    };\n}\n\nexport default regressionPolynomial;\n//# sourceMappingURL=regression-polynomial.js.map\n","import type { Datum } from '@visactor/vchart'\n\nexport const defaultRegressionLineColor = (datum: Datum, ctx: any, opt: any): string | undefined => {\n  const parentNode = opt.mark?._product?.parent\n  if (parentNode?.attribute?.data) {\n    return parentNode.attribute.data.color\n  }\n  return undefined\n}\n\nexport const defaultRegressionLineLabelX = (datum: any, ctx: any, opt: any) => {\n  const parentNode = opt.mark?._product?.parent\n\n  if (parentNode?.attribute?.data?.linePoints) {\n    const points = parentNode.attribute.data.linePoints\n    return points[points.length - 1]?.x\n  }\n\n  return undefined\n}\n\nexport const defaultRegressionLineLabelY = (datum: any, ctx: any, opt: any) => {\n  const parentNode = opt.mark?._product?.parent\n\n  if (parentNode?.attribute?.data?.linePoints) {\n    const points = parentNode.attribute.data.linePoints\n    return points[points.length - 1]?.y\n  }\n\n  return undefined\n}\n\nexport const getAlphaByConfidenceLevel = (confidenceLevel: number = 0.95) => {\n  return 1 - Math.max(Math.min(1, confidenceLevel), 0)\n}\n","import type { IBarChartSpec, ICartesianSeries, IChart, IVChart } from '@visactor/vchart'\nimport { isNullish } from 'remeda'\nimport { array, clamper, regressionPolynomial } from '@visactor/vutils'\nimport type {\n  Datum,\n  VChartSpecPipe,\n  RegressionLineConfig,\n  LinearRegressionLine,\n  PolynomialRegressionLine,\n} from 'src/types'\nimport { defaultRegressionLineColor, getAlphaByConfidenceLevel } from './common'\n\nexport const columnPolynomialRegressionLine: VChartSpecPipe = (spec, context): Partial<IBarChartSpec> => {\n  const result = { ...spec } as Partial<IBarChartSpec>\n  const { advancedVSeed } = context\n  const { chartType, regressionLine } = advancedVSeed\n  const lineTheme = advancedVSeed.config[chartType as 'scatter']?.regressionLine as RegressionLineConfig\n\n  if (!regressionLine || !regressionLine.polynomialRegressionLine) {\n    return result\n  }\n\n  const lineList = array(regressionLine.polynomialRegressionLine)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme.linearRegressionLine ?? {}) as LinearRegressionLine\n    const {\n      color,\n      lineWidth,\n      lineDash,\n      text,\n      textColor,\n      textFontSize,\n      textFontWeight,\n      confidenceIntervalOpacity,\n      confidenceLevel = 0.95,\n      confidenceIntervalVisible = theme.confidenceIntervalVisible,\n    } = line as LinearRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `polynomialRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const s = chart.getAllSeries()[0] as ICartesianSeries\n\n          if (s) {\n            const rect = s.getRegion().getLayoutRect()\n\n            if (rect.width === 0 || rect.height === 0) {\n              return null\n            }\n\n            const yClamper = clamper(0, 0 + rect.height)\n            const data = s.getViewData()?.latestData as Datum[]\n            const fieldX = s.fieldX?.[0]\n            const fieldY = s.fieldY?.[0]\n            const xValues = s.getRawDataStatisticsByField(fieldX).values as string[]\n            const degree = (line as PolynomialRegressionLine).degree ?? 2\n            // 多项式拟合需要至少 degree + 1 个点\n            const minPoints = degree + 1\n\n            if (!fieldX || !fieldY || !data || data.length < minPoints || xValues.length < minPoints) {\n              return null\n            }\n\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const { confidenceInterval, evaluateGrid } = regressionPolynomial(\n              xValues.map((xVal, index: number) => {\n                const filteredData = data.filter((d) => d[fieldX] === xVal)\n\n                return {\n                  x: index,\n                  y: Math.max(...filteredData.map((d) => d[fieldY] as number)),\n                }\n              }),\n              undefined,\n              undefined,\n              {\n                degree: (line as PolynomialRegressionLine).degree ?? 2,\n                alpha: getAlphaByConfidenceLevel(confidenceLevel),\n              },\n            )\n            const N = xValues.length\n            const xAxisHelper = s.getXAxisHelper()\n            const halfBandWidth = xAxisHelper ? xAxisHelper.getBandwidth!(0) / 2 : 0\n            const lineData = evaluateGrid(N)\n            const linePoints = lineData.map((datum: Datum, index: number) => {\n              const d = { [fieldX]: xValues[index], [fieldY]: datum.y }\n              return {\n                x: s.dataToPositionX(d)! + halfBandWidth,\n                y: yClamper(s.dataToPositionY(d)!),\n              }\n            })\n            const result: {\n              linePoints: { x: number; y: number }[]\n              areaPoints?: { x: number; y: number; y1: number }[]\n              color: string\n            } = {\n              linePoints,\n              color: s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n\n            if (confidenceIntervalVisible) {\n              const intervalData = confidenceInterval(N)\n\n              result.areaPoints = intervalData.map((datum: Datum, index: number) => {\n                const d = { [fieldX]: xValues[index], [fieldY]: datum.lower }\n                return {\n                  x: s.dataToPositionX(d)! + halfBandWidth,\n                  y: yClamper(s.dataToPositionY(d)!),\n                  y1: yClamper(s.dataToPositionY({ [fieldY]: datum.upper })!),\n                }\n              })\n            }\n\n            return result\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    if (confidenceIntervalVisible) {\n      childrenMarks.push({\n        type: 'area',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        style: {\n          lineWidth: lineWidth ?? theme.lineWidth,\n          lineDash: lineDash ?? theme.lineDash,\n          fillOpacity: confidenceIntervalOpacity ?? theme.confidenceIntervalOpacity,\n          fill: color ?? defaultRegressionLineColor,\n          points: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data) {\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n              return parentNode.attribute.data.areaPoints\n            }\n\n            return []\n          },\n        },\n      })\n    }\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `polynomialRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data?.linePoints) {\n              const points = parentNode.attribute.data.linePoints\n              return points[points.length - 1]?.x\n            }\n\n            return undefined\n          },\n          y: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode?.attribute?.data?.linePoints) {\n              const points = parentNode.attribute.data.linePoints\n              return points[points.length - 1]?.y\n            }\n\n            return undefined\n          },\n        },\n      })\n    }\n  })\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initColumn,\n  datasetXY,\n  xBand,\n  yLinear,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  columnPolynomialRegressionLine,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst column: VChartSpecPipeline = [\n  initColumn,\n  stackCornerRadius,\n  barMaxWidth,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  verticalCrosshairRect,\n  colorAdapter(discreteLegend, colorLegend),\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  columnPolynomialRegressionLine,\n]\n\nconst pivotColumn: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumn,\n    stackCornerRadius,\n    barMaxWidth,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n    columnPolynomialRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnSpecPipeline = [pivotAdapter(column, pivotColumn)]\n","import { columnAdvancedPipeline, columnSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumn = () => {\n  Builder._advancedPipelineMap['column'] = columnAdvancedPipeline\n  Builder._specPipelineMap['column'] = columnSpecPipeline\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const pieConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, ['backgroundColor', 'color', 'label', 'legend', 'tooltip']) as Config['pie']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { lineConfig } from './line'\nimport { columnConfig } from './column'\nimport { pieConfig } from './pie'\nimport { dualAxisConfig } from './dualAxis'\nimport { scatterConfig } from './scatter'\nimport { histogramConfig } from './histogram'\nimport { boxplotConfig } from './boxplot'\n\nexport { lineConfig, columnConfig, pieConfig, dualAxisConfig, scatterConfig, histogramConfig, boxplotConfig }\n\n// area\nexport const areaConfig = lineConfig\nexport const areaPercentConfig = lineConfig\n\n// bar\nexport const barConfig = columnConfig\nexport const barParallelConfig = columnConfig\nexport const barPercentConfig = columnConfig\n\n// column\nexport const columnParallelConfig = columnConfig\nexport const columnPercentConfig = columnConfig\n\n// donut, rose\nexport const donutConfig = pieConfig\nexport const roseConfig = pieConfig\nexport const roseParallelConfig = pieConfig\nexport const radarConfig = pieConfig\n\n// funnel, heatmap\nexport const funnelConfig = pieConfig\nexport const heatmapConfig = pieConfig\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  columnParallelConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const columnParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForColumn, buildMeasures],\n    [encodingForColumn, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import{a as i}from\"./chunk-WIMGWYZL.js\";function k(...n){return i(u,n)}function u(n,e){if(n===e||Object.is(n,e))return!0;if(typeof n!=\"object\"||typeof e!=\"object\"||n===null||e===null||Object.getPrototypeOf(n)!==Object.getPrototypeOf(e))return!1;if(Array.isArray(n))return l(n,e);if(n instanceof Map)return a(n,e);if(n instanceof Set)return c(n,e);if(n instanceof Date)return n.getTime()===e.getTime();if(n instanceof RegExp)return n.toString()===e.toString();if(Object.keys(n).length!==Object.keys(e).length)return!1;for(let[r,t]of Object.entries(n))if(!(r in e)||!u(t,e[r]))return!1;return!0}function l(n,e){if(n.length!==e.length)return!1;for(let[r,t]of n.entries())if(!u(t,e[r]))return!1;return!0}function a(n,e){if(n.size!==e.size)return!1;for(let[r,t]of n.entries())if(!e.has(r)||!u(t,e.get(r)))return!1;return!0}function c(n,e){if(n.size!==e.size)return!1;let r=[...e];for(let t of n){let o=!1;for(let[s,f]of r.entries())if(u(t,f)){o=!0,r.splice(s,1);break}if(!o)return!1}return!0}export{k as a};\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initColumnParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.x, encoding.color)\n\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = [unfoldInfo.encodingX]\n\n  if (!sameDimensionsMode) {\n    result.xField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.y?.length === 1) {\n      result.xField.pop()\n    }\n  }\n\n  result.yField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import { isNullish } from 'remeda'\nimport type { BarGapInGroup, VChartSpecPipe } from 'src/types'\n\nexport const barGapInGroup: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const barGapInGroup = advancedVSeed.config?.[chartType as 'columnParallel']?.barGapInGroup as BarGapInGroup\n\n  if (!isNullish(barGapInGroup)) {\n    return {\n      ...spec,\n      barGapInGroup,\n    }\n  }\n\n  return spec\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  xBand,\n  yLinear,\n  initColumnParallel,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotIndicators,\n  initPivot,\n  datasetPivot,\n  pivotAdapter,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  barGapInGroup,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst columnParallel: VChartSpecPipeline = [\n  initColumnParallel,\n  stackCornerRadius,\n  barMaxWidth,\n  barGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotColumnParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumnParallel,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnParallelSpecPipeline = [pivotAdapter(columnParallel, pivotColumnParallel)]\n","import { columnParallelAdvancedPipeline, columnParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumnParallel = () => {\n  Builder._advancedPipelineMap['columnParallel'] = columnParallelAdvancedPipeline\n  Builder._specPipelineMap['columnParallel'] = columnParallelSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  columnPercentConfig,\n  markStyle,\n  annotation,\n  sortXBandAxis,\n  sortLegend,\n  encodingForColumn,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForColumn,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const columnPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForColumn, buildMeasures],\n    [encodingForColumn, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  columnPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IAreaChartSpec, IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const percent: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IAreaChartSpec | IBarChartSpec\n  result.percent = true\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initColumn,\n  datasetXY,\n  xBand,\n  yLinear,\n  percent,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst columnPercent: VChartSpecPipeline = [\n  initColumn,\n  stackCornerRadius,\n  stackInverse,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotColumnPercent: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initColumn,\n    stackCornerRadius,\n    stackInverse,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    percent,\n    backgroundColor,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairRect,\n    colorBarStyleFill(barStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const columnPercentSpecPipeline = [pivotAdapter(columnPercent, pivotColumnPercent)]\n","import { columnPercentAdvancedPipeline, columnPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerColumnPercent = () => {\n  Builder._advancedPipelineMap['columnPercent'] = columnPercentAdvancedPipeline\n  Builder._specPipelineMap['columnPercent'] = columnPercentSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForBar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForBar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.y = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // y\n  encoding.y = unique(dimensions.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  if (encoding.y.length === 0) {\n    encoding.y = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.x = unique(measures.filter((item) => item.encoding === 'xAxis' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // x\n  encoding.x = unique(measures.filter((item) => item.encoding === 'xAxis' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipe, Dataset, DatasetReshapeInfo, Line } from 'src/types'\nimport { calcOrder } from './common'\n\nexport const sortYBandAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { sort: sortAxis } = vseed as Line\n  const { datasetReshapeInfo, dataset } = advancedVSeed as { datasetReshapeInfo: DatasetReshapeInfo; dataset: Dataset }\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const yField = unfoldInfo?.encodingY\n  if (!sortAxis || !yField) {\n    return advancedVSeed\n  }\n  if (!result.analysis) result.analysis = {}\n  if (!result.analysis.orderMapping) result.analysis.orderMapping = {}\n\n  const axisOrderResult = calcOrder(sortAxis, yField, dataset.flat(2))\n\n  result.analysis.orderMapping[yField] = axisOrderResult\n\n  return result\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  buildMeasures,\n  pivotAdapter,\n  barConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForBar, buildMeasures],\n    [encodingForBar, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initBar: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'bar'\n  result.direction = 'horizontal'\n  result.yField = unfoldInfo.encodingY\n  result.xField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetYX: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const orderMapping = analysis?.orderMapping || {}\n\n  const angle = unfoldInfo.encodingAngle\n  const y = unfoldInfo.encodingY\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n  if (angle) {\n    fields[angle] = {\n      sortIndex: 0,\n    }\n  }\n  if (y) {\n    const order = orderMapping[y]\n    if (order) {\n      fields[y] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[y] = {\n        sortIndex: 0,\n      }\n    }\n  }\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XLinearAxis } from 'src/types'\nimport {\n  AXIS_LABEL_SPACE,\n  createNumFormatter,\n  isAreaPercent,\n  isBarPercent,\n  isColumnPercent,\n  isPivotChart,\n  LINEAR_AXIS_INNER_OFFSET_TOP,\n} from 'src/pipeline/utils'\nimport { createLinearFormat, createLinearPercentFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\n\nexport const xLinear: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { encoding, dimensions, measures } = advancedVSeed\n  const { chartType } = vseed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.xAxis ?? {}) as XLinearAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n  const isPivot = isPivotChart(vseed)\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n    autoFormat,\n    numFormat = {},\n  } = config\n\n  const formatter = createNumFormatter(numFormat)\n  const percentFormatter = createNumFormatter({\n    type: 'percent',\n  })\n\n  const linearAxis = {\n    ...(isPivot\n      ? {\n          range: {\n            min,\n            max,\n          },\n        }\n      : {\n          min,\n          max,\n        }),\n    visible,\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient: 'bottom',\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod: (value: string) => {\n        if (isBarPercent(vseed) || isColumnPercent(vseed) || isAreaPercent(vseed)) {\n          return createLinearPercentFormat(value, autoFormat, numFormat, formatter, percentFormatter)\n        }\n        return createLinearFormat(value, autoFormat, numFormat, formatter)\n      },\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.x as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    innerOffset: {\n      right: LINEAR_AXIS_INNER_OFFSET_TOP,\n      // left: LINEAR_AXIS_INNER_OFFSET_TOP,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ICartesianBandAxisSpec, ISpec } from '@visactor/vchart'\nimport type { VChartSpecPipe, XBandAxis } from 'src/types'\nimport { defaultTitleText } from './title/defaultTitleText'\nimport { AXIS_LABEL_SPACE } from 'src/pipeline/utils'\nimport { MeasureId } from 'src/dataReshape'\nimport { isArray } from '@visactor/vutils'\n\nexport const yBand: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { measures, dimensions, encoding, datasetReshapeInfo, pivotAllDatasetReshapeInfo } = advancedVSeed\n  const config = (advancedVSeed.config?.[chartType as 'bar']?.yAxis ?? {}) as XBandAxis\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n    labelAutoHide,\n    labelAutoHideGap,\n    labelAutoLimit,\n    labelAutoLimitLength = 80,\n    labelAutoRotate,\n    labelAutoRotateAngleRange,\n  } = config\n\n  const sampling = !(labelAutoHide || labelAutoRotate || labelAutoLimit)\n  const onlyMeasureId = (encoding.y || []).filter((v) => v !== MeasureId).length === 0\n\n  const bandAxis = {\n    visible,\n    type: 'band',\n    orient: 'left',\n    maxWidth: labelAutoLimitLength + 60,\n    sampling,\n    hover: true,\n    label: {\n      visible: label?.visible,\n      flush: true,\n      containerAlign: 'right',\n      space: AXIS_LABEL_SPACE,\n      style: {\n        maxLineWidth: labelAutoLimitLength,\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n      // 防重叠相关\n      minGap: labelAutoHideGap,\n      autoHide: labelAutoHide,\n      autoHideMethod: 'greedy',\n      autoHideSeparation: labelAutoHideGap,\n      autoLimit: labelAutoLimit,\n      autoRotate: labelAutoRotate,\n      autoRotateAngle: labelAutoRotateAngleRange,\n      lastVisible: true,\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    paddingInner: [0.15, 0.1],\n    paddingOuter: [0.075, 0.1],\n  } as ICartesianBandAxisSpec\n  if (onlyMeasureId && bandAxis.label) {\n    const allDatasetReshapeInfo = pivotAllDatasetReshapeInfo || datasetReshapeInfo\n    const colorIdMap = allDatasetReshapeInfo.reduce<Record<string, { id: string; alias: string }>>((prev, cur) => {\n      return { ...prev, ...cur.unfoldInfo.colorIdMap }\n    }, {})\n\n    bandAxis.label.formatMethod = (text: string | string[]) => {\n      return isArray(text) ? text : (colorIdMap[String(text)]?.alias ?? text)\n    }\n  }\n\n  result.axes = [...result.axes, bandAxis] as ISpec['axes']\n  return result\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const horizontalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'column']?.crosshairRect\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const rectColor = config.rectColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || false\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.yField = {\n    visible,\n    line: {\n      type: 'rect',\n      style: {\n        lineWidth: 0,\n        opacity: 0.26,\n        fill: rectColor,\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const yAxisConfig = result.axes?.find((v) => v.orient === 'left')\n  const yAxisFormatter = yAxisConfig?.label?.formatMethod\n  if (yAxisFormatter) {\n    ;(crosshair.yField.label!.formatMethod as any) = (text: string | string[]) => yAxisFormatter(text)\n  }\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initBar,\n  datasetYX,\n  xLinear,\n  yBand,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst bar: VChartSpecPipeline = [\n  initBar,\n  stackCornerRadius,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBar: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBar,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetYX,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barSpecPipeline = [pivotAdapter(bar, pivotBar)]\n","import { barAdvancedPipeline, barSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBar = () => {\n  Builder._advancedPipelineMap['bar'] = barAdvancedPipeline\n  Builder._specPipelineMap['bar'] = barSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  buildMeasures,\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  barParallelConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForBar, buildMeasures],\n    [encodingForBar, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initBarParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.y, encoding.color)\n\n  result.type = 'bar'\n  result.direction = 'horizontal'\n\n  result.yField = [unfoldInfo.encodingY]\n\n  if (!sameDimensionsMode) {\n    result.yField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.x?.length === 1) {\n      result.yField.pop()\n    }\n  }\n\n  result.xField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetYX,\n  xLinear,\n  yBand,\n  initBarParallel,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  barGapInGroup,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst barParallel: VChartSpecPipeline = [\n  initBarParallel,\n  stackCornerRadius,\n  barMaxWidth,\n  barGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBarParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBarParallel,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetYX,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barParallelSpecPipeline = [pivotAdapter(barParallel, pivotBarParallel)]\n","import { barParallelAdvancedPipeline, barParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBarParallel = () => {\n  Builder._advancedPipelineMap['barParallel'] = barParallelAdvancedPipeline\n  Builder._specPipelineMap['barParallel'] = barParallelSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  buildMeasures,\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  barPercentConfig,\n  markStyle,\n  annotation,\n  sortYBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForBar,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForBar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const barPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForBar, buildMeasures],\n    [encodingForBar, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortYBandAxis,\n  sortLegend,\n  barPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  initBar,\n  datasetYX,\n  xLinear,\n  yBand,\n  percent,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsCol,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  barStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  horizontalCrosshairRect,\n  stackCornerRadius,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  barMaxWidth,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst barPercent: VChartSpecPipeline = [\n  initBar,\n  stackCornerRadius,\n  barMaxWidth,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetYX,\n  progressive,\n  xLinear,\n  yBand,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  horizontalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBarPercent: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsCol,\n  datasetPivot,\n  pivotIndicators([\n    initBar,\n    stackCornerRadius,\n    barMaxWidth,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    percent,\n    datasetYX,\n    xLinear,\n    pivotAxisStyle(yBand),\n    label,\n    tooltip,\n    colorBarStyleFill(barStyle),\n    horizontalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const barPercentSpecPipeline = [pivotAdapter(barPercent, pivotBarPercent)]\n","import { barPercentAdvancedPipeline, barPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBarPercent = () => {\n  Builder._advancedPipelineMap['barPercent'] = barPercentAdvancedPipeline\n  Builder._specPipelineMap['barPercent'] = barPercentSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  areaConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  encodingForLine,\n  defaultMeasures,\n  defaultMeasureId,\n  defaultDimensions,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const areaAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForLine, buildMeasures],\n    [encodingForLine, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  areaConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initArea: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IAreaChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'area'\n  result.direction = 'vertical'\n  result.yField = foldInfo.measureValue\n\n  result.xField = unfoldInfo.encodingX\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorAreaStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IAreaChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.area?.style) {\n        result.area.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import{a}from\"./chunk-WIMGWYZL.js\";function i(...e){return a(p,e)}var p=(e,d)=>{let r=Object.create(null);for(let n=0;n<e.length;n++){let t=e[n],y=d(t,n,e);if(y!==void 0){let o=r[y];o===void 0?r[y]=[t]:o.push(t)}}return Object.setPrototypeOf(r,Object.prototype),r};export{i as a};\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { AreaStyle, Datum, LineStyle, VChartSpecPipe } from 'src/types'\nimport { groupBy, isEmpty, isNullish } from 'remeda'\nimport { getCurveTension, getCurveType } from './curve'\n\nexport const areaStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { markStyle, datasetReshapeInfo, dataset } = advancedVSeed\n  const { areaStyle, lineStyle } = markStyle\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const result = {\n    ...spec,\n    area: {\n      visible: true,\n      style: {},\n    },\n  } as IAreaChartSpec\n\n  if (isNullish(areaStyle) || isEmpty(areaStyle)) {\n    return result\n  }\n\n  const areaStyles = (Array.isArray(areaStyle) ? areaStyle : [areaStyle]) as AreaStyle[]\n  const lineStyles = (Array.isArray(lineStyle) ? lineStyle : [lineStyle]) as LineStyle[]\n\n  const group = unfoldInfo.encodingColorId\n\n  const areaGroups = groupBy(dataset, (d) => d[group ?? ''] as string)\n\n  const customMap = areaStyles.reduce<object>((result, style, index) => {\n    const { areaColor, areaColorOpacity, areaVisible = true } = style\n\n    const curveType = getCurveType(context.vseed, lineStyles[index]?.lineSmooth)\n    const curveTension = getCurveTension(context.vseed, lineStyles[index]?.lineSmooth)\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          const lineData = areaGroups[datum[group ?? ''] as string]\n          for (const d of lineData) {\n            if (selector(d, style.selector)) {\n              return true\n            }\n          }\n          return false\n        },\n        style: {\n          curveType,\n          curveTension,\n          visible: areaVisible,\n          fill: areaColor,\n          fillOpacity: areaColorOpacity,\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    area: {\n      ...result.area,\n      visible: true,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  xBand,\n  yLinear,\n  initArea,\n  stackInverse,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotAdapter,\n  initPivot,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  areaStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  datasetXY,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotColorLegend,\n  pivotAxisStyle,\n  pivotTitle,\n  splitLine,\n  dimensionLinkage,\n} from '../pipes'\n\nconst area: VChartSpecPipeline = [\n  initArea,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  splitLine,\n]\n\nconst pivotArea: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initArea,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    stackInverse,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    splitLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const areaSpecPipeline = [pivotAdapter(area, pivotArea)]\n","import { areaAdvancedPipeline, areaSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerArea = () => {\n  Builder._advancedPipelineMap['area'] = areaAdvancedPipeline\n  Builder._specPipelineMap['area'] = areaSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  areaPercentConfig,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  encodingForLine,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForLine,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const areaPercentAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForLine, buildMeasures],\n    [encodingForLine, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  areaPercentConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  percent,\n  datasetXY,\n  xBand,\n  yLinear,\n  initArea,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotAdapter,\n  initPivot,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  lineStyle,\n  areaStyle,\n  verticalCrosshairLine,\n  progressive,\n  colorLegend,\n  colorAdapter,\n  linearColor,\n  pivotColorLegend,\n  pointStateDimensionHover,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst areaPercent: VChartSpecPipeline = [\n  initArea,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  percent,\n  datasetXY,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotAreaPercent: PivotChartSpecPipeline = [\n  initPivot,\n\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initArea,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    percent,\n    datasetXY,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const areaPercentSpecPipeline = [pivotAdapter(areaPercent, pivotAreaPercent)]\n","import { areaPercentAdvancedPipeline, areaPercentSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerAreaPercent = () => {\n  Builder._advancedPipelineMap['areaPercent'] = areaPercentAdvancedPipeline\n  Builder._specPipelineMap['areaPercent'] = areaPercentSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\n\nexport const defaultEncodingForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForScatter: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  // prepare measures and dimensions\n  const measures = findAllMeasures(vseedMeasures)\n\n  // exist encoding condition\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n  // encoding for modify in place\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const dimensionsWithoutMeasureId = dimensions.filter((item) => item.id !== MeasureId)\n  const uniqueDimIds = unique(dimensionsWithoutMeasureId.map((d) => d.id))\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  // color\n  encoding.color = unique(dimensions.filter((item) => item.encoding === 'color').map((item) => item.id))\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'xAxis' || item.encoding === 'yAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'xAxis' || item.encoding === 'yAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // size\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size').map((item) => item.id))\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipe, MeasureGroup, Measures, MeasureTree, Scatter, ScatterMeasures } from 'src/types'\nimport { isMeasureTreeWithParentId, isMeasureTreeWithChildren } from './utils'\nimport { clone } from 'remeda'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\n\nexport const buildMeasuresForScatter: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context as {\n    vseed: Scatter\n  }\n\n  // 带Children的指标树, 不进行任何处理\n  if (isMeasureTreeWithChildren(advancedVSeed.measures)) {\n    return advancedVSeed\n  }\n  // 带parentId的指标树, 转换为带children的指标树\n  if (isMeasureTreeWithParentId(advancedVSeed.measures)) {\n    advancedVSeed.measures = generateMeasuresByParentId(advancedVSeed.measures as Measures)\n    return advancedVSeed\n  }\n\n  /**\n   * 既不是带Children的指标树, 也不是带parentId的指标树, 则自动生成指标\n   */\n\n  const scatterMeasures = vseed.scatterMeasures\n    ? clone(vseed.scatterMeasures)\n    : basicMeasuresToScatterMeasures(advancedVSeed.measures || [])\n  advancedVSeed.measures = scatterMeasuresToMeasureTree(scatterMeasures)\n\n  return advancedVSeed\n}\n\nconst basicMeasuresToScatterMeasures = (basicMeasures: Measures): ScatterMeasures => {\n  const yMeasures: Measures = []\n  const xMeasures: Measures = []\n\n  for (let index = 0; index < basicMeasures.length; index++) {\n    const item = basicMeasures[index]\n    const encoding = Array.isArray(item.encoding) ? item.encoding : [item.encoding]\n    const isYAxis = encoding.includes('yAxis')\n    const isXAxis = encoding.includes('xAxis')\n\n    if (isYAxis) {\n      yMeasures.push(item)\n    } else if (isXAxis) {\n      xMeasures.push(item)\n    } else {\n      if (index !== 0) {\n        yMeasures.push(item)\n      } else {\n        xMeasures.push(item)\n      }\n    }\n  }\n\n  if (yMeasures.length === 0 && xMeasures.length > 0) {\n    yMeasures.push(xMeasures[0])\n  }\n\n  return [{ id: 'scatterMeasures', xMeasures, yMeasures }]\n}\n\nconst scatterMeasuresToMeasureTree = (scatterMeasures: ScatterMeasures): MeasureTree => {\n  const measureTree = scatterMeasures.map((item, index): MeasureGroup => {\n    const { id, xMeasures, yMeasures } = item\n    const groupChildren: MeasureGroup[] = []\n\n    let groupId: string = `${id}-`\n    if (xMeasures) {\n      const arrPrimaryMeasures = Array.isArray(xMeasures) ? xMeasures : [xMeasures]\n      const alias = arrPrimaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-x`,\n        alias: arrPrimaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrPrimaryMeasures,\n      })\n    }\n    if (yMeasures) {\n      const arrSecondaryMeasures = Array.isArray(yMeasures) ? yMeasures : [yMeasures]\n      const alias = arrSecondaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-y`,\n        alias: arrSecondaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrSecondaryMeasures,\n      })\n    }\n\n    return {\n      id: groupId,\n      alias: groupId,\n      children: groupChildren,\n    }\n  })\n\n  // 只有1个散点图, 仅返回2层, vchart 绘制散点图\n  if (scatterMeasures.length === 1) {\n    return measureTree[0].children || []\n  }\n\n  // 有多个散点图, 返回3层, pivot chart 绘制组合散点图\n  return measureTree\n}\n\nconst generateMeasuresByParentId = (measures: Measures) => {\n  const scatterMeasures: ScatterMeasures = []\n\n  measures.forEach((item) => {\n    const id = item.parentId || DEFAULT_PARENT_ID\n\n    if (!scatterMeasures.find((d) => d.id === id)) {\n      scatterMeasures.push({\n        id,\n        yMeasures: [],\n        xMeasures: [],\n      })\n    }\n    const scatterChart = scatterMeasures.find((d) => d.id === id)\n    if (!scatterChart || !Array.isArray(scatterChart.yMeasures) || !Array.isArray(scatterChart.xMeasures)) {\n      return\n    }\n\n    const encoding = Array.isArray(item.encoding) ? item.encoding : [item.encoding].filter(Boolean)\n    const isX = encoding.includes('xAxis')\n    const isY = encoding.includes('yAxis')\n    const isEmpty = !encoding.length\n    if (isY) {\n      scatterChart.yMeasures.push(item)\n    } else if (isX) {\n      scatterChart.xMeasures.push(item)\n    } else if (isEmpty) {\n      if (scatterChart.yMeasures.length !== 0) {\n        scatterChart.yMeasures.push(item)\n      } else {\n        scatterChart.xMeasures.push(item)\n      }\n    }\n  })\n\n  return scatterMeasuresToMeasureTree(scatterMeasures)\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const scatterConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'sizeRange',\n    'size',\n    'crosshairLine',\n\n    'dimensionLinkage',\n  ]) as Config['line']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { uniqueBy } from 'remeda'\nimport {\n  dataReshapeByEncoding,\n  FoldXMeasureId,\n  FoldXMeasureValue,\n  FoldYMeasureId,\n  FoldYMeasureValue,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const reshapeWithScatterEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  if (measures.length > 2) {\n    throw new Error('measures can not be more than 2 groups in scatter')\n  }\n  const foldInfoList: FoldInfo[] = []\n  const unfoldInfoList: UnfoldInfo[] = []\n\n  const datasets: Dataset[] = []\n  const xMeasures = measures[0] as MeasureGroup\n  const yMeasures = (measures[1] || xMeasures) as MeasureGroup\n\n  if (xMeasures && xMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (d) => d.id),\n      uniqueBy(xMeasures.children, (d) => d.id),\n      encoding as Encoding,\n      {\n        foldMeasureValue: FoldXMeasureValue,\n        foldMeasureId: FoldXMeasureId,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets.push(newDataset)\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  if (yMeasures && yMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      datasets[0],\n      uniqueBy(dimensions, (d) => d.id),\n      uniqueBy(yMeasures.children, (d) => d.id),\n      encoding as Encoding,\n      {\n        foldMeasureValue: FoldYMeasureValue,\n        foldMeasureId: FoldYMeasureId,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets[0] = newDataset\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  const unfoldInfo: UnfoldInfo = {\n    ...unfoldInfoList[0],\n    colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n    colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n  }\n\n  return {\n    ...result,\n    dataset: datasets[0],\n\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo: foldInfoList[0],\n        foldInfoList: foldInfoList,\n        unfoldInfo: unfoldInfo,\n      },\n    ],\n  }\n}\n","import { dataReshapeByEncoding, FoldXMeasureValue, FoldYMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures, measureDepth } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithScatterEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const allMeasures = findAllMeasures(measures)\n\n  const measureGroups: Array<MeasureGroup[]> = []\n\n  const depth = measureDepth(measures)\n  if (depth === 3) {\n    measures.forEach((measure: MeasureGroup) => {\n      measureGroups.push(measure.children as unknown as MeasureGroup[])\n    })\n  } else if (depth === 2) {\n    measureGroups.push(measures)\n  }\n\n  const datasetList: Dataset[] = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measures: MeasureGroup[], index) => {\n    if (measures.length > 2) {\n      throw new Error('measures can not be more than 2 groups in scatter')\n    }\n\n    const foldInfoList: FoldInfo[] = []\n    const unfoldInfoList: UnfoldInfo[] = []\n\n    const datasets: Dataset[] = []\n    const xMeasures = measures[0]\n    const yMeasures = measures[1] || xMeasures\n\n    if (xMeasures && xMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(dataset, dimensions, xMeasures.children, encoding as Encoding, {\n        foldMeasureValue: `${FoldXMeasureValue}${index}`,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasures.map((item) => item.id),\n      })\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    if (yMeasures && yMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(dataset, dimensions, yMeasures.children, encoding as Encoding, {\n        foldMeasureValue: `${FoldYMeasureValue}${index}`,\n        colorItemAsId: true,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n        omitIds: allMeasures.map((item) => item.id),\n      })\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    const unfoldInfo: UnfoldInfo = {\n      ...unfoldInfoList[0],\n      colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n      colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n    }\n\n    const reshapeInfo = {\n      id: `${chartType}-${index}`,\n      index,\n      foldInfo: foldInfoList[0],\n      foldInfoList: foldInfoList,\n      unfoldInfo: unfoldInfo,\n    }\n\n    datasetReshapeInfo.push(reshapeInfo)\n    datasetList.push(datasets[0].map((d, index) => ({ ...d, ...(datasets[1]?.[index] || {}) })))\n  })\n\n  return {\n    ...result,\n    dataset: datasetList,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  scatterConfig,\n  encodingForScatter,\n  buildMeasuresForScatter,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForScatter,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  regressionLine,\n} from '../pipes'\nimport { reshapeWithScatterEncoding } from '../pipes/reshape/reshapeWithScatterEncoding'\nimport { pivotReshapeWithScatterEncoding } from '../pipes/reshape/pivotReshapeWithScatterEncoding'\n\nexport const scatterAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForScatter, buildMeasuresForScatter],\n    [\n      encodingForScatter,\n      buildMeasuresForScatter,\n      pickMeasuresForReshape(['tooltip', 'label', 'size']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithScatterEncoding], [pivotReshapeWithScatterEncoding]),\n\n  scatterConfig,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList } = datasetReshapeInfo[0]\n\n  result.type = 'scatter'\n  result.direction = 'vertical'\n  result.xField = foldInfoList?.[0].measureValue\n  if (foldInfoList?.[1]) {\n    result.yField = foldInfoList[1].measureValue\n  }\n\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetScatter: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const scatterSize: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed } = context\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as {\n    sizeRange: number | number[]\n    size?: number | number[]\n  }\n  const hasSizeEncoding = encoding?.size?.[0]\n  if (!hasSizeEncoding) {\n    return result\n  }\n\n  const size = baseConfig.size ?? baseConfig.sizeRange\n\n  result.size = {\n    type: 'linear',\n    range: Array.isArray(size) ? size : [size, size],\n  } as IScatterChartSpec['size']\n\n  result.sizeField = encoding?.size?.[0] || undefined\n\n  return result\n}\n","import type { IScatterChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, Label, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IScatterChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    foldInfoList,\n  ) as unknown as IScatterChartSpec['label']\n\n  return result\n}\n","import { uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Locale, Measures, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\n\nexport const tooltipScatter: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, chartType, locale, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const { foldInfoList } = datasetReshapeInfo[0] as unknown as {\n    foldInfoList: FoldInfo[]\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        locale,\n        foldInfoList,\n      ),\n    },\n    dimension: {\n      visible: false,\n    },\n  }\n  return result\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures,\n  locale: Locale,\n  foldInfoList: FoldInfo[],\n) => {\n  const dims = uniqueBy(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n  const meas = uniqueBy(\n    measures.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const foldMeaContent = foldInfoList.map((foldInfo) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: Object.values(foldInfo.foldMap)[0],\n      value: (v: unknown) => {\n        const { measureId, measureValue } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    }\n  })\n  return [...dimContent, ...foldMeaContent, ...meaContent]\n}\n","import type { ICartesianCrosshairSpec, ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const horizontalCrosshairLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n\n  const config = advancedVSeed.config?.[chartType as 'line']?.crosshairLine\n  if (!config) {\n    return result\n  }\n\n  if (!result.crosshair) {\n    result.crosshair = {}\n  }\n\n  const visible = config.visible || true\n  const lineColor = config.lineColor || undefined\n  const labelColor = config.labelColor || undefined\n  const labelVisible = config.labelVisible || undefined\n  const labelBackgroundColor = config.labelBackgroundColor || undefined\n\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  crosshair.yField = {\n    visible,\n    line: {\n      type: 'line',\n      style: {\n        lineWidth: 1,\n        opacity: 1,\n        stroke: lineColor,\n        lineDash: config.lineDash ?? [4, 2],\n      },\n    },\n    label: {\n      visible: labelVisible,\n      labelBackground: {\n        visible: labelVisible,\n        style: {\n          fill: labelBackgroundColor,\n        },\n      },\n      style: {\n        fill: labelColor,\n      },\n    },\n  }\n  const yAxisConfig = result.axes?.find((v) => v.orient === 'left')\n  const yAxisFormatter = yAxisConfig?.label?.formatMethod\n  if (yAxisFormatter) {\n    ;(crosshair.yField.label!.formatMethod as any) = (text: string | string[]) => yAxisFormatter(text)\n  }\n\n  return result\n}\n","import { visitPoints } from \"./regression-linear\";\n\nimport { computeLinearCIComponents, invNorm, stdErrorsAt } from \"./regression-utils\";\n\nfunction tricube(u) {\n    const uu = Math.abs(u);\n    if (uu >= 1) return 0;\n    const t = 1 - uu * uu * uu;\n    return t * t * t;\n}\n\nexport function regressionLowess(data, x = (d => d.x), y = (d => d.y), options = {}) {\n    var _a;\n    const span = options.span || .3, degree = 0 === options.degree ? 0 : 1, alpha = null !== (_a = null == options ? void 0 : options.alpha) && void 0 !== _a ? _a : .05, iterations = null == options.iterations ? 2 : options.iterations, ptsX = [], ptsY = [];\n    visitPoints(data, x, y, ((dx, dy) => {\n        ptsX.push(dx), ptsY.push(dy);\n    }));\n    const n = ptsX.length;\n    function predictSingle(x0, robustWeights) {\n        if (0 === n) return 0;\n        const dists = [];\n        for (let i = 0; i < n; i++) dists.push({\n            idx: i,\n            dist: Math.abs(ptsX[i] - x0)\n        });\n        dists.sort(((a, b) => a.dist - b.dist));\n        const m = Math.max(2, Math.min(n, Math.floor(span * n))), maxDist = dists[m - 1].dist || 0, w = new Array(m);\n        let sumw = 0;\n        for (let i = 0; i < m; i++) {\n            const idx = dists[i].idx;\n            let wi = tricube(0 === maxDist ? 0 : dists[i].dist / maxDist);\n            robustWeights && null != robustWeights[idx] && (wi *= robustWeights[idx]), w[i] = wi, \n            sumw += wi;\n        }\n        if (0 === sumw) return ptsY[dists[0].idx];\n        if (0 === degree) {\n            let s = 0;\n            for (let i = 0; i < m; i++) s += w[i] * ptsY[dists[i].idx];\n            return s / sumw;\n        }\n        let sw = 0, sx = 0, sy = 0, sxx = 0, sxy = 0;\n        for (let i = 0; i < m; i++) {\n            const idx = dists[i].idx, xi = ptsX[idx], yi = ptsY[idx], wi = w[i];\n            sw += wi, sx += wi * xi, sy += wi * yi, sxx += wi * xi * xi, sxy += wi * xi * yi;\n        }\n        const meanX = sx / sw, meanY = sy / sw, denom = sxx - sx * meanX, slope = Math.abs(denom) < 1e-12 ? 0 : (sxy - sx * meanY) / denom;\n        return meanY - slope * meanX + slope * x0;\n    }\n    function predict(x0) {\n        if (Array.isArray(x0)) {\n            const out = [];\n            for (let i = 0; i < x0.length; i++) out.push(predictSingle(x0[i]));\n            return out;\n        }\n        return predictSingle(x0);\n    }\n    return {\n        predict: predict,\n        evaluate: predict,\n        evaluateGrid: function(N) {\n            const out = [];\n            if (N <= 0) return out;\n            if (0 === n) return out;\n            let min = 1 / 0, max = -1 / 0;\n            for (let i = 0; i < n; i++) ptsX[i] < min && (min = ptsX[i]), ptsX[i] > max && (max = ptsX[i]);\n            if (min === max) {\n                const v = predictSingle(min);\n                for (let i = 0; i < N; i++) out.push({\n                    x: min,\n                    y: v\n                });\n                return out;\n            }\n            const step = (max - min) / (N - 1);\n            let robustWeights;\n            for (let iter = 0; iter < iterations; iter++) {\n                const fits = [];\n                for (let i = 0; i < n; i++) fits.push(predictSingle(ptsX[i], robustWeights));\n                const res = [];\n                for (let i = 0; i < n; i++) res.push(Math.abs(ptsY[i] - fits[i]));\n                const med = res.slice().sort(((a, b) => a - b))[Math.floor(n / 2)] || 0;\n                robustWeights = new Array(n);\n                for (let i = 0; i < n; i++) {\n                    const u = 0 === med ? 0 : res[i] / (6 * med), w = Math.abs(u) >= 1 ? 0 : (1 - u * u) * (1 - u * u);\n                    robustWeights[i] = w;\n                }\n            }\n            for (let i = 0; i < N; i++) {\n                const px = i === N - 1 ? max : min + step * i;\n                out.push({\n                    x: px,\n                    y: predictSingle(px, robustWeights)\n                });\n            }\n            return out;\n        },\n        confidenceInterval: function(N = 50) {\n            const out = [];\n            if (N <= 0) return out;\n            if (0 === n) return out;\n            let min = 1 / 0, max = -1 / 0;\n            for (let i = 0; i < n; i++) ptsX[i] < min && (min = ptsX[i]), ptsX[i] > max && (max = ptsX[i]);\n            if (min === 1 / 0 || max === -1 / 0) return out;\n            const comps = computeLinearCIComponents(data, x, y, (xx => predictSingle(xx)));\n            if (0 === comps.n) return out;\n            const z = Math.abs(invNorm(1 - alpha / 2));\n            if (comps.min === comps.max) {\n                const v = predictSingle(comps.min), errs = stdErrorsAt(comps.min, comps);\n                for (let i = 0; i < N; i++) out.push({\n                    x: comps.min,\n                    mean: v,\n                    lower: v - z * errs.seMean,\n                    upper: v + z * errs.seMean,\n                    predLower: v - z * errs.sePred,\n                    predUpper: v + z * errs.sePred\n                });\n                return out;\n            }\n            const step = (max - min) / (N - 1);\n            for (let i = 0; i < N; i++) {\n                const px = i === N - 1 ? max : min + step * i, yh = predictSingle(px), errs = stdErrorsAt(px, comps);\n                out.push({\n                    x: px,\n                    mean: yh,\n                    lower: yh - z * errs.seMean,\n                    upper: yh + z * errs.seMean,\n                    predLower: yh - z * errs.sePred,\n                    predUpper: yh + z * errs.sePred\n                });\n            }\n            return out;\n        }\n    };\n}\n\nexport default regressionLowess;\n//# sourceMappingURL=regression-lowess.js.map\n","import { visitPoints } from \"./regression-linear\";\n\nimport { computeLinearCIComponents, invNorm, stdErrorsAt } from \"./regression-utils\";\n\nexport function regressionLogistic(data, x = (d => d.x), y = (d => d.y), options) {\n    var _a, _b, _c;\n    const maxIter = null !== (_a = null == options ? void 0 : options.maxIteration) && void 0 !== _a ? _a : 25, tol = null !== (_b = null == options ? void 0 : options.tol) && void 0 !== _b ? _b : 1e-6, alpha = null !== (_c = null == options ? void 0 : options.alpha) && void 0 !== _c ? _c : .05, xs = [], ys = [];\n    visitPoints(data, x, y, ((dx, dy) => {\n        xs.push(dx), ys.push(dy ? 1 : 0);\n    }));\n    const n = xs.length;\n    if (0 === n) return {\n        coef: [ 0, 0 ],\n        predict: _x => 0,\n        evaluateGrid: N => [],\n        confidenceInterval: (N = 50) => []\n    };\n    let intercept = 0, beta = 0;\n    for (let iter = 0; iter < maxIter; iter++) {\n        const p = new Array(n);\n        let converged = !0;\n        for (let i = 0; i < n; i++) {\n            const z = intercept + beta * xs[i], pi = 1 / (1 + Math.exp(-z));\n            p[i] = pi;\n        }\n        let g0 = 0, g1 = 0, h00 = 0, h01 = 0, h11 = 0;\n        for (let i = 0; i < n; i++) {\n            const wi = p[i] * (1 - p[i]), diff = ys[i] - p[i];\n            g0 += diff, g1 += diff * xs[i], h00 += wi, h01 += wi * xs[i], h11 += wi * xs[i] * xs[i];\n        }\n        const det = h00 * h11 - h01 * h01;\n        if (Math.abs(det) < 1e-12) break;\n        const delta0 = (h11 * g0 - h01 * g1) / det, delta1 = (-h01 * g0 + h00 * g1) / det;\n        if (intercept += delta0, beta += delta1, (Math.abs(delta0) > tol || Math.abs(delta1) > tol) && (converged = !1), \n        converged) break;\n    }\n    const predict = xx => {\n        const z = intercept + beta * xx;\n        return 1 / (1 + Math.exp(-z));\n    };\n    return {\n        coef: [ intercept, beta ],\n        predict: predict,\n        evaluateGrid: function(N) {\n            const out = [];\n            if (N <= 0) return out;\n            let min = 1 / 0, max = -1 / 0;\n            if (visitPoints(data, x, y, (dx => {\n                dx < min && (min = dx), dx > max && (max = dx);\n            })), min === 1 / 0 || max === -1 / 0) return out;\n            if (min === max) {\n                const v = predict(min);\n                for (let i = 0; i < N; i++) out.push({\n                    x: min,\n                    y: v\n                });\n                return out;\n            }\n            const step = (max - min) / (N - 1);\n            for (let i = 0; i < N; i++) {\n                const px = i === N - 1 ? max : min + step * i;\n                out.push({\n                    x: px,\n                    y: predict(px)\n                });\n            }\n            return out;\n        },\n        confidenceInterval: function(N = 50) {\n            const out = [];\n            if (N <= 0) return out;\n            const comps = computeLinearCIComponents(data, x, y, predict);\n            if (0 === comps.n) return out;\n            const z = Math.abs(invNorm(1 - alpha / 2));\n            if (comps.min === comps.max) {\n                const v = predict(comps.min), errs = stdErrorsAt(comps.min, comps);\n                for (let i = 0; i < N; i++) out.push({\n                    x: comps.min,\n                    mean: v,\n                    lower: v - z * errs.seMean,\n                    upper: v + z * errs.seMean,\n                    predLower: v - z * errs.sePred,\n                    predUpper: v + z * errs.sePred\n                });\n                return out;\n            }\n            const step = (comps.max - comps.min) / (N - 1);\n            for (let i = 0; i < N; i++) {\n                const px = i === N - 1 ? comps.max : comps.min + step * i, yh = predict(px), errs = stdErrorsAt(px, comps);\n                out.push({\n                    x: px,\n                    mean: yh,\n                    lower: yh - z * errs.seMean,\n                    upper: yh + z * errs.seMean,\n                    predLower: yh - z * errs.sePred,\n                    predUpper: yh + z * errs.sePred\n                });\n            }\n            return out;\n        }\n    };\n}\n\nexport default regressionLogistic;\n//# sourceMappingURL=regression-logistic.js.map\n","import type { ICartesianSeries, IChart, IScatterChartSpec, IVChart } from '@visactor/vchart'\nimport { isNullish } from 'remeda'\nimport {\n  array,\n  clamper,\n  regressionLinear,\n  regressionLowess,\n  regressionPolynomial,\n  regressionLogistic,\n} from '@visactor/vutils'\nimport type {\n  Datum,\n  VChartSpecPipe,\n  RegressionLineConfig,\n  LinearRegressionLine,\n  PolynomialRegressionLine,\n  SpecPipelineContext,\n  LogisticRegressionLine,\n  LowessRegressionLine,\n} from 'src/types'\nimport { getAlphaByConfidenceLevel } from './common'\n\nexport const generateRegressionLinePipe = (\n  type: 'linearRegressionLine' | 'lowessRegressionLine' | 'polynomialRegressionLine' | 'logisticRegressionLine',\n  regressionFunction: (\n    arr: Datum[],\n    xAccessor: (d: Datum) => number,\n    yAccessor: (d: Datum) => number,\n    options?: any,\n  ) => {\n    confidenceInterval: (N: number) => { lower: number; upper: number; x: number }[]\n    evaluateGrid: (N: number) => { x: number; y: number }[]\n  },\n  getOptions: (lineConfig: any) => any = getDefaultRegressionOptions,\n  getMinPoints: (lineConfig: any) => number = () => 2,\n): VChartSpecPipe => {\n  return ((spec: Partial<IScatterChartSpec>, context: SpecPipelineContext): Partial<IScatterChartSpec> => {\n    const result = { ...spec }\n    const { advancedVSeed } = context\n    const { chartType, regressionLine } = advancedVSeed\n    const lineTheme = advancedVSeed.config[chartType as 'scatter']?.regressionLine as RegressionLineConfig\n\n    if (!regressionLine || !regressionLine[type]) {\n      return result\n    }\n\n    const lineList = array(regressionLine[type])\n\n    if (!result.extensionMark) {\n      result.extensionMark = []\n    }\n\n    lineList.forEach((line, lineIndex) => {\n      if (line.enable === false) {\n        return\n      }\n\n      const theme = (lineTheme.linearRegressionLine ?? {}) as LinearRegressionLine\n      const {\n        color,\n        lineWidth,\n        lineDash,\n        text,\n        textColor,\n        textFontSize,\n        textFontWeight,\n        confidenceIntervalOpacity,\n        confidenceIntervalVisible = theme.confidenceIntervalVisible,\n      } = line as LinearRegressionLine\n\n      const childrenMarks: any[] = []\n\n      ;(result.extensionMark as any[]).push({\n        type: 'group',\n        interactive: false,\n        zIndex: 500,\n        name: `${type}-${lineIndex}`,\n        layoutType: 'region-relative',\n        dataId: (spec.data as any)?.id,\n        animation: false,\n        style: {\n          data: (datum: any, ctx: any) => {\n            const vchart = ctx.vchart as IVChart\n            const chart = vchart.getChart() as IChart\n            const s = chart.getAllSeries()[0] as ICartesianSeries\n\n            if (s) {\n              const rect = s.getRegion().getLayoutRect()\n              const segments: {\n                areaPoints?: { x: number; y: number; y1: number }[]\n                linePoints: { x: number; y: number }[]\n                color: string\n              }[] = []\n\n              if (rect.width === 0 || rect.height === 0) {\n                return segments\n              }\n\n              const yClamper = clamper(0, rect.height)\n              const colorAttrOptions = s.getColorAttribute()\n              const groups: (string | undefined)[] = s.getSeriesKeys()\n              const data = s.getViewData()?.latestData as Datum[]\n              const fieldX = s.fieldX?.[0]\n              const fieldY = s.fieldY?.[0]\n\n              if (!groups.length) {\n                groups.push(undefined)\n              }\n\n              groups.forEach((group) => {\n                const groupData = data.filter((d: Datum) => d[colorAttrOptions?.field] === group)\n\n                const minPoints = getMinPoints(line)\n\n                if (groupData.length < minPoints) {\n                  return\n                }\n                const { confidenceInterval, evaluateGrid } = regressionFunction(\n                  groupData,\n                  (datum: Datum) => datum?.[fieldX],\n                  (datum: Datum) => datum?.[fieldY],\n                  getOptions?.(line),\n                )\n                const N = Math.max(3, Math.floor(groupData.length / 4))\n                const mainColor = color ?? colorAttrOptions?.scale?.scale(group)\n\n                const lineData = evaluateGrid(N)\n                const linePoints: { x: number; y: number }[] = []\n\n                lineData.forEach((ld: Datum, index: number) => {\n                  const d = { [fieldX]: ld.x, [fieldY]: ld.y }\n                  const x = s.dataToPositionX(d)!\n                  const y = yClamper(s.dataToPositionY(d)!)\n\n                  if (segments.length && index === 0) {\n                    segments[segments.length - 1].linePoints.push({ x, y: NaN }) // 断开线段用的\n                  }\n\n                  linePoints.push({\n                    x,\n                    y,\n                  })\n                })\n\n                const segment: {\n                  color: string\n                  linePoints: { x: number; y: number }[]\n                  areaPoints?: { x: number; y: number; y1: number }[]\n                } = {\n                  color: mainColor,\n                  linePoints,\n                }\n\n                if (confidenceIntervalVisible) {\n                  const intervalData = confidenceInterval(N)\n                  const areaPoints: { x: number; y: number; y1: number }[] = []\n\n                  intervalData.map((datum: Datum, index: number) => {\n                    const d = { [fieldX]: datum.x, [fieldY]: datum.lower }\n                    const x = s.dataToPositionX(d)!\n                    const y = yClamper(s.dataToPositionY(d)!)\n                    const y1 = yClamper(s.dataToPositionY({ [fieldY]: datum.upper })!)\n\n                    if (segments.length && index === 0) {\n                      segments[segments.length - 1].areaPoints!.push({ x, y: NaN, y1: NaN }) // 断开线段用的\n                    }\n\n                    areaPoints.push({ x, y, y1 })\n                  })\n\n                  segment.areaPoints = areaPoints\n                }\n\n                segments.push(segment)\n              })\n\n              return segments\n            }\n            return []\n          },\n        },\n        children: childrenMarks,\n      })\n\n      if (confidenceIntervalVisible) {\n        childrenMarks.push({\n          type: 'area',\n          interactive: false,\n          zIndex: 500,\n          dataId: (spec.data as any)?.id,\n          style: {\n            stroke: false,\n            lineWidth: lineWidth ?? theme.lineWidth,\n            lineDash: lineDash ?? theme.lineDash,\n            fillOpacity: confidenceIntervalOpacity ?? theme.confidenceIntervalOpacity,\n            fill: 'red', // vrender bug，必须要设置一个全局的fill，才会绘制\n            segments: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode) {\n                const data = parentNode.finalAttribute?.data ?? parentNode.attribute?.data\n\n                if (data?.length) {\n                  // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call\n                  return data.map((d: any) => {\n                    return {\n                      points: d.areaPoints ?? [],\n                      fill: d.color,\n                    }\n                  })\n                }\n              }\n\n              return []\n            },\n          },\n        })\n      }\n\n      childrenMarks.push({\n        type: 'line',\n        interactive: false,\n        zIndex: 500,\n        animation: false,\n        dataId: (spec.data as any)?.id,\n        style: {\n          lineWidth: lineWidth ?? theme.lineWidth,\n          lineDash: lineDash ?? theme.lineDash,\n          stroke: 'red', // vrender bug，必须要设置一个全局的stroke，才会绘制\n          segments: (datum: any, ctx: any, opt: any) => {\n            const parentNode = opt.mark?._product?.parent\n\n            if (parentNode) {\n              const data = parentNode.finalAttribute?.data ?? parentNode.attribute?.data\n              if (data?.length) {\n                // eslint-disable-next-line @typescript-eslint/no-unsafe-return, @typescript-eslint/no-unsafe-call\n                return data.map((d: any) => {\n                  return {\n                    points: d.linePoints,\n                    stroke: d.color,\n                  }\n                })\n              }\n            }\n\n            return []\n          },\n        },\n      })\n\n      if (!isNullish(text)) {\n        childrenMarks.push({\n          type: 'text',\n          interactive: false,\n          zIndex: 500,\n          animation: false,\n          dataId: (spec.data as any)?.id,\n          dataKey: () => {\n            return `regressionLine-label-${lineIndex}`\n          },\n          style: {\n            textAlign: 'end',\n            fill: textColor ?? theme.textColor,\n            fontSize: textFontSize ?? theme.textFontSize,\n            fontWeight: textFontWeight ?? theme.textFontWeight,\n            text: text,\n            x: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode?.attribute?.data?.length) {\n                const point = parentNode.attribute.data[parentNode.attribute.data.length - 1].linePoints\n                return point[point.length - 1]?.x\n              }\n\n              return undefined\n            },\n            y: (datum: any, ctx: any, opt: any) => {\n              const parentNode = opt.mark?._product?.parent\n\n              if (parentNode?.attribute?.data?.length) {\n                const point = parentNode.attribute.data[parentNode.attribute.data.length - 1].linePoints\n                return point[point.length - 1]?.y\n              }\n\n              return undefined\n            },\n          },\n        })\n      }\n    })\n\n    return result\n  }) as VChartSpecPipe\n}\n\nconst getDefaultRegressionOptions = (\n  lineConfig: PolynomialRegressionLine | LinearRegressionLine | LogisticRegressionLine | LowessRegressionLine,\n) => {\n  const alpha = getAlphaByConfidenceLevel(lineConfig?.confidenceLevel)\n  return { alpha }\n}\n\nexport const linearRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'linearRegressionLine',\n  regressionLinear,\n  getDefaultRegressionOptions,\n)\nexport const lowessRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'lowessRegressionLine',\n  regressionLowess,\n  getDefaultRegressionOptions,\n)\nexport const polynomialRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'polynomialRegressionLine',\n  regressionPolynomial,\n  (lineConfig: PolynomialRegressionLine) => {\n    return { ...getDefaultRegressionOptions(lineConfig), degree: lineConfig.degree ?? 2 }\n  },\n  (lineConfig: PolynomialRegressionLine) => (lineConfig.degree ?? 2) + 1,\n)\nexport const logisticRegressionLine: VChartSpecPipe = generateRegressionLinePipe(\n  'logisticRegressionLine',\n  regressionLogistic,\n  getDefaultRegressionOptions,\n)\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  yLinear,\n  backgroundColor,\n  tooltipScatter,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  pointStyle,\n  verticalCrosshairLine,\n  xLinear,\n  horizontalCrosshairLine,\n  pointStateHover,\n  initScatter,\n  progressive,\n  datasetScatter,\n  linearColor,\n  colorAdapter,\n  colorPointStyleFill,\n  colorLegend,\n  pivotColorLegend,\n  labelScatter,\n  scatterSize,\n  linearRegressionLine,\n  lowessRegressionLine,\n  polynomialRegressionLine,\n  logisticRegressionLine,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst scatter: VChartSpecPipeline = [\n  initScatter,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetScatter,\n  progressive,\n  xLinear,\n  yLinear,\n  scatterSize,\n  labelScatter,\n  tooltipScatter,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  horizontalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateHover,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  linearRegressionLine,\n  lowessRegressionLine,\n  polynomialRegressionLine,\n  logisticRegressionLine,\n]\n\nconst pivotScatter: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    initScatter,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetScatter,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yLinear),\n    scatterSize,\n    labelScatter,\n    tooltipScatter,\n    verticalCrosshairLine,\n    horizontalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateHover,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    linearRegressionLine,\n    lowessRegressionLine,\n    polynomialRegressionLine,\n    logisticRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const scatterSpecPipeline = [pivotAdapter(scatter, pivotScatter)]\n","import { scatterAdvancedPipeline, scatterSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerScatter = () => {\n  Builder._advancedPipelineMap['scatter'] = scatterAdvancedPipeline\n  Builder._specPipelineMap['scatter'] = scatterSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForDualAxis: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'primaryYAxis' || item.encoding === 'secondaryYAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.y = unique(\n    measures\n      .filter((item) => item.encoding === 'primaryYAxis' || item.encoding === 'secondaryYAxis' || !item.encoding)\n      .map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipe, DualAxis, DualMeasures, MeasureGroup, Measures, MeasureTree } from 'src/types'\nimport { isMeasureTreeWithParentId, isMeasureTreeWithChildren } from './utils'\nimport { clone } from 'remeda'\nimport { DEFAULT_PARENT_ID } from 'src/pipeline/utils/constant'\n\nexport const buildMeasuresForDualAxis: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context as {\n    vseed: DualAxis\n  }\n\n  // 带Children的指标树, 不进行任何处理\n  if (isMeasureTreeWithChildren(advancedVSeed.measures)) {\n    return advancedVSeed\n  }\n  // 带parentId的指标树, 转换为带children的指标树\n  if (isMeasureTreeWithParentId(advancedVSeed.measures)) {\n    advancedVSeed.measures = generateMeasuresByParentId(advancedVSeed.measures as Measures)\n    return advancedVSeed\n  }\n\n  /**\n   * 既不是带Children的指标树, 也不是带parentId的指标树, 则自动生成指标\n   */\n  const dualMeasures = vseed.dualMeasures\n    ? clone(vseed.dualMeasures)\n    : basicMeasuresToDualMeasures(advancedVSeed.measures || [])\n  advancedVSeed.measures = dualMeasuresToMeasureTree(dualMeasures)\n\n  return advancedVSeed\n}\n\nconst basicMeasuresToDualMeasures = (basicMeasures: Measures): DualMeasures => {\n  const primaryMeasures: Measures = []\n  const secondaryMeasures: Measures = []\n\n  for (let index = 0; index < basicMeasures.length; index++) {\n    const item = basicMeasures[index]\n    const encoding = Array.isArray(item.encoding) ? item.encoding : [item.encoding]\n    const isPrimaryYAxis = encoding.includes('primaryYAxis')\n    const isSecondaryYAxis = encoding.includes('secondaryYAxis')\n\n    if (isPrimaryYAxis) {\n      primaryMeasures.push(item)\n    } else if (isSecondaryYAxis) {\n      secondaryMeasures.push(item)\n    } else {\n      if (index === 0) {\n        primaryMeasures.push(item)\n      } else {\n        secondaryMeasures.push(item)\n      }\n    }\n  }\n\n  return [{ id: 'dualMeasures', primaryMeasures, secondaryMeasures }]\n}\n\nconst dualMeasuresToMeasureTree = (dualMeasures: DualMeasures): MeasureTree => {\n  const measureTree = dualMeasures.map((item, index): MeasureGroup => {\n    const { id, primaryMeasures, secondaryMeasures } = item\n    const groupChildren: MeasureGroup[] = []\n\n    let groupId: string = `${id}-`\n    if (primaryMeasures) {\n      const arrPrimaryMeasures = Array.isArray(primaryMeasures) ? primaryMeasures : [primaryMeasures]\n      const alias = arrPrimaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-primary`,\n        alias: arrPrimaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrPrimaryMeasures,\n      })\n    }\n    if (secondaryMeasures) {\n      const arrSecondaryMeasures = Array.isArray(secondaryMeasures) ? secondaryMeasures : [secondaryMeasures]\n      const alias = arrSecondaryMeasures.map((item) => item.alias || item.id).toString()\n      groupId += alias\n      groupChildren.push({\n        id: `${index}-secondary`,\n        alias: arrSecondaryMeasures.map((item) => item.alias || item.id).toString(),\n        children: arrSecondaryMeasures,\n      })\n    }\n\n    return {\n      id: groupId,\n      alias: groupId,\n      children: groupChildren,\n    }\n  })\n\n  // 只有1个双轴图, 仅返回2层, vchart 绘制双轴图\n  if (dualMeasures.length === 1) {\n    return measureTree[0].children || []\n  }\n\n  // 有多个双轴图, 返回3层, pivot chart 绘制组合双轴图\n  return measureTree\n}\n\nconst generateMeasuresByParentId = (measures: Measures) => {\n  const dualMeasures: DualMeasures = []\n\n  measures.forEach((item) => {\n    const id = item.parentId || DEFAULT_PARENT_ID\n    if (!dualMeasures.find((d) => d.id === id)) {\n      dualMeasures.push({\n        id,\n        primaryMeasures: [],\n        secondaryMeasures: [],\n      })\n    }\n\n    const dualChart = dualMeasures.find((d) => d.id === id)\n    if (!dualChart || !Array.isArray(dualChart.primaryMeasures) || !Array.isArray(dualChart.secondaryMeasures)) {\n      return\n    }\n\n    const encoding = Array.isArray(item.encoding) ? item.encoding : [item.encoding].filter(Boolean)\n    const isPrimary = encoding.includes('primaryYAxis')\n    const isSecondary = encoding.includes('secondaryYAxis')\n    const isEmpty = !item.encoding\n\n    if (isPrimary) {\n      dualChart.primaryMeasures.push(item)\n    } else if (isSecondary) {\n      dualChart.secondaryMeasures.push(item)\n    } else if (isEmpty) {\n      if (dualChart.primaryMeasures.length === 0) {\n        dualChart.primaryMeasures.push(item)\n      } else {\n        dualChart.secondaryMeasures.push(item)\n      }\n    }\n  })\n\n  return dualMeasuresToMeasureTree(dualMeasures)\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldPrimaryMeasureValue, FoldSecondaryMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const reshapeWithDualEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  if (measures.length > 2) {\n    throw new Error('measures can not be more than 2 groups in dualAxis')\n  }\n  const foldInfoList: FoldInfo[] = []\n  const unfoldInfoList: UnfoldInfo[] = []\n\n  const datasets: Dataset[] = []\n  const primaryMeasures = measures[0] as MeasureGroup\n  const secondaryMeasures = (measures[1] || []) as MeasureGroup\n\n  if (primaryMeasures && primaryMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item) => item.id),\n      uniqueBy(primaryMeasures.children, (item) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: FoldPrimaryMeasureValue,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets.push(newDataset)\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  if (secondaryMeasures && secondaryMeasures.children) {\n    const {\n      dataset: newDataset,\n      foldInfo,\n      unfoldInfo,\n    } = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item) => item.id),\n      uniqueBy(secondaryMeasures.children, (item) => item.id),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        foldMeasureValue: FoldSecondaryMeasureValue,\n        colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n      },\n    )\n\n    datasets.push(newDataset)\n    foldInfoList.push(foldInfo)\n    unfoldInfoList.push(unfoldInfo)\n  }\n\n  const unfoldInfo: UnfoldInfo = {\n    ...unfoldInfoList[0],\n    colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n    colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n  }\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo: foldInfoList[0],\n        foldInfoList: foldInfoList,\n        unfoldInfo: unfoldInfo,\n      },\n    ],\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { dataReshapeByEncoding, FoldPrimaryMeasureValue, FoldSecondaryMeasureValue } from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport { findAllMeasures, measureDepth } from 'src/pipeline/utils'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n  UnfoldInfo,\n} from 'src/types'\n\nexport const pivotReshapeWithDualEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset } = vseed as ColumnParallel\n  const { encoding, chartType } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n\n  const allMeasures = findAllMeasures(measures)\n  const datasetList: Dataset[] = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  const measureGroups: Array<MeasureGroup[]> = []\n\n  const depth = measureDepth(measures)\n  if (depth === 3) {\n    measures.forEach((measure: MeasureGroup) => {\n      measureGroups.push(measure.children as unknown as MeasureGroup[])\n    })\n  } else if (depth === 2) {\n    measureGroups.push(measures as unknown as MeasureGroup[])\n  }\n\n  measureGroups.forEach((measures: MeasureGroup[], index) => {\n    if (measures.length > 2) {\n      throw new Error('measures can not be more than 2 groups in dualAxis')\n    }\n\n    const foldInfoList: FoldInfo[] = []\n    const unfoldInfoList: UnfoldInfo[] = []\n\n    const datasets: Dataset[] = []\n    const primaryMeasures = measures[0]\n    const secondaryMeasures = measures[1] || []\n\n    if (primaryMeasures && primaryMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item) => item.id),\n        uniqueBy(primaryMeasures.children, (item) => item.id),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          foldMeasureValue: `${FoldPrimaryMeasureValue}${index}`,\n          colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n          omitIds: allMeasures.map((item) => item.id),\n        },\n      )\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    if (secondaryMeasures && secondaryMeasures.children) {\n      const {\n        dataset: newDataset,\n        foldInfo,\n        unfoldInfo,\n      } = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item) => item.id),\n        uniqueBy(secondaryMeasures.children, (item) => item.id),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          foldMeasureValue: `${FoldSecondaryMeasureValue}${index}`,\n          colorMeasureId: getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed),\n          omitIds: allMeasures.map((item) => item.id),\n        },\n      )\n\n      datasets.push(newDataset)\n      foldInfoList.push(foldInfo)\n      unfoldInfoList.push(unfoldInfo)\n    }\n\n    const unfoldInfo: UnfoldInfo = {\n      ...unfoldInfoList[0],\n      colorItems: unfoldInfoList.flatMap((d) => d.colorItems),\n      colorIdMap: unfoldInfoList.reduce((prev, cur) => ({ ...prev, ...cur.colorIdMap }), {}),\n    }\n\n    const reshapeInfo = {\n      id: `${chartType}-${index}`,\n      index,\n      foldInfo: foldInfoList[0],\n      foldInfoList: foldInfoList,\n      unfoldInfo: unfoldInfo,\n    }\n\n    datasetReshapeInfo.push(reshapeInfo)\n    datasetList.push(datasets.flat(2))\n  })\n\n  return {\n    ...result,\n    dataset: datasetList,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const dualAxisConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    // common\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n\n    // only for dualAxis\n    'dualChartType',\n    'alignTicks',\n    'primaryYAxis',\n    'secondaryYAxis',\n    'crosshairLine',\n    'crosshairRect',\n\n    'barGapInGroup',\n    'barMaxWidth',\n    'stackCornerRadius',\n\n    'dimensionLinkage',\n  ]) as Config['dualAxis']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  sortLegend,\n  dualAxisConfig,\n  encodingForDualAxis,\n  reshapeWithDualEncoding,\n  pivotReshapeWithDualEncoding,\n  buildMeasuresForDualAxis,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForDualAxis,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const dualAxisAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForDualAxis, buildMeasuresForDualAxis],\n    [\n      encodingForDualAxis,\n      buildMeasuresForDualAxis,\n      pickMeasuresForReshape(['tooltip', 'label', 'color']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithDualEncoding], [pivotReshapeWithDualEncoding]),\n\n  sortXBandAxis,\n  sortLegend,\n  dualAxisConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { SpecPipelineContext, VChartSpecPipe, VChartSpecPipeline } from 'src/types'\nimport { execPipeline } from '../../../../utils'\nimport type { ICommonChartSpec, ILineSeriesSpec, ISpec } from '@visactor/vchart'\n\nexport const series = (...args: VChartSpecPipeline[]): VChartSpecPipe => {\n  const result = {\n    type: 'common',\n    padding: 0,\n    region: [\n      {\n        clip: true,\n      },\n    ],\n  } as ICommonChartSpec\n\n  return (_: Partial<ISpec>, context: SpecPipelineContext) => {\n    result.series = args.map((pipeline) => {\n      return execPipeline<Partial<ISpec>, SpecPipelineContext>(pipeline, context, {})\n    }) as ILineSeriesSpec[]\n\n    return result as Partial<ISpec>\n  }\n}\n\n/**\n * @description 双轴图的透视场景, 不能使用此pipe, 请使用series\n * 因为VTable.PivotVChart会自行解析数据, 而非VChart解析.\n */\nexport const seriesDualAxis = (...args: VChartSpecPipeline[]): VChartSpecPipe => {\n  const result = {\n    type: 'common',\n    padding: 0,\n    labelLayout: 'region',\n    region: [\n      {\n        clip: true,\n      },\n    ],\n  } as ICommonChartSpec\n\n  const createDualContext = <T extends SpecPipelineContext>(context: T, index: number): T => {\n    const { advancedVSeed } = context\n    const dataset = advancedVSeed.dataset[index]\n    return {\n      ...context,\n      advancedVSeed: {\n        ...advancedVSeed,\n        dataset: dataset,\n      },\n    }\n  }\n\n  return (_: Partial<ISpec>, context: SpecPipelineContext) => {\n    result.series = args.map((pipeline, index) => {\n      const seriesContext = createDualContext(context, index)\n      return execPipeline<ISpec, SpecPipelineContext>(pipeline, seriesContext, {})\n    }) as ILineSeriesSpec[]\n\n    return result\n  }\n}\n","import type { IBarSeriesSpec, ILineSeriesSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initDualAxisPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarSeriesSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList, id } = datasetReshapeInfo[0]\n\n  result.id = `${id}-primary-series`\n  result.type = 'bar'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.yField = foldInfoList?.[0].measureValue\n  result.animation = true\n\n  return result\n}\n\nexport const initDualAxisSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineSeriesSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfoList, id } = datasetReshapeInfo[0]\n\n  result.id = `${id}-secondary-series`\n  result.type = 'line'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  if (foldInfoList?.[1]) {\n    result.yField = foldInfoList[1].measureValue\n  }\n\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n  result.animation = true\n\n  return result\n}\n","import type { IBarSeriesSpec, ISeriesSpec } from '@visactor/vchart'\nimport { DUAL_AXIS_CHART_COLUMN_Z_INDEX, DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } from 'src/pipeline/utils/constant'\nimport type { DualChartType, VChartSpecPipe } from 'src/types'\n\nexport const dualChartTypePrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec, zIndex: DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } as ISeriesSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo } = advancedVSeed\n  const index = datasetReshapeInfo[0].index\n\n  const config =\n    advancedVSeed.config?.[chartType as 'dualAxis']?.dualChartType ||\n    ({\n      primary: 'column',\n      secondary: 'line',\n    } as DualChartType)\n\n  const primary = Array.isArray(config) ? config[index].primary || config[0].primary : config.primary\n  const secondary = Array.isArray(config) ? config[index].secondary || config[0].secondary : config.secondary\n  const bothColumn = primary === 'column' && secondary === 'column'\n  const type = bothColumn ? 'columnParallel' : primary\n  switch (type) {\n    case 'line': {\n      result.type = 'line'\n      break\n    }\n    case 'column': {\n      result.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'columnParallel': {\n      const columnSpec = result as IBarSeriesSpec\n      if (Array.isArray(columnSpec.xField)) {\n        columnSpec.xField.push(datasetReshapeInfo[0].unfoldInfo.encodingDetail)\n      } else if (columnSpec.xField) {\n        columnSpec.xField = [columnSpec.xField, datasetReshapeInfo[0].unfoldInfo.encodingDetail]\n      }\n      columnSpec.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'columnPercent': {\n      result.type = 'bar'\n      result.percent = true\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'area': {\n      result.type = 'area'\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'areaPercent': {\n      result.type = 'area'\n      result.percent = true\n      break\n    }\n    case 'scatter': {\n      result.type = 'scatter'\n      break\n    }\n    default:\n      result.type = primary\n  }\n\n  return result\n}\n\nexport const dualChartTypeSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec, zIndex: DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX } as ISeriesSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo } = advancedVSeed\n  const config =\n    advancedVSeed.config?.[chartType as 'dualAxis']?.dualChartType ||\n    ({\n      primary: 'column',\n      secondary: 'line',\n    } as DualChartType)\n\n  const index = datasetReshapeInfo[0].index\n  const primary = Array.isArray(config) ? config[index].primary || config[0].primary : config.primary\n  const secondary = Array.isArray(config) ? config[index].secondary || config[0].secondary : config.secondary\n  const bothColumn = primary === 'column' && secondary === 'column'\n  const type = bothColumn ? 'columnParallel' : secondary\n\n  switch (type) {\n    case 'line': {\n      result.type = 'line'\n      break\n    }\n    case 'column': {\n      result.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'columnParallel': {\n      const columnSpec = result as IBarSeriesSpec\n      if (Array.isArray(columnSpec.xField)) {\n        columnSpec.xField.push(datasetReshapeInfo[0].unfoldInfo.encodingDetail)\n      } else if (columnSpec.xField) {\n        columnSpec.xField = [columnSpec.xField, datasetReshapeInfo[0].unfoldInfo.encodingDetail]\n      }\n      columnSpec.type = 'bar'\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'columnPercent': {\n      result.type = 'bar'\n      result.percent = true\n      result.zIndex = DUAL_AXIS_CHART_COLUMN_Z_INDEX\n      break\n    }\n    case 'area': {\n      result.type = 'area'\n      break\n    }\n    // @ts-expect-error  'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\n    case 'areaPercent': {\n      result.type = 'area'\n      result.percent = true\n      break\n    }\n    case 'scatter': {\n      result.type = 'scatter'\n      break\n    }\n    default:\n      result.type = secondary\n  }\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetPrimary: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const orderMapping = analysis?.orderMapping || {}\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id: `${id}-primary-dataset`,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n\nexport const datasetSecondary: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { analysis, datasetReshapeInfo } = advancedVSeed\n  const orderMapping = analysis?.orderMapping || {}\n\n  const { unfoldInfo } = datasetReshapeInfo[0]\n  const x = unfoldInfo.encodingX\n  const colorId = unfoldInfo.encodingColorId\n  const id = datasetReshapeInfo[0].id\n\n  const fields: Record<string, object> = {}\n\n  if (x) {\n    const order = orderMapping[x]\n    if (order) {\n      fields[x] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[x] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  if (colorId) {\n    const order = orderMapping[colorId]\n    if (order) {\n      fields[colorId] = {\n        sortIndex: 0,\n        domain: order,\n        lockStatisticsByDomain: true,\n      }\n    } else {\n      fields[colorId] = {\n        sortIndex: 0,\n      }\n    }\n  }\n\n  return {\n    ...spec,\n    data: {\n      id: `${id}-secondary-dataset`,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset,\n      fields: fields,\n    },\n  } as ISpec\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, Label, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\nimport { DUAL_AXIS_LABEL_Z_INDEX } from 'src/pipeline/utils/constant'\n\nexport const labelPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n  result.label = buildLabel(\n    baseConfig.label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfoList[0]],\n  ) as unknown as ILineChartSpec['label']\n  ;(result.label as any)!.zIndex = DUAL_AXIS_LABEL_Z_INDEX\n  return result\n}\n\nexport const labelSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ILineChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: Label }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n\n  result.label = buildLabel(\n    baseConfig.label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfoList[1]],\n  ) as unknown as ILineChartSpec['label']\n  ;(result.label as any)!.zIndex = DUAL_AXIS_LABEL_Z_INDEX\n  return result\n}\n","import { isNullish } from 'remeda'\nimport { createDimensionContent, createMarkContent } from './tooltip'\nimport type { FoldInfo, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport { getTooltipStyle } from './tooltipStyle'\n\nexport const tooltipPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { measures, datasetReshapeInfo, chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n  const unfoldInfo = datasetReshapeInfo[0].unfoldInfo\n\n  result.tooltip = {\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        foldInfoList[0],\n        unfoldInfo,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, measures, foldInfoList[0], unfoldInfo),\n    },\n  }\n  return result\n}\n\nexport const tooltipSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { measures, datasetReshapeInfo, chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n\n  if (isNullish(datasetReshapeInfo[0].foldInfoList?.[1])) {\n    return result\n  }\n\n  const foldInfoList = datasetReshapeInfo[0].foldInfoList as FoldInfo[]\n  const unfoldInfo = datasetReshapeInfo[0].unfoldInfo as UnfoldInfo\n  result.tooltip = {\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        findAllMeasures(vseed.measures),\n        foldInfoList[1],\n        unfoldInfo,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: true,\n      },\n      content: createDimensionContent(dimensions, measures, foldInfoList[1], unfoldInfo),\n    },\n  }\n  return result\n}\n\nexport const tooltipDualAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { chartType } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n  }\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const barStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'bar') {\n      return pipe(spec, context) as IBarChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const pointStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'line' || spec.type === 'area') {\n      return pipe(spec, context) as ILineChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ILineChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const lineStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'line') {\n      return pipe(spec, context) as ILineChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { IAreaChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const areaStyleFilter = (pipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    if (spec.type === 'area') {\n      return pipe(spec, context) as IAreaChartSpec\n    }\n\n    return spec\n  }\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { AXIS_LABEL_SPACE, LINEAR_AXIS_INNER_OFFSET_TOP } from '../../../../utils/constant'\nimport { createNumFormatter } from '../../../../utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { createLinearFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\n\nexport const yLinearPrimary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo, encoding, measures, dimensions } = advancedVSeed\n  const { index, id: reshapeInfoId, foldInfoList } = datasetReshapeInfo[0]\n  // TODO: default config missing\n  const primaryYAxis = advancedVSeed.config?.[chartType as 'dualAxis']?.primaryYAxis as YLinearAxis | YLinearAxis[]\n  const yAxisConfig = Array.isArray(primaryYAxis) ? primaryYAxis[index] || primaryYAxis[0] : primaryYAxis\n  const alignTicks = advancedVSeed.config?.[chartType as 'dualAxis']?.alignTicks as boolean | boolean[]\n  const alignTicksConfig = Array.isArray(alignTicks) ? alignTicks[index] || alignTicks[0] : alignTicks\n\n  if (isNullish(foldInfoList?.[0])) {\n    return result\n  }\n\n  const isEmptySecondary = isEmpty(foldInfoList?.[0].foldMap)\n\n  const id = `${reshapeInfoId}-primary-axis`\n  const seriesIds = [`${reshapeInfoId}-primary-series`, `${reshapeInfoId}-secondary-series`]\n  const seriesId = alignTicksConfig ? seriesIds : seriesIds[0]\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n\n    autoFormat,\n    numFormat = {},\n  } = yAxisConfig ?? {}\n\n  const formatter = createNumFormatter(numFormat)\n\n  const linearAxis = {\n    visible: isEmptySecondary ? false : visible,\n    id,\n    seriesId,\n\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient: 'left',\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    max,\n    min,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod: (value: string) => {\n        return createLinearFormat(value, autoFormat, numFormat, formatter)\n      },\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    innerOffset: {\n      top: LINEAR_AXIS_INNER_OFFSET_TOP,\n      // bottom: LINEAR_AXIS_INNER_OFFSET_TOP,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { AXIS_LABEL_SPACE, LINEAR_AXIS_INNER_OFFSET_TOP } from '../../../../utils/constant'\nimport { createNumFormatter } from '../../../../utils'\nimport type { VChartSpecPipe, YLinearAxis } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\nimport { createLinearFormat } from './format/linearFormat'\nimport { defaultTitleText } from './title/defaultTitleText'\n\nexport const yLinearSecondary: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as ISpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { datasetReshapeInfo, measures, dimensions, encoding } = advancedVSeed\n  const { index, id: reshapeInfoId, foldInfoList } = datasetReshapeInfo[0]\n  // TODO: default config missing\n  const secondaryYAxis = advancedVSeed.config?.[chartType as 'dualAxis']?.secondaryYAxis as YLinearAxis | YLinearAxis[]\n  const yAxisConfig = Array.isArray(secondaryYAxis) ? secondaryYAxis[index] || secondaryYAxis[0] : secondaryYAxis\n  const alignTicks = advancedVSeed.config?.[chartType as 'dualAxis']?.alignTicks as boolean | boolean[]\n  const alignTicksConfig = Array.isArray(alignTicks) ? alignTicks[index] || alignTicks[0] : alignTicks\n\n  if (isNullish(foldInfoList?.[1])) {\n    return result\n  }\n\n  const isEmptySecondary = isEmpty(foldInfoList?.[1].foldMap)\n  const onlySecondary = isEmpty(foldInfoList?.[0].foldMap) && !isEmptySecondary\n\n  const sync = {\n    axisId: `${reshapeInfoId}-primary-axis`,\n    zeroAlign: true,\n  }\n\n  const id = `${reshapeInfoId}-secondary-axis`\n  const seriesIds = [`${reshapeInfoId}-primary-series`, `${reshapeInfoId}-secondary-series`]\n  const seriesId = alignTicksConfig ? seriesIds : seriesIds[1]\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  const {\n    visible = true,\n    label,\n    tick,\n    title,\n    grid,\n    line,\n\n    zero,\n    nice,\n    inverse,\n    max,\n    min,\n    log,\n    logBase = 10,\n    numFormat = {},\n    autoFormat,\n  } = yAxisConfig ?? {}\n\n  const formatter = createNumFormatter(numFormat)\n\n  const linearAxis = {\n    visible: isEmptySecondary ? false : visible,\n    id,\n    seriesId,\n    sync,\n    type: log ? 'log' : 'linear',\n    base: logBase,\n    orient: 'right',\n    nice,\n    zero: log ? false : zero,\n    inverse,\n    max,\n    min,\n    label: {\n      space: AXIS_LABEL_SPACE,\n      visible: label?.visible,\n      formatMethod: (value: string) => {\n        return createLinearFormat(value, autoFormat, numFormat, formatter)\n      },\n      style: {\n        fill: label?.labelColor,\n        angle: label?.labelAngle,\n        fontSize: label?.labelFontSize,\n        fontWeight: label?.labelFontWeight,\n      },\n    },\n    title: {\n      visible: title?.visible,\n      text: title?.titleText || defaultTitleText(measures, dimensions, encoding.y as string[]),\n      style: {\n        fill: title?.titleColor,\n        fontSize: title?.titleFontSize,\n        fontWeight: title?.titleFontWeight,\n      },\n    },\n    tick: {\n      visible: tick?.visible,\n      tickSize: tick?.tickSize,\n      inside: tick?.tickInside,\n      style: {\n        stroke: tick?.tickColor,\n      },\n    },\n    grid: {\n      visible: onlySecondary ? true : grid?.visible,\n      style: {\n        lineWidth: grid?.gridWidth,\n        stroke: grid?.gridColor,\n        lineDash: grid?.gridLineDash,\n      },\n    },\n    domainLine: {\n      visible: line?.visible,\n      style: {\n        lineWidth: line?.lineWidth,\n        stroke: line?.lineColor,\n      },\n    },\n    innerOffset: {\n      top: LINEAR_AXIS_INNER_OFFSET_TOP,\n      // bottom: LINEAR_AXIS_INNER_OFFSET_TOP,\n    },\n  }\n\n  result.axes = [...result.axes, linearAxis] as ISpec['axes']\n\n  return result\n}\n","import type { IBarChartSpec } from '@visactor/vchart'\nimport type { Color, VChartSpecPipe } from 'src/types'\n\nexport const linearColorForDualAxis: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBarChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, chartType } = advancedVSeed\n  const { unfoldInfo, id } = datasetReshapeInfo[0]\n  const baseConfig = advancedVSeed.config[chartType] as { color: Color }\n\n  if (!baseConfig || !baseConfig.color) {\n    return result\n  }\n\n  const { color } = baseConfig\n  const { colorScheme, linearColorScheme } = color\n\n  result.color = {\n    type: 'linear',\n    range: linearColorScheme || colorScheme || [],\n    domain: [\n      {\n        dataId: `${id}-primary-dataset`,\n        fields: [unfoldInfo.encodingColor],\n      },\n      {\n        dataId: `${id}-secondary-dataset`,\n        fields: [unfoldInfo.encodingColor],\n      },\n    ],\n  }\n\n  return result\n}\n","const isObjectLike = value => \"object\" == typeof value && null !== value;\n\nexport default isObjectLike;\n//# sourceMappingURL=isObjectLike.js.map","import isObjectLike from \"./isObjectLike\";\n\nimport isType from \"./isType\";\n\nconst isPlainObject = function(value) {\n    if (!isObjectLike(value) || !isType(value, \"Object\")) return !1;\n    if (null === Object.getPrototypeOf(value)) return !0;\n    let proto = value;\n    for (;null !== Object.getPrototypeOf(proto); ) proto = Object.getPrototypeOf(proto);\n    return Object.getPrototypeOf(value) === proto;\n};\n\nexport default isPlainObject;\n//# sourceMappingURL=isPlainObject.js.map","import isType from \"./isType\";\n\nconst isString = (value, fuzzy = !1) => {\n    const type = typeof value;\n    return fuzzy ? \"string\" === type : \"string\" === type || isType(value, \"String\");\n};\n\nexport default isString;\n//# sourceMappingURL=isString.js.map\n","import isPlainObject from \"./isPlainObject\";\n\nimport isString from \"./isString\";\n\nexport default function pickWithout(obj, keys) {\n    if (!obj || !isPlainObject(obj)) return obj;\n    const result = {};\n    return Object.keys(obj).forEach((k => {\n        const v = obj[k];\n        let match = !1;\n        keys.forEach((itKey => {\n            (isString(itKey) && itKey === k || itKey instanceof RegExp && k.match(itKey)) && (match = !0);\n        })), match || (result[k] = v);\n    })), result;\n}\n//# sourceMappingURL=pickWithout.js.map\n","import type { IMarkPointSpec, ISpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, SpecPipelineContext, VChartSpecPipe } from 'src/types'\nimport { isSubset } from './utils'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport { MeasureId } from 'src/dataReshape/constant'\nimport { pickWithout } from '@visactor/vutils'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPointOfDualAxis: VChartSpecPipe = generateAnnotationPointPipe({\n  findSelectedDatas: (dataset, s, spec: ISpec, context: SpecPipelineContext) => {\n    return dataset.reduce((res: Datum[], d: Datum) => {\n      const { advancedVSeed } = context\n      const allMeasureIds = findAllMeasures(advancedVSeed.reshapeMeasures ?? advancedVSeed.measures).map((m) => m.id)\n      const pickedDatum = pickWithout(\n        d,\n        allMeasureIds.filter((id) => id !== d[MeasureId]),\n      )\n\n      if (selector(pickedDatum, s)) {\n        res.push(pickedDatum)\n      }\n\n      return res\n    }, [])\n  },\n  generateMarkPoint: (datum: Datum, spec: ISpec, context: SpecPipelineContext) => {\n    const { advancedVSeed } = context\n    const allMeasureIds = findAllMeasures(advancedVSeed.reshapeMeasures ?? advancedVSeed.measures).map((m) => m.id)\n    return spec.series?.map((s: any, index: number) => {\n      return {\n        relativeSeriesIndex: index,\n        coordinate: (data: Datum[]) => {\n          return data.find((item) => {\n            return isSubset(\n              datum,\n              item,\n              allMeasureIds.filter((id) => id !== item[MeasureId]),\n            )\n          })\n        },\n      } as IMarkPointSpec\n    })\n  },\n})\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  xBand,\n  backgroundColor,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  pointStyle,\n  lineStyle,\n  pointStateDimensionHover,\n  progressive,\n  datasetPrimary,\n  datasetSecondary,\n  areaStyle,\n  barStyle,\n  verticalCrosshairRect,\n  yLinearSecondary,\n  initDualAxisPrimary,\n  initDualAxisSecondary,\n  labelPrimary,\n  labelSecondary,\n  tooltipPrimary,\n  tooltipSecondary,\n  yLinearPrimary,\n  dualChartTypePrimary,\n  dualChartTypeSecondary,\n  seriesDualAxis,\n  series,\n  colorBarStyleFill,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  pivotColorLegend,\n  linearColorForDualAxis,\n  annotationAreaBand,\n  barMaxWidth,\n  barGapInGroup,\n  stackCornerRadius,\n  pivotTitle,\n  pivotAxisStyle,\n  dimensionLinkage,\n  annotationPointOfDualAxis,\n  barStyleFilter,\n  pointStyleFilter,\n  lineStyleFilter,\n  areaStyleFilter,\n  tooltipDualAxis,\n} from '../pipes'\n\nconst dualAxis: VChartSpecPipeline = [\n  seriesDualAxis(\n    [\n      initDualAxisPrimary,\n      dualChartTypePrimary,\n      datasetPrimary,\n      labelPrimary,\n      tooltipPrimary,\n      progressive,\n\n      barMaxWidth,\n      barGapInGroup,\n      stackCornerRadius,\n\n      barStyleFilter(colorBarStyleFill(barStyle)),\n      pointStyleFilter(colorPointStyleFill(pointStyle)),\n      pointStyleFilter(pointStateDimensionHover),\n      lineStyleFilter(colorLineStyleFill(lineStyle)),\n      areaStyleFilter(colorAreaStyleFill(areaStyle)),\n    ],\n    [\n      initDualAxisSecondary,\n      dualChartTypeSecondary,\n      datasetSecondary,\n      labelSecondary,\n      tooltipSecondary,\n      progressive,\n\n      barMaxWidth,\n      barGapInGroup,\n      stackCornerRadius,\n\n      barStyleFilter(colorBarStyleFill(barStyle)),\n      pointStyleFilter(colorPointStyleFill(pointStyle)),\n      pointStyleFilter(pointStateDimensionHover),\n      lineStyleFilter(colorLineStyleFill(lineStyle)),\n      areaStyleFilter(colorAreaStyleFill(areaStyle)),\n    ],\n  ),\n  xBand,\n  yLinearPrimary,\n  yLinearSecondary,\n\n  colorAdapter(color, linearColorForDualAxis),\n  colorAdapter(discreteLegend, colorLegend),\n\n  backgroundColor,\n\n  verticalCrosshairRect,\n  annotationPointOfDualAxis,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n\n  tooltipDualAxis,\n]\n\nconst pivotDualAxis: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    series(\n      [\n        initDualAxisPrimary,\n        dualChartTypePrimary,\n        datasetPrimary,\n        labelPrimary,\n        tooltipPrimary,\n        progressive,\n\n        stackCornerRadius,\n        barMaxWidth,\n        barGapInGroup,\n\n        colorBarStyleFill(barStyle),\n        colorPointStyleFill(pointStyle),\n        pointStateDimensionHover,\n        colorLineStyleFill(lineStyle),\n        colorAreaStyleFill(areaStyle),\n      ],\n      [\n        initDualAxisSecondary,\n        dualChartTypeSecondary,\n        datasetSecondary,\n        labelSecondary,\n        tooltipSecondary,\n        progressive,\n\n        stackCornerRadius,\n        barMaxWidth,\n        barGapInGroup,\n\n        colorBarStyleFill(barStyle),\n        colorPointStyleFill(pointStyle),\n        pointStateDimensionHover,\n        colorLineStyleFill(lineStyle),\n        colorAreaStyleFill(areaStyle),\n      ],\n    ),\n    xBand,\n    yLinearPrimary,\n    pivotAxisStyle(yLinearSecondary),\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    verticalCrosshairRect,\n    annotationPointOfDualAxis,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n\n    tooltipDualAxis,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const dualAxisSpecPipeline = [pivotAdapter(dualAxis, pivotDualAxis)]\n","import { dualAxisAdvancedPipeline, dualAxisSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerDualAxis = () => {\n  Builder._advancedPipelineMap['dualAxis'] = dualAxisAdvancedPipeline\n  Builder._specPipelineMap['dualAxis'] = dualAxisSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures, hasMultipleMeasureInSingleView } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForPie: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding, hasMultipleMeasureInSingleView(vseedMeasures))\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForPie: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n  const hasMulti = hasMultipleMeasureInSingleView(vseedMeasures)\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, hasMulti)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding, hasMulti)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n\n  if (isMultiMeasure) {\n    encoding.color = uniqueDimIds.slice(0) // 所有维度都用于color映射，包括MeasureId\n  } else {\n    encoding.color = uniqueDimIds.filter((d: string) => d !== MeasureId) // 除了MeasureId之外的所有维度用于color映射\n  }\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.angle = unique(measures.filter((item) => item.encoding === 'angle' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // angle\n  encoding.angle = unique(measures.filter((item) => item.encoding === 'angle' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  pieConfig,\n  annotation,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForPie,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForPie,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const pieAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForPie],\n    [buildMeasures, encodingForPie, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  pieConfig,\n  theme,\n  annotation,\n]\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'pie'\n  result.outerRadius = 0.8\n  result.innerRadius = 0\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorPieStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IPieChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.pie?.style) {\n        result.pie.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const pieStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const { dataset } = advancedVSeed\n  const showStroke = dataset.length <= 30\n  const config = advancedVSeed.config?.[chartType as 'pie']\n\n  const result = {\n    ...spec,\n    pie: {\n      style: {\n        stroke: config?.backgroundColor ?? '#ffffff',\n        lineWidth: showStroke ? 1 : 0,\n      },\n    },\n  } as Required<IPieChartSpec>\n\n  if ((spec as IPieChartSpec).outerRadius) {\n    result.pie.state = {\n      hover: {\n        outerRadius: ((spec as IPieChartSpec).outerRadius as number) * 1.1,\n      },\n    }\n  }\n\n  if (config?.cornerRadius) {\n    result.pie.style!.cornerRadius = config.cornerRadius\n  }\n\n  return result\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { Encoding, FoldInfo, PieLabel, VChartSpecPipe } from 'src/types'\nimport { buildLabel } from './label'\n\nexport const labelPie: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { chartType, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { label: PieLabel }\n  const foldInfo = datasetReshapeInfo[0].foldInfo as FoldInfo\n\n  const { label } = baseConfig\n\n  result.label = buildLabel(\n    label,\n    vseed.measures,\n    vseed.dimensions,\n    advancedVSeed.dimensions,\n    advancedVSeed.measures,\n    encoding as Encoding,\n    [foldInfo],\n  ) as unknown as IPieChartSpec['label']\n  if (label.labelLayout) {\n    ;(result.label as any)!.layout = {\n      align: label.labelLayout,\n    }\n  }\n  return result\n}\n","import type { PivotChartSpecPipe } from 'src/types'\n\nexport const pivotHideIndicatorName: PivotChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  return {\n    ...spec,\n    hideIndicatorName: datasetReshapeInfo.length <= 1,\n  }\n}\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const addRegionPadding: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IPieChartSpec\n\n  if (result.region && result.region.length > 0) {\n    result.region[0].padding = 10\n  }\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  color,\n  datasetXY,\n  datasetPivot,\n  initPie,\n  initPivot,\n  discreteLegend,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotDiscreteLegend,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  progressive,\n  pieStyle,\n  colorPieStyleFill,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  pivotColorLegend,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst pie: VChartSpecPipeline = [\n  initPie,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  colorPieStyleFill(pieStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotPie: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initPie,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    colorPieStyleFill(pieStyle),\n    labelPie,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n    addRegionPadding,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const pieSpecPipeline = [pivotAdapter(pie, pivotPie)]\n","import { pieAdvancedPipeline, pieSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerPie = () => {\n  Builder._advancedPipelineMap['pie'] = pieAdvancedPipeline\n  Builder._specPipelineMap['pie'] = pieSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  donutConfig,\n  encodingForPie,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForPie,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const donutAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [buildMeasures, defaultEncodingForPie],\n    [buildMeasures, encodingForPie, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  donutConfig,\n  theme,\n  annotation,\n]\n","import type { IPieChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initDonut: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IPieChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'pie'\n  result.outerRadius = 0.8\n  result.innerRadius = result.outerRadius * 0.8\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  color,\n  datasetXY,\n  datasetPivot,\n  initDonut,\n  initPivot,\n  discreteLegend,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotDiscreteLegend,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  pivotColorLegend,\n  pieStyle,\n  colorPieStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst donut: VChartSpecPipeline = [\n  initDonut,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  labelPie,\n  colorPieStyleFill(pieStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotDonut: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initDonut,\n    addRegionPadding,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    labelPie,\n    colorPieStyleFill(pieStyle),\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const donutSpecPipeline = [pivotAdapter(donut, pivotDonut)]\n","import { donutAdvancedPipeline, donutSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerDonut = () => {\n  Builder._advancedPipelineMap['donut'] = donutAdvancedPipeline\n  Builder._specPipelineMap['donut'] = donutSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForRose: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForRose: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n\n  // encoding for modify in place\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.angle = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // angle\n  encoding.angle = unique(dimensions.filter((item) => item.encoding === 'angle').map((item) => item.id))\n  if (encoding.angle.length === 0) {\n    encoding.angle = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  roseConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  encodingForRose,\n  defaultEncodingForRose,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const roseAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForRose, buildMeasures],\n    [encodingForRose, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  roseConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initRose: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRoseChartSpec\n  const { advancedVSeed } = context\n  const { dataset, datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'rose'\n\n  result.angleField = unfoldInfo.encodingAngle\n  result.seriesField = unfoldInfo.encodingColorId\n\n  result.valueField = foldInfo.measureValue\n  result.padding = 0\n  result.outerRadius = 0.9\n  result.innerRadius = 0\n\n  const hasNegativeValue = dataset.flat().find((d) => d[foldInfo.measureValue] < 0)\n  if (hasNegativeValue) {\n    result.innerRadius = 0.05\n  }\n\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radiusAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    type: 'linear',\n    orient: 'radius',\n    visible: false,\n    zero: true,\n    nice: false,\n  })\n\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport { isLinearColor } from './colorAdapter'\nimport type { VChartSpecPipe } from 'src/types/pipeline/spec/spec'\n\nexport const colorRoseStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IRoseChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.rose?.style) {\n        result.rose.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const roseStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed } = context\n  const { dataset } = advancedVSeed\n  const showStroke = dataset.length <= 30\n\n  const result = {\n    ...spec,\n    rose: {\n      style: {},\n    },\n  } as Required<IRoseChartSpec>\n\n  return {\n    ...result,\n    rose: {\n      style: {\n        stroke: '#ffffff',\n        lineWidth: showStroke ? 1 : 0,\n      },\n      state: {\n        hover: {\n          lineWidth: 1,\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  stackInverse,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  initRose,\n  radiusAxis,\n  progressive,\n  linearColor,\n  colorAdapter,\n  pivotColorLegend,\n  colorLegend,\n  roseStyle,\n  colorRoseStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst rose: VChartSpecPipeline = [\n  initRose,\n  stackCornerRadius,\n  stackInverse,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radiusAxis,\n  verticalCrosshairRect,\n  colorRoseStyleFill(roseStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n]\n\nconst pivotRose: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRose,\n    addRegionPadding,\n    stackCornerRadius,\n    stackInverse,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radiusAxis,\n    verticalCrosshairRect,\n    colorRoseStyleFill(roseStyle),\n    labelPie,\n    tooltip,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const roseSpecPipeline = [pivotAdapter(rose, pivotRose)]\n","import { roseAdvancedPipeline, roseSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRose = () => {\n  Builder._advancedPipelineMap['rose'] = roseAdvancedPipeline\n  Builder._specPipelineMap['rose'] = roseSpecPipeline\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  roseParallelConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  encodingForRose,\n  defaultEncodingForRose,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const roseParallelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForRose, buildMeasures],\n    [encodingForRose, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  roseParallelConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport { isDeepEqual } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initRoseParallel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRoseChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, dataset, encoding } = advancedVSeed\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  const sameDimensionsMode = isDeepEqual(encoding.angle, encoding.color)\n\n  result.type = 'rose'\n  result.angleField = [unfoldInfo.encodingAngle]\n\n  if (!sameDimensionsMode) {\n    result.angleField.push(unfoldInfo.encodingDetail)\n\n    if (encoding.detail?.[0] === MeasureId && encoding.radius?.length === 1) {\n      result.angleField.pop()\n    }\n  }\n\n  result.valueField = foldInfo.measureValue\n  result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n\n  result.outerRadius = 0.9\n  result.innerRadius = 0\n\n  const hasNegativeValue = dataset.flat().find((d) => d[foldInfo.measureValue] < 0)\n  if (hasNegativeValue) {\n    result.innerRadius = 0.05\n  }\n\n  result.rose = {\n    style: {\n      stroke: '#ffffff',\n      lineWidth: 1,\n    },\n    state: {\n      hover: {\n        lineWidth: 1,\n        fillOpacity: 0.6,\n      },\n    },\n  }\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  tooltip,\n  discreteLegend,\n  color,\n  pivotIndicators,\n  initPivot,\n  datasetPivot,\n  pivotAdapter,\n  pivotDiscreteLegend,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  verticalCrosshairRect,\n  stackCornerRadius,\n  initRoseParallel,\n  radiusAxis,\n  progressive,\n  pivotColorLegend,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  roseStyle,\n  colorRoseStyleFill,\n  labelPie,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst roseParallel: VChartSpecPipeline = [\n  initRoseParallel,\n  stackCornerRadius,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radiusAxis,\n  colorRoseStyleFill(roseStyle),\n  colorAdapter(discreteLegend, colorLegend),\n  labelPie,\n  tooltip,\n  verticalCrosshairRect,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotRoseParallel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRoseParallel,\n    addRegionPadding,\n    stackCornerRadius,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radiusAxis,\n    verticalCrosshairRect,\n    colorRoseStyleFill(roseStyle),\n    labelPie,\n    tooltip,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const roseParallelSpecPipeline = [pivotAdapter(roseParallel, pivotRoseParallel)]\n","import { roseParallelAdvancedPipeline, roseParallelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRoseParallel = () => {\n  Builder._advancedPipelineMap['roseParallel'] = roseParallelAdvancedPipeline\n  Builder._specPipelineMap['roseParallel'] = roseParallelSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForRadar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForRadar: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.angle = uniqueDimIds.slice(0, 1)\n  encoding.color = uniqueDimIds.slice(1)\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.detail = [] // 雷达图暂不支持细分\n  encoding.label = []\n  encoding.row = []\n  encoding.column = []\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // angle\n  encoding.angle = unique(dimensions.filter((item) => item.encoding === 'angle').map((item) => item.id))\n  if (encoding.angle.length === 0) {\n    encoding.angle = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = []\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // radius\n  encoding.radius = unique(\n    measures.filter((item) => item.encoding === 'radius' || !item.encoding).map((item) => item.id),\n  )\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortLegend,\n  radarConfig,\n  encodingForRadar,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForRadar,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const radarAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForRadar, buildMeasures],\n    [encodingForRadar, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  // sortXBandAxis,\n  sortLegend,\n  radarConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IRadarChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from '../color/colorAdapter'\n\nexport const initRadar: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IRadarChartSpec\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'radar'\n  result.angleField = unfoldInfo.encodingAngle\n  result.radiusField = foldInfo.measureValue\n  result.seriesField = isLinearColor(advancedVSeed, vseed) ? unfoldInfo.encodingDetail : unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radarAngleAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    orient: 'angle',\n    visible: true,\n    zero: true,\n    nice: true,\n    grid: {\n      visible: true,\n    },\n    domainLine: {\n      visible: true,\n    },\n    tick: {\n      visible: true,\n    },\n  })\n\n  return result\n}\n","import type { IRoseChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const radarRadiusAxis: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IRoseChartSpec\n\n  if (!result.axes) {\n    result.axes = []\n  }\n\n  result.axes.push({\n    orient: 'radius',\n    visible: true,\n    zero: true,\n    nice: true,\n    grid: {\n      visible: true,\n    },\n    tick: {\n      visible: true,\n    },\n    label: {\n      visible: true,\n    },\n    domainLine: {\n      visible: true,\n    },\n  })\n\n  return result\n}\n","import type { PivotChartSpecPipeline, SpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  label,\n  tooltip,\n  discreteLegend,\n  color,\n  initPivot,\n  datasetPivot,\n  pivotDiscreteLegend,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  pointStyle,\n  lineStyle,\n  verticalCrosshairLine,\n  pointStateDimensionHover,\n  initRadar,\n  areaStyle,\n  radarAngleAxis,\n  radarRadiusAxis,\n  progressive,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorPointStyleFill,\n  colorLineStyleFill,\n  colorAreaStyleFill,\n  pivotColorLegend,\n  pivotHideIndicatorName,\n  pivotTitle,\n  addRegionPadding,\n} from '../pipes'\n\nconst radar: VChartSpecPipeline = [\n  initRadar,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetXY,\n  progressive,\n  radarAngleAxis,\n  radarRadiusAxis,\n  label,\n  tooltip,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairLine,\n  colorPointStyleFill(pointStyle),\n  pointStateDimensionHover,\n  colorLineStyleFill(lineStyle),\n  colorAreaStyleFill(areaStyle),\n  // annotationPoint,\n  // annotationVerticalLine,\n  // annotationHorizontalLine,\n  // annotationArea,\n]\n\nconst pivotRadar: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initRadar,\n    addRegionPadding,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetXY,\n    progressive,\n    radarAngleAxis,\n    radarRadiusAxis,\n    label,\n    tooltip,\n    verticalCrosshairLine,\n    colorPointStyleFill(pointStyle),\n    pointStateDimensionHover,\n    colorLineStyleFill(lineStyle),\n    colorAreaStyleFill(areaStyle),\n    // annotationPoint,\n    // annotationVerticalLine,\n    // annotationHorizontalLine,\n    // annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const radarSpecPipeline: SpecPipeline = [pivotAdapter(radar, pivotRadar)]\n","import { radarAdvancedPipeline, radarSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerRadar = () => {\n  Builder._advancedPipelineMap['radar'] = radarAdvancedPipeline\n  Builder._specPipelineMap['radar'] = radarSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForFunnel: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForFunnel: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.color = uniqueDimIds.slice(0) // 第0个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = [MeasureId]\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // size\n  encoding.size = unique(measures.filter((item) => item.encoding === 'size' || !item.encoding).map((item) => item.id))\n\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  funnelConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForFunnel,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForFunnel,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const funnelAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForFunnel, buildMeasures],\n    [encodingForFunnel, buildMeasures, pickMeasuresForReshape(['tooltip', 'label', 'color']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  funnelConfig,\n  theme,\n  annotation,\n]\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initFunnel: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IFunnelChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { foldInfo, unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'funnel'\n  result.valueField = foldInfo.measureValue\n  result.categoryField = unfoldInfo.encodingColorId\n\n  result.padding = 0\n  result.isTransform = true\n  result.shape = 'rect'\n  result.maxSize = '75%'\n  result.minSize = '10%'\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n\n  result.animation = true\n\n  return result\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorFunnelStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IFunnelChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.funnel?.style) {\n        result.funnel.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IFunnelChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const funnelStyle: VChartSpecPipe = (spec) => {\n  const result = {\n    ...spec,\n    funnel: {\n      style: {},\n    },\n  } as IFunnelChartSpec\n\n  return {\n    ...result,\n    funnel: {\n      style: {\n        cornerRadius: 0,\n      },\n      state: {\n        hover: {\n          fillOpacity: 0.6,\n        },\n      },\n    },\n  }\n}\n","import type { VChartSpecPipe } from 'src/types'\n\nexport const funnelTransformStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const config = advancedVSeed.config?.[chartType as 'funnel']?.transform\n\n  return {\n    ...spec,\n    transform: {\n      style: {\n        fill: config?.backgroundColor,\n      },\n    },\n    transformLabel: {\n      visible: true,\n      style: {\n        fill: config?.textColor,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  datasetXY,\n  datasetPivot,\n  initPivot,\n  label,\n  pivotAdapter,\n  pivotColumnDimensions,\n  pivotGridStyle,\n  pivotIndicators,\n  pivotIndicatorsAsRow,\n  pivotRowDimensions,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  initFunnel,\n  discreteLegend,\n  color,\n  funnelStyle,\n  linearColor,\n  colorAdapter,\n  colorLegend,\n  colorFunnelStyleFill,\n  pivotDiscreteLegend,\n  pivotColorLegend,\n  pivotHideIndicatorName,\n  funnelTransformStyle,\n  pivotTitle,\n} from '../pipes'\n\nconst funnel: VChartSpecPipeline = [\n  initFunnel,\n  backgroundColor,\n  datasetXY,\n  colorAdapter(color, linearColor),\n  label,\n  colorAdapter(discreteLegend, colorLegend),\n  colorFunnelStyleFill(funnelStyle),\n  funnelTransformStyle,\n  tooltip,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotFunnel: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  pivotHideIndicatorName,\n  datasetPivot,\n  pivotIndicators([\n    initFunnel,\n    backgroundColor,\n    datasetXY,\n    colorAdapter(color, linearColor),\n    label,\n    tooltip,\n    colorFunnelStyleFill(funnelStyle),\n    funnelTransformStyle,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const funnelSpecPipeline = [pivotAdapter(funnel, pivotFunnel)]\n","import { funnelAdvancedPipeline, funnelSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerFunnel = () => {\n  Builder._advancedPipelineMap['funnel'] = funnelAdvancedPipeline\n  Builder._specPipelineMap['funnel'] = funnelSpecPipeline\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForHeatmap: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForHeatmap: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.y = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第2个维度放置于Y轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  // x\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n  // y\n  encoding.y = unique(dimensions.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  if (encoding.y.length === 0) {\n    if (dimensions.length > 1) {\n      encoding.y = dimensions.slice(1).map((item) => item.id)\n    } else {\n      encoding.y = dimensions.slice(0).map((item) => item.id)\n    }\n  }\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail.length === 0) {\n    encoding.detail = encoding.color\n  }\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  const colorDims = unique(\n    measures.filter((item) => item.encoding === 'color' || !item.encoding).map((item) => item.id),\n  )\n  if (colorDims.length > 0) {\n    encoding.color = [colorDims[0]]\n  }\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  annotation,\n  markStyle,\n  sortXBandAxis,\n  heatmapConfig,\n  reshapeWithEncoding,\n  pivotReshapeWithEncoding,\n  encodingForHeatmap,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  defaultEncodingForHeatmap,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n} from '../pipes'\n\nexport const heatmapAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n\n  encodingAdapter(\n    [defaultEncodingForHeatmap, buildMeasures],\n    [encodingForHeatmap, buildMeasures, pickMeasuresForReshape(['tooltip', 'label']), pickDimensionsForReshape],\n  ),\n  pivotAdapter([reshapeWithEncoding], [pivotReshapeWithEncoding]),\n\n  sortXBandAxis,\n  heatmapConfig,\n  theme,\n  markStyle,\n  annotation,\n]\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport type { VChartSpecPipe } from 'src/types'\nimport { colorLegend } from './colorLegend'\nimport type { Datum, IHeatmapChartSpec } from '@visactor/vchart'\nimport { DATUM_HIDE_KEY } from 'src/pipeline/utils/constant'\n\nexport const heatmapColorLegend: VChartSpecPipe = (spec, context) => {\n  const result = colorLegend(spec, context) as IHeatmapChartSpec\n\n  if (result.legends) {\n    ;(result.legends as any).customFilter = (data: Datum[], range: number[], key: string) => {\n      const min = Math.min(range[0], range[1])\n      const max = Math.max(range[0], range[1])\n      return (data ?? []).map((entry: Datum) => {\n        const val = entry[key]\n        const isHide = val - min < -1e-6 || val - max > 1e-6\n\n        entry[DATUM_HIDE_KEY] = isHide\n\n        return entry\n      })\n    }\n  }\n\n  return result\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorCellStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IHeatmapChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.cell?.style) {\n        result.cell.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport { DATUM_HIDE_KEY } from 'src/pipeline/utils/constant'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const cellStyle: VChartSpecPipe = (spec, context) => {\n  const result = {\n    ...spec,\n    cell: {\n      style: {},\n    },\n  } as IHeatmapChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const cell = advancedVSeed.config?.[chartType as 'heatmap']?.cell\n\n  return {\n    ...result,\n    cell: {\n      style: {\n        visible: (datum: any) => {\n          return datum?.[DATUM_HIDE_KEY] !== true\n        },\n        shape: 'rect',\n        stroke: cell?.stroke,\n        lineWidth: cell?.lineWidth ?? 1,\n      },\n    },\n  }\n}\n","import { uniqueBy } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures, findMeasureById } from '../../../../utils'\nimport type { Datum, Dimensions, FoldInfo, Locale, Measures, VChartSpecPipe, Tooltip, UnfoldInfo } from 'src/types'\nimport { ORIGINAL_DATA } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\n\nexport const tooltipHeatmap: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo, chartType, locale, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const { foldInfo } = datasetReshapeInfo[0] as unknown as {\n    foldInfo: FoldInfo\n    unfoldInfo: UnfoldInfo\n  }\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, findAllMeasures(vseed.measures), locale, foldInfo),\n    },\n    dimension: {\n      visible: false,\n    },\n  }\n  return result\n}\n\nexport const createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  measures: Measures,\n  locale: Locale,\n  foldInfo: FoldInfo,\n) => {\n  const dims = uniqueBy(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n  const meas = uniqueBy(\n    measures.filter((item) => tooltip.includes(item.id)),\n    (item) => item.id,\n  )\n\n  const dimContent = dims.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: (v: unknown) => {\n      const datum = v as Datum\n      if (item.alias || item.id) {\n        return item.alias || item.id\n      }\n      return datum && (datum[item.id] as string)\n    },\n    value: (v: unknown) => {\n      const datum = v as Datum\n      return datum && (datum[item.id] as string)\n    },\n  }))\n\n  const meaContent = meas.map((item) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias || item.id,\n    value: (v: unknown) => {\n      const datum = v as Datum\n      if (!datum) {\n        return ''\n      }\n      const id = item.id\n      if (!datum || !datum[ORIGINAL_DATA] || !datum[ORIGINAL_DATA]) {\n        return ''\n      }\n      const originalData = datum[ORIGINAL_DATA] as Datum\n      const value = originalData[id] as string | number\n      const measure = findMeasureById(measures, id)\n      const formatter = createFormatterByMeasure(measure)\n      return formatter(value)\n    },\n  }))\n\n  const foldMeaContent = [foldInfo].map((foldInfo) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (v: unknown) => {\n        const { measureId, foldMap } = foldInfo\n        const datum = v as Datum\n        const id = datum[measureId] as string\n        return foldMap[id] || id\n      },\n      value: (v: unknown) => {\n        const { measureId, measureValue } = foldInfo\n\n        const datum = v as Datum\n        if (!datum) {\n          return ''\n        }\n        const value = datum[measureValue] as string | number\n        const id = datum[measureId] as string\n        const measure = findMeasureById(measures, id)\n        const formatter = createFormatterByMeasure(measure)\n        return formatter(value)\n      },\n    }\n  })\n  return [...dimContent, ...foldMeaContent, ...meaContent]\n}\n","import type { IHeatmapChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initHeatmap: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHeatmapChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n\n  const { unfoldInfo, foldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'heatmap'\n  result.direction = 'vertical'\n  result.xField = unfoldInfo.encodingX\n  result.yField = unfoldInfo.encodingY\n  result.seriesField = unfoldInfo.encodingColorId\n  result.valueField = foldInfo.measureValue\n  result.padding = 0\n  result.axes = [\n    {\n      type: 'band',\n      orient: 'left',\n      bandPadding: 0,\n    },\n    {\n      type: 'band',\n      orient: 'bottom',\n      bandPadding: 0,\n    },\n  ]\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  datasetXY,\n  backgroundColor,\n  label,\n  tooltipHeatmap,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotAdapter,\n  pivotIndicatorsAsRow,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n  discreteLegend,\n  color,\n  colorAdapter,\n  linearColor,\n  heatmapColorLegend,\n  cellStyle,\n  colorCellStyleFill,\n  pivotDiscreteLegend,\n  pivotColorLegend,\n  pivotTitle,\n  pivotAxisStyle,\n} from '../pipes'\nimport { initHeatmap } from '../pipes/init/heatmap'\n\nconst heatmap: VChartSpecPipeline = [\n  initHeatmap,\n  backgroundColor,\n  datasetXY,\n  colorAdapter(color, linearColor),\n  label,\n  colorAdapter(discreteLegend, heatmapColorLegend),\n  colorCellStyleFill(cellStyle),\n  tooltipHeatmap,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationArea,\n]\n\nconst pivotHeatmap: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  pivotIndicatorsAsRow,\n  datasetPivot,\n  pivotIndicators([\n    pivotAxisStyle(initHeatmap),\n    backgroundColor,\n    datasetXY,\n    colorAdapter(color, linearColor),\n    label,\n    tooltipHeatmap,\n    colorCellStyleFill(cellStyle),\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationArea,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n]\n\nexport const heatmapSpecPipeline = [pivotAdapter(heatmap, pivotHeatmap)]\n","import { heatmapAdvancedPipeline, heatmapSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerHeatmap = () => {\n  Builder._advancedPipelineMap['heatmap'] = heatmapAdvancedPipeline\n  Builder._specPipelineMap['heatmap'] = heatmapSpecPipeline\n}\n","import { pick } from 'remeda'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config } from 'src/types'\n\nexport const boxplotConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'whiskers',\n    'boxMaxWidth',\n    'boxGapInGroup',\n\n    'dimensionLinkage',\n  ]) as Config['boxPlot']\n\n  const config = replaceNullToUndefined(pickedConfig)\n\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForBoxplot: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForBoxplot: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, measures.length > 1)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  if ((!encoding.value || encoding.value.length <= 1) && encoding.color && encoding.color.length > 1) {\n    encoding.color = encoding.color.filter((c) => c !== MeasureId)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const onlyMeasureId = dimensions.length === 1 && dimensions.find((item) => item.id === MeasureId)\n  const uniqueDimIds = unique(dimensions.map((d) => d.id))\n  encoding.x = uniqueDimIds.slice(0, 1) // 第一个维度放置于X轴\n  encoding.color = uniqueDimIds.slice(onlyMeasureId ? 0 : 1) // 第二个之后的维度用于颜色\n  encoding.tooltip = uniqueDimIds.filter((d) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // x\n  encoding.x = unique(dimensions.filter((item) => item.encoding === 'xAxis').map((item) => item.id))\n  if (encoding.x.length === 0) {\n    encoding.x = [dimensions[0].id]\n  }\n\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  // y\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.q1 = unique(measures.filter((item) => item.encoding === 'q1').map((item) => item.id))\n  encoding.median = unique(measures.filter((item) => item.encoding === 'median').map((item) => item.id))\n  encoding.q3 = unique(measures.filter((item) => item.encoding === 'q3').map((item) => item.id))\n  encoding.min = unique(measures.filter((item) => item.encoding === 'min').map((item) => item.id))\n  encoding.max = unique(measures.filter((item) => item.encoding === 'max').map((item) => item.id))\n  encoding.outliers = unique(measures.filter((item) => item.encoding === 'outliers').map((item) => item.id))\n  // color\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = color\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","export function toNumber(a) {\n    return Number(a);\n}\n//# sourceMappingURL=toNumber.js.map\n","import { toNumber } from \"./toNumber\";\n\nexport function quantileSorted(values, percent, valueof = toNumber) {\n    const n = values.length;\n    if (!n) return;\n    if (percent <= 0 || n < 2) return valueof(values[0], 0, values);\n    if (percent >= 1) return valueof(values[n - 1], n - 1, values);\n    const i = (n - 1) * percent, i0 = Math.floor(i), value0 = valueof(values[i0], i0, values);\n    return value0 + (valueof(values[i0 + 1], i0 + 1, values) - value0) * (i - i0);\n}\n//# sourceMappingURL=quantileSorted.js.map\n","import { clamp, isArray, isNil, quantileSorted } from \"@visactor/vutils\";\n\nexport const boxplot = (data, options) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;\n    const field = null == options ? void 0 : options.field;\n    if (!field) return [];\n    const groupField = null == options ? void 0 : options.groupField;\n    let whiskers = null !== (_a = null == options ? void 0 : options.whiskers) && void 0 !== _a ? _a : 1.5;\n    const includeValues = !!(null == options ? void 0 : options.includeValues), names = null !== (_b = null == options ? void 0 : options.outputNames) && void 0 !== _b ? _b : {}, keyName = null !== (_c = names.key) && void 0 !== _c ? _c : isArray(groupField) ? null : null !== (_d = groupField) && void 0 !== _d ? _d : \"key\", countName = null !== (_e = names.count) && void 0 !== _e ? _e : \"count\", meanName = null !== (_f = names.mean) && void 0 !== _f ? _f : \"mean\", q1Name = null !== (_g = names.q1) && void 0 !== _g ? _g : \"q1\", medianName = null !== (_h = names.median) && void 0 !== _h ? _h : \"median\", q3Name = null !== (_j = names.q3) && void 0 !== _j ? _j : \"q3\", iqrName = null !== (_k = names.iqr) && void 0 !== _k ? _k : \"iqr\", minName = null !== (_l = names.min) && void 0 !== _l ? _l : \"min\", maxName = null !== (_m = names.max) && void 0 !== _m ? _m : \"max\", lowerWhiskerName = null !== (_o = names.lowerWhisker) && void 0 !== _o ? _o : \"lowerWhisker\", upperWhiskerName = null !== (_p = names.upperWhisker) && void 0 !== _p ? _p : \"upperWhisker\", outliersName = null !== (_q = names.outliers) && void 0 !== _q ? _q : \"outliers\", valuesName = null !== (_r = names.values) && void 0 !== _r ? _r : \"values\", groups = new Map, rawValues = new Map, keyToGroup = new Map, n = data.length;\n    for (let i = 0; i < n; i++) {\n        const d = data[i], v = d[field];\n        if (isNil(v)) continue;\n        const num = +v;\n        if (!Number.isFinite(num)) continue;\n        let key;\n        key = isArray(groupField) ? groupField.map((f => String(d[f]))).join(\"||\") : groupField ? String(d[groupField]) : \"___all\", \n        groups.has(key) || (groups.set(key, []), includeValues && rawValues.set(key, []), \n        isArray(groupField) ? keyToGroup.set(key, Object.fromEntries(groupField.map((f => [ f, d[f] ])))) : keyToGroup.set(key, groupField ? d[groupField] : null));\n        const arr = groups.get(key);\n        if (arr && arr.push(num), includeValues) {\n            const rv = rawValues.get(key);\n            rv && rv.push(d);\n        }\n    }\n    if (isArray(whiskers)) {\n        whiskers = [ clamp(Math.min.apply(null, whiskers), 0, 1), clamp(Math.max.apply(null, whiskers), 0, 1) ];\n    }\n    const out = [];\n    for (const [key, vals] of groups) {\n        if (!vals || 0 === vals.length) continue;\n        const sorted = vals.slice().sort(((a, b) => a - b)), count = sorted.length, dataMin = sorted[0], dataMax = sorted[sorted.length - 1];\n        let sum = 0;\n        for (let i = 0; i < sorted.length; i++) sum += sorted[i];\n        const mean = sum / count, q1 = quantileSorted(sorted, .25), median = quantileSorted(sorted, .5), q3 = quantileSorted(sorted, .75), iqr = q3 - q1, lowerBound = isArray(whiskers) ? quantileSorted(sorted, whiskers[0]) : q1 - whiskers * iqr, upperBound = isArray(whiskers) ? quantileSorted(sorted, whiskers[1]) : q3 + whiskers * iqr, outliers = [];\n        for (let i = 0; i < sorted.length; i++) (sorted[i] < lowerBound || sorted[i] > upperBound) && outliers.push(sorted[i]);\n        const obj = {}, representative = keyToGroup.get(key);\n        if (null !== keyName) obj[keyName] = representative; else if (isArray(groupField)) {\n            const groupObj = representative || {};\n            for (const f of groupField) obj[f] = groupObj[f];\n        }\n        obj[countName] = count, obj[meanName] = mean, obj[q1Name] = q1, obj[medianName] = median, \n        obj[q3Name] = q3, obj[iqrName] = iqr, obj[minName] = dataMin, obj[maxName] = dataMax, \n        obj[lowerWhiskerName] = lowerBound, obj[upperWhiskerName] = upperBound, obj[outliersName] = outliers, \n        includeValues && (obj[valuesName] = rawValues.get(key) || []), out.push(obj);\n    }\n    return out;\n};\n\nexport default boxplot;\n//# sourceMappingURL=boxplot.js.map","import {\n  FoldMeasureId,\n  FoldMeasureName,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  Separator,\n  unfoldDimensions,\n  UpperWhisker,\n} from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, ColumnParallel, Dataset, Encoding } from 'src/types'\nimport { boxplot } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\n\nexport const reshapeWithBoxplotEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item) => item.id)\n\n  const whiskers = config?.[chartType as 'boxPlot']?.whiskers\n\n  let newDatasets: any[] = []\n  let foldInfo: any = {}\n  let unfoldInfo: any = {}\n\n  const allMeasures = findAllMeasures(measures)\n\n  if (encoding.value?.length) {\n    const boxPlotDataList: Dataset = []\n    encoding.value.forEach((f) => {\n      const m = allMeasures.find((m) => m.id === f)\n      const boxPlotData = boxplot(dataset, {\n        field: f,\n        groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n        whiskers,\n        outputNames: {\n          q1: Q1MeasureValue,\n          q3: Q3MeasureValue,\n          lowerWhisker: LowerWhisker,\n          upperWhisker: UpperWhisker,\n          median: MedianMeasureId,\n          outliers: OutliersMeasureId,\n        },\n      }) as Dataset\n\n      boxPlotData.forEach((datum) => {\n        datum[FoldMeasureId] = f\n        datum[FoldMeasureName] = m?.alias ?? f\n      })\n      boxPlotDataList.push(...boxPlotData)\n    })\n    const res = unfoldDimensions(boxPlotDataList, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((d) => {\n      newDatasets.push(d)\n    })\n    unfoldInfo = res.unfoldInfo\n  } else if (\n    encoding.q1?.length &&\n    encoding.q3?.length &&\n    encoding.min?.length &&\n    encoding.max?.length &&\n    encoding.median?.length\n  ) {\n    const res = unfoldDimensions(dataset, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((datum) => {\n      datum[UpperWhisker] = datum[encoding.max![0]]\n      datum[LowerWhisker] = datum[encoding.min![0]]\n      datum[Q1MeasureValue] = datum[encoding.q1![0]]\n      datum[Q3MeasureValue] = datum[encoding.q3![0]]\n      datum[MedianMeasureId] = datum[encoding.median![0]]\n    })\n\n    newDatasets = res.dataset\n    foldInfo = {}\n    unfoldInfo = res.unfoldInfo\n  }\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n    dimensions,\n    measures,\n  }\n}\n","import { boxplot } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport {\n  FoldMeasureId,\n  FoldMeasureName,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  Separator,\n  unfoldDimensions,\n  UpperWhisker,\n} from 'src/dataReshape'\nimport type {\n  AdvancedPipe,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Dimension,\n  Encoding,\n  MeasureGroup,\n} from 'src/types'\n\nexport const pivotReshapeWithBoxplotEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'boxPlot']\n  const whiskers = chartConfig?.whiskers\n\n  const measureGroups: MeasureGroup[] = []\n  if (measures) {\n    measures.forEach((measure: MeasureGroup) => {\n      if (measure.children && measure.children.length > 0) {\n        measureGroups.push(measure)\n      }\n    })\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measureGroup, index) => {\n    const subMeasures = measureGroup.children\n    if (!subMeasures) {\n      return\n    }\n    const groupId = measureGroup.id\n    let newDatasets: any[] = []\n    let foldInfo: any = {}\n    let unfoldInfo: any = {}\n    const validEncodingIds = (encoding.value || []).filter((id) => subMeasures.find((field) => field.id === id))\n\n    if (validEncodingIds.length) {\n      const boxPlotDataList: Dataset = []\n      validEncodingIds.forEach((f) => {\n        const m = subMeasures.find((m) => m.id === f)\n        const boxPlotData = boxplot(dataset, {\n          field: f,\n          groupField: [\n            ...(encoding.x ?? []),\n            ...(encoding.color ?? []),\n            ...rowColumnFields.map((item: Dimension) => item.id),\n          ] as string[],\n          whiskers,\n          outputNames: {\n            q1: Q1MeasureValue,\n            q3: Q3MeasureValue,\n            lowerWhisker: LowerWhisker,\n            upperWhisker: UpperWhisker,\n            median: MedianMeasureId,\n            outliers: OutliersMeasureId,\n          },\n        }) as Dataset\n\n        boxPlotData.forEach((datum) => {\n          datum[FoldMeasureId] = f\n          datum[FoldMeasureName] = m?.alias ?? f\n        })\n\n        boxPlotDataList.push(...boxPlotData)\n      })\n      const res = unfoldDimensions(boxPlotDataList, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((d) => {\n        newDatasets.push(d)\n      })\n      unfoldInfo = res.unfoldInfo\n    } else if (\n      encoding.q1?.length &&\n      encoding.q3?.length &&\n      encoding.min?.length &&\n      encoding.max?.length &&\n      encoding.median?.length\n    ) {\n      const res = unfoldDimensions(dataset, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((datum) => {\n        datum[UpperWhisker] = datum[encoding.max![0]]\n        datum[LowerWhisker] = datum[encoding.min![0]]\n        datum[Q1MeasureValue] = datum[encoding.q1![0]]\n        datum[Q3MeasureValue] = datum[encoding.q3![0]]\n        datum[MedianMeasureId] = datum[encoding.median![0]]\n      })\n\n      newDatasets = res.dataset\n      foldInfo = {}\n      unfoldInfo = res.unfoldInfo\n    }\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newDatasets)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  markStyle,\n  annotation,\n  sortLegend,\n  pivotReshapeWithBoxplotEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  encodingAdapter,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  defaultEncodingForBoxplot,\n  encodingForBoxplot,\n  reshapeWithBoxplotEncoding,\n  boxplotConfig,\n} from '../pipes'\n\nexport const boxplotAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  defaultMeasureId,\n  boxplotConfig,\n\n  encodingAdapter(\n    [defaultEncodingForBoxplot, buildMeasures],\n    [\n      encodingForBoxplot,\n      buildMeasures,\n      pickMeasuresForReshape(['tooltip', 'label', 'color']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithBoxplotEncoding], [pivotReshapeWithBoxplotEncoding]),\n\n  sortLegend,\n  theme,\n  markStyle,\n  annotation,\n]\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isDeepEqual } from 'remeda'\nimport {\n  LowerWhisker,\n  MeasureId,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  UpperWhisker,\n} from 'src/dataReshape/constant'\n\nexport const initBoxplot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IBoxPlotChartSpec\n  const { advancedVSeed } = context\n  const { datasetReshapeInfo, encoding } = advancedVSeed\n  const { unfoldInfo } = datasetReshapeInfo[0]\n\n  result.type = 'boxPlot'\n  // 默认应该是盒须的位置\n  result.minField = LowerWhisker\n  result.maxField = UpperWhisker\n  result.q1Field = Q1MeasureValue\n  result.medianField = MedianMeasureId\n  result.q3Field = Q3MeasureValue\n  result.outliersField = OutliersMeasureId\n  result.xField = [unfoldInfo.encodingX]\n  result.seriesField = unfoldInfo.encodingColorId\n\n  const sameDimensionsMode = isDeepEqual(encoding.x, encoding.color)\n\n  if (!sameDimensionsMode) {\n    result.xField.push(unfoldInfo.encodingColor)\n\n    if (encoding.color?.[0] === MeasureId && encoding.value?.length === 1) {\n      result.xField.pop()\n    }\n  }\n\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.animation = true\n  return result\n}\n","import { isNullish } from 'remeda'\nimport type { BoxMaxWidth, VChartSpecPipe } from 'src/types'\n\nexport const boxMaxWidth: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const boxMaxWidth = advancedVSeed.config?.[chartType as 'boxPlot']?.boxMaxWidth as BoxMaxWidth\n\n  if (!isNullish(boxMaxWidth)) {\n    return {\n      ...spec,\n      boxMaxWidth,\n    }\n  }\n\n  return spec\n}\n","import { isNullish } from 'remeda'\nimport type { BoxGapInGroup, VChartSpecPipe } from 'src/types'\n\nexport const boxGapInGroup: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { chartType } = vseed\n  const boxGapInGroup = advancedVSeed.config?.[chartType as 'boxPlot']?.boxGapInGroup as BoxGapInGroup\n\n  if (!isNullish(boxGapInGroup)) {\n    return {\n      ...spec,\n      boxGapInGroup,\n    }\n  }\n\n  return spec\n}\n","import { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\nimport type { ISpec } from '@visactor/vchart'\n\nexport const datasetBoxplot: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { id } = datasetReshapeInfo[0]\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as unknown as ISpec\n}\n","import { pipe, uniqueBy, isNullish } from 'remeda'\nimport { createFormatterByMeasure, findAllMeasures } from '../../../../utils'\nimport type { Dimension, Dimensions, Encoding, VChartSpecPipe, Tooltip } from 'src/types'\nimport type { Datum, ISpec, ITooltipLinePattern, ITooltipLineActual, TooltipData } from '@visactor/vchart'\nimport {\n  ColorEncoding,\n  LowerWhisker,\n  MedianMeasureId,\n  OutliersMeasureId,\n  Q1MeasureValue,\n  Q3MeasureValue,\n  UpperWhisker,\n  XEncoding,\n} from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { intl } from 'src/i18n'\n\nconst boxPlotMeasureKeys = [UpperWhisker, Q3MeasureValue, MedianMeasureId, Q1MeasureValue, LowerWhisker]\nconst VCHART_OUTLIER_KEY = '__VCHART_BOX_PLOT_OUTLIER_VALUE'\n\nexport const tooltipBoxplot: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed, vseed } = context\n  const { chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip }\n  const { tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const meas = findAllMeasures(vseed.measures)\n  const valueMeasure = meas.find((item) => item.encoding === 'value' || isNullish(item.encoding))\n  const defaultFormatter = valueMeasure ? createFormatterByMeasure(valueMeasure) : (v: unknown) => v\n  const measureAliasMapping: Record<string, string> = {\n    [OutliersMeasureId]: intl.i18n`异常点`,\n    [UpperWhisker]: intl.i18n`上边界`,\n    [Q3MeasureValue]: intl.i18n`上四分位数`,\n    [MedianMeasureId]: intl.i18n`中位数`,\n    [Q1MeasureValue]: intl.i18n`下四分位数`,\n    [LowerWhisker]: intl.i18n`下边界`,\n  }\n\n  result.tooltip = {\n    visible: enable,\n    style: getTooltipStyle(tooltip),\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(encoding.tooltip || [], dimensions, encoding as Encoding),\n      updateContent: (prev: ITooltipLineActual[] | undefined, data: TooltipData | undefined) => {\n        const datum = (data as any)?.[0]?.datum?.[0]\n\n        if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n          const tooltipItems: ITooltipLineActual[] = (prev ?? []).filter(\n            (item: any) => !boxPlotMeasureKeys.includes(item.key as string),\n          )\n          const outerlierMeasure = meas.find((item) => item.id === OutliersMeasureId)\n          const formatter = outerlierMeasure ? createFormatterByMeasure(outerlierMeasure) : defaultFormatter\n\n          tooltipItems.push({\n            ...(tooltipItems[0] as any),\n            key: outerlierMeasure?.alias ?? measureAliasMapping[OutliersMeasureId],\n            value: formatter(datum?.[VCHART_OUTLIER_KEY] as number) as string,\n          } as ITooltipLineActual)\n\n          return tooltipItems\n        }\n\n        return (prev ?? []).map((entry) => {\n          if (boxPlotMeasureKeys.includes((entry as any).key as string)) {\n            const mea = meas.find((item) => item.id === (entry as any).key)\n            const formatter = mea ? createFormatterByMeasure(mea) : defaultFormatter\n\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return {\n              ...(entry as any),\n              value: formatter(datum?.[(entry as any).key] as number) as string,\n              key: mea?.alias ?? measureAliasMapping[entry?.key as string] ?? (entry as any).key,\n            }\n          }\n\n          return entry\n        }) as ITooltipLineActual[]\n      },\n    },\n    dimension: {\n      visible: false,\n    },\n  }\n  return result as unknown as ISpec\n}\n\nconst createMarkContent = (tooltip: string[], dimensions: Dimensions, encoding: Encoding) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias ?? item.id,\n    value: (datum: Datum | undefined) => {\n      if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n        if (encoding.color?.includes(item.id)) {\n          return datum?.[ColorEncoding] as string\n        }\n        if (encoding.x?.includes(item.id)) {\n          return datum?.[XEncoding] as string\n        }\n      }\n\n      return datum?.[item.id] as string\n    },\n  }))\n\n  const defaultContent = boxPlotMeasureKeys.map((key: string) => {\n    return {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key,\n      value: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return datum[key] as string | number\n      },\n    }\n  })\n\n  return [...dimContent, defaultContent] as ITooltipLinePattern[]\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { isLinearColor } from './colorAdapter'\n\nexport const colorBoxPlotStyleFill = (stylePipe: VChartSpecPipe): VChartSpecPipe => {\n  return (spec, context) => {\n    const result = stylePipe(spec, context) as IBoxPlotChartSpec\n\n    const { advancedVSeed, vseed } = context\n    const { datasetReshapeInfo } = advancedVSeed\n    const { unfoldInfo } = datasetReshapeInfo[0]\n\n    if (isLinearColor(advancedVSeed, vseed)) {\n      if (result?.boxPlot?.style) {\n        result.boxPlot.style.fill = {\n          field: unfoldInfo.encodingColor,\n          scale: 'color',\n        }\n      }\n    }\n\n    return result\n  }\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { BoxPlotStyle, Datum, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const boxPlotStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { markStyle, config } = advancedVSeed\n  const { boxPlotStyle } = markStyle\n  const theme = config?.[vseed.chartType as 'boxPlot']?.boxPlotStyle\n\n  const result = {\n    ...spec,\n    boxPlot: {\n      style: {\n        shaftShape: 'filled-line',\n        visible: true,\n        shaftWidth: '50%',\n        stroke: theme?.boxBorderColor,\n      },\n    },\n  } as IBoxPlotChartSpec\n\n  if (isNullish(boxPlotStyle) || isEmpty(boxPlotStyle)) {\n    return result\n  }\n\n  const boxPlotStyles = (Array.isArray(boxPlotStyle) ? boxPlotStyle : [boxPlotStyle]) as BoxPlotStyle[]\n\n  const customMap = boxPlotStyles.reduce<object>((result, style, index) => {\n    const { boxColor, boxColorOpacity, boxBorderColor, boxBorderWidth = 1, boxVisible = true, boxBorderOpacity } = style\n\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: boxVisible,\n          fill: boxColor,\n          fillOpacity: boxColorOpacity,\n          lineWidth: boxBorderWidth,\n          stroke: boxBorderColor,\n          strokeOpacity: boxBorderOpacity,\n        },\n      },\n    }\n  }, {})\n\n  result.boxPlot!.state = {\n    ...result.boxPlot!.state,\n    ...customMap,\n  }\n\n  return result\n}\n","import type { IBoxPlotChartSpec } from '@visactor/vchart'\nimport { selector } from '../../../../../dataSelector'\nimport type { Datum, OutlierStyle, VChartSpecPipe } from 'src/types'\nimport { isEmpty, isNullish } from 'remeda'\n\nexport const outlierStyle: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { markStyle, config } = advancedVSeed\n  const { outlierStyle } = markStyle\n  const theme = config?.[vseed.chartType as 'boxPlot']?.outlierStyle\n  const result = {\n    ...spec,\n    outlier: {\n      style: {\n        fill: theme?.pointColor,\n      },\n    },\n  } as IBoxPlotChartSpec\n\n  if (isNullish(outlierStyle) || isEmpty(outlierStyle)) {\n    return result\n  }\n\n  const outlierStyles = (Array.isArray(outlierStyle) ? outlierStyle : [outlierStyle]) as OutlierStyle[]\n\n  const customMap = outlierStyles.reduce<object>((result, style, index) => {\n    const {\n      pointBorderColor,\n      pointBorderStyle,\n      pointBorderWidth = 1,\n      pointColor,\n      pointColorOpacity,\n      pointSize,\n      pointVisible = true,\n    } = style\n\n    const lineDash = pointBorderStyle === 'dashed' ? [5, 2] : pointBorderStyle === 'dotted' ? [2, 5] : [0, 0]\n    return {\n      ...result,\n      [`custom${index + 1}`]: {\n        // 优先级: 后者覆盖前者\n        level: index + 1,\n        filter: (datum: Datum) => {\n          if (selector(datum, style.selector)) {\n            return true\n          }\n          return false\n        },\n        style: {\n          visible: pointVisible,\n          size: pointSize,\n          fill: pointColor,\n          fillOpacity: pointColorOpacity,\n          innerBorder: {\n            stroke: pointBorderColor,\n            lineWidth: pointBorderWidth,\n            distance: (pointBorderWidth || 0) / 2,\n            lineDash: lineDash,\n          },\n        },\n      },\n    }\n  }, {})\n\n  return {\n    ...result,\n    outlier: {\n      ...result.outlier,\n      state: {\n        ...customMap,\n      },\n    },\n  }\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  backgroundColor,\n  label,\n  tooltipBoxplot,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  stackCornerRadius,\n  boxMaxWidth,\n  boxGapInGroup,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  pivotColorLegend,\n  initBoxplot,\n  xBand,\n  yLinear,\n  verticalCrosshairRect,\n  datasetBoxplot,\n  pivotAxisStyle,\n  pivotTitle,\n  dimensionLinkage,\n  boxPlotStyle,\n  colorBoxPlotStyleFill,\n  outlierStyle,\n  discreteLegend,\n} from '../pipes'\n\nconst boxplot: VChartSpecPipeline = [\n  initBoxplot,\n  stackCornerRadius,\n  boxMaxWidth,\n  boxGapInGroup,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetBoxplot,\n  progressive,\n  xBand,\n  yLinear,\n  label,\n  tooltipBoxplot,\n  colorAdapter(discreteLegend, colorLegend),\n  verticalCrosshairRect,\n  colorBoxPlotStyleFill(boxPlotStyle),\n  outlierStyle,\n  annotationPoint,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n]\n\nconst pivotBoxplot: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  datasetPivot,\n  pivotIndicators([\n    initBoxplot,\n    stackCornerRadius,\n    boxMaxWidth,\n    boxGapInGroup,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetBoxplot,\n    progressive,\n    xBand,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltipBoxplot,\n    colorBoxPlotStyleFill(boxPlotStyle),\n    outlierStyle,\n    verticalCrosshairRect,\n    annotationPoint,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const boxplotSpecPipeline = [pivotAdapter(boxplot, pivotBoxplot)]\n","import { boxplotAdvancedPipeline, boxplotSpecPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerBoxPlot = () => {\n  Builder._advancedPipelineMap['boxPlot'] = boxplotAdvancedPipeline\n  Builder._specPipelineMap['boxPlot'] = boxplotSpecPipeline\n}\n","const isArrayLike = function(value) {\n    return null !== value && \"function\" != typeof value && Number.isFinite(value.length);\n};\n\nexport default isArrayLike;\n//# sourceMappingURL=isArrayLike.js.map","import isArray from \"./isArray\";\n\nimport isArrayLike from \"./isArrayLike\";\n\nimport isPlainObject from \"./isPlainObject\";\n\nimport isValid from \"./isValid\";\n\nexport function baseMerge(target, source, shallowArray = !1, skipTargetArray = !1) {\n    if (source) {\n        if (target === source) return;\n        if (isValid(source) && \"object\" == typeof source) {\n            const iterable = Object(source), props = [];\n            for (const key in iterable) props.push(key);\n            let {length: length} = props, propIndex = -1;\n            for (;length--; ) {\n                const key = props[++propIndex];\n                !isValid(iterable[key]) || \"object\" != typeof iterable[key] || skipTargetArray && isArray(target[key]) ? assignMergeValue(target, key, iterable[key]) : baseMergeDeep(target, source, key, shallowArray, skipTargetArray);\n            }\n        }\n    }\n}\n\nfunction baseMergeDeep(target, source, key, shallowArray = !1, skipTargetArray = !1) {\n    const objValue = target[key], srcValue = source[key];\n    let newValue = source[key], isCommon = !0;\n    if (isArray(srcValue)) {\n        if (shallowArray) newValue = []; else if (isArray(objValue)) newValue = objValue; else if (isArrayLike(objValue)) {\n            newValue = new Array(objValue.length);\n            let index = -1;\n            const length = objValue.length;\n            for (;++index < length; ) newValue[index] = objValue[index];\n        }\n    } else isPlainObject(srcValue) ? (newValue = null != objValue ? objValue : {}, \"function\" != typeof objValue && \"object\" == typeof objValue || (newValue = {})) : isCommon = !1;\n    isCommon && baseMerge(newValue, srcValue, shallowArray, skipTargetArray), assignMergeValue(target, key, newValue);\n}\n\nfunction assignMergeValue(target, key, value) {\n    (void 0 !== value && !eq(target[key], value) || void 0 === value && !(key in target)) && (target[key] = value);\n}\n\nfunction eq(value, other) {\n    return value === other || Number.isNaN(value) && Number.isNaN(other);\n}\n\nexport default function merge(target, ...sources) {\n    let sourceIndex = -1;\n    const length = sources.length;\n    for (;++sourceIndex < length; ) {\n        baseMerge(target, sources[sourceIndex], !0);\n    }\n    return target;\n}\n//# sourceMappingURL=merge.js.map\n","/* eslint-disable @typescript-eslint/no-unsafe-assignment */\nimport { merge } from '@visactor/vutils'\nimport { pick } from 'remeda'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape'\nimport { replaceNullToUndefined } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, Config, Dimension } from 'src/types'\n\nexport const histogramConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n  const hasColorEncoding = (advancedVSeed?.dimensions || []).find((field: Dimension) => field?.encoding === 'color')\n\n  const pickedConfig = pick(vseed, [\n    'backgroundColor',\n    'color',\n    'label',\n    'legend',\n    'tooltip',\n    'xAxis',\n    'yAxis',\n    'crosshairRect',\n    'binCount',\n    'binStep',\n    'binValueType',\n\n    'dimensionLinkage',\n  ]) as Config['histogram']\n\n  let config = replaceNullToUndefined(pickedConfig)\n\n  if (pickedConfig?.binValueType === 'percentage') {\n    config = merge(\n      {},\n      {\n        yAxis: {\n          autoFomat: false,\n          numFormat: {\n            type: 'percent',\n            fractionDigits: 1,\n          },\n        },\n        label: {\n          autoFormat: false,\n          numFormat: {\n            type: 'percent',\n            fractionDigits: 1,\n          },\n        },\n      },\n      config,\n    )\n  }\n  if (!hasColorEncoding && !config?.legend?.enable) {\n    config = {\n      ...config,\n      legend: {\n        ...config?.legend,\n        enable: false,\n      },\n    }\n  }\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...config,\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n\nexport const histogramXAxisConfig: AdvancedPipe = (advancedVSeed, context) => {\n  const { vseed } = context\n  const { chartType } = vseed\n  const result = {\n    ...advancedVSeed,\n  }\n  const { dataset = [] } = advancedVSeed\n  const flattenDatasert = dataset.flat()\n  const minValue = Math.min(...flattenDatasert.map((v) => +v[BinStartMeasureId]))\n  const maxValue = Math.max(...flattenDatasert.map((v) => +v[BinEndMeasureId]))\n\n  const chartConfig = result.config?.[chartType] as any\n  result.config = {\n    ...(result.config || {}),\n    [chartType]: {\n      ...chartConfig,\n      xAxis: {\n        min: Number.isNaN(minValue) ? undefined : minValue,\n        max: Number.isNaN(maxValue) ? undefined : maxValue,\n        ...(chartConfig?.xAxis || {}),\n      },\n    },\n  }\n\n  return result as AdvancedVSeed\n}\n","import { unique } from 'remeda'\nimport { MeasureId } from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, Dimension, Dimensions, Encoding, Measure, Measures } from 'src/types'\nimport { addColorToEncoding } from './color'\n\nexport const defaultEncodingForHistogram: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n  const encoding: Encoding = {}\n  generateDefaultDimensionEncoding(dimensions, encoding)\n  generateDefaultMeasureEncoding(measures, encoding)\n  return { ...advancedVSeed, encoding }\n}\n\nexport const encodingForHistogram: AdvancedPipe = (advancedVSeed) => {\n  const { measures: vseedMeasures = [], dimensions = [] } = advancedVSeed\n  const measures = findAllMeasures(vseedMeasures)\n\n  const hasDimensionEncoding = dimensions.some((item: Dimension) => item.encoding)\n  const hasMeasureEncoding = measures.some((item: Measure) => item.encoding)\n  const encoding: Encoding = {}\n\n  if (hasDimensionEncoding) {\n    generateDimensionEncoding(dimensions, encoding, false)\n  } else {\n    generateDefaultDimensionEncoding(dimensions, encoding)\n  }\n\n  if (hasMeasureEncoding) {\n    generateMeasureEncoding(measures, encoding)\n  } else {\n    generateDefaultMeasureEncoding(measures, encoding)\n  }\n\n  return { ...advancedVSeed, encoding }\n}\n\n/**\n * --------------------维度--------------------\n */\nconst generateDefaultDimensionEncoding = (dimensions: Dimensions, encoding: Encoding) => {\n  const dimensionsWithoutMeasureId = dimensions.filter((item) => item.id !== MeasureId)\n  const uniqueDimIds = unique(dimensionsWithoutMeasureId.map((d) => d.id))\n\n  encoding.detail = encoding.color\n  encoding.tooltip = uniqueDimIds.filter((d: string) => d !== MeasureId) // 展示指标名称之外的所有维度\n  encoding.label = [] // 默认不展示标签\n  encoding.row = [] // 默认不进行行透视\n  encoding.column = [] // 默认不进行列透视\n}\nconst generateDimensionEncoding = (dimensions: Dimensions, encoding: Encoding, isMultiMeasure: boolean) => {\n  // color\n  addColorToEncoding(dimensions, encoding, isMultiMeasure)\n\n  // detail\n  encoding.detail = unique(dimensions.filter((item) => item.encoding === 'detail').map((item) => item.id))\n  if (encoding.detail?.length === 0) {\n    encoding.detail = encoding.color\n  }\n\n  // tooltip\n  encoding.tooltip = unique(dimensions.map((item) => item.id))\n  encoding.tooltip = encoding.tooltip?.filter((d) => d !== MeasureId)\n\n  // label\n  encoding.label = unique(dimensions.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = encoding.label?.filter((d) => d !== MeasureId)\n}\n\n/**\n * --------------------指标--------------------\n */\nconst generateDefaultMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.x0 = unique(measures.filter((item) => item.encoding === 'x0').map((item) => item.id))\n  encoding.x1 = unique(measures.filter((item) => item.encoding === 'x1').map((item) => item.id))\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n}\nconst generateMeasureEncoding = (measures: Measures, encoding: Encoding) => {\n  encoding.value = unique(measures.filter((item) => item.encoding === 'value' || !item.encoding).map((item) => item.id))\n  encoding.x0 = unique(measures.filter((item) => item.encoding === 'x0').map((item) => item.id))\n  encoding.x1 = unique(measures.filter((item) => item.encoding === 'x1').map((item) => item.id))\n  encoding.y = unique(measures.filter((item) => item.encoding === 'yAxis').map((item) => item.id))\n  const color = unique(measures.filter((item) => item.encoding === 'color').map((item) => item.id))\n  if (color.length > 0) {\n    encoding.color = [color[0]]\n  }\n\n  // label\n  const label = unique(measures.filter((item) => item.encoding === 'label').map((item) => item.id))\n  encoding.label = unique([...(encoding.label || []), ...label])\n\n  // tooltip\n  const tooltip = unique(measures.filter((item) => item.encoding === 'tooltip').map((item) => item.id))\n  encoding.tooltip = unique([...(encoding.tooltip || []), ...label, ...tooltip])\n}\n","import { isNil, isArray } from \"@visactor/vutils\";\n\nconst subBin = (data, options) => {\n    var _a, _b, _c, _d;\n    const {numBins: numBins, thresholds: thresholds, countName: countName, percentageName: percentageName, valuesName: valuesName, countField: countField, field: field, n: n, x0Name: x0Name, x1Name: x1Name} = options, groupField = options.groupField, usingGroup = Array.isArray(groupField) ? groupField.length > 0 : !!groupField, out = [];\n    if (!usingGroup) for (let i = 0; i < numBins; i++) {\n        const rec = {\n            [x0Name]: thresholds[i],\n            [x1Name]: thresholds[i + 1],\n            [countName]: 0\n        };\n        options.includeValues && (rec[valuesName] = []), out.push(rec);\n    }\n    const binGroupCounts = usingGroup ? new Array(numBins).fill(0).map((() => new Map)) : [], binGroupValues = usingGroup ? new Array(numBins).fill(0).map((() => new Map)) : [], groupKeyOrder = [], groupKeySet = new Set, groupRepr = new Map;\n    for (let i = 0; i < n; i++) {\n        const v = data[i][field];\n        if (null == v) continue;\n        const num = +v;\n        if (Number.isFinite(num)) for (let j = 0; j < numBins; j++) {\n            const left = thresholds[j], right = thresholds[j + 1];\n            if (num >= left && num < right || j === numBins - 1 && num <= right) {\n                const datumCount = null !== (_a = data[i][countField]) && void 0 !== _a ? _a : 1;\n                if (usingGroup) {\n                    let gk;\n                    gk = isArray(groupField) ? groupField.map((f => String(data[i][f]))).join(\"||\") : String(data[i][groupField]);\n                    const m = binGroupCounts[j], prev = null !== (_b = m.get(gk)) && void 0 !== _b ? _b : 0;\n                    if (m.set(gk, prev + datumCount), groupKeySet.has(gk) || (groupKeySet.add(gk), groupKeyOrder.push(gk), \n                    isArray(groupField) ? groupRepr.set(gk, Object.fromEntries(groupField.map((f => [ f, data[i][f] ])))) : groupRepr.set(gk, data[i][groupField])), \n                    options && options.includeValues) {\n                        const vv = binGroupValues[j];\n                        vv.has(gk) || vv.set(gk, []);\n                        const arr = vv.get(gk);\n                        arr && arr.push(data[i]);\n                    }\n                } else out[j][countName] += datumCount;\n                options && options.includeValues && !usingGroup && out[j][valuesName].push(data[i]);\n                break;\n            }\n        }\n    }\n    let totalCount = 0;\n    const finalOut = [];\n    if (usingGroup) {\n        for (let j = 0; j < numBins; j++) for (const gk of groupKeyOrder) {\n            const sum = null !== (_c = binGroupCounts[j].get(gk)) && void 0 !== _c ? _c : 0, rec = {\n                [x0Name]: thresholds[j],\n                [x1Name]: thresholds[j + 1],\n                [countName]: sum\n            }, repr = null !== (_d = groupRepr.get(gk)) && void 0 !== _d ? _d : {};\n            if (isArray(groupField)) for (const f of groupField) rec[f] = repr[f]; else groupField && (rec[groupField] = repr);\n            options && options.includeValues && (rec[valuesName] = binGroupValues[j].get(gk) || []), \n            finalOut.push(rec), totalCount += sum;\n        }\n        const denominator = totalCount;\n        for (const r of finalOut) r[percentageName] = denominator > 0 ? r[countName] / denominator : 0;\n    } else {\n        for (let i = 0, len = out.length; i < len; i++) totalCount += out[i][countName];\n        for (let i = 0, len = out.length; i < len; i++) out[i][percentageName] = totalCount > 0 ? out[i][countName] / totalCount : 0, \n        finalOut.push(out[i]);\n    }\n    return finalOut;\n};\n\nexport const bin = (data, options) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n    const field = null == options ? void 0 : options.field;\n    if (!field) return [];\n    const countField = options.countField, n = data.length;\n    let thresholds, min = 1 / 0, max = -1 / 0;\n    if (options.extent) min = options.extent[0], max = options.extent[1]; else for (let i = 0; i < n; i++) {\n        const v = data[i][field];\n        if (isNil(v)) continue;\n        const num = +v;\n        Number.isFinite(num) && (num < min && (min = num), num > max && (max = num));\n    }\n    if (!Number.isFinite(min) || !Number.isFinite(max) || 0 === n) return [];\n    if (options.thresholds && options.thresholds.length) thresholds = options.thresholds.slice(), \n    thresholds.sort(((a, b) => a - b)); else if (\"number\" == typeof options.step && options.step > 0) {\n        const stepSize = options.step;\n        let startMin = min;\n        for (options.extent || (startMin = Math.floor(min / stepSize) * stepSize), thresholds = [ startMin ]; startMin <= max; ) startMin += stepSize, \n        thresholds.push(startMin);\n    } else {\n        const bins = options.bins && options.bins > 0 ? Math.floor(options.bins) : 10;\n        if (max - min > 1) {\n            const start = Math.floor(min), stepSizeInt = Math.ceil((max - start) / bins);\n            thresholds = new Array(bins + 1);\n            for (let i = 0; i <= bins; i++) thresholds[i] = start + stepSizeInt * i;\n        } else {\n            const stepSize = (max - min) / bins;\n            thresholds = new Array(bins + 1);\n            for (let i = 0; i <= bins; i++) thresholds[i] = min + stepSize * i;\n        }\n    }\n    const numBins = Math.max(0, thresholds.length - 1);\n    if (0 === numBins) return [];\n    const x0Name = null !== (_b = null === (_a = options.outputNames) || void 0 === _a ? void 0 : _a.x0) && void 0 !== _b ? _b : \"x0\", x1Name = null !== (_d = null === (_c = options.outputNames) || void 0 === _c ? void 0 : _c.x1) && void 0 !== _d ? _d : \"x1\", countName = null !== (_f = null === (_e = options.outputNames) || void 0 === _e ? void 0 : _e.count) && void 0 !== _f ? _f : \"count\", valuesName = null !== (_h = null === (_g = options.outputNames) || void 0 === _g ? void 0 : _g.values) && void 0 !== _h ? _h : \"values\", percentageName = null !== (_k = null === (_j = options.outputNames) || void 0 === _j ? void 0 : _j.percentage) && void 0 !== _k ? _k : \"percentage\", facetField = isArray(null == options ? void 0 : options.facetField) ? null == options ? void 0 : options.facetField : (null == options ? void 0 : options.facetField) ? [ options.facetField ] : [], groupField = isArray(null == options ? void 0 : options.groupField) ? null == options ? void 0 : options.groupField : (null == options ? void 0 : options.groupField) ? [ options.groupField ] : [], normalizedGroupField = groupField.length ? groupField : void 0, subViewOptions = Object.assign(Object.assign({}, options), {\n        numBins: numBins,\n        thresholds: thresholds,\n        countName: countName,\n        percentageName: percentageName,\n        valuesName: valuesName,\n        countField: countField,\n        field: field,\n        n: n,\n        x0Name: x0Name,\n        x1Name: x1Name,\n        groupField: normalizedGroupField\n    });\n    if (!facetField.length) return subBin(data, subViewOptions);\n    const subViewMap = {};\n    return data.forEach((dataItem => {\n        const subViewKey = facetField.map((field => null == dataItem ? void 0 : dataItem[field])).join(\"-&&-\");\n        subViewMap[subViewKey] ? subViewMap[subViewKey].push(dataItem) : subViewMap[subViewKey] = [ dataItem ];\n    })), Object.values(subViewMap).map((subDataset => {\n        const combinedGroupField = [ ...groupField, ...facetField ];\n        return subBin(subDataset, Object.assign(Object.assign({}, subViewOptions), {\n            groupField: combinedGroupField.length ? combinedGroupField : void 0,\n            n: subDataset.length\n        }));\n    })).flat();\n};\n\nexport default bin;\n//# sourceMappingURL=bin.js.map","import {\n  BinCountMeasureId,\n  BinEndMeasureId,\n  BinPercentageMeasureId,\n  BinStartMeasureId,\n  dataReshapeByEncoding,\n  FoldMeasureId,\n  FoldMeasureName,\n  FoldMeasureValue,\n  Separator,\n  unfoldDimensions,\n} from 'src/dataReshape'\nimport { findAllMeasures } from 'src/pipeline/utils'\nimport type { AdvancedPipe, AdvancedVSeed, ColumnParallel, Dataset, Dimension, Encoding, FoldInfo } from 'src/types'\nimport { bin } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes/color/colorAdapter'\n\nexport const reshapeWithHistogramEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const uniqDims = uniqueBy(dimensions, (item) => item.id)\n  const chartConfig = config?.[chartType as 'histogram']\n  const binCount = chartConfig?.binCount\n  const binStep = chartConfig?.binStep\n  const binValueType = chartConfig?.binValueType\n\n  let newDatasets: any[] = []\n  let foldInfo: FoldInfo = {\n    foldMap: {},\n    measureId: FoldMeasureId,\n    measureName: FoldMeasureName,\n    measureValue: FoldMeasureValue,\n    statistics: {\n      max: -Infinity,\n      min: Infinity,\n      sum: 0,\n      count: 0,\n      colorMin: Infinity,\n      colorMax: -Infinity,\n    },\n  }\n  let unfoldInfo: any = {}\n\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const allMeasures = findAllMeasures(measures)\n\n  if (encoding.value?.length) {\n    const valueField = encoding.value[0]\n    const m = allMeasures.find((m) => m.id === valueField)\n    const binData = bin(dataset, {\n      field: valueField,\n      groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n      bins: binCount,\n      step: binStep,\n      outputNames: {\n        x0: BinStartMeasureId,\n        x1: BinEndMeasureId,\n        count: BinCountMeasureId,\n        percentage: BinPercentageMeasureId,\n      },\n    }) as Dataset\n\n    binData.forEach((datum) => {\n      datum[FoldMeasureId] = valueField\n      datum[FoldMeasureName] = m?.alias ?? valueField\n      const valueNumber = binValueType === 'percentage' ? +datum[BinPercentageMeasureId] : +datum[BinCountMeasureId]\n      datum[FoldMeasureValue] = valueNumber\n      datum[valueField] = valueNumber\n      foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n      foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n      foldInfo.statistics.sum += valueNumber\n      foldInfo.statistics.count++\n    })\n    if (m?.id) {\n      foldInfo.foldMap[m?.id] = m?.alias\n    }\n\n    const res = unfoldDimensions(binData, uniqDims, encoding as Encoding, {\n      foldMeasureId: FoldMeasureId,\n      separator: Separator,\n      colorItemAsId: false,\n    })\n\n    res.dataset.forEach((d) => {\n      newDatasets.push(d)\n    })\n    unfoldInfo = res.unfoldInfo\n  } else if (encoding.x0?.length && encoding.x1?.length && encoding.y?.length) {\n    const res = dataReshapeByEncoding(\n      dataset,\n      uniqueBy(dimensions, (item: Dimension) => item.id),\n      findAllMeasures(measures)\n        .filter((item) => encoding.y?.includes(item.id))\n        .slice(0, 1),\n      encoding as Encoding,\n      {\n        colorItemAsId: false,\n        colorMeasureId,\n      },\n    )\n\n    res.dataset.forEach((datum) => {\n      datum[BinStartMeasureId] = datum[encoding.x0![0]]\n      datum[BinEndMeasureId] = datum[encoding.x1![0]]\n    })\n\n    newDatasets = res.dataset\n    foldInfo = res.foldInfo\n    unfoldInfo = res.unfoldInfo\n  }\n\n  return {\n    ...result,\n    dataset: newDatasets,\n    datasetReshapeInfo: [\n      {\n        id: String(chartType),\n        index: 0,\n        foldInfo,\n        unfoldInfo,\n      },\n    ],\n    dimensions,\n    measures,\n  }\n}\n","import { bin } from '@visactor/vdataset'\nimport { uniqueBy } from 'remeda'\nimport {\n  BinCountMeasureId,\n  BinEndMeasureId,\n  BinPercentageMeasureId,\n  BinStartMeasureId,\n  dataReshapeByEncoding,\n  FoldMeasureId,\n  FoldMeasureName,\n  FoldMeasureValue,\n  Separator,\n  unfoldDimensions,\n} from 'src/dataReshape'\nimport { getColorMeasureId } from 'src/pipeline/spec/chart/pipes'\nimport type {\n  AdvancedPipe,\n  AdvancedVSeed,\n  ColumnParallel,\n  Dataset,\n  DatasetReshapeInfo,\n  Datum,\n  Dimension,\n  Encoding,\n  FoldInfo,\n  MeasureGroup,\n} from 'src/types'\n\nexport const pivotReshapeWithHistogramEncoding: AdvancedPipe = (advancedVSeed, context) => {\n  const result = { ...advancedVSeed }\n  const { vseed } = context\n  const { dataset, chartType } = vseed as ColumnParallel\n  const { encoding = {}, config } = advancedVSeed\n  const measures = advancedVSeed.reshapeMeasures ?? advancedVSeed.measures ?? []\n  const dimensions = advancedVSeed.reshapeDimensions ?? advancedVSeed.dimensions ?? []\n  const colorMeasureId = getColorMeasureId(advancedVSeed as AdvancedVSeed, vseed)\n  const uniqDims = uniqueBy(dimensions, (item: Dimension) => item.id)\n  const chartConfig = config?.[chartType as 'histogram']\n  const binCount = chartConfig?.binCount\n  const binStep = chartConfig?.binStep\n  const binValueType = chartConfig?.binValueType\n\n  const measureGroups: MeasureGroup[] = []\n  if (measures) {\n    measures.forEach((measure: MeasureGroup) => {\n      if (measure.children && measure.children.length > 0) {\n        measureGroups.push(measure)\n      }\n    })\n  }\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const datasets: Dataset = []\n  const datasetReshapeInfo: DatasetReshapeInfo = []\n\n  measureGroups.forEach((measureGroup, index) => {\n    const subMeasures = measureGroup.children\n    if (!subMeasures) {\n      return\n    }\n    const groupId = measureGroup.id\n\n    let newDatasets: any[] = []\n    let foldInfo: FoldInfo = {\n      foldMap: {},\n      measureId: FoldMeasureId,\n      measureName: FoldMeasureName,\n      measureValue: FoldMeasureValue,\n      statistics: {\n        max: -Infinity,\n        min: Infinity,\n        sum: 0,\n        count: 0,\n        colorMin: Infinity,\n        colorMax: -Infinity,\n      },\n    }\n    let unfoldInfo: any = {}\n\n    if (encoding.value?.length) {\n      const valueField = encoding.value[0]\n      const m = subMeasures.find((m) => m.id === valueField)\n      const binData = bin(dataset, {\n        field: valueField,\n        groupField: [...(encoding.x ?? []), ...(encoding.color ?? [])] as string[],\n        facetField: rowColumnFields.map((item: Dimension) => item.id),\n        bins: binCount,\n        step: binStep,\n        outputNames: {\n          x0: BinStartMeasureId,\n          x1: BinEndMeasureId,\n          count: BinCountMeasureId,\n          percentage: BinPercentageMeasureId,\n        },\n      }) as Dataset\n\n      binData.forEach((datum: Datum) => {\n        datum[FoldMeasureId] = valueField\n        datum[FoldMeasureName] = m?.alias ?? valueField\n        const valueNumber = binValueType === 'percentage' ? +datum[BinPercentageMeasureId] : +datum[BinCountMeasureId]\n        datum[FoldMeasureValue] = valueNumber\n        datum[valueField] = valueNumber\n\n        foldInfo.statistics.min = Math.min(foldInfo.statistics.min, valueNumber)\n        foldInfo.statistics.max = Math.max(foldInfo.statistics.max, valueNumber)\n        foldInfo.statistics.sum += valueNumber\n        foldInfo.statistics.count++\n      })\n      if (m?.id) {\n        foldInfo.foldMap[m?.id] = m?.alias\n      }\n\n      const res = unfoldDimensions(binData, uniqDims, encoding as Encoding, {\n        foldMeasureId: FoldMeasureId,\n        separator: Separator,\n        colorItemAsId: false,\n      })\n\n      res.dataset.forEach((d) => {\n        newDatasets.push(d)\n      })\n      unfoldInfo = res.unfoldInfo\n    } else if (encoding.x0?.length && encoding.x1?.length && encoding.y?.length) {\n      const res = dataReshapeByEncoding(\n        dataset,\n        uniqueBy(dimensions, (item: Dimension) => item.id),\n        subMeasures.filter((item) => encoding.y?.includes(item.id)).slice(0, 1),\n        encoding as Encoding,\n        {\n          colorItemAsId: false,\n          colorMeasureId,\n        },\n      )\n\n      res.dataset.forEach((datum) => {\n        datum[BinStartMeasureId] = datum[encoding.x0![0]]\n        datum[BinEndMeasureId] = datum[encoding.x1![0]]\n        datum[FoldMeasureId] = datum[encoding.y![0]]\n      })\n\n      newDatasets = res.dataset\n      foldInfo = res.foldInfo\n      unfoldInfo = res.unfoldInfo\n    }\n\n    const reshapeInfo = {\n      id: `${groupId}`,\n      index,\n      foldInfo,\n      unfoldInfo,\n    }\n    datasets.push(newDatasets)\n    datasetReshapeInfo.push(reshapeInfo)\n  })\n\n  return {\n    ...result,\n    dataset: datasets,\n    datasetReshapeInfo: datasetReshapeInfo,\n  }\n}\n","import type { AdvancedPipeline } from 'src/types'\nimport {\n  initAdvancedVSeed,\n  theme,\n  pivotAdapter,\n  histogramConfig,\n  markStyle,\n  annotation,\n  sortLegend,\n  pivotReshapeWithHistogramEncoding,\n  buildMeasures,\n  defaultMeasures,\n  defaultDimensions,\n  encodingAdapter,\n  pickMeasuresForReshape,\n  pickDimensionsForReshape,\n  defaultEncodingForHistogram,\n  encodingForHistogram,\n  reshapeWithHistogramEncoding,\n  regressionLine,\n} from '../pipes'\nimport { histogramXAxisConfig } from '../pipes/config/histogram'\n\nexport const histogramAdvancedPipeline: AdvancedPipeline = [\n  initAdvancedVSeed,\n  defaultMeasures,\n  defaultDimensions,\n  histogramConfig,\n\n  encodingAdapter(\n    [defaultEncodingForHistogram, buildMeasures],\n    [\n      encodingForHistogram,\n      buildMeasures,\n      pickMeasuresForReshape(['tooltip', 'label', 'color']),\n      pickDimensionsForReshape,\n    ],\n  ),\n  pivotAdapter([reshapeWithHistogramEncoding], [pivotReshapeWithHistogramEncoding]),\n\n  histogramXAxisConfig,\n  sortLegend,\n  theme,\n  markStyle,\n  annotation,\n  regressionLine,\n]\n","import type { IHistogramChartSpec } from '@visactor/vchart'\nimport { BinEndMeasureId, BinStartMeasureId, FoldMeasureValue } from 'src/index'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const initHistogram: VChartSpecPipe = (spec) => {\n  const result = { ...spec } as IHistogramChartSpec\n\n  // 直方图默认支持明细数据\n  result.type = 'histogram'\n  result.xField = BinStartMeasureId\n  result.x2Field = BinEndMeasureId\n  result.yField = FoldMeasureValue\n  // result.seriesField = unfoldInfo.encodingColorId\n  result.padding = 0\n  result.region = [\n    {\n      clip: true,\n    },\n  ]\n  result.legends = {\n    visible: false,\n  }\n  result.barGap = 2\n  result.animation = true\n  return result\n}\n","import type { ISpec } from '@visactor/vchart'\nimport { isPivotChart } from 'src/pipeline/utils'\nimport type { VChartSpecPipe } from 'src/types'\n\nexport const datasetHistogram: VChartSpecPipe = (spec, context) => {\n  const { advancedVSeed, vseed } = context\n  const { datasetReshapeInfo } = advancedVSeed\n  const { id } = datasetReshapeInfo[0]\n\n  const fields: Record<string, object> = {}\n\n  return {\n    ...spec,\n    data: {\n      id,\n      // 透视表不使用 dataValues\n      values: isPivotChart(vseed) ? undefined : advancedVSeed.dataset.flat(),\n      fields: fields,\n    },\n  } as unknown as ISpec\n}\n","import { autoFormatter, createNumFormatter } from 'src/pipeline/utils'\nimport type { AdvancedVSeed, XLinearAxis } from 'src/types'\nimport { createLinearFormat } from '../pipes/axes/format/linearFormat'\n\nexport const getDefaultXFormatterOfHistogram = (advancedVSeed: AdvancedVSeed) => {\n  const { chartType, config } = advancedVSeed\n  const xConfig = config?.[chartType as 'bar']?.xAxis as XLinearAxis\n  const { autoFormat = true, numFormat = {} } = xConfig\n  const formatter = createNumFormatter(numFormat)\n  return (value: number) => createLinearFormat(value, autoFormat, numFormat, formatter)\n}\n\nexport const getDefaultValueFormatterOfHistogram = (binValueType: 'count' | 'percentage' = 'count') => {\n  return binValueType === 'percentage'\n    ? createNumFormatter({\n        type: 'percent',\n        fractionDigits: 1,\n      })\n    : (value: number | string) => autoFormatter(value)\n}\n","import { pipe, uniqueBy, isNullish } from 'remeda'\nimport type { Dimension, Dimensions, Encoding, VChartSpecPipe, Tooltip } from 'src/types'\nimport type { Datum, ISpec, ITooltipLinePattern } from '@visactor/vchart'\nimport { BinEndMeasureId, BinStartMeasureId, ColorEncoding, FoldMeasureValue, XEncoding } from 'src/dataReshape'\nimport { getTooltipStyle } from './tooltipStyle'\nimport { getDefaultValueFormatterOfHistogram, getDefaultXFormatterOfHistogram } from '../../utils/histogram'\n\nconst VCHART_OUTLIER_KEY = '__VCHART_BOX_PLOT_OUTLIER_VALUE'\n\nexport const tooltipHistogram: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec }\n  const { advancedVSeed } = context\n  const { chartType, dimensions, encoding } = advancedVSeed\n  const baseConfig = advancedVSeed.config[chartType] as { tooltip: Tooltip; binValueType: 'count' | 'percentage' }\n  const { binValueType, tooltip = { enable: true } } = baseConfig\n  const { enable } = tooltip\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(advancedVSeed)\n  const defaultValueFormatter = getDefaultValueFormatterOfHistogram(binValueType)\n\n  result.tooltip = {\n    style: getTooltipStyle(tooltip),\n    visible: enable,\n    mark: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        encoding as Encoding,\n        defaultXFormatter,\n        defaultValueFormatter,\n      ),\n    },\n    dimension: {\n      title: {\n        visible: false,\n      },\n      content: createMarkContent(\n        encoding.tooltip || [],\n        dimensions,\n        encoding as Encoding,\n        defaultXFormatter,\n        defaultValueFormatter,\n      ),\n    },\n  }\n  return result as unknown as ISpec\n}\n\nconst createMarkContent = (\n  tooltip: string[],\n  dimensions: Dimensions,\n  encoding: Encoding,\n  dimFormatter: (value: number) => string,\n  defaultValueFormatter: (value: number | string) => string,\n) => {\n  const dims = pipe(\n    dimensions.filter((item) => tooltip.includes(item.id)),\n    uniqueBy((item: Dimension) => item.id),\n    uniqueBy((item: Dimension) => item.alias),\n  )\n\n  const dimContent = dims.map((item: Dimension) => ({\n    visible: true,\n    hasShape: true,\n    shapeType: 'rectRound',\n    key: item.alias ?? item.id,\n    value: (datum: Datum | undefined) => {\n      if (!isNullish(datum?.[VCHART_OUTLIER_KEY])) {\n        if (encoding.color?.includes(item.id)) {\n          return datum?.[ColorEncoding] as string\n        }\n        if (encoding.x?.includes(item.id)) {\n          return datum?.[XEncoding] as string\n        }\n      }\n\n      return defaultValueFormatter(datum?.[item.id] as string)\n    },\n  }))\n\n  const defaultContent = [\n    {\n      visible: true,\n      hasShape: true,\n      shapeType: 'rectRound',\n      key: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return `[${dimFormatter(+datum[BinStartMeasureId])}, ${dimFormatter(+datum[BinEndMeasureId])})`\n      },\n      value: (datum: Datum | undefined) => {\n        if (!datum) {\n          return ''\n        }\n        return defaultValueFormatter(datum[FoldMeasureValue] as string | number)\n      },\n    },\n  ]\n\n  return [...dimContent, defaultContent] as ITooltipLinePattern[]\n}\n","import type { ICartesianCrosshairSpec } from '@visactor/vchart'\nimport type { VChartSpecPipe } from 'src/types'\nimport { verticalCrosshairRect } from './verticalCrosshairRect'\nimport { getDefaultXFormatterOfHistogram } from '../../utils/histogram'\nimport { isArray } from '@visactor/vutils'\n\nexport const histogramVerticalCrosshairRect: VChartSpecPipe = (spec, context) => {\n  const result = verticalCrosshairRect(spec, context)\n  if (!result.crosshair) {\n    return result\n  }\n  const crosshair = result.crosshair as ICartesianCrosshairSpec\n  if (!crosshair.xField) {\n    return result\n  }\n  const defaultXFormatter = getDefaultXFormatterOfHistogram(context.advancedVSeed)\n  crosshair.xField = {\n    ...(crosshair.xField || {}),\n    label: {\n      ...(crosshair.xField?.label || {}),\n      formatMethod: (text) => {\n        if (isArray(text)) {\n          return text\n        }\n        const binRange = `${text}`.split('~')\n        const binStart = defaultXFormatter(+binRange[0])\n        const binEnd = defaultXFormatter(+binRange[1])\n        return binRange.length === 1 ? binStart : `[${binStart}, ${binEnd})`\n      },\n    },\n  }\n\n  return result\n}\n","import type { IHistogramChartSpec, IMarkPointSpec } from '@visactor/vchart'\nimport type { Datum, VChartSpecPipe } from 'src/types'\nimport { isSubset } from './utils'\nimport { generateAnnotationPointPipe } from './annotationPointCommon'\n\nexport const annotationPointOfHistogram: VChartSpecPipe = generateAnnotationPointPipe({\n  generateMarkPoint: (datum: Datum, spec) => {\n    const histogramSpec = spec as IHistogramChartSpec\n    const xField = histogramSpec.xField as string\n    const x2Field = histogramSpec.x2Field as string\n\n    return [\n      {\n        coordinate: (data: Datum[]) => {\n          const d = data.find((item) => isSubset(datum, item))\n\n          return d\n            ? {\n                ...d,\n                [xField]: (d[xField] + d[x2Field]) / 2,\n              }\n            : undefined\n        },\n      } as IMarkPointSpec,\n    ]\n  },\n})\n","export const gaussian = u => 1 / Math.sqrt(2 * Math.PI) * Math.exp(-.5 * u * u);\n\nexport const epanechnikov = u => Math.abs(u) <= 1 ? .75 * (1 - u * u) : 0;\n\nexport function scott(n, std, dim = 1) {\n    return n <= 0 || 0 === std ? 0 : std * Math.pow(n, -1 / (dim + 4));\n}\n\nexport function silverman(n, std, dim = 1) {\n    if (n <= 0 || 0 === std) return 0;\n    return Math.pow(4 / (dim + 2), 1 / (dim + 4)) * std * Math.pow(n, -1 / (dim + 4));\n}\n\nfunction std(values) {\n    const n = values.length;\n    if (0 === n) return 0;\n    let mean = 0;\n    for (let i = 0; i < n; i++) mean += values[i];\n    mean /= n;\n    let s = 0;\n    for (let i = 0; i < n; i++) {\n        const d = values[i] - mean;\n        s += d * d;\n    }\n    return Math.sqrt(s / n);\n}\n\nexport function kde(data, options = {}) {\n    const n = data.length, kernel = options.kernel || gaussian;\n    let h = options.bandwidth;\n    if (!h || h <= 0) {\n        const sd = std(data) || 0, method = options.bandwidthMethod || \"scott\";\n        h = \"silverman\" === method ? silverman(n, sd, 1) : scott(n, sd, 1);\n    }\n    if (!h || h <= 0) {\n        return {\n            bandwidth: 0,\n            kernel: kernel,\n            evaluate: x => {\n                if (Array.isArray(x)) {\n                    const out = [];\n                    for (let i = 0; i < x.length; i++) out.push(0);\n                    return out;\n                }\n                return 0;\n            },\n            evaluateGrid: N => {\n                const out = [];\n                if (N <= 0) return out;\n                let min = 1 / 0, max = -1 / 0;\n                for (let j = 0; j < n; j++) {\n                    const v = data[j];\n                    v < min && (min = v), v > max && (max = v);\n                }\n                if (min === 1 / 0 || max === -1 / 0) {\n                    for (let i = 0; i < N; i++) out.push({\n                        x: 0,\n                        y: 0\n                    });\n                    return out;\n                }\n                for (let i = 0; i < N; i++) out.push({\n                    x: min,\n                    y: 0\n                });\n                return out;\n            }\n        };\n    }\n    const invNh = 1 / (n * h);\n    function evalPoint(x) {\n        let sum = 0;\n        for (let j = 0; j < n; j++) sum += kernel((x - data[j]) / h);\n        return sum * invNh;\n    }\n    return {\n        bandwidth: h,\n        kernel: kernel,\n        evaluate: function(x) {\n            if (Array.isArray(x)) {\n                const out = [];\n                for (let i = 0; i < x.length; i++) out.push(evalPoint(x[i]));\n                return out;\n            }\n            return evalPoint(x);\n        },\n        evaluateGrid(N) {\n            const out = [];\n            if (N <= 0) return out;\n            let min = 1 / 0, max = -1 / 0;\n            for (let i = 0; i < n; i++) {\n                const v = data[i];\n                v < min && (min = v), v > max && (max = v);\n            }\n            if (min === 1 / 0 || max === -1 / 0) return out;\n            if (min === max) {\n                for (let i = 0; i < N; i++) out.push({\n                    x: min,\n                    y: evalPoint(min)\n                });\n                return out;\n            }\n            const step = (max - min) / (N - 1);\n            for (let i = 0; i < N; i++) {\n                const x = i === N - 1 ? max : min + step * i;\n                out.push({\n                    x: x,\n                    y: evalPoint(x)\n                });\n            }\n            return out;\n        }\n    };\n}\n\nexport default kde;\n//# sourceMappingURL=kde.js.map\n","import type { ICartesianSeries, IChart, IHistogramChartSpec, IVChart } from '@visactor/vchart'\nimport type { KDEOptions } from '@visactor/vutils'\nimport { isNullish, uniqueBy } from 'remeda'\nimport { kde, array } from '@visactor/vutils'\nimport { BinEndMeasureId, BinStartMeasureId } from 'src/dataReshape'\nimport type { Datum, Dimension, VChartSpecPipe, Encoding, RegressionLineConfig, KdeRegressionLine } from 'src/types'\nimport { defaultRegressionLineColor, defaultRegressionLineLabelX, defaultRegressionLineLabelY } from './common'\n\nexport const kdeRegressionLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHistogramChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding = {} as Encoding, dimensions, regressionLine } = advancedVSeed\n  const { dataset } = vseed\n  const lineTheme = advancedVSeed.config[chartType as 'histogram']?.regressionLine as RegressionLineConfig\n  const binValueType = advancedVSeed.config[chartType as 'histogram']?.binValueType\n\n  if (!regressionLine || !regressionLine.kdeRegressionLine) {\n    return result\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const lineList = array(regressionLine.kdeRegressionLine).filter((kdeLine) => kdeLine.enable !== false)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme.kdeRegressionLine ?? {}) as KdeRegressionLine\n    const { color, lineWidth, lineDash, text, textColor, textFontSize, textFontWeight } = line as KdeRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `kdeRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const series = chart.getAllSeries().filter((s: any) => s.type === 'bar')\n\n          // 直方图使用的是bar系列\n          if (series && series.length) {\n            const s = series[0] as ICartesianSeries\n\n            const fieldX = s.fieldX?.[0]\n            const scaleY = s.getYAxisHelper().getScale?.(0)\n            const viewData = s.getViewData()?.latestData\n\n            if (!dataset || !dataset.length || !viewData || !viewData.length || !scaleY) {\n              return null\n            }\n            const simpleData = dataset\n              .filter((entry: Datum) => {\n                return rowColumnFields.length\n                  ? rowColumnFields.every((dim: Dimension) => {\n                      return entry[dim.id] === viewData[0][dim.id]\n                    })\n                  : true\n              })\n              .map((d: Datum) => +(d as any)[encoding.value?.[0] as string])\n            const res = kde(simpleData, {\n              bandwidth: Math.abs(viewData[0][BinEndMeasureId] - viewData[0][BinStartMeasureId]),\n            } as KDEOptions)\n            const N = Math.max(3, Math.floor(simpleData.length / 4))\n            const lineData = res.evaluateGrid(N)\n\n            // 根据 binValueType 决定如何转换 KDE 密度值\n            // - 频次模式 (count): 频次 = 密度 × 样本数 × 带宽\n            // - 百分比模式 (percentage): 百分比 = 密度 × 带宽\n            const scaleR = (k: number) => {\n              if (binValueType === 'percentage') {\n                // 百分比模式：y轴是0-1的百分比，KDE密度值乘以带宽即可\n                return scaleY.scale(k * res.bandwidth)\n              } else {\n                // 频次模式：y轴是实际计数，需要乘以样本数量\n                return scaleY.scale(k * simpleData.length * res.bandwidth)\n              }\n            }\n\n            const linePoints = lineData.map((ld: Datum) => {\n              const d = { [fieldX]: ld.x }\n              return {\n                x: s.dataToPositionX(d)!,\n                y: scaleR(ld.y as number),\n              }\n            })\n\n            return {\n              linePoints,\n              color: color ?? s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `kdeRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: defaultRegressionLineLabelX,\n          y: defaultRegressionLineLabelY,\n        },\n      })\n    }\n  })\n\n  return result\n}\n","export function ecdf(data) {\n    const n = data.length, sorted = data.slice().sort(((a, b) => a - b));\n    function evaluateSingle(x) {\n        if (0 === n) return 0;\n        let lo = 0, hi = n;\n        for (;lo < hi; ) {\n            const mid = lo + hi >>> 1;\n            sorted[mid] <= x ? lo = mid + 1 : hi = mid;\n        }\n        return lo / n;\n    }\n    return {\n        evaluate: function(x) {\n            if (Array.isArray(x)) {\n                const out = [];\n                for (let i = 0; i < x.length; i++) out.push(evaluateSingle(x[i]));\n                return out;\n            }\n            return evaluateSingle(x);\n        },\n        evaluateGrid: function(N) {\n            const out = [];\n            if (N <= 0) return out;\n            if (0 === n) return out;\n            const min = sorted[0], max = sorted[n - 1];\n            if (min === max) {\n                for (let i = 0; i < N; i++) out.push({\n                    x: min,\n                    y: 1\n                });\n                return out;\n            }\n            const step = (max - min) / (N - 1);\n            for (let i = 0; i < N; i++) {\n                const x = i === N - 1 ? max : min + step * i;\n                out.push({\n                    x: x,\n                    y: evaluateSingle(x)\n                });\n            }\n            return out;\n        },\n        n: n\n    };\n}\n\nexport default ecdf;\n//# sourceMappingURL=ecdf.js.map","import type { ICartesianSeries, IChart, IHistogramChartSpec, IVChart } from '@visactor/vchart'\nimport { isNullish, uniqueBy } from 'remeda'\nimport { ecdf, array, isArray } from '@visactor/vutils'\nimport type { Datum, Dimension, VChartSpecPipe, Encoding, RegressionLineConfig, EcdfRegressionLine } from 'src/types'\nimport { defaultRegressionLineColor, defaultRegressionLineLabelX, defaultRegressionLineLabelY } from './common'\n\nexport const ecdfRegressionLine: VChartSpecPipe = (spec, context) => {\n  const result = { ...spec } as IHistogramChartSpec\n  const { advancedVSeed, vseed } = context\n  const { chartType, encoding = {} as Encoding, dimensions, regressionLine } = advancedVSeed\n  const { dataset } = vseed\n  const lineTheme = advancedVSeed.config[chartType as 'histogram']?.regressionLine as RegressionLineConfig\n\n  if (!regressionLine || !regressionLine.ecdfRegressionLine) {\n    return result\n  }\n\n  const rowColumnFields = uniqueBy(\n    dimensions.filter((dim: Dimension) => dim.encoding === 'row' || dim.encoding === 'column'),\n    (item: Dimension) => item.id,\n  )\n\n  const lineList = array(regressionLine.ecdfRegressionLine).filter((ecdfLine) => ecdfLine.enable !== false)\n\n  if (!result.extensionMark) {\n    result.extensionMark = []\n  }\n\n  lineList.forEach((line, lineIndex) => {\n    if (line.enable === false) {\n      return\n    }\n    const theme = (lineTheme?.ecdfRegressionLine ?? {}) as EcdfRegressionLine\n    const { color, lineWidth, lineDash, text, textColor, textFontSize, textFontWeight } = line as EcdfRegressionLine\n\n    const childrenMarks: any[] = []\n\n    ;(result.extensionMark as any[]).push({\n      type: 'group',\n      interactive: false,\n      zIndex: 500,\n      name: `ecdfRegressionLine-${lineIndex}`,\n      dataId: (spec.data as any)?.id,\n      style: {\n        data: (datum: any, ctx: any) => {\n          const vchart = ctx.vchart as IVChart\n          const chart = vchart.getChart() as IChart\n          const series = chart.getAllSeries().filter((s: any) => s.type === 'bar')\n\n          // 直方图使用的是bar系列\n          if (series && series.length) {\n            const s = series[0] as ICartesianSeries\n\n            const fieldX = s.fieldX?.[0]\n            const scaleY = s.getYAxisHelper().getScale?.(0)\n            const viewData = s.getViewData()?.latestData\n\n            if (!dataset || !dataset.length || !viewData || !viewData.length || !scaleY) {\n              return null\n            }\n            const simpleData = dataset\n              .filter((entry: Datum) => {\n                return rowColumnFields.length\n                  ? rowColumnFields.every((dim: Dimension) => {\n                      return entry[dim.id] === viewData[0][dim.id]\n                    })\n                  : true\n              })\n              .map((d: Datum) => +(d as any)[encoding.value?.[0] as string])\n            const res = ecdf(simpleData)\n            const N = Math.max(3, Math.floor(simpleData.length / 4))\n            const lineData = res.evaluateGrid(N)\n            const yRange = scaleY.range()\n            const y0 = yRange[0]\n            const y1 = yRange[yRange.length - 1]\n            const scaleR = (e: number) => {\n              return y0 + (y1 - y0) * e\n            }\n\n            const linePoints = lineData.map((ld: Datum) => {\n              const d = { [fieldX]: ld.x }\n              return {\n                x: s.dataToPositionX(d)!,\n                y: scaleR(ld.y as number),\n              }\n            })\n\n            return {\n              linePoints,\n              color: color ?? s.getOption().globalScale.getScale('color')?.scale(s.getSeriesKeys()[0]),\n            }\n          }\n          return null\n        },\n      },\n      children: childrenMarks,\n    })\n\n    childrenMarks.push({\n      type: 'line',\n      interactive: false,\n      zIndex: 500,\n      dataId: (spec.data as any)?.id,\n      style: {\n        lineWidth: lineWidth ?? theme.lineWidth,\n        lineDash: lineDash ?? theme.lineDash,\n        stroke: color ?? defaultRegressionLineColor,\n        points: (datum: any, ctx: any, opt: any) => {\n          const parentNode = opt.mark?._product?.parent\n\n          if (parentNode?.attribute?.data) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n            return parentNode.attribute.data.linePoints\n          }\n\n          return []\n        },\n      },\n    })\n\n    if (!isNullish(text)) {\n      childrenMarks.push({\n        type: 'text',\n        interactive: false,\n        zIndex: 500,\n        dataId: (spec.data as any)?.id,\n        dataKey: () => {\n          return `ecdfRegressionLine-label-${lineIndex}`\n        },\n        style: {\n          textAlign: 'end',\n          fill: textColor ?? theme.textColor,\n          fontSize: textFontSize ?? theme.textFontSize,\n          fontWeight: textFontWeight ?? theme.textFontWeight,\n          text: text,\n          x: defaultRegressionLineLabelX,\n          y: defaultRegressionLineLabelY,\n        },\n      })\n    }\n  })\n\n  // add percent axis of ecdf\n  const leftAxis = result.axes?.find((v) => v.orient === 'left')\n  if (leftAxis && lineList.length) {\n    result.axes?.push({\n      visible: true,\n      orient: 'right',\n      type: 'linear',\n      base: 10,\n      min: 0,\n      max: 1,\n      domainLine: {\n        ...leftAxis.domainLine,\n      },\n      grid: {\n        visible: false,\n      },\n      tick: {\n        ...leftAxis.tick,\n      },\n      title: {\n        ...leftAxis.title,\n        visible: false,\n      },\n      label: {\n        ...leftAxis.label,\n        visible: true,\n        formatMethod: (v) => {\n          const text = isArray(v) ? v[0] : v\n          return `${(+text * 100).toFixed(1)}%`\n        },\n      },\n    })\n  }\n\n  return result\n}\n","import type { PivotChartSpecPipeline, VChartSpecPipeline } from 'src/types'\nimport {\n  label,\n  xLinear,\n  backgroundColor,\n  discreteLegend,\n  color,\n  pivotAdapter,\n  initPivot,\n  datasetPivot,\n  pivotIndicators,\n  pivotDiscreteLegend,\n  pivotGridStyle,\n  pivotColumnDimensions,\n  pivotRowDimensions,\n  barStyle,\n  annotationPointOfHistogram,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  datasetHistogram,\n  progressive,\n  colorAdapter,\n  linearColor,\n  colorLegend,\n  colorBarStyleFill,\n  pivotColorLegend,\n  initHistogram,\n  yLinear,\n  histogramVerticalCrosshairRect,\n  tooltipHistogram,\n  kdeRegressionLine,\n  ecdfRegressionLine,\n  pivotTitle,\n  pivotAxisStyle,\n  dimensionLinkage,\n} from '../pipes'\n\nconst histogram: VChartSpecPipeline = [\n  initHistogram,\n  colorAdapter(color, linearColor),\n  backgroundColor,\n  datasetHistogram,\n  progressive,\n  xLinear,\n  yLinear,\n  label,\n  tooltipHistogram,\n  colorAdapter(discreteLegend, colorLegend),\n  histogramVerticalCrosshairRect,\n  colorBarStyleFill(barStyle),\n  annotationPointOfHistogram,\n  annotationVerticalLine,\n  annotationHorizontalLine,\n  annotationAreaBand,\n  kdeRegressionLine,\n  ecdfRegressionLine,\n]\n\nconst pivotHistogram: PivotChartSpecPipeline = [\n  initPivot,\n  pivotGridStyle,\n  datasetPivot,\n  pivotIndicators([\n    initHistogram,\n    colorAdapter(color, linearColor),\n    backgroundColor,\n    datasetHistogram,\n    progressive,\n    xLinear,\n    pivotAxisStyle(yLinear),\n    label,\n    tooltipHistogram,\n    colorBarStyleFill(barStyle),\n    histogramVerticalCrosshairRect,\n    annotationPointOfHistogram,\n    annotationVerticalLine,\n    annotationHorizontalLine,\n    annotationAreaBand,\n    kdeRegressionLine,\n    ecdfRegressionLine,\n  ]),\n  pivotRowDimensions,\n  pivotColumnDimensions,\n  pivotTitle,\n  colorAdapter(pivotDiscreteLegend, pivotColorLegend),\n  dimensionLinkage,\n]\n\nexport const histogramSpecPipeline = [pivotAdapter(histogram, pivotHistogram)]\n","import { histogramSpecPipeline, histogramAdvancedPipeline } from '../../../pipeline'\nimport { Builder } from '../../builder'\n\nexport const registerHistogram = () => {\n  Builder._advancedPipelineMap['histogram'] = histogramAdvancedPipeline\n  Builder._specPipelineMap['histogram'] = histogramSpecPipeline\n}\n","export const getDarkCrosshairLine = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#404349',\n  lineColor: '#55595F',\n})\n\nexport const getDarkCrosshairRect = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#404349',\n  rectColor: '#4B4F54',\n})\n\nexport const getLightCrosshairLine = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#21252C',\n  lineColor: '#21252C',\n})\nexport const getLightCrosshairRect = () => ({\n  visible: true,\n  labelVisible: true,\n  labelColor: '#ffffff',\n  labelBackgroundColor: '#364159',\n  rectColor: '#D9DDE4',\n})\n","export const getLightColorScheme = () => [\n  '#8D72F6',\n  '#5766EC',\n  '#66A3FE',\n  '#51D5E6',\n  '#4EC0B3',\n  '#F9DF90',\n  '#F9AD71',\n  '#ED8888',\n  '#E9A0C3',\n  '#D77DD3',\n]\nexport const getDarkColorScheme = () => [\n  '#2E62F1',\n  '#4DC36A',\n  '#FF8406',\n  '#FFCC00',\n  '#4F44CF',\n  '#5AC8FA',\n  '#003A8C',\n  '#B08AE2',\n  '#FF6341',\n  '#98DD62',\n]\nexport const getLightLinearColorScheme = () => ['#C2CEFF', '#5766EC']\nexport const getDarkLinearColorScheme = () => ['#A0CEFF', '#2E62F1']\nexport const getLightColor = () => ({\n  linearColorScheme: getLightLinearColorScheme(),\n  colorScheme: getLightColorScheme(),\n  positiveColor: '#7E5DFF',\n  negativeColor: '#EB3373',\n})\nexport const getDarkColor = () => ({\n  linearColorScheme: getDarkLinearColorScheme(),\n  colorScheme: getDarkColorScheme(),\n  positiveColor: '#7E5DFF',\n  negativeColor: '#EB3373',\n})\n","export const getDefaultLabel = () => ({\n  enable: true,\n  wrap: true,\n  showValue: true,\n  showValuePercent: false,\n  labelColorSmartInvert: false,\n  labelOverlap: true,\n})\n\nexport const getDarkLabel = () => ({\n  ...getDefaultLabel(),\n  labelStroke: '#21252C',\n})\n\nexport const getLightLabel = () => ({\n  ...getDefaultLabel(),\n  labelStroke: '#fff',\n})\n","import type { Legend } from 'src/types'\n\nexport const getDefaultLegend = (): Legend => ({\n  enable: true,\n  border: true,\n  maxSize: 1,\n  shapeType: 'rectRound',\n  position: 'rt',\n  labelFontSize: 12,\n  labelFontWeight: 400,\n})\n\nexport const getDarkLegend = (): Legend => ({\n  ...getDefaultLegend(),\n  labelColor: '#BBBDC3',\n  pagerIconColor: '#89909D',\n  pagerIconDisableColor: '#2A2D33',\n})\n\nexport const getLightLegend = (): Legend => ({\n  ...getDefaultLegend(),\n  labelColor: '#606773',\n  pagerIconColor: '#89909D',\n  pagerIconDisableColor: '#F1F2F5',\n})\n","import type { PivotChartGridConfig } from 'src/types'\n\nexport const getDefaultTableConfig = () => ({\n  bodyFontSize: 12,\n  bodyBackgroundColor: 'transparent',\n  headerFontSize: 12,\n})\n\nexport const getLightTableConfig = () => ({\n  ...getDefaultTableConfig(),\n  borderColor: '#e3e5eb',\n\n  bodyFontColor: '#141414',\n\n  headerFontColor: '#21252c',\n  headerBackgroundColor: '#f6f7f9',\n\n  hoverBodyBackgroundColor: '#bedaff',\n  hoverBodyInlineBackgroundColor: '#bedaff33',\n  hoverHeaderBackgroundColor: '#D9DDE4',\n  hoverHeaderInlineBackgroundColor: '#D9DDE455',\n\n  selectedBorderColor: '#4080ff',\n  selectedBackgroundColor: '#bedaff33',\n\n  backgroundColor: 'transparent',\n})\n\nexport const getDarkTableConfig = () => ({\n  ...getDefaultTableConfig(),\n  borderColor: '#4b4e53',\n\n  bodyFontColor: '#fdfdfd',\n  headerFontColor: '#fdfdfd',\n  headerBackgroundColor: '#36393e',\n\n  hoverBodyBackgroundColor: '#4284ff66',\n  hoverBodyInlineBackgroundColor: '#4284ff10',\n  hoverHeaderBackgroundColor: '#6f7984cc',\n  hoverHeaderInlineBackgroundColor: '#4b4f54',\n\n  selectedBorderColor: '#3073f2',\n  selectedBackgroundColor: '#4284ff33',\n})\n\nconst pickPivotChartGridConfig = (tableConfig: any) => {\n  return {\n    outlineBorderLineWidth: 0,\n    frameCornerRadius: 0,\n    borderColor: tableConfig.borderColor,\n    bodyFontColor: tableConfig.bodyFontColor,\n    headerFontColor: tableConfig.headerFontColor,\n\n    headerBackgroundColor: 'transparent',\n    hoverHeaderBackgroundColor: tableConfig.hoverHeaderBackgroundColor,\n    hoverHeaderInlineBackgroundColor: tableConfig.hoverHeaderInlineBackgroundColor,\n\n    titleFontColor: tableConfig.headerFontColor,\n    titleFontSize: tableConfig.headerFontSize,\n    titleFontWeight: 'bold',\n  }\n}\n\nexport const getLightPivotChartGridConfig = () => {\n  const res = pickPivotChartGridConfig(getLightTableConfig()) as PivotChartGridConfig\n\n  res.hoverHeaderInlineBackgroundColor = '#D9DDE446'\n\n  res.chartGridColor = '#F0F1F6'\n  res.axisLabelColor = '#BCC1CB'\n\n  return res\n}\n\nexport const getDarkPivotChartGridConfig = () => {\n  const res = pickPivotChartGridConfig(getDarkTableConfig()) as PivotChartGridConfig\n\n  res.hoverHeaderInlineBackgroundColor = '#4b4f5446'\n\n  return res\n}\n","import type { TooltipConfig } from 'src/types'\n\nconst getDefaultTooltip = (): TooltipConfig => ({\n  enable: true,\n  borderRadius: 12,\n  borderWidth: 1,\n  padding: 7,\n  lineHeight: 12,\n  fontSize: 12,\n  lineSpace: 6,\n})\n\nexport const getLightTooltip = (): TooltipConfig => ({\n  ...getDefaultTooltip(),\n  borderColor: '#e3e5e8',\n  backgroundColor: '#fff',\n  keyColor: '#606773',\n  valueColor: '#21252c',\n  titleColor: '#21252c',\n})\n\nexport const getDarkTooltip = (): TooltipConfig => ({\n  ...getDefaultTooltip(),\n  borderColor: '#3c3f44',\n  backgroundColor: '#2b2d30',\n  keyColor: '#89909D',\n  valueColor: '#E2E3E6',\n  titleColor: '#E2E3E6',\n})\n","import type { YBandAxis, YLinearAxis } from 'src/types'\n\nexport const getLightLinearAxis = (): YLinearAxis => ({\n  nice: true,\n  zero: true,\n  inverse: false,\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#8F959E',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#606773',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: true,\n    gridColor: '#E3E5EB',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#E3E5EB',\n  },\n  line: {\n    visible: false,\n    lineColor: '#E3E5EB',\n    lineWidth: 1,\n  },\n})\n\nexport const getLightBandAxis = (): YBandAxis => ({\n  labelAutoHide: true,\n  labelAutoHideGap: 4,\n  labelAutoLimit: true,\n  labelAutoLimitLength: 80,\n  labelAutoRotate: false,\n  labelAutoRotateAngleRange: [0, -45, -90],\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#8F959E',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#606773',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: false,\n    gridColor: '#E3E5EB',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#E3E5EB',\n  },\n  line: {\n    visible: true,\n    lineColor: '#E3E5EB',\n    lineWidth: 1,\n  },\n})\n\nexport const getDarkLinearAxis = (): YLinearAxis => ({\n  nice: true,\n  zero: true,\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#888C93',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#BBBDC3',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: true,\n    gridColor: '#303339',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#303339',\n  },\n  line: {\n    visible: false,\n    lineColor: '#303339',\n    lineWidth: 1,\n  },\n})\n\nexport const getDarkBandAxis = (): YBandAxis => ({\n  labelAutoHide: true,\n  labelAutoHideGap: 4,\n  labelAutoLimit: true,\n  labelAutoLimitLength: 80,\n  labelAutoRotate: false,\n  labelAutoRotateAngleRange: [0, -45, -90],\n  label: {\n    visible: true,\n    labelAngle: 0,\n    labelColor: '#888C93',\n    labelFontSize: 12,\n    labelFontWeight: 400,\n  },\n  title: {\n    visible: false,\n    titleText: '',\n    titleColor: '#BBBDC3',\n    titleFontSize: 12,\n    titleFontWeight: 400,\n  },\n  grid: {\n    visible: false,\n    gridColor: '#303339',\n    gridWidth: 0.5,\n    gridLineDash: [4, 2],\n  },\n  tick: {\n    visible: false,\n    tickInside: false,\n    tickSize: 4,\n    tickColor: '#303339',\n  },\n  line: {\n    visible: true,\n    lineColor: '#303339',\n    lineWidth: 1,\n  },\n})\n","import type {\n  AnnotationAreaConfig,\n  AnnotationHorizontalLineConfig,\n  AnnotationPointConfig,\n} from 'src/types/properties/config/annotation/annotation'\n\nexport const getDefaultAnnotationPoint = (): AnnotationPointConfig => ({\n  textBackgroundVisible: true,\n  textFontSize: 12,\n  textFontWeight: 400,\n\n  textBackgroundBorderRadius: 0,\n  textBackgroundBorderWidth: 1,\n  textBackgroundPadding: 2,\n})\n\nexport const getLightAnnotationPoint = (): AnnotationPointConfig => ({\n  ...getDefaultAnnotationPoint(),\n  textColor: '#ffffff',\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n})\n\nexport const getDefaultAnnotationLine = (): AnnotationHorizontalLineConfig => ({\n  lineVisible: true,\n  lineWidth: 1,\n  lineStyle: 'solid' as const,\n\n  textFontSize: 12,\n  textFontWeight: 400,\n  startSymbolVisible: true,\n  endSymbolVisible: false,\n\n  textBackgroundVisible: true,\n  textBackgroundBorderWidth: 1,\n  textBackgroundBorderRadius: 0,\n  textBackgroundPadding: 2,\n})\n\nexport const getLightAnnotationHorizontalLine = (): AnnotationHorizontalLineConfig => ({\n  ...getDefaultAnnotationLine(),\n  lineColor: '#BCC1CB',\n\n  textColor: '#ffffff',\n\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n})\n\nexport const getLightAnnotationVerticalLine = () => getLightAnnotationHorizontalLine()\n\nexport const getDefaultAnnotationArea = (): AnnotationAreaConfig => ({\n  textFontSize: 12,\n  textFontWeight: 400,\n  textBackgroundVisible: true,\n  textBackgroundBorderWidth: 1,\n  textBackgroundBorderRadius: 0,\n  textBackgroundPadding: 2,\n  areaBorderWidth: 0,\n  areaBorderRadius: 0,\n  areaLineDash: [2, 2],\n\n  outerPadding: 4,\n})\n\nexport const getLightAnnotationArea = (): AnnotationAreaConfig => ({\n  ...getDefaultAnnotationArea(),\n  textColor: '#ffffff',\n\n  textBackgroundColor: '#BCC1CB',\n  textBackgroundBorderColor: '#BCC1CB',\n\n  areaColor: '#BCC1CB',\n  areaColorOpacity: 0.12,\n  areaBorderColor: '#BCC1CB',\n})\n\nexport const getLightAnnotation = () => ({\n  annotationPoint: getLightAnnotationPoint(),\n  annotationHorizontalLine: getLightAnnotationHorizontalLine(),\n  annotationVerticalLine: getLightAnnotationVerticalLine(),\n  annotationArea: getLightAnnotationArea(),\n})\n\n// --- dark ---\nexport const getDarkAnnotationPoint = (): AnnotationPointConfig => ({\n  ...getDefaultAnnotationPoint(),\n  textColor: '#E2E3E6',\n\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n})\n\nexport const getDarkAnnotationHorizontalLine = (): AnnotationHorizontalLineConfig => ({\n  ...getDefaultAnnotationLine(),\n  lineColor: '#55595F',\n\n  textColor: '#E2E3E6',\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n})\n\nexport const getDarkAnnotationVerticalLine = () => getDarkAnnotationHorizontalLine()\n\nexport const getDarkAnnotationArea = (): AnnotationAreaConfig => ({\n  ...getDefaultAnnotationArea(),\n  textColor: '#E2E3E6',\n\n  textBackgroundColor: '#55595F',\n  textBackgroundBorderColor: '#55595F',\n\n  areaColor: '#E2E3E6',\n  areaColorOpacity: 0.15,\n  areaBorderColor: '#E2E3E6',\n})\n\nexport const getDarkAnnotation = () => ({\n  annotationPoint: getDarkAnnotationPoint(),\n  annotationHorizontalLine: getDarkAnnotationHorizontalLine(),\n  annotationVerticalLine: getDarkAnnotationVerticalLine(),\n  annotationArea: getDarkAnnotationArea(),\n})\n\nexport default getLightAnnotation\n","import type { FunnelTransformConfig } from 'src/types/properties/config/funnelTransform'\n\nexport const getLightFunnelTransformTheme = (): FunnelTransformConfig => {\n  return {\n    backgroundColor: '#F6F7F9',\n    textColor: '#737880',\n  }\n}\n\nexport const getDarkFunnelTransformTheme = (): FunnelTransformConfig => {\n  return {\n    backgroundColor: '#2A2D33',\n    textColor: '#888C93',\n  }\n}\n","import type { HeatmapCell } from 'src/types/properties/config/heatmap/heatmap'\n\nexport const getLightHeatmapCellTheme = (): HeatmapCell => {\n  return {\n    stroke: '#fff',\n  }\n}\n\nexport const getDarkHeatmapCellTheme = (): HeatmapCell => {\n  return {\n    stroke: '#404349',\n  }\n}\n","import type { RegressionLineConfig } from 'src/types/properties/regressionLine'\n\nexport const getDefaultRegressionLine = () => {\n  return {\n    lineWidth: 2,\n    textFontSize: 12,\n    textFontWeight: 400,\n  }\n}\n\nexport const getLightRegressionLine = (): Partial<RegressionLineConfig> => {\n  return {\n    kdeRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n    },\n    ecdfRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n    },\n    linearRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    lowessRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    polynomialRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n    logisticRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#364159',\n      confidenceIntervalOpacity: 0.2,\n    },\n  }\n}\n\nexport const getDarkRegressionLine = (): Partial<RegressionLineConfig> => {\n  return {\n    kdeRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n    },\n    ecdfRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n    },\n    linearRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    lowessRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    polynomialRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n    logisticRegressionLine: {\n      ...getDefaultRegressionLine(),\n      textColor: '#FFFFFF',\n      confidenceIntervalOpacity: 0.2,\n    },\n  }\n}\n","import type { BoxPlotStyle, OutlierStyle } from 'src/types'\n\nexport const getLightBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    boxBorderColor: '#e3e5eb',\n  }\n}\n\nexport const getDarkBoxPlotStyle = (): BoxPlotStyle => {\n  return {\n    boxBorderColor: '#4b4e53',\n  }\n}\n\nexport const getLightOutlierStyle = (): OutlierStyle => {\n  return {\n    pointColor: '#8F959E',\n  }\n}\n\nexport const getDarkOutlierStyle = (): OutlierStyle => {\n  return {\n    pointColor: '#36393e',\n  }\n}\n","import type { CustomThemeConfig, YBandAxis } from 'src/types'\nimport {\n  getLightColor,\n  getLightCrosshairLine,\n  getLightCrosshairRect,\n  getLightLabel,\n  getLightLegend,\n  getLightPivotChartGridConfig,\n  getLightTableConfig,\n} from '../common'\nimport { getLightTooltip } from '../common/tooltip'\nimport { getLightBandAxis, getLightLinearAxis } from '../common/axes'\nimport { getLightAnnotation } from '../common/annotaion'\nimport { getLightFunnelTransformTheme } from '../common/funnelTransform'\nimport { getLightHeatmapCellTheme } from '../common/heatmapCell'\nimport { getLightRegressionLine } from '../common/regressionLine'\nimport { getLightBoxPlotStyle, getLightOutlierStyle } from '../common/boxPlot'\n\nexport const lightTheme = (): CustomThemeConfig => {\n  const linearAxis = getLightLinearAxis()\n  const bandAxis: YBandAxis = getLightBandAxis()\n  const barBandAxis: YBandAxis = {\n    ...bandAxis,\n    labelAutoHide: false,\n    labelAutoHideGap: 1,\n    labelAutoLimit: false,\n    labelAutoLimitLength: undefined,\n    labelAutoRotate: false,\n    labelAutoRotateAngleRange: [0, -45, -90],\n  }\n\n  const crosshairLine = getLightCrosshairLine()\n  const crosshairRect = getLightCrosshairRect()\n\n  const baseConfig = {\n    backgroundColor: 'transparent',\n    color: getLightColor(),\n    label: getLightLabel(),\n    legend: getLightLegend(),\n    tooltip: getLightTooltip(),\n  }\n  const tableConfig = getLightTableConfig()\n\n  return {\n    config: {\n      // table\n      table: tableConfig,\n      pivotTable: tableConfig,\n      // cartesian\n      line: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine,\n\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      column: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        regressionLine: getLightRegressionLine(),\n      },\n      columnParallel: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      columnPercent: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: {\n          ...linearAxis,\n        },\n        crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      bar: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      barParallel: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      barPercent: {\n        ...baseConfig,\n        xAxis: {\n          ...linearAxis,\n        },\n        yAxis: barBandAxis,\n        crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      area: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      areaPercent: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: {\n          ...linearAxis,\n        },\n        crosshairLine,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      scatter: {\n        ...baseConfig,\n        crosshairLine,\n        sizeRange: [8, 24],\n        xAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        yAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        label: {\n          ...baseConfig.label,\n          showValue: false,\n          showValuePercent: false,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        regressionLine: getLightRegressionLine(),\n      },\n      dualAxis: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        primaryYAxis: linearAxis,\n        secondaryYAxis: { ...linearAxis, grid: { visible: false } },\n        dualChartType: {\n          primary: 'column',\n          secondary: 'line',\n        },\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n      },\n      // polar\n      pie: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      donut: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      radar: {\n        ...baseConfig,\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      rose: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      roseParallel: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      // other\n      funnel: {\n        ...baseConfig,\n\n        transform: getLightFunnelTransformTheme(),\n\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      heatmap: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          labelColorSmartInvert: true,\n        },\n        cell: getLightHeatmapCellTheme(),\n        pivotGrid: getLightPivotChartGridConfig(),\n      },\n      histogram: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n        regressionLine: getLightRegressionLine(),\n      },\n      boxPlot: {\n        ...baseConfig,\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect,\n        pivotGrid: getLightPivotChartGridConfig(),\n        annotation: getLightAnnotation(),\n\n        boxPlotStyle: getLightBoxPlotStyle(),\n        outlierStyle: getLightOutlierStyle(),\n      },\n    },\n  }\n}\n","import type { CustomThemeConfig, YBandAxis } from 'src/types'\nimport {\n  getDarkColor,\n  getDarkCrosshairLine,\n  getDarkCrosshairRect,\n  getDarkTableConfig,\n  getDarkPivotChartGridConfig,\n  getDarkLabel,\n  getDarkLegend,\n} from '../common'\nimport { getDarkTooltip } from '../common/tooltip'\nimport { getDarkBandAxis, getDarkLinearAxis } from '../common/axes'\nimport { getDarkAnnotation } from '../common/annotaion'\nimport { getDarkFunnelTransformTheme } from '../common/funnelTransform'\nimport { getDarkHeatmapCellTheme } from '../common/heatmapCell'\nimport { getDarkRegressionLine } from '../common/regressionLine'\nimport { getDarkBoxPlotStyle, getDarkOutlierStyle } from '../common/boxPlot'\n\nexport const darkTheme = (): CustomThemeConfig => {\n  const linearAxis = getDarkLinearAxis()\n  const bandAxis = getDarkBandAxis()\n  const barBandAxis: YBandAxis = {\n    ...bandAxis,\n    labelAutoHide: false,\n    labelAutoHideGap: 1,\n    labelAutoLimit: false,\n    labelAutoLimitLength: undefined,\n    labelAutoRotate: false,\n    labelAutoRotateAngleRange: [0, -45, -90],\n  }\n  const crosshairLine = getDarkCrosshairLine()\n  const crosshairRect = getDarkCrosshairRect()\n\n  const baseConfig = {\n    backgroundColor: 'transparent',\n    color: getDarkColor(),\n    label: getDarkLabel(),\n    legend: getDarkLegend(),\n    tooltip: getDarkTooltip(),\n  }\n\n  const tableConfig = getDarkTableConfig()\n\n  return {\n    config: {\n      table: tableConfig,\n      pivotTable: tableConfig,\n\n      // cartesian\n      line: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      column: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n\n        regressionLine: getDarkRegressionLine(),\n      },\n      columnParallel: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      columnPercent: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [4, 4, 0, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      bar: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      barParallel: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      barPercent: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: barBandAxis,\n        crosshairRect: crosshairRect,\n        stackCornerRadius: [0, 4, 4, 0],\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      area: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      areaPercent: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairLine: crosshairLine,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      scatter: {\n        ...baseConfig,\n        crosshairLine,\n        sizeRange: [8, 24],\n        xAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        yAxis: {\n          ...linearAxis,\n          line: {\n            ...linearAxis.line,\n            visible: true,\n          },\n        },\n        label: {\n          ...baseConfig.label,\n          showValue: false,\n          showValuePercent: false,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n        regressionLine: getDarkRegressionLine(),\n      },\n      dualAxis: {\n        ...baseConfig,\n        xAxis: bandAxis,\n        primaryYAxis: linearAxis,\n        secondaryYAxis: { ...linearAxis, grid: { visible: false } },\n        dualChartType: {\n          primary: 'column',\n          secondary: 'line',\n        },\n        crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n      },\n      // polar\n      pie: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      donut: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          labelLayout: 'arc',\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      radar: {\n        ...baseConfig,\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      rose: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      roseParallel: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          showValuePercent: true,\n          showDimension: true,\n        },\n\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      // other\n      funnel: {\n        ...baseConfig,\n        transform: getDarkFunnelTransformTheme(),\n\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      heatmap: {\n        ...baseConfig,\n        label: {\n          ...baseConfig.label,\n          labelColorSmartInvert: true,\n        },\n\n        cell: getDarkHeatmapCellTheme(),\n        pivotGrid: getDarkPivotChartGridConfig(),\n      },\n      histogram: {\n        ...baseConfig,\n\n        xAxis: linearAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n        regressionLine: getDarkRegressionLine(),\n      },\n      boxPlot: {\n        ...baseConfig,\n\n        xAxis: bandAxis,\n        yAxis: linearAxis,\n        crosshairRect: crosshairRect,\n        pivotGrid: getDarkPivotChartGridConfig(),\n        annotation: getDarkAnnotation(),\n\n        boxPlotStyle: getDarkBoxPlotStyle(),\n        outlierStyle: getDarkOutlierStyle(),\n      },\n    },\n  }\n}\n","import type { CustomThemeConfig } from 'src/types'\nimport { Builder } from '../../builder'\nimport { darkTheme, lightTheme } from '../../../theme'\n\nexport const registerCustomTheme = (\n  key: string,\n  themeConfig:\n    | CustomThemeConfig\n    | ((props: { lightTheme: CustomThemeConfig; darkTheme: CustomThemeConfig }) => CustomThemeConfig),\n) => {\n  const customTheme =\n    typeof themeConfig === 'function' ? themeConfig({ lightTheme: lightTheme(), darkTheme: darkTheme() }) : themeConfig\n  Builder._themeMap[key] = customTheme\n}\n","import { registerCustomTheme } from './custom'\nimport { lightTheme } from '../../../theme'\n\nexport const registerLightTheme = () => {\n  registerCustomTheme('light', lightTheme())\n}\n","import { darkTheme } from '../../../theme'\nimport { registerCustomTheme } from './custom'\n\nexport const registerDarkTheme = () => {\n  registerCustomTheme('dark', darkTheme())\n}\n","import {\n  registerArea,\n  registerAreaPercent,\n  registerBar,\n  registerBarParallel,\n  registerBarPercent,\n  registerColumn,\n  registerColumnParallel,\n  registerColumnPercent,\n  registerLine,\n  registerPie,\n  registerDonut,\n  registerRose,\n  registerRoseParallel,\n  registerFunnel,\n  registerScatter,\n  registerTable,\n  registerPivotTable,\n  registerHeatmap,\n  registerRadar,\n  registerDualAxis,\n  registerBoxPlot,\n  registerHistogram,\n} from './chartType'\nimport { registerDarkTheme, registerLightTheme } from './theme'\n\nexport const registerAll = () => {\n  // table\n  registerTable()\n  registerPivotTable()\n  // cartesian\n  registerLine()\n  registerColumn()\n  registerColumnParallel()\n  registerColumnPercent()\n  registerBar()\n  registerBarParallel()\n  registerBarPercent()\n  registerArea()\n  registerAreaPercent()\n  registerScatter()\n  registerDualAxis()\n  // polar\n  registerPie()\n  registerDonut()\n  registerRose()\n  registerRoseParallel()\n  registerRadar()\n  // other\n  registerFunnel()\n  registerHeatmap()\n  registerBoxPlot()\n  registerHistogram()\n  // theme\n  registerLightTheme()\n  registerDarkTheme()\n}\n","import type { AdvancedPipe, ChartType, SpecPipe } from 'src/types'\nimport { Builder } from '../builder'\n\nexport const updateAdvanced = (chartType: ChartType, advancedPipe: AdvancedPipe) => {\n  Builder._customAdvancedPipe[chartType] = advancedPipe\n}\nexport const updateSpec = (chartType: ChartType, specPipe: SpecPipe) => {\n  Builder._customSpecPipe[chartType] = specPipe\n}\n","/** A special constant with type `never` */\nexport const NEVER = Object.freeze({\n    status: \"aborted\",\n});\nexport /*@__NO_SIDE_EFFECTS__*/ function $constructor(name, initializer, params) {\n    function init(inst, def) {\n        var _a;\n        Object.defineProperty(inst, \"_zod\", {\n            value: inst._zod ?? {},\n            enumerable: false,\n        });\n        (_a = inst._zod).traits ?? (_a.traits = new Set());\n        inst._zod.traits.add(name);\n        initializer(inst, def);\n        // support prototype modifications\n        for (const k in _.prototype) {\n            if (!(k in inst))\n                Object.defineProperty(inst, k, { value: _.prototype[k].bind(inst) });\n        }\n        inst._zod.constr = _;\n        inst._zod.def = def;\n    }\n    // doesn't work if Parent has a constructor with arguments\n    const Parent = params?.Parent ?? Object;\n    class Definition extends Parent {\n    }\n    Object.defineProperty(Definition, \"name\", { value: name });\n    function _(def) {\n        var _a;\n        const inst = params?.Parent ? new Definition() : this;\n        init(inst, def);\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        for (const fn of inst._zod.deferred) {\n            fn();\n        }\n        return inst;\n    }\n    Object.defineProperty(_, \"init\", { value: init });\n    Object.defineProperty(_, Symbol.hasInstance, {\n        value: (inst) => {\n            if (params?.Parent && inst instanceof params.Parent)\n                return true;\n            return inst?._zod?.traits?.has(name);\n        },\n    });\n    Object.defineProperty(_, \"name\", { value: name });\n    return _;\n}\n//////////////////////////////   UTILITIES   ///////////////////////////////////////\nexport const $brand = Symbol(\"zod_brand\");\nexport class $ZodAsyncError extends Error {\n    constructor() {\n        super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`);\n    }\n}\nexport const globalConfig = {};\nexport function config(newConfig) {\n    if (newConfig)\n        Object.assign(globalConfig, newConfig);\n    return globalConfig;\n}\n","export const cuid = /^[cC][^\\s-]{8,}$/;\nexport const cuid2 = /^[0-9a-z]+$/;\nexport const ulid = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/;\nexport const xid = /^[0-9a-vA-V]{20}$/;\nexport const ksuid = /^[A-Za-z0-9]{27}$/;\nexport const nanoid = /^[a-zA-Z0-9_-]{21}$/;\n/** ISO 8601-1 duration regex. Does not support the 8601-2 extensions like negative durations or fractional/negative components. */\nexport const duration = /^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/;\n/** Implements ISO 8601-2 extensions like explicit +- prefixes, mixing weeks with other units, and fractional/negative components. */\nexport const extendedDuration = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n/** A regex for any UUID-like identifier: 8-4-4-4-12 hex pattern */\nexport const guid = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/;\n/** Returns a regex for validating an RFC 9562/4122 UUID.\n *\n * @param version Optionally specify a version 1-8. If no version is specified, all versions are supported. */\nexport const uuid = (version) => {\n    if (!version)\n        return /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;\n    return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${version}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`);\n};\nexport const uuid4 = /*@__PURE__*/ uuid(4);\nexport const uuid6 = /*@__PURE__*/ uuid(6);\nexport const uuid7 = /*@__PURE__*/ uuid(7);\n/** Practical email validation */\nexport const email = /^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/;\n/** Equivalent to the HTML5 input[type=email] validation implemented by browsers. Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email */\nexport const html5Email = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n/** The classic emailregex.com regex for RFC 5322-compliant emails */\nexport const rfc5322Email = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n/** A loose regex that allows Unicode characters, enforces length limits, and that's about it. */\nexport const unicodeEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nexport const idnEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nexport const browserEmail = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emoji = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nexport function emoji() {\n    return new RegExp(_emoji, \"u\");\n}\nexport const ipv4 = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nexport const ipv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/;\nexport const cidrv4 = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/;\nexport const cidrv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nexport const base64 = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/;\nexport const base64url = /^[A-Za-z0-9_-]*$/;\n// based on https://stackoverflow.com/questions/106179/regular-expression-to-match-dns-hostname-or-ip-address\n// export const hostname: RegExp = /^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+$/;\nexport const hostname = /^(?=.{1,253}\\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\\.?$/;\nexport const domain = /^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/;\n// https://blog.stevenlevithan.com/archives/validate-phone-number#r4-3 (regex sans spaces)\nexport const e164 = /^\\+(?:[0-9]){6,14}[0-9]$/;\n// const dateSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateSource = `(?:(?:\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\\\d|30)|(?:02)-(?:0[1-9]|1\\\\d|2[0-8])))`;\nexport const date = /*@__PURE__*/ new RegExp(`^${dateSource}$`);\nfunction timeSource(args) {\n    const hhmm = `(?:[01]\\\\d|2[0-3]):[0-5]\\\\d`;\n    const regex = typeof args.precision === \"number\"\n        ? args.precision === -1\n            ? `${hhmm}`\n            : args.precision === 0\n                ? `${hhmm}:[0-5]\\\\d`\n                : `${hhmm}:[0-5]\\\\d\\\\.\\\\d{${args.precision}}`\n        : `${hhmm}(?::[0-5]\\\\d(?:\\\\.\\\\d+)?)?`;\n    return regex;\n}\nexport function time(args) {\n    return new RegExp(`^${timeSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetime(args) {\n    const time = timeSource({ precision: args.precision });\n    const opts = [\"Z\"];\n    if (args.local)\n        opts.push(\"\");\n    // if (args.offset) opts.push(`([+-]\\\\d{2}:\\\\d{2})`);\n    if (args.offset)\n        opts.push(`([+-](?:[01]\\\\d|2[0-3]):[0-5]\\\\d)`);\n    const timeRegex = `${time}(?:${opts.join(\"|\")})`;\n    return new RegExp(`^${dateSource}T(?:${timeRegex})$`);\n}\nexport const string = (params) => {\n    const regex = params ? `[\\\\s\\\\S]{${params?.minimum ?? 0},${params?.maximum ?? \"\"}}` : `[\\\\s\\\\S]*`;\n    return new RegExp(`^${regex}$`);\n};\nexport const bigint = /^\\d+n?$/;\nexport const integer = /^\\d+$/;\nexport const number = /^-?\\d+(?:\\.\\d+)?/i;\nexport const boolean = /true|false/i;\nconst _null = /null/i;\nexport { _null as null };\nconst _undefined = /undefined/i;\nexport { _undefined as undefined };\n// regex for string with no uppercase letters\nexport const lowercase = /^[^A-Z]*$/;\n// regex for string with no lowercase letters\nexport const uppercase = /^[^a-z]*$/;\n","// functions\nexport function assertEqual(val) {\n    return val;\n}\nexport function assertNotEqual(val) {\n    return val;\n}\nexport function assertIs(_arg) { }\nexport function assertNever(_x) {\n    throw new Error();\n}\nexport function assert(_) { }\nexport function getEnumValues(entries) {\n    const numericValues = Object.values(entries).filter((v) => typeof v === \"number\");\n    const values = Object.entries(entries)\n        .filter(([k, _]) => numericValues.indexOf(+k) === -1)\n        .map(([_, v]) => v);\n    return values;\n}\nexport function joinValues(array, separator = \"|\") {\n    return array.map((val) => stringifyPrimitive(val)).join(separator);\n}\nexport function jsonStringifyReplacer(_, value) {\n    if (typeof value === \"bigint\")\n        return value.toString();\n    return value;\n}\nexport function cached(getter) {\n    const set = false;\n    return {\n        get value() {\n            if (!set) {\n                const value = getter();\n                Object.defineProperty(this, \"value\", { value });\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n    };\n}\nexport function nullish(input) {\n    return input === null || input === undefined;\n}\nexport function cleanRegex(source) {\n    const start = source.startsWith(\"^\") ? 1 : 0;\n    const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n    return source.slice(start, end);\n}\nexport function floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepString = step.toString();\n    let stepDecCount = (stepString.split(\".\")[1] || \"\").length;\n    if (stepDecCount === 0 && /\\d?e-\\d?/.test(stepString)) {\n        const match = stepString.match(/\\d?e-(\\d?)/);\n        if (match?.[1]) {\n            stepDecCount = Number.parseInt(match[1]);\n        }\n    }\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nconst EVALUATING = Symbol(\"evaluating\");\nexport function defineLazy(object, key, getter) {\n    let value = undefined;\n    Object.defineProperty(object, key, {\n        get() {\n            if (value === EVALUATING) {\n                // Circular reference detected, return undefined to break the cycle\n                return undefined;\n            }\n            if (value === undefined) {\n                value = EVALUATING;\n                value = getter();\n            }\n            return value;\n        },\n        set(v) {\n            Object.defineProperty(object, key, {\n                value: v,\n                // configurable: true,\n            });\n            // object[key] = v;\n        },\n        configurable: true,\n    });\n}\nexport function assignProp(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n    });\n}\nexport function mergeDefs(...defs) {\n    const mergedDescriptors = {};\n    for (const def of defs) {\n        const descriptors = Object.getOwnPropertyDescriptors(def);\n        Object.assign(mergedDescriptors, descriptors);\n    }\n    return Object.defineProperties({}, mergedDescriptors);\n}\nexport function cloneDef(schema) {\n    return mergeDefs(schema._zod.def);\n}\nexport function getElementAtPath(obj, path) {\n    if (!path)\n        return obj;\n    return path.reduce((acc, key) => acc?.[key], obj);\n}\nexport function promiseAllObject(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = keys.map((key) => promisesObj[key]);\n    return Promise.all(promises).then((results) => {\n        const resolvedObj = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObj[keys[i]] = results[i];\n        }\n        return resolvedObj;\n    });\n}\nexport function randomString(length = 10) {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    let str = \"\";\n    for (let i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\nexport function esc(str) {\n    return JSON.stringify(str);\n}\nexport const captureStackTrace = (\"captureStackTrace\" in Error ? Error.captureStackTrace : (..._args) => { });\nexport function isObject(data) {\n    return typeof data === \"object\" && data !== null && !Array.isArray(data);\n}\nexport const allowsEval = cached(() => {\n    // @ts-ignore\n    if (typeof navigator !== \"undefined\" && navigator?.userAgent?.includes(\"Cloudflare\")) {\n        return false;\n    }\n    try {\n        const F = Function;\n        new F(\"\");\n        return true;\n    }\n    catch (_) {\n        return false;\n    }\n});\nexport function isPlainObject(o) {\n    if (isObject(o) === false)\n        return false;\n    // modified constructor\n    const ctor = o.constructor;\n    if (ctor === undefined)\n        return true;\n    // modified prototype\n    const prot = ctor.prototype;\n    if (isObject(prot) === false)\n        return false;\n    // ctor doesn't have static `isPrototypeOf`\n    if (Object.prototype.hasOwnProperty.call(prot, \"isPrototypeOf\") === false) {\n        return false;\n    }\n    return true;\n}\nexport function numKeys(data) {\n    let keyCount = 0;\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            keyCount++;\n        }\n    }\n    return keyCount;\n}\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return \"undefined\";\n        case \"string\":\n            return \"string\";\n        case \"number\":\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"function\":\n            return \"function\";\n        case \"bigint\":\n            return \"bigint\";\n        case \"symbol\":\n            return \"symbol\";\n        case \"object\":\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return \"promise\";\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return \"map\";\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return \"set\";\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return \"date\";\n            }\n            // @ts-ignore\n            if (typeof File !== \"undefined\" && data instanceof File) {\n                return \"file\";\n            }\n            return \"object\";\n        default:\n            throw new Error(`Unknown data type: ${t}`);\n    }\n};\nexport const propertyKeyTypes = new Set([\"string\", \"number\", \"symbol\"]);\nexport const primitiveTypes = new Set([\"string\", \"number\", \"bigint\", \"boolean\", \"symbol\", \"undefined\"]);\nexport function escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n// zod-specific utils\nexport function clone(inst, def, params) {\n    const cl = new inst._zod.constr(def ?? inst._zod.def);\n    if (!def || params?.parent)\n        cl._zod.parent = inst;\n    return cl;\n}\nexport function normalizeParams(_params) {\n    const params = _params;\n    if (!params)\n        return {};\n    if (typeof params === \"string\")\n        return { error: () => params };\n    if (params?.message !== undefined) {\n        if (params?.error !== undefined)\n            throw new Error(\"Cannot specify both `message` and `error` params\");\n        params.error = params.message;\n    }\n    delete params.message;\n    if (typeof params.error === \"string\")\n        return { ...params, error: () => params.error };\n    return params;\n}\nexport function createTransparentProxy(getter) {\n    let target;\n    return new Proxy({}, {\n        get(_, prop, receiver) {\n            target ?? (target = getter());\n            return Reflect.get(target, prop, receiver);\n        },\n        set(_, prop, value, receiver) {\n            target ?? (target = getter());\n            return Reflect.set(target, prop, value, receiver);\n        },\n        has(_, prop) {\n            target ?? (target = getter());\n            return Reflect.has(target, prop);\n        },\n        deleteProperty(_, prop) {\n            target ?? (target = getter());\n            return Reflect.deleteProperty(target, prop);\n        },\n        ownKeys(_) {\n            target ?? (target = getter());\n            return Reflect.ownKeys(target);\n        },\n        getOwnPropertyDescriptor(_, prop) {\n            target ?? (target = getter());\n            return Reflect.getOwnPropertyDescriptor(target, prop);\n        },\n        defineProperty(_, prop, descriptor) {\n            target ?? (target = getter());\n            return Reflect.defineProperty(target, prop, descriptor);\n        },\n    });\n}\nexport function stringifyPrimitive(value) {\n    if (typeof value === \"bigint\")\n        return value.toString() + \"n\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    return `${value}`;\n}\nexport function optionalKeys(shape) {\n    return Object.keys(shape).filter((k) => {\n        return shape[k]._zod.optin === \"optional\" && shape[k]._zod.optout === \"optional\";\n    });\n}\nexport const NUMBER_FORMAT_RANGES = {\n    safeint: [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\n    int32: [-2147483648, 2147483647],\n    uint32: [0, 4294967295],\n    float32: [-3.4028234663852886e38, 3.4028234663852886e38],\n    float64: [-Number.MAX_VALUE, Number.MAX_VALUE],\n};\nexport const BIGINT_FORMAT_RANGES = {\n    int64: [/* @__PURE__*/ BigInt(\"-9223372036854775808\"), /* @__PURE__*/ BigInt(\"9223372036854775807\")],\n    uint64: [/* @__PURE__*/ BigInt(0), /* @__PURE__*/ BigInt(\"18446744073709551615\")],\n};\nexport function pick(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = {};\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                newShape[key] = currDef.shape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function omit(schema, mask) {\n    const currDef = schema._zod.def;\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const newShape = { ...schema._zod.def.shape };\n            for (const key in mask) {\n                if (!(key in currDef.shape)) {\n                    throw new Error(`Unrecognized key: \"${key}\"`);\n                }\n                if (!mask[key])\n                    continue;\n                delete newShape[key];\n            }\n            assignProp(this, \"shape\", newShape); // self-caching\n            return newShape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function extend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to extend: expected a plain object\");\n    }\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function merge(a, b) {\n    const def = mergeDefs(a._zod.def, {\n        get shape() {\n            const _shape = { ...a._zod.def.shape, ...b._zod.def.shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        get catchall() {\n            return b._zod.def.catchall;\n        },\n        checks: [], // delete existing checks\n    });\n    return clone(a, def);\n}\nexport function partial(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in oldShape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // if (oldShape[key]!._zod.optin === \"optional\") continue;\n                    shape[key] = Class\n                        ? new Class({\n                            type: \"optional\",\n                            innerType: oldShape[key],\n                        })\n                        : oldShape[key];\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\nexport function required(Class, schema, mask) {\n    const def = mergeDefs(schema._zod.def, {\n        get shape() {\n            const oldShape = schema._zod.def.shape;\n            const shape = { ...oldShape };\n            if (mask) {\n                for (const key in mask) {\n                    if (!(key in shape)) {\n                        throw new Error(`Unrecognized key: \"${key}\"`);\n                    }\n                    if (!mask[key])\n                        continue;\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            else {\n                for (const key in oldShape) {\n                    // overwrite with non-optional\n                    shape[key] = new Class({\n                        type: \"nonoptional\",\n                        innerType: oldShape[key],\n                    });\n                }\n            }\n            assignProp(this, \"shape\", shape); // self-caching\n            return shape;\n        },\n        checks: [],\n    });\n    return clone(schema, def);\n}\n// invalid_type | too_big | too_small | invalid_format | not_multiple_of | unrecognized_keys | invalid_union | invalid_key | invalid_element | invalid_value | custom\nexport function aborted(x, startIndex = 0) {\n    for (let i = startIndex; i < x.issues.length; i++) {\n        if (x.issues[i]?.continue !== true) {\n            return true;\n        }\n    }\n    return false;\n}\nexport function prefixIssues(path, issues) {\n    return issues.map((iss) => {\n        var _a;\n        (_a = iss).path ?? (_a.path = []);\n        iss.path.unshift(path);\n        return iss;\n    });\n}\nexport function unwrapMessage(message) {\n    return typeof message === \"string\" ? message : message?.message;\n}\nexport function finalizeIssue(iss, ctx, config) {\n    const full = { ...iss, path: iss.path ?? [] };\n    // for backwards compatibility\n    if (!iss.message) {\n        const message = unwrapMessage(iss.inst?._zod.def?.error?.(iss)) ??\n            unwrapMessage(ctx?.error?.(iss)) ??\n            unwrapMessage(config.customError?.(iss)) ??\n            unwrapMessage(config.localeError?.(iss)) ??\n            \"Invalid input\";\n        full.message = message;\n    }\n    // delete (full as any).def;\n    delete full.inst;\n    delete full.continue;\n    if (!ctx?.reportInput) {\n        delete full.input;\n    }\n    return full;\n}\nexport function getSizableOrigin(input) {\n    if (input instanceof Set)\n        return \"set\";\n    if (input instanceof Map)\n        return \"map\";\n    // @ts-ignore\n    if (input instanceof File)\n        return \"file\";\n    return \"unknown\";\n}\nexport function getLengthableOrigin(input) {\n    if (Array.isArray(input))\n        return \"array\";\n    if (typeof input === \"string\")\n        return \"string\";\n    return \"unknown\";\n}\nexport function issue(...args) {\n    const [iss, input, inst] = args;\n    if (typeof iss === \"string\") {\n        return {\n            message: iss,\n            code: \"custom\",\n            input,\n            inst,\n        };\n    }\n    return { ...iss };\n}\nexport function cleanEnum(obj) {\n    return Object.entries(obj)\n        .filter(([k, _]) => {\n        // return true if NaN, meaning it's not a number, thus a string key\n        return Number.isNaN(Number.parseInt(k, 10));\n    })\n        .map((el) => el[1]);\n}\n// instanceof\nexport class Class {\n    constructor(..._args) { }\n}\n","// import { $ZodType } from \"./schemas.js\";\nimport * as core from \"./core.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nexport const $ZodCheck = /*@__PURE__*/ core.$constructor(\"$ZodCheck\", (inst, def) => {\n    var _a;\n    inst._zod ?? (inst._zod = {});\n    inst._zod.def = def;\n    (_a = inst._zod).onattach ?? (_a.onattach = []);\n});\nconst numericOriginMap = {\n    number: \"number\",\n    bigint: \"bigint\",\n    object: \"date\",\n};\nexport const $ZodCheckLessThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckLessThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.maximum : bag.exclusiveMaximum) ?? Number.POSITIVE_INFINITY;\n        if (def.value < curr) {\n            if (def.inclusive)\n                bag.maximum = def.value;\n            else\n                bag.exclusiveMaximum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value <= def.value : payload.value < def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckGreaterThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckGreaterThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.minimum : bag.exclusiveMinimum) ?? Number.NEGATIVE_INFINITY;\n        if (def.value > curr) {\n            if (def.inclusive)\n                bag.minimum = def.value;\n            else\n                bag.exclusiveMinimum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value >= def.value : payload.value > def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMultipleOf = \n/*@__PURE__*/ core.$constructor(\"$ZodCheckMultipleOf\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        var _a;\n        (_a = inst._zod.bag).multipleOf ?? (_a.multipleOf = def.value);\n    });\n    inst._zod.check = (payload) => {\n        if (typeof payload.value !== typeof def.value)\n            throw new Error(\"Cannot mix number and bigint in multiple_of check.\");\n        const isMultiple = typeof payload.value === \"bigint\"\n            ? payload.value % def.value === BigInt(0)\n            : util.floatSafeRemainder(payload.value, def.value) === 0;\n        if (isMultiple)\n            return;\n        payload.issues.push({\n            origin: typeof payload.value,\n            code: \"not_multiple_of\",\n            divisor: def.value,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckNumberFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    def.format = def.format || \"float64\";\n    const isInt = def.format?.includes(\"int\");\n    const origin = isInt ? \"int\" : \"number\";\n    const [minimum, maximum] = util.NUMBER_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n        if (isInt)\n            bag.pattern = regexes.integer;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (isInt) {\n            if (!Number.isInteger(input)) {\n                // invalid_format issue\n                // payload.issues.push({\n                //   expected: def.format,\n                //   format: def.format,\n                //   code: \"invalid_format\",\n                //   input,\n                //   inst,\n                // });\n                // invalid_type issue\n                payload.issues.push({\n                    expected: origin,\n                    format: def.format,\n                    code: \"invalid_type\",\n                    continue: false,\n                    input,\n                    inst,\n                });\n                return;\n                // not_multiple_of issue\n                // payload.issues.push({\n                //   code: \"not_multiple_of\",\n                //   origin: \"number\",\n                //   input,\n                //   inst,\n                //   divisor: 1,\n                // });\n            }\n            if (!Number.isSafeInteger(input)) {\n                if (input > 0) {\n                    // too_big\n                    payload.issues.push({\n                        input,\n                        code: \"too_big\",\n                        maximum: Number.MAX_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                else {\n                    // too_small\n                    payload.issues.push({\n                        input,\n                        code: \"too_small\",\n                        minimum: Number.MIN_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                return;\n            }\n        }\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_small\",\n                minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckBigIntFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    const [minimum, maximum] = util.BIGINT_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_small\",\n                minimum: minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckMaxSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size <= def.maximum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_big\",\n            maximum: def.maximum,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size >= def.minimum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_small\",\n            minimum: def.minimum,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckSizeEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckSizeEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.size;\n        bag.maximum = def.size;\n        bag.size = def.size;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size === def.size)\n            return;\n        const tooBig = size > def.size;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            ...(tooBig ? { code: \"too_big\", maximum: def.size } : { code: \"too_small\", minimum: def.size }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMaxLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length <= def.maximum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length >= def.minimum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLengthEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckLengthEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.length;\n        bag.maximum = def.length;\n        bag.length = def.length;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length === def.length)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        const tooBig = length > def.length;\n        payload.issues.push({\n            origin,\n            ...(tooBig ? { code: \"too_big\", maximum: def.length } : { code: \"too_small\", minimum: def.length }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckStringFormat\", (inst, def) => {\n    var _a, _b;\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        if (def.pattern) {\n            bag.patterns ?? (bag.patterns = new Set());\n            bag.patterns.add(def.pattern);\n        }\n    });\n    if (def.pattern)\n        (_a = inst._zod).check ?? (_a.check = (payload) => {\n            def.pattern.lastIndex = 0;\n            if (def.pattern.test(payload.value))\n                return;\n            payload.issues.push({\n                origin: \"string\",\n                code: \"invalid_format\",\n                format: def.format,\n                input: payload.value,\n                ...(def.pattern ? { pattern: def.pattern.toString() } : {}),\n                inst,\n                continue: !def.abort,\n            });\n        });\n    else\n        (_b = inst._zod).check ?? (_b.check = () => { });\n});\nexport const $ZodCheckRegex = /*@__PURE__*/ core.$constructor(\"$ZodCheckRegex\", (inst, def) => {\n    $ZodCheckStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        def.pattern.lastIndex = 0;\n        if (def.pattern.test(payload.value))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"regex\",\n            input: payload.value,\n            pattern: def.pattern.toString(),\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLowerCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckLowerCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.lowercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckUpperCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckUpperCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.uppercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckIncludes = /*@__PURE__*/ core.$constructor(\"$ZodCheckIncludes\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const escapedRegex = util.escapeRegex(def.includes);\n    const pattern = new RegExp(typeof def.position === \"number\" ? `^.{${def.position}}${escapedRegex}` : escapedRegex);\n    def.pattern = pattern;\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.includes(def.includes, def.position))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"includes\",\n            includes: def.includes,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStartsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckStartsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`^${util.escapeRegex(def.prefix)}.*`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.startsWith(def.prefix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"starts_with\",\n            prefix: def.prefix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckEndsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckEndsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`.*${util.escapeRegex(def.suffix)}$`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.endsWith(def.suffix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"ends_with\",\n            suffix: def.suffix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n///////////////////////////////////\n/////    $ZodCheckProperty    /////\n///////////////////////////////////\nfunction handleCheckPropertyResult(result, payload, property) {\n    if (result.issues.length) {\n        payload.issues.push(...util.prefixIssues(property, result.issues));\n    }\n}\nexport const $ZodCheckProperty = /*@__PURE__*/ core.$constructor(\"$ZodCheckProperty\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        const result = def.schema._zod.run({\n            value: payload.value[def.property],\n            issues: [],\n        }, {});\n        if (result instanceof Promise) {\n            return result.then((result) => handleCheckPropertyResult(result, payload, def.property));\n        }\n        handleCheckPropertyResult(result, payload, def.property);\n        return;\n    };\n});\nexport const $ZodCheckMimeType = /*@__PURE__*/ core.$constructor(\"$ZodCheckMimeType\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const mimeSet = new Set(def.mime);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.mime = def.mime;\n    });\n    inst._zod.check = (payload) => {\n        if (mimeSet.has(payload.value.type))\n            return;\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.mime,\n            input: payload.value.type,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckOverwrite = /*@__PURE__*/ core.$constructor(\"$ZodCheckOverwrite\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        payload.value = def.tx(payload.value);\n    };\n});\n","export class Doc {\n    constructor(args = []) {\n        this.content = [];\n        this.indent = 0;\n        if (this)\n            this.args = args;\n    }\n    indented(fn) {\n        this.indent += 1;\n        fn(this);\n        this.indent -= 1;\n    }\n    write(arg) {\n        if (typeof arg === \"function\") {\n            arg(this, { execution: \"sync\" });\n            arg(this, { execution: \"async\" });\n            return;\n        }\n        const content = arg;\n        const lines = content.split(\"\\n\").filter((x) => x);\n        const minIndent = Math.min(...lines.map((x) => x.length - x.trimStart().length));\n        const dedented = lines.map((x) => x.slice(minIndent)).map((x) => \" \".repeat(this.indent * 2) + x);\n        for (const line of dedented) {\n            this.content.push(line);\n        }\n    }\n    compile() {\n        const F = Function;\n        const args = this?.args;\n        const content = this?.content ?? [``];\n        const lines = [...content.map((x) => `  ${x}`)];\n        // console.log(lines.join(\"\\n\"));\n        return new F(...args, lines.join(\"\\n\"));\n    }\n}\n","import { $constructor } from \"./core.js\";\nimport * as util from \"./util.js\";\nconst initializer = (inst, def) => {\n    inst.name = \"$ZodError\";\n    Object.defineProperty(inst, \"_zod\", {\n        value: inst._zod,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"issues\", {\n        value: def,\n        enumerable: false,\n    });\n    inst.message = JSON.stringify(def, util.jsonStringifyReplacer, 2);\n    Object.defineProperty(inst, \"toString\", {\n        value: () => inst.message,\n        enumerable: false,\n    });\n};\nexport const $ZodError = $constructor(\"$ZodError\", initializer);\nexport const $ZodRealError = $constructor(\"$ZodError\", initializer, { Parent: Error });\nexport function flattenError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of error.issues) {\n        if (sub.path.length > 0) {\n            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n            fieldErrors[sub.path[0]].push(mapper(sub));\n        }\n        else {\n            formErrors.push(mapper(sub));\n        }\n    }\n    return { formErrors, fieldErrors };\n}\nexport function formatError(error, _mapper) {\n    const mapper = _mapper ||\n        function (issue) {\n            return issue.message;\n        };\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                issue.errors.map((issues) => processError({ issues }));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.path.length === 0) {\n                fieldErrors._errors.push(mapper(issue));\n            }\n            else {\n                let curr = fieldErrors;\n                let i = 0;\n                while (i < issue.path.length) {\n                    const el = issue.path[i];\n                    const terminal = i === issue.path.length - 1;\n                    if (!terminal) {\n                        curr[el] = curr[el] || { _errors: [] };\n                    }\n                    else {\n                        curr[el] = curr[el] || { _errors: [] };\n                        curr[el]._errors.push(mapper(issue));\n                    }\n                    curr = curr[el];\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return fieldErrors;\n}\nexport function treeifyError(error, _mapper) {\n    const mapper = _mapper ||\n        function (issue) {\n            return issue.message;\n        };\n    const result = { errors: [] };\n    const processError = (error, path = []) => {\n        var _a, _b;\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                // regular union error\n                issue.errors.map((issues) => processError({ issues }, issue.path));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else {\n                const fullpath = [...path, ...issue.path];\n                if (fullpath.length === 0) {\n                    result.errors.push(mapper(issue));\n                    continue;\n                }\n                let curr = result;\n                let i = 0;\n                while (i < fullpath.length) {\n                    const el = fullpath[i];\n                    const terminal = i === fullpath.length - 1;\n                    if (typeof el === \"string\") {\n                        curr.properties ?? (curr.properties = {});\n                        (_a = curr.properties)[el] ?? (_a[el] = { errors: [] });\n                        curr = curr.properties[el];\n                    }\n                    else {\n                        curr.items ?? (curr.items = []);\n                        (_b = curr.items)[el] ?? (_b[el] = { errors: [] });\n                        curr = curr.items[el];\n                    }\n                    if (terminal) {\n                        curr.errors.push(mapper(issue));\n                    }\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return result;\n}\n/** Format a ZodError as a human-readable string in the following form.\n *\n * From\n *\n * ```ts\n * ZodError {\n *   issues: [\n *     {\n *       expected: 'string',\n *       code: 'invalid_type',\n *       path: [ 'username' ],\n *       message: 'Invalid input: expected string'\n *     },\n *     {\n *       expected: 'number',\n *       code: 'invalid_type',\n *       path: [ 'favoriteNumbers', 1 ],\n *       message: 'Invalid input: expected number'\n *     }\n *   ];\n * }\n * ```\n *\n * to\n *\n * ```\n * username\n *   ✖ Expected number, received string at \"username\n * favoriteNumbers[0]\n *   ✖ Invalid input: expected number\n * ```\n */\nexport function toDotPath(_path) {\n    const segs = [];\n    const path = _path.map((seg) => (typeof seg === \"object\" ? seg.key : seg));\n    for (const seg of path) {\n        if (typeof seg === \"number\")\n            segs.push(`[${seg}]`);\n        else if (typeof seg === \"symbol\")\n            segs.push(`[${JSON.stringify(String(seg))}]`);\n        else if (/[^\\w$]/.test(seg))\n            segs.push(`[${JSON.stringify(seg)}]`);\n        else {\n            if (segs.length)\n                segs.push(\".\");\n            segs.push(seg);\n        }\n    }\n    return segs.join(\"\");\n}\nexport function prettifyError(error) {\n    const lines = [];\n    // sort by path length\n    const issues = [...error.issues].sort((a, b) => (a.path ?? []).length - (b.path ?? []).length);\n    // Process each issue\n    for (const issue of issues) {\n        lines.push(`✖ ${issue.message}`);\n        if (issue.path?.length)\n            lines.push(`  → at ${toDotPath(issue.path)}`);\n    }\n    // Convert Map to formatted string\n    return lines.join(\"\\n\");\n}\n","import * as core from \"./core.js\";\nimport * as errors from \"./errors.js\";\nimport * as util from \"./util.js\";\nexport const _parse = (_Err) => (schema, value, _ctx, _params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: false }) : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    if (result.issues.length) {\n        const e = new (_params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, _params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parse = /* @__PURE__*/ _parse(errors.$ZodRealError);\nexport const _parseAsync = (_Err) => async (schema, value, _ctx, params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    if (result.issues.length) {\n        const e = new (params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parseAsync = /* @__PURE__*/ _parseAsync(errors.$ZodRealError);\nexport const _safeParse = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? { ..._ctx, async: false } : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    return result.issues.length\n        ? {\n            success: false,\n            error: new (_Err ?? errors.$ZodError)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParse = /* @__PURE__*/ _safeParse(errors.$ZodRealError);\nexport const _safeParseAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    return result.issues.length\n        ? {\n            success: false,\n            error: new _Err(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParseAsync = /* @__PURE__*/ _safeParseAsync(errors.$ZodRealError);\n","export const version = {\n    major: 4,\n    minor: 0,\n    patch: 14,\n};\n","import * as checks from \"./checks.js\";\nimport * as core from \"./core.js\";\nimport { Doc } from \"./doc.js\";\nimport { safeParse, safeParseAsync } from \"./parse.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nimport { version } from \"./versions.js\";\nexport const $ZodType = /*@__PURE__*/ core.$constructor(\"$ZodType\", (inst, def) => {\n    var _a;\n    inst ?? (inst = {});\n    inst._zod.def = def; // set _def property\n    inst._zod.bag = inst._zod.bag || {}; // initialize _bag object\n    inst._zod.version = version;\n    const checks = [...(inst._zod.def.checks ?? [])];\n    // if inst is itself a checks.$ZodCheck, run it as a check\n    if (inst._zod.traits.has(\"$ZodCheck\")) {\n        checks.unshift(inst);\n    }\n    //\n    for (const ch of checks) {\n        for (const fn of ch._zod.onattach) {\n            fn(inst);\n        }\n    }\n    if (checks.length === 0) {\n        // deferred initializer\n        // inst._zod.parse is not yet defined\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        inst._zod.deferred?.push(() => {\n            inst._zod.run = inst._zod.parse;\n        });\n    }\n    else {\n        const runChecks = (payload, checks, ctx) => {\n            let isAborted = util.aborted(payload);\n            let asyncResult;\n            for (const ch of checks) {\n                if (ch._zod.def.when) {\n                    const shouldRun = ch._zod.def.when(payload);\n                    if (!shouldRun)\n                        continue;\n                }\n                else if (isAborted) {\n                    continue;\n                }\n                const currLen = payload.issues.length;\n                const _ = ch._zod.check(payload);\n                if (_ instanceof Promise && ctx?.async === false) {\n                    throw new core.$ZodAsyncError();\n                }\n                if (asyncResult || _ instanceof Promise) {\n                    asyncResult = (asyncResult ?? Promise.resolve()).then(async () => {\n                        await _;\n                        const nextLen = payload.issues.length;\n                        if (nextLen === currLen)\n                            return;\n                        if (!isAborted)\n                            isAborted = util.aborted(payload, currLen);\n                    });\n                }\n                else {\n                    const nextLen = payload.issues.length;\n                    if (nextLen === currLen)\n                        continue;\n                    if (!isAborted)\n                        isAborted = util.aborted(payload, currLen);\n                }\n            }\n            if (asyncResult) {\n                return asyncResult.then(() => {\n                    return payload;\n                });\n            }\n            return payload;\n        };\n        inst._zod.run = (payload, ctx) => {\n            const result = inst._zod.parse(payload, ctx);\n            if (result instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return result.then((result) => runChecks(result, checks, ctx));\n            }\n            return runChecks(result, checks, ctx);\n        };\n    }\n    inst[\"~standard\"] = {\n        validate: (value) => {\n            try {\n                const r = safeParse(inst, value);\n                return r.success ? { value: r.data } : { issues: r.error?.issues };\n            }\n            catch (_) {\n                return safeParseAsync(inst, value).then((r) => (r.success ? { value: r.data } : { issues: r.error?.issues }));\n            }\n        },\n        vendor: \"zod\",\n        version: 1,\n    };\n});\nexport { clone } from \"./util.js\";\nexport const $ZodString = /*@__PURE__*/ core.$constructor(\"$ZodString\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = [...(inst?._zod.bag?.patterns ?? [])].pop() ?? regexes.string(inst._zod.bag);\n    inst._zod.parse = (payload, _) => {\n        if (def.coerce)\n            try {\n                payload.value = String(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"string\")\n            return payload;\n        payload.issues.push({\n            expected: \"string\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodStringFormat\", (inst, def) => {\n    // check initialization must come first\n    checks.$ZodCheckStringFormat.init(inst, def);\n    $ZodString.init(inst, def);\n});\nexport const $ZodGUID = /*@__PURE__*/ core.$constructor(\"$ZodGUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.guid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodUUID = /*@__PURE__*/ core.$constructor(\"$ZodUUID\", (inst, def) => {\n    if (def.version) {\n        const versionMap = {\n            v1: 1,\n            v2: 2,\n            v3: 3,\n            v4: 4,\n            v5: 5,\n            v6: 6,\n            v7: 7,\n            v8: 8,\n        };\n        const v = versionMap[def.version];\n        if (v === undefined)\n            throw new Error(`Invalid UUID version: \"${def.version}\"`);\n        def.pattern ?? (def.pattern = regexes.uuid(v));\n    }\n    else\n        def.pattern ?? (def.pattern = regexes.uuid());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodEmail = /*@__PURE__*/ core.$constructor(\"$ZodEmail\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.email);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodURL = /*@__PURE__*/ core.$constructor(\"$ZodURL\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        try {\n            // Trim whitespace from input\n            const trimmed = payload.value.trim();\n            // @ts-ignore\n            const url = new URL(trimmed);\n            if (def.hostname) {\n                def.hostname.lastIndex = 0;\n                if (!def.hostname.test(url.hostname)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid hostname\",\n                        pattern: regexes.hostname.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            if (def.protocol) {\n                def.protocol.lastIndex = 0;\n                if (!def.protocol.test(url.protocol.endsWith(\":\") ? url.protocol.slice(0, -1) : url.protocol)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid protocol\",\n                        pattern: def.protocol.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            // Set the output value based on normalize flag\n            if (def.normalize) {\n                // Use normalized URL\n                payload.value = url.href;\n            }\n            else {\n                // Preserve the original input (trimmed)\n                payload.value = trimmed;\n            }\n            return;\n        }\n        catch (_) {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"url\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodEmoji = /*@__PURE__*/ core.$constructor(\"$ZodEmoji\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.emoji());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodNanoID = /*@__PURE__*/ core.$constructor(\"$ZodNanoID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.nanoid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID = /*@__PURE__*/ core.$constructor(\"$ZodCUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID2 = /*@__PURE__*/ core.$constructor(\"$ZodCUID2\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid2);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodULID = /*@__PURE__*/ core.$constructor(\"$ZodULID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ulid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodXID = /*@__PURE__*/ core.$constructor(\"$ZodXID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.xid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodKSUID = /*@__PURE__*/ core.$constructor(\"$ZodKSUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ksuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODateTime = /*@__PURE__*/ core.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.datetime(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODate = /*@__PURE__*/ core.$constructor(\"$ZodISODate\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.date);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISOTime = /*@__PURE__*/ core.$constructor(\"$ZodISOTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.time(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODuration = /*@__PURE__*/ core.$constructor(\"$ZodISODuration\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.duration);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodIPv4 = /*@__PURE__*/ core.$constructor(\"$ZodIPv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv4);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv4`;\n    });\n});\nexport const $ZodIPv6 = /*@__PURE__*/ core.$constructor(\"$ZodIPv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv6);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv6`;\n    });\n    inst._zod.check = (payload) => {\n        try {\n            // @ts-ignore\n            new URL(`http://[${payload.value}]`);\n            // return;\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"ipv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv4);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv6); // not used for validation\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        const [address, prefix] = payload.value.split(\"/\");\n        try {\n            if (!prefix)\n                throw new Error();\n            const prefixNum = Number(prefix);\n            if (`${prefixNum}` !== prefix)\n                throw new Error();\n            if (prefixNum < 0 || prefixNum > 128)\n                throw new Error();\n            // @ts-ignore\n            new URL(`http://[${address}]`);\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"cidrv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64(data) {\n    if (data === \"\")\n        return true;\n    if (data.length % 4 !== 0)\n        return false;\n    try {\n        // @ts-ignore\n        atob(data);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodBase64 = /*@__PURE__*/ core.$constructor(\"$ZodBase64\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64URL(data) {\n    if (!regexes.base64url.test(data))\n        return false;\n    const base64 = data.replace(/[-_]/g, (c) => (c === \"-\" ? \"+\" : \"/\"));\n    const padded = base64.padEnd(Math.ceil(base64.length / 4) * 4, \"=\");\n    return isValidBase64(padded);\n}\nexport const $ZodBase64URL = /*@__PURE__*/ core.$constructor(\"$ZodBase64URL\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64url);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64url\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64URL(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64url\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodE164 = /*@__PURE__*/ core.$constructor(\"$ZodE164\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.e164);\n    $ZodStringFormat.init(inst, def);\n});\n//////////////////////////////   ZodJWT   //////////////////////////////\nexport function isValidJWT(token, algorithm = null) {\n    try {\n        const tokensParts = token.split(\".\");\n        if (tokensParts.length !== 3)\n            return false;\n        const [header] = tokensParts;\n        if (!header)\n            return false;\n        // @ts-ignore\n        const parsedHeader = JSON.parse(atob(header));\n        if (\"typ\" in parsedHeader && parsedHeader?.typ !== \"JWT\")\n            return false;\n        if (!parsedHeader.alg)\n            return false;\n        if (algorithm && (!(\"alg\" in parsedHeader) || parsedHeader.alg !== algorithm))\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodJWT = /*@__PURE__*/ core.$constructor(\"$ZodJWT\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (isValidJWT(payload.value, def.alg))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"jwt\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCustomStringFormat\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (def.fn(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: def.format,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodNumber = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = inst._zod.bag.pattern ?? regexes.number;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Number(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"number\" && !Number.isNaN(input) && Number.isFinite(input)) {\n            return payload;\n        }\n        const received = typeof input === \"number\"\n            ? Number.isNaN(input)\n                ? \"NaN\"\n                : !Number.isFinite(input)\n                    ? \"Infinity\"\n                    : undefined\n            : undefined;\n        payload.issues.push({\n            expected: \"number\",\n            code: \"invalid_type\",\n            input,\n            inst,\n            ...(received ? { received } : {}),\n        });\n        return payload;\n    };\n});\nexport const $ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    checks.$ZodCheckNumberFormat.init(inst, def);\n    $ZodNumber.init(inst, def); // no format checksp\n});\nexport const $ZodBoolean = /*@__PURE__*/ core.$constructor(\"$ZodBoolean\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.boolean;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Boolean(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"boolean\")\n            return payload;\n        payload.issues.push({\n            expected: \"boolean\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigInt = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.bigint;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = BigInt(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"bigint\")\n            return payload;\n        payload.issues.push({\n            expected: \"bigint\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    checks.$ZodCheckBigIntFormat.init(inst, def);\n    $ZodBigInt.init(inst, def); // no format checks\n});\nexport const $ZodSymbol = /*@__PURE__*/ core.$constructor(\"$ZodSymbol\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"symbol\")\n            return payload;\n        payload.issues.push({\n            expected: \"symbol\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodUndefined = /*@__PURE__*/ core.$constructor(\"$ZodUndefined\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.undefined;\n    inst._zod.values = new Set([undefined]);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"undefined\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodNull = /*@__PURE__*/ core.$constructor(\"$ZodNull\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.null;\n    inst._zod.values = new Set([null]);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input === null)\n            return payload;\n        payload.issues.push({\n            expected: \"null\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodAny = /*@__PURE__*/ core.$constructor(\"$ZodAny\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodUnknown = /*@__PURE__*/ core.$constructor(\"$ZodUnknown\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodNever = /*@__PURE__*/ core.$constructor(\"$ZodNever\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.issues.push({\n            expected: \"never\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodVoid = /*@__PURE__*/ core.$constructor(\"$ZodVoid\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"void\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodDate = /*@__PURE__*/ core.$constructor(\"$ZodDate\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce) {\n            try {\n                payload.value = new Date(payload.value);\n            }\n            catch (_err) { }\n        }\n        const input = payload.value;\n        const isDate = input instanceof Date;\n        const isValidDate = isDate && !Number.isNaN(input.getTime());\n        if (isValidDate)\n            return payload;\n        payload.issues.push({\n            expected: \"date\",\n            code: \"invalid_type\",\n            input,\n            ...(isDate ? { received: \"Invalid Date\" } : {}),\n            inst,\n        });\n        return payload;\n    };\n});\nfunction handleArrayResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodArray = /*@__PURE__*/ core.$constructor(\"$ZodArray\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                expected: \"array\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = Array(input.length);\n        const proms = [];\n        for (let i = 0; i < input.length; i++) {\n            const item = input[i];\n            const result = def.element._zod.run({\n                value: item,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleArrayResult(result, payload, i)));\n            }\n            else {\n                handleArrayResult(result, payload, i);\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload; //handleArrayResultsAsync(parseResults, final);\n    };\n});\nfunction handlePropertyResult(result, final, key, input) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(key, result.issues));\n    }\n    if (result.value === undefined) {\n        if (key in input) {\n            final.value[key] = undefined;\n        }\n    }\n    else {\n        final.value[key] = result.value;\n    }\n}\nexport const $ZodObject = /*@__PURE__*/ core.$constructor(\"$ZodObject\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodType.init(inst, def);\n    const _normalized = util.cached(() => {\n        const keys = Object.keys(def.shape);\n        for (const k of keys) {\n            if (!(def.shape[k] instanceof $ZodType)) {\n                throw new Error(`Invalid element at key \"${k}\": expected a Zod schema`);\n            }\n        }\n        const okeys = util.optionalKeys(def.shape);\n        return {\n            shape: def.shape,\n            keys,\n            keySet: new Set(keys),\n            numKeys: keys.length,\n            optionalKeys: new Set(okeys),\n        };\n    });\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const shape = def.shape;\n        const propValues = {};\n        for (const key in shape) {\n            const field = shape[key]._zod;\n            if (field.values) {\n                propValues[key] ?? (propValues[key] = new Set());\n                for (const v of field.values)\n                    propValues[key].add(v);\n            }\n        }\n        return propValues;\n    });\n    const generateFastpass = (shape) => {\n        const doc = new Doc([\"shape\", \"payload\", \"ctx\"]);\n        const normalized = _normalized.value;\n        const parseStr = (key) => {\n            const k = util.esc(key);\n            return `shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`;\n        };\n        doc.write(`const input = payload.value;`);\n        const ids = Object.create(null);\n        let counter = 0;\n        for (const key of normalized.keys) {\n            ids[key] = `key_${counter++}`;\n        }\n        // A: preserve key order {\n        doc.write(`const newResult = {}`);\n        for (const key of normalized.keys) {\n            const id = ids[key];\n            const k = util.esc(key);\n            doc.write(`const ${id} = ${parseStr(key)};`);\n            doc.write(`\n        if (${id}.issues.length) {\n          payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${k}, ...iss.path] : [${k}]\n          })));\n        }\n        \n        if (${id}.value === undefined) {\n          if (${k} in input) {\n            newResult[${k}] = undefined;\n          }\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n      `);\n        }\n        doc.write(`payload.value = newResult;`);\n        doc.write(`return payload;`);\n        const fn = doc.compile();\n        return (payload, ctx) => fn(shape, payload, ctx);\n    };\n    let fastpass;\n    const isObject = util.isObject;\n    const jit = !core.globalConfig.jitless;\n    const allowsEval = util.allowsEval;\n    const fastEnabled = jit && allowsEval.value; // && !def.catchall;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (jit && fastEnabled && ctx?.async === false && ctx.jitless !== true) {\n            // always synchronous\n            if (!fastpass)\n                fastpass = generateFastpass(def.shape);\n            payload = fastpass(payload, ctx);\n        }\n        else {\n            payload.value = {};\n            const shape = value.shape;\n            for (const key of value.keys) {\n                const el = shape[key];\n                const r = el._zod.run({ value: input[key], issues: [] }, ctx);\n                if (r instanceof Promise) {\n                    proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n                }\n                else {\n                    handlePropertyResult(r, payload, key, input);\n                }\n            }\n        }\n        if (!catchall) {\n            return proms.length ? Promise.all(proms).then(() => payload) : payload;\n        }\n        const unrecognized = [];\n        // iterate over input keys\n        const keySet = value.keySet;\n        const _catchall = catchall._zod;\n        const t = _catchall.def.type;\n        for (const key of Object.keys(input)) {\n            if (keySet.has(key))\n                continue;\n            if (t === \"never\") {\n                unrecognized.push(key);\n                continue;\n            }\n            const r = _catchall.run({ value: input[key], issues: [] }, ctx);\n            if (r instanceof Promise) {\n                proms.push(r.then((r) => handlePropertyResult(r, payload, key, input)));\n            }\n            else {\n                handlePropertyResult(r, payload, key, input);\n            }\n        }\n        if (unrecognized.length) {\n            payload.issues.push({\n                code: \"unrecognized_keys\",\n                keys: unrecognized,\n                input,\n                inst,\n            });\n        }\n        if (!proms.length)\n            return payload;\n        return Promise.all(proms).then(() => {\n            return payload;\n        });\n    };\n});\nfunction handleUnionResults(results, final, inst, ctx) {\n    for (const result of results) {\n        if (result.issues.length === 0) {\n            final.value = result.value;\n            return final;\n        }\n    }\n    const nonaborted = results.filter((r) => !util.aborted(r));\n    if (nonaborted.length === 1) {\n        final.value = nonaborted[0].value;\n        return nonaborted[0];\n    }\n    final.issues.push({\n        code: \"invalid_union\",\n        input: final.value,\n        inst,\n        errors: results.map((result) => result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n    });\n    return final;\n}\nexport const $ZodUnion = /*@__PURE__*/ core.$constructor(\"$ZodUnion\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.options.some((o) => o._zod.optin === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"optout\", () => def.options.some((o) => o._zod.optout === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"values\", () => {\n        if (def.options.every((o) => o._zod.values)) {\n            return new Set(def.options.flatMap((option) => Array.from(option._zod.values)));\n        }\n        return undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        if (def.options.every((o) => o._zod.pattern)) {\n            const patterns = def.options.map((o) => o._zod.pattern);\n            return new RegExp(`^(${patterns.map((p) => util.cleanRegex(p.source)).join(\"|\")})$`);\n        }\n        return undefined;\n    });\n    const single = def.options.length === 1;\n    const first = def.options[0]._zod.run;\n    inst._zod.parse = (payload, ctx) => {\n        if (single) {\n            return first(payload, ctx);\n        }\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                if (result.issues.length === 0)\n                    return result;\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nexport const $ZodDiscriminatedUnion = \n/*@__PURE__*/\ncore.$constructor(\"$ZodDiscriminatedUnion\", (inst, def) => {\n    $ZodUnion.init(inst, def);\n    const _super = inst._zod.parse;\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const propValues = {};\n        for (const option of def.options) {\n            const pv = option._zod.propValues;\n            if (!pv || Object.keys(pv).length === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(option)}\"`);\n            for (const [k, v] of Object.entries(pv)) {\n                if (!propValues[k])\n                    propValues[k] = new Set();\n                for (const val of v) {\n                    propValues[k].add(val);\n                }\n            }\n        }\n        return propValues;\n    });\n    const disc = util.cached(() => {\n        const opts = def.options;\n        const map = new Map();\n        for (const o of opts) {\n            const values = o._zod.propValues?.[def.discriminator];\n            if (!values || values.size === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(o)}\"`);\n            for (const v of values) {\n                if (map.has(v)) {\n                    throw new Error(`Duplicate discriminator value \"${String(v)}\"`);\n                }\n                map.set(v, o);\n            }\n        }\n        return map;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isObject(input)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"object\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const opt = disc.value.get(input?.[def.discriminator]);\n        if (opt) {\n            return opt._zod.run(payload, ctx);\n        }\n        if (def.unionFallback) {\n            return _super(payload, ctx);\n        }\n        // no matching discriminator\n        payload.issues.push({\n            code: \"invalid_union\",\n            errors: [],\n            note: \"No matching discriminator\",\n            discriminator: def.discriminator,\n            input,\n            path: [def.discriminator],\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodIntersection = /*@__PURE__*/ core.$constructor(\"$ZodIntersection\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        const left = def.left._zod.run({ value: input, issues: [] }, ctx);\n        const right = def.right._zod.run({ value: input, issues: [] }, ctx);\n        const async = left instanceof Promise || right instanceof Promise;\n        if (async) {\n            return Promise.all([left, right]).then(([left, right]) => {\n                return handleIntersectionResults(payload, left, right);\n            });\n        }\n        return handleIntersectionResults(payload, left, right);\n    };\n});\nfunction mergeValues(a, b) {\n    // const aType = parse.t(a);\n    // const bType = parse.t(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    if (a instanceof Date && b instanceof Date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    if (util.isPlainObject(a) && util.isPlainObject(b)) {\n        const bKeys = Object.keys(b);\n        const sharedKeys = Object.keys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [key, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return { valid: false, mergeErrorPath: [] };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [index, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    return { valid: false, mergeErrorPath: [] };\n}\nfunction handleIntersectionResults(result, left, right) {\n    if (left.issues.length) {\n        result.issues.push(...left.issues);\n    }\n    if (right.issues.length) {\n        result.issues.push(...right.issues);\n    }\n    if (util.aborted(result))\n        return result;\n    const merged = mergeValues(left.value, right.value);\n    if (!merged.valid) {\n        throw new Error(`Unmergable intersection. Error path: ` + `${JSON.stringify(merged.mergeErrorPath)}`);\n    }\n    result.value = merged.data;\n    return result;\n}\nexport const $ZodTuple = /*@__PURE__*/ core.$constructor(\"$ZodTuple\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const items = def.items;\n    const optStart = items.length - [...items].reverse().findIndex((item) => item._zod.optin !== \"optional\");\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"tuple\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        payload.value = [];\n        const proms = [];\n        if (!def.rest) {\n            const tooBig = input.length > items.length;\n            const tooSmall = input.length < optStart - 1;\n            if (tooBig || tooSmall) {\n                payload.issues.push({\n                    ...(tooBig ? { code: \"too_big\", maximum: items.length } : { code: \"too_small\", minimum: items.length }),\n                    input,\n                    inst,\n                    origin: \"array\",\n                });\n                return payload;\n            }\n        }\n        let i = -1;\n        for (const item of items) {\n            i++;\n            if (i >= input.length)\n                if (i >= optStart)\n                    continue;\n            const result = item._zod.run({\n                value: input[i],\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n            }\n            else {\n                handleTupleResult(result, payload, i);\n            }\n        }\n        if (def.rest) {\n            const rest = input.slice(items.length);\n            for (const el of rest) {\n                i++;\n                const result = def.rest._zod.run({\n                    value: el,\n                    issues: [],\n                }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n                }\n                else {\n                    handleTupleResult(result, payload, i);\n                }\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleTupleResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodRecord = /*@__PURE__*/ core.$constructor(\"$ZodRecord\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isPlainObject(input)) {\n            payload.issues.push({\n                expected: \"record\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (def.keyType._zod.values) {\n            const values = def.keyType._zod.values;\n            payload.value = {};\n            for (const key of values) {\n                if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"symbol\") {\n                    const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                    if (result instanceof Promise) {\n                        proms.push(result.then((result) => {\n                            if (result.issues.length) {\n                                payload.issues.push(...util.prefixIssues(key, result.issues));\n                            }\n                            payload.value[key] = result.value;\n                        }));\n                    }\n                    else {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[key] = result.value;\n                    }\n                }\n            }\n            let unrecognized;\n            for (const key in input) {\n                if (!values.has(key)) {\n                    unrecognized = unrecognized ?? [];\n                    unrecognized.push(key);\n                }\n            }\n            if (unrecognized && unrecognized.length > 0) {\n                payload.issues.push({\n                    code: \"unrecognized_keys\",\n                    input,\n                    inst,\n                    keys: unrecognized,\n                });\n            }\n        }\n        else {\n            payload.value = {};\n            for (const key of Reflect.ownKeys(input)) {\n                if (key === \"__proto__\")\n                    continue;\n                const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n                if (keyResult instanceof Promise) {\n                    throw new Error(\"Async schemas not supported in object keys currently\");\n                }\n                if (keyResult.issues.length) {\n                    payload.issues.push({\n                        code: \"invalid_key\",\n                        origin: \"record\",\n                        issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        input: key,\n                        path: [key],\n                        inst,\n                    });\n                    payload.value[keyResult.value] = keyResult.value;\n                    continue;\n                }\n                const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[keyResult.value] = result.value;\n                    }));\n                }\n                else {\n                    if (result.issues.length) {\n                        payload.issues.push(...util.prefixIssues(key, result.issues));\n                    }\n                    payload.value[keyResult.value] = result.value;\n                }\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload;\n    };\n});\nexport const $ZodMap = /*@__PURE__*/ core.$constructor(\"$ZodMap\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Map)) {\n            payload.issues.push({\n                expected: \"map\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Map();\n        for (const [key, value] of input) {\n            const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n            const valueResult = def.valueType._zod.run({ value: value, issues: [] }, ctx);\n            if (keyResult instanceof Promise || valueResult instanceof Promise) {\n                proms.push(Promise.all([keyResult, valueResult]).then(([keyResult, valueResult]) => {\n                    handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n                }));\n            }\n            else {\n                handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleMapResult(keyResult, valueResult, final, key, input, inst, ctx) {\n    if (keyResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, keyResult.issues));\n        }\n        else {\n            final.issues.push({\n                code: \"invalid_key\",\n                origin: \"map\",\n                input,\n                inst,\n                issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    if (valueResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, valueResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_element\",\n                input,\n                inst,\n                key: key,\n                issues: valueResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    final.value.set(keyResult.value, valueResult.value);\n}\nexport const $ZodSet = /*@__PURE__*/ core.$constructor(\"$ZodSet\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Set)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"set\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Set();\n        for (const item of input) {\n            const result = def.valueType._zod.run({ value: item, issues: [] }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleSetResult(result, payload)));\n            }\n            else\n                handleSetResult(result, payload);\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleSetResult(result, final) {\n    if (result.issues.length) {\n        final.issues.push(...result.issues);\n    }\n    final.value.add(result.value);\n}\nexport const $ZodEnum = /*@__PURE__*/ core.$constructor(\"$ZodEnum\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const values = util.getEnumValues(def.entries);\n    const valuesSet = new Set(values);\n    inst._zod.values = valuesSet;\n    inst._zod.pattern = new RegExp(`^(${values\n        .filter((k) => util.propertyKeyTypes.has(typeof k))\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o.toString()))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (valuesSet.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodLiteral = /*@__PURE__*/ core.$constructor(\"$ZodLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    if (def.values.length === 0) {\n        throw new Error(\"Cannot create literal schema with no valid values\");\n    }\n    inst._zod.values = new Set(def.values);\n    inst._zod.pattern = new RegExp(`^(${def.values\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o ? util.escapeRegex(o.toString()) : String(o)))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodFile = /*@__PURE__*/ core.$constructor(\"$ZodFile\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        // @ts-ignore\n        if (input instanceof File)\n            return payload;\n        payload.issues.push({\n            expected: \"file\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodTransform = /*@__PURE__*/ core.$constructor(\"$ZodTransform\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const _out = def.transform(payload.value, payload);\n        if (_ctx.async) {\n            const output = _out instanceof Promise ? _out : Promise.resolve(_out);\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        if (_out instanceof Promise) {\n            throw new core.$ZodAsyncError();\n        }\n        payload.value = _out;\n        return payload;\n    };\n});\nfunction handleOptionalResult(result, input) {\n    if (result.issues.length && input === undefined) {\n        return { issues: [], value: undefined };\n    }\n    return result;\n}\nexport const $ZodOptional = /*@__PURE__*/ core.$constructor(\"$ZodOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, undefined]) : undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)})?$`) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (def.innerType._zod.optin === \"optional\") {\n            const result = def.innerType._zod.run(payload, ctx);\n            if (result instanceof Promise)\n                return result.then((r) => handleOptionalResult(r, payload.value));\n            return handleOptionalResult(result, payload.value);\n        }\n        if (payload.value === undefined) {\n            return payload;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNullable = /*@__PURE__*/ core.$constructor(\"$ZodNullable\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)}|null)$`) : undefined;\n    });\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, null]) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === null)\n            return payload;\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodDefault = /*@__PURE__*/ core.$constructor(\"$ZodDefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // inst._zod.qin = \"true\";\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n            /**\n             * $ZodDefault always returns the default value immediately.\n             * It doesn't pass the default value into the validator (\"prefault\"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a \"prefault\" for the pipe.   */\n            return payload;\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleDefaultResult(result, def));\n        }\n        return handleDefaultResult(result, def);\n    };\n});\nfunction handleDefaultResult(payload, def) {\n    if (payload.value === undefined) {\n        payload.value = def.defaultValue;\n    }\n    return payload;\n}\nexport const $ZodPrefault = /*@__PURE__*/ core.$constructor(\"$ZodPrefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNonOptional = /*@__PURE__*/ core.$constructor(\"$ZodNonOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => {\n        const v = def.innerType._zod.values;\n        return v ? new Set([...v].filter((x) => x !== undefined)) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleNonOptionalResult(result, inst));\n        }\n        return handleNonOptionalResult(result, inst);\n    };\n});\nfunction handleNonOptionalResult(payload, inst) {\n    if (!payload.issues.length && payload.value === undefined) {\n        payload.issues.push({\n            code: \"invalid_type\",\n            expected: \"nonoptional\",\n            input: payload.value,\n            inst,\n        });\n    }\n    return payload;\n}\nexport const $ZodSuccess = /*@__PURE__*/ core.$constructor(\"$ZodSuccess\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.issues.length === 0;\n                return payload;\n            });\n        }\n        payload.value = result.issues.length === 0;\n        return payload;\n    };\n});\nexport const $ZodCatch = /*@__PURE__*/ core.$constructor(\"$ZodCatch\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.value;\n                if (result.issues.length) {\n                    payload.value = def.catchValue({\n                        ...payload,\n                        error: {\n                            issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        },\n                        input: payload.value,\n                    });\n                    payload.issues = [];\n                }\n                return payload;\n            });\n        }\n        payload.value = result.value;\n        if (result.issues.length) {\n            payload.value = def.catchValue({\n                ...payload,\n                error: {\n                    issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                },\n                input: payload.value,\n            });\n            payload.issues = [];\n        }\n        return payload;\n    };\n});\nexport const $ZodNaN = /*@__PURE__*/ core.$constructor(\"$ZodNaN\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"number\" || !Number.isNaN(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"nan\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPipe = /*@__PURE__*/ core.$constructor(\"$ZodPipe\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    util.defineLazy(inst._zod, \"propValues\", () => def.in._zod.propValues);\n    inst._zod.parse = (payload, ctx) => {\n        const left = def.in._zod.run(payload, ctx);\n        if (left instanceof Promise) {\n            return left.then((left) => handlePipeResult(left, def, ctx));\n        }\n        return handlePipeResult(left, def, ctx);\n    };\n});\nfunction handlePipeResult(left, def, ctx) {\n    if (left.issues.length) {\n        return left;\n    }\n    return def.out._zod.run({ value: left.value, issues: left.issues }, ctx);\n}\nexport const $ZodReadonly = /*@__PURE__*/ core.$constructor(\"$ZodReadonly\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"propValues\", () => def.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then(handleReadonlyResult);\n        }\n        return handleReadonlyResult(result);\n    };\n});\nfunction handleReadonlyResult(payload) {\n    payload.value = Object.freeze(payload.value);\n    return payload;\n}\nexport const $ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"$ZodTemplateLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const regexParts = [];\n    for (const part of def.parts) {\n        if (part instanceof $ZodType) {\n            if (!part._zod.pattern) {\n                // if (!source)\n                throw new Error(`Invalid template literal part, no pattern found: ${[...part._zod.traits].shift()}`);\n            }\n            const source = part._zod.pattern instanceof RegExp ? part._zod.pattern.source : part._zod.pattern;\n            if (!source)\n                throw new Error(`Invalid template literal part: ${part._zod.traits}`);\n            const start = source.startsWith(\"^\") ? 1 : 0;\n            const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n            regexParts.push(source.slice(start, end));\n        }\n        else if (part === null || util.primitiveTypes.has(typeof part)) {\n            regexParts.push(util.escapeRegex(`${part}`));\n        }\n        else {\n            throw new Error(`Invalid template literal part: ${part}`);\n        }\n    }\n    inst._zod.pattern = new RegExp(`^${regexParts.join(\"\")}$`);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"string\") {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"template_literal\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        inst._zod.pattern.lastIndex = 0;\n        if (!inst._zod.pattern.test(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                code: \"invalid_format\",\n                format: def.format ?? \"template_literal\",\n                pattern: inst._zod.pattern.source,\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPromise = /*@__PURE__*/ core.$constructor(\"$ZodPromise\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        return Promise.resolve(payload.value).then((inner) => def.innerType._zod.run({ value: inner, issues: [] }, ctx));\n    };\n});\nexport const $ZodLazy = /*@__PURE__*/ core.$constructor(\"$ZodLazy\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // let _innerType!: any;\n    // util.defineLazy(def, \"getter\", () => {\n    //   if (!_innerType) {\n    //     _innerType = def.getter();\n    //   }\n    //   return () => _innerType;\n    // });\n    util.defineLazy(inst._zod, \"innerType\", () => def.getter());\n    util.defineLazy(inst._zod, \"pattern\", () => inst._zod.innerType._zod.pattern);\n    util.defineLazy(inst._zod, \"propValues\", () => inst._zod.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"optin\", () => inst._zod.innerType._zod.optin ?? undefined);\n    util.defineLazy(inst._zod, \"optout\", () => inst._zod.innerType._zod.optout ?? undefined);\n    inst._zod.parse = (payload, ctx) => {\n        const inner = inst._zod.innerType;\n        return inner._zod.run(payload, ctx);\n    };\n});\nexport const $ZodCustom = /*@__PURE__*/ core.$constructor(\"$ZodCustom\", (inst, def) => {\n    checks.$ZodCheck.init(inst, def);\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _) => {\n        return payload;\n    };\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const r = def.fn(input);\n        if (r instanceof Promise) {\n            return r.then((r) => handleRefineResult(r, payload, input, inst));\n        }\n        handleRefineResult(r, payload, input, inst);\n        return;\n    };\n});\nfunction handleRefineResult(result, payload, input, inst) {\n    if (!result) {\n        const _iss = {\n            code: \"custom\",\n            input,\n            inst, // incorporates params.error into issue reporting\n            path: [...(inst._zod.def.path ?? [])], // incorporates params.error into issue reporting\n            continue: !inst._zod.def.abort,\n            // params: inst._zod.def.params,\n        };\n        if (inst._zod.def.params)\n            _iss.params = inst._zod.def.params;\n        payload.issues.push(util.issue(_iss));\n    }\n}\n","export const $output = Symbol(\"ZodOutput\");\nexport const $input = Symbol(\"ZodInput\");\nexport class $ZodRegistry {\n    constructor() {\n        this._map = new Map();\n        this._idmap = new Map();\n    }\n    add(schema, ..._meta) {\n        const meta = _meta[0];\n        this._map.set(schema, meta);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            if (this._idmap.has(meta.id)) {\n                throw new Error(`ID ${meta.id} already exists in the registry`);\n            }\n            this._idmap.set(meta.id, schema);\n        }\n        return this;\n    }\n    clear() {\n        this._map = new Map();\n        this._idmap = new Map();\n        return this;\n    }\n    remove(schema) {\n        const meta = this._map.get(schema);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.delete(meta.id);\n        }\n        this._map.delete(schema);\n        return this;\n    }\n    get(schema) {\n        // return this._map.get(schema) as any;\n        // inherit metadata\n        const p = schema._zod.parent;\n        if (p) {\n            const pm = { ...(this.get(p) ?? {}) };\n            delete pm.id; // do not inherit id\n            const f = { ...pm, ...this._map.get(schema) };\n            return Object.keys(f).length ? f : undefined;\n        }\n        return this._map.get(schema);\n    }\n    has(schema) {\n        return this._map.has(schema);\n    }\n}\n// registries\nexport function registry() {\n    return new $ZodRegistry();\n}\nexport const globalRegistry = /*@__PURE__*/ registry();\n","import * as checks from \"./checks.js\";\nimport * as schemas from \"./schemas.js\";\nimport * as util from \"./util.js\";\nexport function _string(Class, params) {\n    return new Class({\n        type: \"string\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedString(Class, params) {\n    return new Class({\n        type: \"string\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _email(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"email\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _guid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"guid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v4\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v6\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv7(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v7\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _emoji(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"emoji\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nanoid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"nanoid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid2(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid2\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ulid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ulid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _xid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"xid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ksuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ksuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _e164(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"e164\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _jwt(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"jwt\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport const TimePrecision = {\n    Any: null,\n    Minute: -1,\n    Second: 0,\n    Millisecond: 3,\n    Microsecond: 6,\n};\nexport function _isoDateTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"datetime\",\n        check: \"string_format\",\n        offset: false,\n        local: false,\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDate(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"date\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"time\",\n        check: \"string_format\",\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDuration(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"duration\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _number(Class, params) {\n    return new Class({\n        type: \"number\",\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedNumber(Class, params) {\n    return new Class({\n        type: \"number\",\n        coerce: true,\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"safeint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float64(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"int32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"uint32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _boolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBoolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _bigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"int64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"uint64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _symbol(Class, params) {\n    return new Class({\n        type: \"symbol\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _undefined(Class, params) {\n    return new Class({\n        type: \"undefined\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _null(Class, params) {\n    return new Class({\n        type: \"null\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _any(Class) {\n    return new Class({\n        type: \"any\",\n    });\n}\nexport function _unknown(Class) {\n    return new Class({\n        type: \"unknown\",\n    });\n}\nexport function _never(Class, params) {\n    return new Class({\n        type: \"never\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _void(Class, params) {\n    return new Class({\n        type: \"void\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _date(Class, params) {\n    return new Class({\n        type: \"date\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedDate(Class, params) {\n    return new Class({\n        type: \"date\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nan(Class, params) {\n    return new Class({\n        type: \"nan\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lt(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _lte(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.lte()` instead. */\n_lte as _max, };\nexport function _gt(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _gte(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.gte()` instead. */\n_gte as _min, };\nexport function _positive(params) {\n    return _gt(0, params);\n}\n// negative\nexport function _negative(params) {\n    return _lt(0, params);\n}\n// nonpositive\nexport function _nonpositive(params) {\n    return _lte(0, params);\n}\n// nonnegative\nexport function _nonnegative(params) {\n    return _gte(0, params);\n}\nexport function _multipleOf(value, params) {\n    return new checks.$ZodCheckMultipleOf({\n        check: \"multiple_of\",\n        ...util.normalizeParams(params),\n        value,\n    });\n}\nexport function _maxSize(maximum, params) {\n    return new checks.$ZodCheckMaxSize({\n        check: \"max_size\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n}\nexport function _minSize(minimum, params) {\n    return new checks.$ZodCheckMinSize({\n        check: \"min_size\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _size(size, params) {\n    return new checks.$ZodCheckSizeEquals({\n        check: \"size_equals\",\n        ...util.normalizeParams(params),\n        size,\n    });\n}\nexport function _maxLength(maximum, params) {\n    const ch = new checks.$ZodCheckMaxLength({\n        check: \"max_length\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n    return ch;\n}\nexport function _minLength(minimum, params) {\n    return new checks.$ZodCheckMinLength({\n        check: \"min_length\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _length(length, params) {\n    return new checks.$ZodCheckLengthEquals({\n        check: \"length_equals\",\n        ...util.normalizeParams(params),\n        length,\n    });\n}\nexport function _regex(pattern, params) {\n    return new checks.$ZodCheckRegex({\n        check: \"string_format\",\n        format: \"regex\",\n        ...util.normalizeParams(params),\n        pattern,\n    });\n}\nexport function _lowercase(params) {\n    return new checks.$ZodCheckLowerCase({\n        check: \"string_format\",\n        format: \"lowercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uppercase(params) {\n    return new checks.$ZodCheckUpperCase({\n        check: \"string_format\",\n        format: \"uppercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _includes(includes, params) {\n    return new checks.$ZodCheckIncludes({\n        check: \"string_format\",\n        format: \"includes\",\n        ...util.normalizeParams(params),\n        includes,\n    });\n}\nexport function _startsWith(prefix, params) {\n    return new checks.$ZodCheckStartsWith({\n        check: \"string_format\",\n        format: \"starts_with\",\n        ...util.normalizeParams(params),\n        prefix,\n    });\n}\nexport function _endsWith(suffix, params) {\n    return new checks.$ZodCheckEndsWith({\n        check: \"string_format\",\n        format: \"ends_with\",\n        ...util.normalizeParams(params),\n        suffix,\n    });\n}\nexport function _property(property, schema, params) {\n    return new checks.$ZodCheckProperty({\n        check: \"property\",\n        property,\n        schema,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _mime(types, params) {\n    return new checks.$ZodCheckMimeType({\n        check: \"mime_type\",\n        mime: types,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _overwrite(tx) {\n    return new checks.$ZodCheckOverwrite({\n        check: \"overwrite\",\n        tx,\n    });\n}\n// normalize\nexport function _normalize(form) {\n    return _overwrite((input) => input.normalize(form));\n}\n// trim\nexport function _trim() {\n    return _overwrite((input) => input.trim());\n}\n// toLowerCase\nexport function _toLowerCase() {\n    return _overwrite((input) => input.toLowerCase());\n}\n// toUpperCase\nexport function _toUpperCase() {\n    return _overwrite((input) => input.toUpperCase());\n}\nexport function _array(Class, element, params) {\n    return new Class({\n        type: \"array\",\n        element,\n        // get element() {\n        //   return element;\n        // },\n        ...util.normalizeParams(params),\n    });\n}\nexport function _union(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _discriminatedUnion(Class, discriminator, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _intersection(Class, left, right) {\n    return new Class({\n        type: \"intersection\",\n        left,\n        right,\n    });\n}\n// export function _tuple(\n//   Class: util.SchemaClass<schemas.$ZodTuple>,\n//   items: [],\n//   params?: string | $ZodTupleParams\n// ): schemas.$ZodTuple<[], null>;\nexport function _tuple(Class, items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof schemas.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new Class({\n        type: \"tuple\",\n        items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _record(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"record\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _map(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"map\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _set(Class, valueType, params) {\n    return new Class({\n        type: \"set\",\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _enum(Class, values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    // if (Array.isArray(values)) {\n    //   for (const value of values) {\n    //     entries[value] = value;\n    //   }\n    // } else {\n    //   Object.assign(entries, values);\n    // }\n    // const entries: util.EnumLike = {};\n    // for (const val of values) {\n    //   entries[val] = val;\n    // }\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function _nativeEnum(Class, entries, params) {\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _literal(Class, value, params) {\n    return new Class({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _file(Class, params) {\n    return new Class({\n        type: \"file\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _transform(Class, fn) {\n    return new Class({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport function _optional(Class, innerType) {\n    return new Class({\n        type: \"optional\",\n        innerType,\n    });\n}\nexport function _nullable(Class, innerType) {\n    return new Class({\n        type: \"nullable\",\n        innerType,\n    });\n}\nexport function _default(Class, innerType, defaultValue) {\n    return new Class({\n        type: \"default\",\n        innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport function _nonoptional(Class, innerType, params) {\n    return new Class({\n        type: \"nonoptional\",\n        innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _success(Class, innerType) {\n    return new Class({\n        type: \"success\",\n        innerType,\n    });\n}\nexport function _catch(Class, innerType, catchValue) {\n    return new Class({\n        type: \"catch\",\n        innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport function _pipe(Class, in_, out) {\n    return new Class({\n        type: \"pipe\",\n        in: in_,\n        out,\n    });\n}\nexport function _readonly(Class, innerType) {\n    return new Class({\n        type: \"readonly\",\n        innerType,\n    });\n}\nexport function _templateLiteral(Class, parts, params) {\n    return new Class({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lazy(Class, getter) {\n    return new Class({\n        type: \"lazy\",\n        getter,\n    });\n}\nexport function _promise(Class, innerType) {\n    return new Class({\n        type: \"promise\",\n        innerType,\n    });\n}\nexport function _custom(Class, fn, _params) {\n    const norm = util.normalizeParams(_params);\n    norm.abort ?? (norm.abort = true); // default to abort:false\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...norm,\n    });\n    return schema;\n}\n// same as _custom but defaults to abort:false\nexport function _refine(Class, fn, _params) {\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...util.normalizeParams(_params),\n    });\n    return schema;\n}\nexport function _superRefine(fn) {\n    const ch = _check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort);\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\nexport function _check(fn, params) {\n    const ch = new checks.$ZodCheck({\n        check: \"custom\",\n        ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function _stringbool(Classes, _params) {\n    const params = util.normalizeParams(_params);\n    let truthyArray = params.truthy ?? [\"true\", \"1\", \"yes\", \"on\", \"y\", \"enabled\"];\n    let falsyArray = params.falsy ?? [\"false\", \"0\", \"no\", \"off\", \"n\", \"disabled\"];\n    if (params.case !== \"sensitive\") {\n        truthyArray = truthyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n        falsyArray = falsyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n    }\n    const truthySet = new Set(truthyArray);\n    const falsySet = new Set(falsyArray);\n    const _Pipe = Classes.Pipe ?? schemas.$ZodPipe;\n    const _Boolean = Classes.Boolean ?? schemas.$ZodBoolean;\n    const _String = Classes.String ?? schemas.$ZodString;\n    const _Transform = Classes.Transform ?? schemas.$ZodTransform;\n    const tx = new _Transform({\n        type: \"transform\",\n        transform: (input, payload) => {\n            let data = input;\n            if (params.case !== \"sensitive\")\n                data = data.toLowerCase();\n            if (truthySet.has(data)) {\n                return true;\n            }\n            else if (falsySet.has(data)) {\n                return false;\n            }\n            else {\n                payload.issues.push({\n                    code: \"invalid_value\",\n                    expected: \"stringbool\",\n                    values: [...truthySet, ...falsySet],\n                    input: payload.value,\n                    inst: tx,\n                    continue: false,\n                });\n                return {};\n            }\n        },\n        error: params.error,\n    });\n    // params.error;\n    const innerPipe = new _Pipe({\n        type: \"pipe\",\n        in: new _String({ type: \"string\", error: params.error }),\n        out: tx,\n        error: params.error,\n    });\n    const outerPipe = new _Pipe({\n        type: \"pipe\",\n        in: innerPipe,\n        out: new _Boolean({\n            type: \"boolean\",\n            error: params.error,\n        }),\n        error: params.error,\n    });\n    return outerPipe;\n}\nexport function _stringFormat(Class, format, fnOrRegex, _params = {}) {\n    const params = util.normalizeParams(_params);\n    const def = {\n        ...util.normalizeParams(_params),\n        check: \"string_format\",\n        type: \"string\",\n        format,\n        fn: typeof fnOrRegex === \"function\" ? fnOrRegex : (val) => fnOrRegex.test(val),\n        ...params,\n    };\n    if (fnOrRegex instanceof RegExp) {\n        def.pattern = fnOrRegex;\n    }\n    const inst = new Class(def);\n    return inst;\n}\n","import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport const ZodISODateTime = /*@__PURE__*/ core.$constructor(\"ZodISODateTime\", (inst, def) => {\n    core.$ZodISODateTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function datetime(params) {\n    return core._isoDateTime(ZodISODateTime, params);\n}\nexport const ZodISODate = /*@__PURE__*/ core.$constructor(\"ZodISODate\", (inst, def) => {\n    core.$ZodISODate.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function date(params) {\n    return core._isoDate(ZodISODate, params);\n}\nexport const ZodISOTime = /*@__PURE__*/ core.$constructor(\"ZodISOTime\", (inst, def) => {\n    core.$ZodISOTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function time(params) {\n    return core._isoTime(ZodISOTime, params);\n}\nexport const ZodISODuration = /*@__PURE__*/ core.$constructor(\"ZodISODuration\", (inst, def) => {\n    core.$ZodISODuration.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function duration(params) {\n    return core._isoDuration(ZodISODuration, params);\n}\n","import * as core from \"../core/index.js\";\nimport { $ZodError } from \"../core/index.js\";\nimport * as util from \"../core/util.js\";\nconst initializer = (inst, issues) => {\n    $ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => core.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => core.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => {\n                inst.issues.push(issue);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => {\n                inst.issues.push(...issues);\n                inst.message = JSON.stringify(inst.issues, util.jsonStringifyReplacer, 2);\n            },\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nexport const ZodError = core.$constructor(\"ZodError\", initializer);\nexport const ZodRealError = core.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n","import * as core from \"../core/index.js\";\nimport { ZodRealError } from \"./errors.js\";\nexport const parse = /* @__PURE__ */ core._parse(ZodRealError);\nexport const parseAsync = /* @__PURE__ */ core._parseAsync(ZodRealError);\nexport const safeParse = /* @__PURE__ */ core._safeParse(ZodRealError);\nexport const safeParseAsync = /* @__PURE__ */ core._safeParseAsync(ZodRealError);\n","import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as checks from \"./checks.js\";\nimport * as iso from \"./iso.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodType = /*@__PURE__*/ core.$constructor(\"ZodType\", (inst, def) => {\n    core.$ZodType.init(inst, def);\n    inst.def = def;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone({\n            ...def,\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }\n        // { parent: true }\n        );\n    };\n    inst.clone = (def, params) => core.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(checks.overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return core.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return core.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    return inst;\n});\n/** @internal */\nexport const _ZodString = /*@__PURE__*/ core.$constructor(\"_ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(checks.regex(...args));\n    inst.includes = (...args) => inst.check(checks.includes(...args));\n    inst.startsWith = (...args) => inst.check(checks.startsWith(...args));\n    inst.endsWith = (...args) => inst.check(checks.endsWith(...args));\n    inst.min = (...args) => inst.check(checks.minLength(...args));\n    inst.max = (...args) => inst.check(checks.maxLength(...args));\n    inst.length = (...args) => inst.check(checks.length(...args));\n    inst.nonempty = (...args) => inst.check(checks.minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(checks.lowercase(params));\n    inst.uppercase = (params) => inst.check(checks.uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(checks.trim());\n    inst.normalize = (...args) => inst.check(checks.normalize(...args));\n    inst.toLowerCase = () => inst.check(checks.toLowerCase());\n    inst.toUpperCase = () => inst.check(checks.toUpperCase());\n});\nexport const ZodString = /*@__PURE__*/ core.$constructor(\"ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(core._email(ZodEmail, params));\n    inst.url = (params) => inst.check(core._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(core._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(core._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(core._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(core._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(core._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(core._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(core._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(core._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(core._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(core._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(core._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(core._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(core._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(core._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(core._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(core._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(core._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(core._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(core._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(iso.datetime(params));\n    inst.date = (params) => inst.check(iso.date(params));\n    inst.time = (params) => inst.check(iso.time(params));\n    inst.duration = (params) => inst.check(iso.duration(params));\n});\nexport function string(params) {\n    return core._string(ZodString, params);\n}\nexport const ZodStringFormat = /*@__PURE__*/ core.$constructor(\"ZodStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nexport const ZodEmail = /*@__PURE__*/ core.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodEmail, params);\n}\nexport const ZodGUID = /*@__PURE__*/ core.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodGUID, params);\n}\nexport const ZodUUID = /*@__PURE__*/ core.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodUUID, params);\n}\nexport const ZodURL = /*@__PURE__*/ core.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodURL, params);\n}\nexport const ZodEmoji = /*@__PURE__*/ core.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodEmoji, params);\n}\nexport const ZodNanoID = /*@__PURE__*/ core.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodNanoID, params);\n}\nexport const ZodCUID = /*@__PURE__*/ core.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodCUID, params);\n}\nexport const ZodCUID2 = /*@__PURE__*/ core.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodCUID2, params);\n}\nexport const ZodULID = /*@__PURE__*/ core.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodULID, params);\n}\nexport const ZodXID = /*@__PURE__*/ core.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodXID, params);\n}\nexport const ZodKSUID = /*@__PURE__*/ core.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodKSUID, params);\n}\nexport const ZodIPv4 = /*@__PURE__*/ core.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodIPv4, params);\n}\nexport const ZodIPv6 = /*@__PURE__*/ core.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodIPv6, params);\n}\nexport const ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodCIDRv4, params);\n}\nexport const ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodCIDRv6, params);\n}\nexport const ZodBase64 = /*@__PURE__*/ core.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodBase64, params);\n}\nexport const ZodBase64URL = /*@__PURE__*/ core.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodBase64URL, params);\n}\nexport const ZodE164 = /*@__PURE__*/ core.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodE164, params);\n}\nexport const ZodJWT = /*@__PURE__*/ core.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodJWT, params);\n}\nexport const ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nexport function hostname(_params) {\n    return core._stringFormat(ZodCustomStringFormat, \"hostname\", core.regexes.hostname, _params);\n}\nexport const ZodNumber = /*@__PURE__*/ core.$constructor(\"ZodNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(checks.gt(0, params));\n    inst.nonnegative = (params) => inst.check(checks.gte(0, params));\n    inst.negative = (params) => inst.check(checks.lt(0, params));\n    inst.nonpositive = (params) => inst.check(checks.lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    inst.step = (value, params) => inst.check(checks.multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nexport function number(params) {\n    return core._number(ZodNumber, params);\n}\nexport const ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nexport function int(params) {\n    return core._int(ZodNumberFormat, params);\n}\nexport function float32(params) {\n    return core._float32(ZodNumberFormat, params);\n}\nexport function float64(params) {\n    return core._float64(ZodNumberFormat, params);\n}\nexport function int32(params) {\n    return core._int32(ZodNumberFormat, params);\n}\nexport function uint32(params) {\n    return core._uint32(ZodNumberFormat, params);\n}\nexport const ZodBoolean = /*@__PURE__*/ core.$constructor(\"ZodBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function boolean(params) {\n    return core._boolean(ZodBoolean, params);\n}\nexport const ZodBigInt = /*@__PURE__*/ core.$constructor(\"ZodBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.positive = (params) => inst.check(checks.gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(checks.lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(checks.lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(checks.gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nexport function bigint(params) {\n    return core._bigint(ZodBigInt, params);\n}\nexport const ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodBigIntFormat, params);\n}\nexport const ZodSymbol = /*@__PURE__*/ core.$constructor(\"ZodSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function symbol(params) {\n    return core._symbol(ZodSymbol, params);\n}\nexport const ZodUndefined = /*@__PURE__*/ core.$constructor(\"ZodUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodNull = /*@__PURE__*/ core.$constructor(\"ZodNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _null(params) {\n    return core._null(ZodNull, params);\n}\nexport { _null as null };\nexport const ZodAny = /*@__PURE__*/ core.$constructor(\"ZodAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function any() {\n    return core._any(ZodAny);\n}\nexport const ZodUnknown = /*@__PURE__*/ core.$constructor(\"ZodUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function unknown() {\n    return core._unknown(ZodUnknown);\n}\nexport const ZodNever = /*@__PURE__*/ core.$constructor(\"ZodNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function never(params) {\n    return core._never(ZodNever, params);\n}\nexport const ZodVoid = /*@__PURE__*/ core.$constructor(\"ZodVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _void(params) {\n    return core._void(ZodVoid, params);\n}\nexport { _void as void };\nexport const ZodDate = /*@__PURE__*/ core.$constructor(\"ZodDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nexport function date(params) {\n    return core._date(ZodDate, params);\n}\nexport const ZodArray = /*@__PURE__*/ core.$constructor(\"ZodArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(checks.minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(checks.minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(checks.maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(checks.length(len, params));\n    inst.unwrap = () => inst.element;\n});\nexport function array(element, params) {\n    return core._array(ZodArray, element, params);\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return literal(Object.keys(shape));\n}\nexport const ZodObject = /*@__PURE__*/ core.$constructor(\"ZodObject\", (inst, def) => {\n    core.$ZodObject.init(inst, def);\n    ZodType.init(inst, def);\n    util.defineLazy(inst, \"shape\", () => def.shape);\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return util.extend(inst, incoming);\n    };\n    inst.merge = (other) => util.merge(inst, other);\n    inst.pick = (mask) => util.pick(inst, mask);\n    inst.omit = (mask) => util.omit(inst, mask);\n    inst.partial = (...args) => util.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => util.required(ZodNonOptional, inst, args[0]);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        ...util.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodUnion = /*@__PURE__*/ core.$constructor(\"ZodUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst.options = def.options;\n});\nexport function union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodDiscriminatedUnion.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodIntersection = /*@__PURE__*/ core.$constructor(\"ZodIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodTuple = /*@__PURE__*/ core.$constructor(\"ZodTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodRecord = /*@__PURE__*/ core.$constructor(\"ZodRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nexport function partialRecord(keyType, valueType, params) {\n    const k = core.clone(keyType);\n    k._zod.values = undefined;\n    return new ZodRecord({\n        type: \"record\",\n        keyType: k,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMap = /*@__PURE__*/ core.$constructor(\"ZodMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSet = /*@__PURE__*/ core.$constructor(\"ZodSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEnum = /*@__PURE__*/ core.$constructor(\"ZodEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLiteral = /*@__PURE__*/ core.$constructor(\"ZodLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nexport function literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodFile = /*@__PURE__*/ core.$constructor(\"ZodFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (size, params) => inst.check(core._minSize(size, params));\n    inst.max = (size, params) => inst.check(core._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(core._mime(Array.isArray(types) ? types : [types], params));\n});\nexport function file(params) {\n    return core._file(ZodFile, params);\n}\nexport const ZodTransform = /*@__PURE__*/ core.$constructor(\"ZodTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                // _issue.continue ??= true;\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nexport function transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodOptional = /*@__PURE__*/ core.$constructor(\"ZodOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodNullable = /*@__PURE__*/ core.$constructor(\"ZodNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodDefault = /*@__PURE__*/ core.$constructor(\"ZodDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodPrefault = /*@__PURE__*/ core.$constructor(\"ZodPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodNonOptional = /*@__PURE__*/ core.$constructor(\"ZodNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSuccess = /*@__PURE__*/ core.$constructor(\"ZodSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodCatch = /*@__PURE__*/ core.$constructor(\"ZodCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodNaN = /*@__PURE__*/ core.$constructor(\"ZodNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function nan(params) {\n    return core._nan(ZodNaN, params);\n}\nexport const ZodPipe = /*@__PURE__*/ core.$constructor(\"ZodPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nexport function pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nexport const ZodReadonly = /*@__PURE__*/ core.$constructor(\"ZodReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLazy = /*@__PURE__*/ core.$constructor(\"ZodLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nexport function lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport const ZodPromise = /*@__PURE__*/ core.$constructor(\"ZodPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodCustom = /*@__PURE__*/ core.$constructor(\"ZodCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n});\n// custom checks\nexport function check(fn) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function custom(fn, _params) {\n    return core._custom(ZodCustom, fn ?? (() => true), _params);\n}\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodCustom, fn, _params);\n}\n// superRefine\nexport function superRefine(fn) {\n    return core._superRefine(fn);\n}\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ...util.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Pipe: ZodPipe,\n    Boolean: ZodBoolean,\n    String: ZodString,\n    Transform: ZodTransform,\n}, ...args);\nexport function json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nexport function preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n","import { z } from 'zod'\n\nexport type ChartType =\n  | 'table'\n  | 'pivotTable'\n  // cartesian\n  | 'line'\n  | 'column'\n  | 'columnPercent'\n  | 'columnParallel'\n  | 'bar'\n  | 'barPercent'\n  | 'barParallel'\n  | 'area'\n  | 'areaPercent'\n  | 'scatter'\n  | 'dualAxis'\n  // polar\n  | 'rose'\n  | 'roseParallel'\n  | 'pie'\n  | 'donut'\n  | 'radar'\n  // other\n  | 'heatmap'\n  | 'funnel'\n  | 'boxPlot'\n  | 'histogram'\n\nexport const zChartType = z.enum([\n  'table',\n  'pivotTable',\n  // cartesian\n  'line',\n  'column',\n  'columnPercent',\n  'columnParallel',\n  'bar',\n  'barPercent',\n  'barParallel',\n  'area',\n  'areaPercent',\n  'scatter',\n  'dualAxis',\n  // polar\n  'rose',\n  'roseParallel',\n  'pie',\n  'donut',\n  'radar',\n  // other\n  'funnel',\n  'heatmap',\n  'boxPlot',\n  'histogram',\n])\n","import { z } from 'zod'\n\n// 'columnPercent' 和 'areaPercent' 会改变轴值域为[0,1], VTable不支持.\nexport const zDualChartType = z.object({\n  primary: z.enum(['line', 'column', 'columnParallel', 'area', 'scatter']).default('column'),\n  secondary: z.enum(['line', 'column', 'columnParallel', 'area', 'scatter']).default('line'),\n})\n\nexport type DualChartType = z.infer<typeof zDualChartType>\n","import { z } from 'zod'\n\n/**\n * example dataset link:\n * [\n *    { date: '2019', 20001:'type', profit:10, sales: null, },\n *    { date: '2020', 20001:'type', profit:30, sales: -1.1, },\n *    { date: '2021', 20001:'type', profit:30, sales: 1, },\n *    { date: '2023', 20001:'type', profit:40, sales: undefined, },\n *    { date: '2022', 20001:'type', profit:50, sales: 100, },\n * ]\n */\nexport const zDatum = z.record(z.string().or(z.number()), z.any())\nexport const zDataset = z.array(zDatum)\n\nexport type Datum = z.infer<typeof zDatum>\nexport type Dataset = z.infer<typeof zDataset>\n","import { z } from 'zod'\nimport type { DimensionGroup } from './dimensions'\n\nexport const zDimension = z.object({\n  id: z.string(),\n  alias: z.string().optional(),\n  encoding: z.enum(['xAxis', 'yAxis', 'angle', 'color', 'detail', 'tooltip', 'label', 'row', 'column']).optional(),\n})\nexport const zDimensionGroup: z.ZodType<DimensionGroup> = z.object({\n  id: z.string(),\n  alias: z.string().optional(),\n  get children() {\n    return z.array(zDimensionGroup.or(zDimension)).optional()\n  },\n})\nexport const zDimensions = z.array(zDimension)\nexport const zDimensionTree = z.array(zDimensionGroup.or(zDimension))\n","import { z } from 'zod'\n\nexport interface NumFormat {\n  /**\n   * @description 数字格式化类型, 支持数值(十进制)、百分比(%)、千分比(‰)、科学计数法\n   * @default 'number'\n   */\n  type?: 'number' | 'percent' | 'permille' | 'scientific'\n\n  /**\n   * @description 数值格式化比例, 不能为0\n   * @default 1\n   * @example\n   * - 100000 转换为 10万, ratio:10000, symbol:\"万\"\n   * - 100000 转换为 10K, ratio:1000, symbol:\"K\"\n   */\n  ratio?: number\n\n  /**\n   * @description 数值格式化符号, 例如%、‰\n   * @default ''\n   * @example\n   * - 100000 转换为 10万, ratio:10000, symbol:\"万\"\n   * - 100000 转换为 10K, ratio:1000, symbol:\"K\"\n   */\n  symbol?: string\n\n  /**\n   * @description 数值格式化千分位分隔符\n   * @default true\n   */\n  thousandSeparator?: boolean\n\n  /**\n   * @description 数值格式化后缀\n   * @default ''\n   */\n  suffix?: string\n  /**\n   * @description 数值格式化前缀\n   * @default ''\n   */\n  prefix?: string\n\n  /**\n   * @description 数值格式化小数位, 使用浏览器提供的 Intl.NumberFormat 中的 minimumFractionDigits 和 maximumFractionDigits 进行格式化, 优先级低于 significantDigits\n   * @default 2\n   * @example\n   * - 1234.5678 转换为 1235, fractionDigits:0 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.6, fractionDigits:1 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.57, fractionDigits:2 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1230.568, fractionDigits:3 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.5678, fractionDigits:4 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.56780, fractionDigits:5 (roundingMode:halfCeil)\n   */\n  fractionDigits?: number\n\n  /**\n   * @description 数值格式化有效位, 使用浏览器提供的 Intl.NumberFormat 中的 minimumSignificantDigits 和 maximumSignificantDigits 进行格式化, 优先级高于 fractionDigits\n   * @default undefined\n   * @example\n   * - 1234.5678 转换为 1000, significantDigits:1\n   * - 1234.5678 转换为 1200, significantDigits:2\n   * - 1234.5678 转换为 1230, significantDigits:3\n   * - 1234.5678 转换为 1234, significantDigits:4\n   * - 1234.5678 转换为 1234.6, significantDigits:5 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.57, significantDigits:6 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.568, significantDigits:7 (roundingMode:halfCeil)\n   * - 1234.5678 转换为 1234.5678, significantDigits:8 (roundingMode:halfCeil)\n   */\n  significantDigits?: number\n\n  /**\n   * @description 数值格式化舍入优先级, 处理同时设置了 significantDigits 和 fractionDigits 时的舍入优先级, 使用浏览器提供的 Intl.NumberFormat 进行格式化, 规则同 Intl.NumberFormat 中的 roundingPriority\n   * @default 'morePrecision'\n   * @example\n   * - 1234.5678 转换为 1230, significantDigits:3 (roundingPriority:lessPrecision)\n   * - 1234.5678 转换为 1234.5678, significantDigits:3 (roundingPriority:morePrecision)\n   */\n  roundingPriority?: 'morePrecision' | 'lessPrecision'\n\n  /**\n   * @description 数值格式化舍入模式, 使用浏览器提供的 Intl.NumberFormat 进行格式化, 规则同 Intl.NumberFormat 中的 roundingMode\n   * @default 'halfExpand'\n   * @example\n   */\n  roundingMode?:\n    | 'floor'\n    | 'ceil'\n    | 'expand'\n    | 'trunc'\n    | 'halfCeil'\n    | 'halfFloor'\n    | 'halfExpand'\n    | 'halfTrunc'\n    | 'halfEven'\n}\n\nexport const zNumFormat = z\n  .object({\n    type: z.enum(['number', 'percent', 'permille', 'scientific']).default('number').optional(),\n    ratio: z.number().default(1).optional(),\n    symbol: z.string().default('').optional(),\n    thousandSeparator: z.boolean().default(false).optional(),\n    prefix: z.string().default('').optional(),\n    suffix: z.string().default('').optional(),\n\n    fractionDigits: z.number().default(2).optional(),\n    significantDigits: z.number().default(0).optional(),\n    roundingPriority: z.enum(['morePrecision', 'lessPrecision']).default('morePrecision').optional(),\n    roundingMode: z\n      .enum(['floor', 'ceil', 'halfEven', 'expand', 'trunc', 'halfFloor', 'halfCeil', 'halfExpand', 'halfTrunc'])\n      .default('halfCeil')\n      .optional(),\n  })\n  .optional()\n","import { z } from 'zod'\nimport { zNumFormat } from '../format/numFormat'\nimport type { MeasureGroup } from './measures'\n\nexport const zMeasure = z.object({\n  id: z.string(),\n  alias: z.string().optional(),\n  autoFormat: z.boolean().optional(),\n  numFormat: zNumFormat.optional(),\n  format: zNumFormat.optional(),\n  encoding: z\n    .enum([\n      'primaryYAxis',\n      'secondaryYAxis',\n      'xAxis',\n      'yAxis',\n      'angle',\n      'radius',\n      'size',\n      'color',\n      'label',\n      'tooltip',\n      'detail',\n      'column',\n      'value',\n      'q1',\n      'q3',\n      'min',\n      'max',\n      'median',\n      'outliers',\n      'x0',\n      'x1',\n    ])\n    .optional(),\n  parentId: z.string().optional(),\n})\n\nexport const zMeasureGroup: z.ZodType<MeasureGroup> = z.object({\n  id: z.string(),\n  alias: z.string().optional(),\n  get children() {\n    return z.array(zMeasureGroup.or(zMeasure)).optional()\n  },\n})\n\nexport const zMeasures = z.array(zMeasure)\nexport const zMeasureTree = z.array(zMeasureGroup.or(zMeasure))\n","import { z } from 'zod'\nimport { zMeasure } from './zMeasures'\n\nexport const zDualMeasure = z.object({\n  id: z.string(),\n\n  primaryMeasures: z\n    .array(\n      zMeasure.omit({\n        encoding: true,\n        parentId: true,\n      }),\n    )\n    .or(\n      zMeasure.omit({\n        parentId: true,\n        encoding: true,\n      }),\n    )\n    .optional(),\n\n  secondaryMeasures: z.array(zMeasure).or(zMeasure).optional(),\n})\n\nexport const zDualMeasures = z.array(zDualMeasure)\n","import { z } from 'zod'\nimport { zMeasure } from './zMeasures'\n\nexport const zScatterMeasure = z.object({\n  id: z.string(),\n\n  xMeasures: z\n    .array(\n      zMeasure.omit({\n        parentId: true,\n        encoding: true,\n      }),\n    )\n    .or(zMeasure)\n    .optional(),\n\n  yMeasures: z\n    .array(\n      zMeasure.omit({\n        parentId: true,\n        encoding: true,\n      }),\n    )\n    .or(zMeasure)\n    .optional(),\n})\n\nexport const zScatterMeasures = z.array(zScatterMeasure)\n","import { z } from 'zod'\n\nexport const zFoldInfo = z.object({\n  foldMap: z.record(z.string(), z.string().or(z.undefined())),\n  statistics: z.object({\n    min: z.number(),\n    max: z.number(),\n    sum: z.number(),\n    count: z.number(),\n    colorMin: z.number(),\n    colorMax: z.number(),\n  }),\n  measureId: z.string(),\n  measureName: z.string(),\n  measureValue: z.string(),\n})\nexport const zUnfoldInfo = z.object({\n  encodingX: z.string(),\n  encodingY: z.string(),\n  encodingColor: z.string(),\n  encodingColorId: z.string(),\n  encodingDetail: z.string(),\n  encodingAngle: z.string(),\n  colorItems: z.array(z.string()),\n  colorIdMap: z.record(z.string(), z.object({ id: z.string(), alias: z.string() })),\n})\n\nexport const zDatasetReshapeInfo = z.array(\n  z.object({\n    id: z.string(),\n    index: z.number(),\n    foldInfo: zFoldInfo,\n    foldInfoList: z.array(zFoldInfo).nullish(),\n    unfoldInfo: zUnfoldInfo,\n  }),\n)\n","import { z } from 'zod'\n\nexport const zEncoding = z.object({\n  x: z.array(z.string()).nullish(),\n  y: z.array(z.string()).nullish(),\n  angle: z.array(z.string()).nullish(),\n  radius: z.array(z.string()).nullish(),\n  detail: z.array(z.string()).nullish(),\n\n  color: z.array(z.string()).nullish(),\n  size: z.array(z.string()).nullish(),\n  tooltip: z.array(z.string()).nullish(),\n  label: z.array(z.string()).nullish(),\n\n  row: z.array(z.string()).nullish(),\n  column: z.array(z.string()).nullish(),\n\n  group: z.array(z.string()).nullish().describe('已弃用, 请使用颜色替代'),\n  value: z.array(z.string()).nullish(),\n  q1: z.array(z.string()).nullish(),\n  q3: z.array(z.string()).nullish(),\n  median: z.array(z.string()).nullish(),\n  min: z.array(z.string()).nullish(),\n  max: z.array(z.string()).nullish(),\n  outliers: z.array(z.string()).nullish(),\n\n  x0: z.array(z.string()).nullish(),\n  x1: z.array(z.string()).nullish(),\n})\n\n/**\n * @description 仅VSeed内AdvancedVSeed使用此结构, 其余场景请使用DimensionEncodingEnum、MeasureEncodingEnum\n */\nexport const EncodingEnum = {\n  x: 'x',\n  y: 'y',\n  angle: 'angle',\n  radius: 'radius',\n  detail: 'detail',\n\n  color: 'color',\n  size: 'size',\n  tooltip: 'tooltip',\n  label: 'label',\n\n  row: 'row',\n  column: 'column',\n\n  group: 'group',\n} as const\n","import { z } from 'zod'\n\nexport const zDimensionEncoding = z.enum([\n  'xAxis',\n  'yAxis',\n  'angle',\n  'color',\n  'detail',\n  'tooltip',\n  'label',\n  'row',\n  'column',\n])\n\nexport const DimensionEncodingEnum = {\n  xAxis: 'xAxis',\n  yAxis: 'yAxis',\n  angle: 'angle',\n  color: 'color',\n  detail: 'detail',\n  tooltip: 'tooltip',\n  label: 'label',\n  row: 'row',\n  column: 'column',\n} as const\n","import { z } from 'zod'\n\nexport const zMeasureEncoding = z.enum([\n  'primaryYAxis',\n  'secondaryYAxis',\n  'xAxis',\n  'yAxis',\n  'angle',\n  'radius',\n  'size',\n  'color',\n  'detail',\n  'column',\n  'label',\n  'tooltip',\n])\n\nexport const MeasureEncodingEnum = {\n  primaryYAxis: 'primaryYAxis',\n  secondaryYAxis: 'secondaryYAxis',\n  xAxis: 'xAxis',\n  yAxis: 'yAxis',\n  angle: 'angle',\n  radius: 'radius',\n  size: 'size',\n  color: 'color',\n  detail: 'detail',\n  column: 'column',\n  label: 'label',\n  tooltip: 'tooltip',\n} as const\n","import { z } from 'zod'\nexport const zBackgroundColor = z.string().default('transparent').nullish()\n\n/**\n * 图表的背景颜色\n * @default transparent 默认为透明背景\n * @description 背景颜色可以是颜色字符串, 例如'red', 'blue', 也可以是hex, rgb或rgba'#ff0000', 'rgba(255,0,0,0.5)'\n */\nexport type BackgroundColor = string | undefined\n","import { z } from 'zod'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\n\nexport const zTableConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n\n  // Border\n  borderColor: z.string().nullish(),\n\n  // Body\n  bodyFontSize: z.number().nullish(),\n  bodyFontColor: z.string().nullish(),\n  bodyBackgroundColor: z.string().nullish(),\n  // Body interaction\n  hoverBodyBackgroundColor: z.string().nullish(),\n  hoverBodyInlineBackgroundColor: z.string().nullish(),\n\n  // Header\n  headerFontSize: z.number().nullish(),\n  headerFontColor: z.string().nullish(),\n  headerBackgroundColor: z.string().nullish(),\n  // Header interaction\n  hoverHeaderBackgroundColor: z.string().nullish(),\n  hoverHeaderInlineBackgroundColor: z.string().nullish(),\n\n  // Interaction\n  selectedBorderColor: z.string().nullish(),\n  selectedBackgroundColor: z.string().nullish(),\n})\n\nexport type TableConfig = z.infer<typeof zTableConfig>\n","import { z } from 'zod'\n\nexport const zXBandAxis = z.object({\n  visible: z.boolean().default(true).nullish(),\n\n  labelAutoHide: z.boolean().default(true).nullish(),\n  labelAutoHideGap: z.number().default(0).nullish(),\n  labelAutoRotate: z.boolean().default(true).nullish(),\n  labelAutoRotateAngleRange: z.array(z.number()).default([0, -45, -90]).nullish(),\n  labelAutoLimit: z.boolean().default(true).nullish(),\n  labelAutoLimitLength: z.number().default(100).nullish(),\n  label: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      labelColor: z.string().default('#797B85').nullish(),\n      labelFontSize: z.number().default(12).nullish(),\n      labelFontWeight: z.number().default(400).nullish(),\n      labelAngle: z.number().default(0).nullish(),\n    })\n    .nullish(),\n  line: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      lineColor: z.string().default('rgba(54, 65, 89, 0.30)').nullish(),\n      lineWidth: z.number().default(1).nullish(),\n    })\n    .nullish(),\n  tick: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      tickInside: z.boolean().default(false).nullish(),\n      tickColor: z.string().default('rgba(54, 65, 89, 0.30)').nullish(),\n      tickSize: z.number().default(4).nullish(),\n    })\n    .nullish(),\n  title: z\n    .object({\n      visible: z.boolean().default(false).nullish(),\n      titleText: z.string().default('').nullish(),\n      titleColor: z.string().default('#646A73').nullish(),\n      titleFontSize: z.number().default(12).nullish(),\n      titleFontWeight: z.number().default(400).nullish(),\n    })\n    .nullish(),\n  grid: z\n    .object({\n      visible: z.boolean().default(false).nullish(),\n      gridColor: z.string().default('rgba(54, 65, 89, 0.15)').nullish(),\n      gridWidth: z.number().default(0.5).nullish(),\n      gridLineDash: z.array(z.number()).nullish(),\n    })\n    .nullish(),\n})\nexport const zYBandAxis = zXBandAxis\n","import { z } from 'zod'\nimport { zNumFormat } from '../../format'\n\nexport const zXLinearAxis = z.object({\n  visible: z.boolean().default(true).nullish(),\n\n  min: z.number().nullish(),\n  max: z.number().nullish(),\n  nice: z.boolean().default(true).nullish(),\n  zero: z.boolean().default(true).nullish(),\n  log: z.boolean().default(false).nullish(),\n  logBase: z.number().default(10).nullish(),\n  inverse: z.boolean().default(false).nullish(),\n  numFormat: zNumFormat.nullish(),\n  label: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      labelColor: z.string().default('#797B85').nullish(),\n      labelFontSize: z.number().default(12).nullish(),\n      labelFontWeight: z.number().default(400).nullish(),\n      labelAngle: z.number().default(0).nullish(),\n    })\n    .nullish(),\n  line: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      lineColor: z.string().default('rgba(54, 65, 89, 0.30)').nullish(),\n      lineWidth: z.number().default(1).nullish(),\n    })\n    .nullish(),\n  tick: z\n    .object({\n      visible: z.boolean().default(true).nullish(),\n      tickInside: z.boolean().default(false).nullish(),\n      tickColor: z.string().default('rgba(54, 65, 89, 0.30)').nullish(),\n      tickSize: z.number().default(4).nullish(),\n    })\n    .nullish(),\n  title: z\n    .object({\n      visible: z.boolean().default(false).nullish(),\n      titleText: z.string().default('').nullish(),\n      titleColor: z.string().default('#646A73').nullish(),\n      titleFontSize: z.number().default(12).nullish(),\n      titleFontWeight: z.number().default(400).nullish(),\n    })\n    .nullish(),\n  grid: z\n    .object({\n      visible: z.boolean().default(false).nullish(),\n      gridColor: z.string().default('rgba(54, 65, 89, 0.15)').nullish(),\n      gridWidth: z.number().default(0.5).nullish(),\n      gridLineDash: z.array(z.number()).nullish(),\n    })\n    .nullish(),\n})\n\nexport const zYLinearAxis = zXLinearAxis\n","import { z } from 'zod'\n\nexport const zCrosshairLine = z.object({\n  visible: z.boolean().nullish(),\n  lineColor: z.string().nullish(),\n  labelColor: z.string().nullish(),\n  labelVisible: z.boolean().nullish(),\n  labelBackgroundColor: z.string().nullish(),\n  lineDash: z.array(z.number()).nullish(),\n})\n\nexport const zCrosshairRect = z.object({\n  visible: z.boolean().nullish(),\n  rectColor: z.string().nullish(),\n  labelColor: z.string().nullish(),\n  labelVisible: z.boolean().nullish(),\n  labelBackgroundColor: z.string().nullish(),\n})\n","import { z } from 'zod'\n\nexport const zColor = z.object({\n  colorScheme: z.array(z.string()).nullish(),\n  linearColorScheme: z.array(z.string()).nullish(),\n  colorMapping: z.record(z.string(), z.string()).nullish(),\n})\n\nexport const zLinearColor = z.object({\n  linearColorScheme: z.array(z.string()).nullish(),\n})\n\nexport type Color = {\n  /**\n   * @description 离散颜色配色方案, 颜色配色方案用于定义图表中不同元素的颜色\n   * @example ['#FFCDD2,#F8BBD0,#E1BEE7,#D1C4E9,#C5CAE9,#BBDEFB,#B3E5FC,#B2EBF2,#B2DFDB,#C8E6C9,#DCEDC8,#F0F4C3,#FFF9C4,#FFECB3,#FFE0B2']\n   */\n  colorScheme?: string[]\n  /**\n   * @description 线性渐变颜色配色方案, 线性渐变颜色配色方案用于定义图表中不同元素的颜色\n   * @example ['#FFCDD2, #F8BBD0]\n   */\n  linearColorScheme?: string[]\n  /**\n   * @description 颜色映射, 颜色映射用于将数据值映射到具体的颜色\n   * @example\n   * {\n   *  'profit': 'red',\n   *  'sales': 'blue',\n   * }\n   */\n  colorMapping?: Record<string, string>\n  /**\n   * @description 正负颜色配置, 用于定义图表中正值的颜色\n   */\n  positiveColor?: string\n  /**\n   * @description 正负颜色配置, 用于定义图表中负值的颜色\n   */\n  negativeColor?: string\n}\n","import { z } from 'zod'\nimport type { Datum } from '../properties'\n\nexport type ValueSelector = string | number\n\nexport type PartialDatumSelector = Datum\n\n/**\n * @description 指标选择器, 用于选择数据项中指标字段的值\n */\nexport type MeasureSelector = {\n  /**\n   * @description 指标字段, measures 某一项的 id\n   */\n  field: string\n  /**\n   * @description 操作符\n   * - =: 选择数据项中指标字段的值等于 value 的数据项\n   * - ==: 选择数据项中指标字段的值等于 value 的数据项\n   * - !=: 选择数据项中指标字段的值不等于 value 的数据项\n   * - >: 选择数据项中指标字段的值大于 value 的数据项\n   * - <: 选择数据项中指标字段的值小于 value 的数据项\n   * - >=: 选择数据项中指标字段的值大于等于 value 的数据项\n   * - <=: 选择数据项中指标字段的值小于等于 value 的数据项\n   * - between: 选择数据项中指标字段的值在 value 之间的 data item\n   */\n  operator?: '=' | '==' | '!=' | '>' | '<' | '>=' | '<=' | 'between'\n  /**\n   * @description 操作符\n   * - =: 选择数据项中指标字段的值等于 value 的数据项, 会将值转换为字符串后进行比较, 因此 1 == \"1\" 为 true\n   * - ==: 选择数据项中指标字段的值精准等于 value 的数据项, 不会做任何特殊处理, 因此 1 == \"1\" 为 false\n   * - !=: 选择数据项中指标字段的值不等于 value 的数据项\n   * - >: 选择数据项中指标字段的值大于 value 的数据项\n   * - <: 选择数据项中指标字段的值小于 value 的数据项\n   * - >=: 选择数据项中指标字段的值大于等于 value 的数据项\n   * - <=: 选择数据项中指标字段的值小于等于 value 的数据项\n   * - between: 选择数据项中指标字段的值在 value 之间的 data item\n   * same as operator\n   */\n  op?: '=' | '==' | '!=' | '>' | '<' | '>=' | '<=' | 'between'\n  /**\n   * @description 选择数据项中指标字段的值\n   * - 仅 op 为 between 时, value 为长度为2的数组, 数组中的元素为指标字段的最小值和最大值\n   * - 其他情况, value 为指标字段的单个值\n   */\n  value: string | number | Array<string | number>\n  // /**\n  //  * @description 是否使用原始数据进行数据匹配, 开启后会有更多的数据被匹配到\n  //  * 若下述数据, measures 仅设置了 value, field 为 isHigh 或 isLow, op 为 =, value 为 1,\n  //  * 关闭useOrigin时, 数据项并不会考虑measures之外的字段, 因此field为isHigh或isLow的字段会被忽略\n  //  * 开启useOrigin时, 会直接使用整个数据项进行匹配\n  //  * [\n  //  *  {value: 100, isHigh: 1, isLow: 0},\n  //  *  {value: 200, isHigh: 0, isLow: 1},\n  //  *  {value: 300, isHigh: 1, isLow: 0},\n  //  * ]\n  //  * @default false\n  //  */\n  // useOrigin?: boolean\n}\n\n/**\n * @description 维度选择器, 用于选择数据项中维度字段的值\n */\nexport type DimensionSelector = {\n  /**\n   * @description 维度字段, dimensions 某一项的 id\n   */\n  field: string\n  /**\n   * @description 操作符\n   * - in: 选择数据项中维度字段的值在 value 中的数据项\n   * - not in: 选择数据项中维度字段的值不在 value 中的数据项\n   */\n  operator?: 'in' | 'not in'\n  /**\n   * @description 操作符\n   * - in: 选择数据项中维度字段的值在 value 中的数据项\n   * - not in: 选择数据项中维度字段的值不在 value 中的数据项\n   * same as operator\n   */\n  op?: 'in' | 'not in'\n  /**\n   * @description 选择数据项中维度字段的值, 支持数组\n   */\n  value: string | number | Array<string | number>\n  // /**\n  //  * @description 是否使用原始数据进行数据匹配, 开启后会有更多的数据被匹配到\n  //  * 若下述数据, dimensions 仅设置了 name, field 为 name, op 为 =, value 为 \"high\",\n  //  * 关闭useOrigin时, 数据项并不会考虑dimensions之外的字段, 因此field为name的字段会被忽略\n  //  * 开启useOrigin时, 会直接使用整个数据项进行匹配\n  //  * [\n  //  *  {name: \"low\", isHigh: \"false\", isLow: \"true\"},\n  //  *  {name: \"low\", isHigh: \"false\", isLow: \"true\"},\n  //  *  {name: \"high\", isHigh: \"true\", isLow: \"false\"},\n  //  * ]\n  //  * @default false\n  //  */\n  // useOrigin?: boolean\n}\n\nexport type Selector = ValueSelector | PartialDatumSelector | MeasureSelector | DimensionSelector\n\nexport type Selectors = Array<Selector>\n\nexport const zSelector = z.union([\n  z.string(),\n  z.number(),\n  z.object({\n    field: z.string(),\n    operator: z.enum(['=', '==', '!=', '>', '<', '>=', '<=', 'between']).nullish(),\n    op: z.enum(['=', '==', '!=', '>', '<', '>=', '<=', 'between']).nullish(),\n    value: z.union([z.string(), z.number(), z.array(z.union([z.string(), z.number()]))]),\n  }),\n  z.object({\n    field: z.string(),\n    operator: z.enum(['in', 'not in']).nullish(),\n    op: z.enum(['in', 'not in']).nullish(),\n    value: z.union([z.string(), z.number(), z.array(z.union([z.string(), z.number()]))]),\n  }),\n])\n\nexport const zSelectors = z.array(zSelector)\n","import { z } from 'zod'\nimport { zNumFormat } from '../../format'\nimport { zSelector, zSelectors } from 'src/types/dataSelector'\n\nexport const zLabel = z.object({\n  enable: z.boolean().nullish(),\n  wrap: z.boolean().nullish(),\n  showValue: z.boolean().nullish(),\n  showValuePercent: z.boolean().nullish(),\n  showDimension: z.boolean().nullish(),\n  autoFormat: z.boolean().nullish(),\n  numFormat: zNumFormat.nullish(),\n  labelFontSize: z.number().nullish(),\n  labelFontWeight: z.number().or(z.string()).nullish(),\n  labelBackgroundColor: z.string().nullish(),\n  labelColor: z.string().nullish(),\n  labelColorSmartInvert: z.boolean().nullish(),\n  labelPosition: z.string().nullish(),\n  labelOverlap: z.boolean().nullish(),\n  selector: z.union([zSelector, zSelectors]).nullish(),\n})\n","import { z } from 'zod'\n\nexport type Legend = {\n  /**\n   * 图例功能是否开启\n   * @default true\n   * @example enable: true\n   */\n  enable?: boolean\n  /**\n   * @description 图例边框是否开启\n   * @warning 仅离散图例生效\n   * @default true\n   * @example border: true\n   */\n  border?: boolean\n\n  /**\n   * @description 图例字体颜色\n   */\n  labelColor?: string\n  /**\n   * @description 分页器icon颜色\n   */\n  pagerIconColor?: string\n  /**\n   * @description 分页器icon置灰颜色\n   */\n  pagerIconDisableColor?: string\n  /**\n   * @description 图例字体大小\n   * @example labelFontSize: 10\n   */\n  labelFontSize?: number\n\n  /**\n   * @description 图例字体颜色\n   * @deprecated use labelColor instead\n   */\n  labelFontColor?: string\n\n  /**\n   * @description 图例字体粗细\n   * @example labelFontWeight: 400\n   */\n  labelFontWeight?: number | string\n  /**\n   * @description 图例形状\n   * @warning 仅离散图例生效\n   * @example shapeType: 'circle'\n   */\n  shapeType?:\n    | 'circle'\n    | 'cross'\n    | 'diamond'\n    | 'square'\n    | 'arrow'\n    | 'arrow2Left'\n    | 'arrow2Right'\n    | 'wedge'\n    | 'thinTriangle'\n    | 'triangle'\n    | 'triangleUp'\n    | 'triangleDown'\n    | 'triangleRight'\n    | 'triangleLeft'\n    | 'stroke'\n    | 'star'\n    | 'wye'\n    | 'rect'\n    | 'arrowLeft'\n    | 'arrowRight'\n    | 'rectRound'\n    | 'roundLine'\n  /**\n   * 图例位置\n   * @default 'right'\n   * @example position: 'rightTop'\n   */\n  position?:\n    | 'left'\n    | 'leftTop'\n    | 'leftBottom'\n    | 'lt'\n    | 'lb'\n    | 'top'\n    | 'topLeft'\n    | 'topRight'\n    | 'tl'\n    | 'tr'\n    | 'right'\n    | 'rightTop'\n    | 'rightBottom'\n    | 'rt'\n    | 'rb'\n    | 'bottom'\n    | 'bottomLeft'\n    | 'bottomRight'\n    | 'bl'\n    | 'br'\n\n  /**\n   * @description 存在大量图例时, 最大列数 或 图例最大行数\n   *  如果position为水平方向(bottom, bottomLeft, bottomRight, bl, br, top, topLeft, topRight, tl, tr), maxSize控制显示的列数\n   *  如果position为垂直方向(left, leftTop, leftBottom, lt, lb, right, rightTop, rightBottom, rt, rb), maxSize控制显示的行数\n   *\n   * @warning 仅离散图例生效\n   * @example maxSize: 2\n   * @default 1\n   */\n  maxSize?: number\n}\n\nexport const zLegend = z.object({\n  enable: z.boolean().default(true).nullish(),\n  border: z.boolean().default(true).nullish(),\n  maxSize: z.number().default(1).nullish(),\n  shapeType: z\n    .enum([\n      'circle',\n      'cross',\n      'diamond',\n      'square',\n      'arrow',\n      'arrow2Left',\n      'arrow2Right',\n      'wedge',\n      'thinTriangle',\n      'triangle',\n      'triangleUp',\n      'triangleDown',\n      'triangleRight',\n      'triangleLeft',\n      'stroke',\n      'star',\n      'wye',\n      'rect',\n      'arrowLeft',\n      'arrowRight',\n      'rectRound',\n      'roundLine',\n    ])\n    .default('rectRound')\n    .nullish(),\n  position: z\n    .enum([\n      'left',\n      'leftTop',\n      'leftBottom',\n      'lt',\n      'lb',\n      'top',\n      'topLeft',\n      'topRight',\n      'tl',\n      'tr',\n      'right',\n      'rightTop',\n      'rightBottom',\n      'rt',\n      'rb',\n      'bottom',\n      'bottomLeft',\n      'bottomRight',\n      'bl',\n      'br',\n    ])\n    .default('bottom')\n    .nullish(),\n  labelColor: z.string().default('#fff').nullish(),\n  pagerIconColor: z.string().nullish(),\n  pagerIconDisableColor: z.string().nullish(),\n  labelFontSize: z.number().default(12).nullish(),\n  labelFontWeight: z.number().or(z.string()).default(400).nullish(),\n})\n\nexport type ColorLegend = Pick<Legend, 'position' | 'enable'>\nexport const zColorLegend = z.object({\n  position: z\n    .enum([\n      'left',\n      'leftTop',\n      'leftBottom',\n      'lt',\n      'lb',\n      'top',\n      'topLeft',\n      'topRight',\n      'tl',\n      'tr',\n      'right',\n      'rightTop',\n      'rightBottom',\n      'rt',\n      'rb',\n      'bottom',\n      'bottomLeft',\n      'bottomRight',\n      'bl',\n      'br',\n    ])\n    .default('bottom')\n    .nullish(),\n  enable: z.boolean().default(true).nullish(),\n})\n","import { z } from 'zod'\n\nexport const zTooltip = z.object({\n  enable: z.boolean().default(true).nullish(),\n  borderColor: z.string().nullish(),\n  borderWidth: z.number().nullish(),\n  borderRadius: z.number().nullish(),\n  padding: z.number().or(z.array(z.number()).length(4)).nullish(),\n  backgroundColor: z.string().nullish(),\n  lineHeight: z.number().nullish(),\n  fontSize: z.number().nullish(),\n  lineSpace: z.number().nullish(),\n  keyColor: z.string().nullish(),\n  valueColor: z.string().nullish(),\n  titleColor: z.string().nullish(),\n})\n\nexport type TooltipConfig = z.infer<typeof zTooltip>\n\nexport type Tooltip = {\n  /**\n   * 提示信息功能是否开启\n   * @default true\n   */\n  enable: boolean\n}\n","import { zSelector, zSelectors } from '../../dataSelector'\nimport { z } from 'zod'\n\nexport const zAnnotationPoint = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  text: z.string().or(z.array(z.string())).nullish(),\n  textColor: z.string().default('#ffffff').nullish(),\n  textFontSize: z.number().default(12).nullish(),\n  textFontWeight: z.number().default(400).nullish(),\n  textAlign: z.enum(['left', 'right', 'center']).default('center').nullish(),\n  textBaseline: z.enum(['top', 'middle', 'bottom']).default('middle').nullish(),\n  textBackgroundVisible: z.boolean().default(true).nullish(),\n  textBackgroundColor: z.string().default('#212121').nullish(),\n  textBackgroundBorderColor: z.string().nullish(),\n  textBackgroundBorderWidth: z.number().default(1).nullish(),\n  textBackgroundBorderRadius: z.number().default(4).nullish(),\n  textBackgroundPadding: z.number().nullish(),\n\n  offsetY: z.number().default(0).nullish(),\n  offsetX: z.number().default(0).nullish(),\n})\n","import { zSelector, zSelectors } from '../../dataSelector'\nimport { z } from 'zod'\n\nexport const zAnnotationHorizontalLine = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  yValue: z.union([z.number(), z.string(), z.array(z.union([z.number(), z.string()]))]).nullish(),\n  text: z.string().or(z.array(z.string())).nullish(),\n  textPosition: z\n    .enum(['outsideStart', 'outsideEnd', 'outsideMiddle', 'insideStart', 'insideMiddle', 'insideEnd'])\n    .default('insideEnd')\n    .nullish(),\n  textColor: z.string().default('#ffffff').nullish(),\n  textFontSize: z.number().default(12).nullish(),\n  textFontWeight: z.number().default(400).nullish(),\n  textAlign: z.enum(['left', 'right', 'center']).default('right').nullish(),\n  textBaseline: z.enum(['top', 'middle', 'bottom']).default('top').nullish(),\n\n  lineVisible: z.boolean().default(true).nullish(),\n  lineColor: z.string().default('#212121').nullish(),\n  lineWidth: z.number().default(1).nullish(),\n  lineStyle: z\n    .union([z.literal('solid'), z.literal('dashed'), z.literal('dotted')])\n    .default('dashed')\n    .nullish(),\n\n  textBackgroundVisible: z.boolean().default(true).nullish(),\n  textBackgroundColor: z.string().default('#212121').nullish(),\n  textBackgroundBorderColor: z.string().default('#212121').nullish(),\n  textBackgroundBorderRadius: z.number().default(4).nullish(),\n  textBackgroundBorderWidth: z.number().default(1).nullish(),\n  textBackgroundPadding: z.number().default(2).nullish(),\n})\n","import { zSelector, zSelectors } from '../../dataSelector'\nimport { z } from 'zod'\n\nexport const zAnnotationArea = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  textPosition: z\n    .enum(['top', 'topRight', 'topLeft', 'bottom', 'bottomLeft', 'bottomRight', 'left', 'right'])\n    .default('top')\n    .nullish(),\n  text: z.string().or(z.array(z.string())).nullish(),\n  textColor: z.string().default('#ffffff').nullish(),\n  textFontSize: z.number().default(12).nullish(),\n  textFontWeight: z.number().default(400).nullish(),\n  textAlign: z.enum(['left', 'right', 'center']).default('center').nullish(),\n  textBaseline: z.enum(['top', 'middle', 'bottom']).default('top').nullish(),\n\n  textBackgroundVisible: z.boolean().default(true).nullish(),\n  textBackgroundColor: z.string().default('#191d24').nullish(),\n  textBackgroundBorderColor: z.string().default('#191d24').nullish(),\n  textBackgroundBorderWidth: z.number().default(1).nullish(),\n  textBackgroundBorderRadius: z.number().default(4).nullish(),\n  textBackgroundPadding: z.number().default(4).nullish(),\n\n  areaColor: z.string().default('#888888').nullish(),\n  areaColorOpacity: z.number().default(0.15).nullish(),\n  areaBorderColor: z.string().default('#888888').nullish(),\n  areaBorderWidth: z.number().default(1).nullish(),\n  areaBorderRadius: z.number().default(4).nullish(),\n  areaLineDash: z.array(z.number()).nullish(),\n\n  outerPadding: z.number().default(4).nullish(),\n})\n","import { z } from 'zod'\nimport { zAnnotationPoint } from '../../annotation/zAnnotationPoint'\nimport { zAnnotationHorizontalLine } from '../../annotation/zAnnotationHorizontalLine'\nimport { zAnnotationArea } from '../../annotation/zAnnotationArea'\n\nexport const zAnnotationPointConfig = zAnnotationPoint.omit({ selector: true, text: true }).partial()\n\n// Use pick to explicitly list fields we want to expose in config variants.\nexport const zAnnotationHorizontalLineConfig = zAnnotationHorizontalLine\n  .pick({\n    // only pick fields that exist on the runtime schema\n    lineColor: true,\n    lineWidth: true,\n    lineVisible: true,\n    lineStyle: true,\n\n    textBackgroundVisible: true,\n    textColor: true,\n    textFontSize: true,\n    textFontWeight: true,\n    textBackgroundColor: true,\n    textBackgroundBorderColor: true,\n    textBackgroundBorderWidth: true,\n    textBackgroundBorderRadius: true,\n    textBackgroundPadding: true,\n  })\n  // extend with additional config-only fields that runtime schema doesn't include\n  .extend({\n    endSymbolVisible: z.boolean().nullish(),\n    endSymbolType: z.string().nullish(),\n    endSymbolSize: z.number().nullish(),\n\n    startSymbolVisible: z.boolean().nullish(),\n    startSymbolType: z.string().nullish(),\n    startSymbolSize: z.number().nullish(),\n  })\n  .partial()\n\nexport const zAnnotationVerticalLineConfig = zAnnotationHorizontalLineConfig.clone()\n\nexport const zAnnotationAreaConfig = zAnnotationArea\n  .pick({\n    textColor: true,\n    textFontSize: true,\n    textFontWeight: true,\n\n    textBackgroundVisible: true,\n    textBackgroundColor: true,\n    textBackgroundBorderColor: true,\n    textBackgroundBorderWidth: true,\n    textBackgroundBorderRadius: true,\n    textBackgroundPadding: true,\n\n    areaColor: true,\n    areaColorOpacity: true,\n    areaBorderColor: true,\n    areaBorderWidth: true,\n    areaBorderRadius: true,\n    areaLineDash: true,\n\n    outerPadding: true,\n  })\n  .partial()\n\nexport const zAnnotationConfig = z.object({\n  annotationPoint: zAnnotationPointConfig.nullish(),\n  annotationHorizontalLine: zAnnotationHorizontalLineConfig.nullish(),\n  annotationVerticalLine: zAnnotationVerticalLineConfig.nullish(),\n  annotationArea: zAnnotationAreaConfig.nullish(),\n})\n","import { z } from 'zod'\n\nexport const zPivotChartGridConfig = z.object({\n  borderColor: z.string().nullish(),\n  bodyFontColor: z.string().nullish(),\n  headerFontColor: z.string().nullish(),\n  headerBackgroundColor: z.string().nullish(),\n  hoverHeaderBackgroundColor: z.string().nullish(),\n  hoverHeaderInlineBackgroundColor: z.string().nullish(),\n  outlineBorderLineWidth: z.number().nullish(),\n  frameCornerRadius: z.number().nullish(),\n\n  minChartWidth: z.number().nullish(),\n  minChartHeight: z.number().nullish(),\n\n  titleFontColor: z.string().nullish(),\n  titleFontSize: z.number().nullish(),\n  titleFontWeight: z.string().nullish(),\n\n  chartGridColor: z.string().nullish(),\n  axisLabelColor: z.string().nullish(),\n})\n\nexport type PivotChartGridConfig = z.infer<typeof zPivotChartGridConfig>\n","import { z } from 'zod'\n\nexport const zDimensionLinkage = z.object({\n  enable: z.boolean().nullish(),\n  showTooltip: z.boolean().nullish(),\n  showLabel: z.boolean().nullish(),\n})\n\n/**\n * 透视图表维度联动配置\n */\nexport type DimensionLinkage = {\n  /**\n   * 是否开启透视图表维度联动\n   */\n  enable: boolean\n  /**\n   * 是否显示所有维度对应子图表的Tooltip提示信息\n   */\n  showTooltip?: boolean\n  /**\n   * 是否显示crosshair 对应的标签\n   */\n  showLabel?: boolean\n}\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairLine } from './crosshair'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zDimensionLinkage } from './dimensionLinkage'\n\nexport const zLineConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\n\nexport type LineConfig = z.infer<typeof zLineConfig>\n","import { z } from 'zod'\n\nexport const zStackCornerRadius = z.number().or(z.array(z.number())).default([3, 3, 0, 0])\n\nexport type StackCornerRadius = z.infer<typeof zStackCornerRadius>\n","import { z } from 'zod'\n\nexport const zBarMaxWidth = z.number().or(z.string())\n\nexport type BarMaxWidth = z.infer<typeof zBarMaxWidth>\n\nexport const zBarGapInGroup = z.number().or(z.string())\n\nexport type BarGapInGroup = z.infer<typeof zBarGapInGroup>\n","import { z } from 'zod'\n\nexport const zEcdfRegressionLine = z.object({\n  enable: z.boolean().nullish(),\n  color: z.string().nullish(),\n  lineWidth: z.number().nullish(),\n  lineDash: z.array(z.number()).nullish(),\n  text: z.string().nullish(),\n  textColor: z.string().nullish(),\n  textFontSize: z.number().nullish(),\n  textFontWeight: z.number().nullish(),\n})\n\nexport const zKdeRegressionLine = zEcdfRegressionLine.extend({})\n\nexport const zLinearRegressionLine = zEcdfRegressionLine.extend({\n  confidenceIntervalVisible: z.boolean().nullish(),\n  confidenceIntervalColor: z.string().nullish(),\n  confidenceIntervalOpacity: z.number().nullish(),\n})\n\nexport const zLogisticRegressionLine = zLinearRegressionLine.extend({})\nexport const zLowessRegressionLine = zLinearRegressionLine.extend({})\n\nexport const zPolynomialRegressionLine = zLinearRegressionLine.extend({\n  degree: z.number().nullish(),\n})\n\nexport const zRegressionLine = z.object({\n  ecdfRegressionLine: zEcdfRegressionLine.or(z.array(zEcdfRegressionLine)).nullish(),\n  kdeRegressionLine: zKdeRegressionLine.or(z.array(zKdeRegressionLine)).nullish(),\n  linearRegressionLine: zLinearRegressionLine.or(z.array(zLinearRegressionLine)).nullish(),\n  lowessRegressionLine: zLowessRegressionLine.or(z.array(zLowessRegressionLine)).nullish(),\n  polynomialRegressionLine: zPolynomialRegressionLine.or(z.array(zPolynomialRegressionLine)).nullish(),\n  logisticRegressionLine: zLogisticRegressionLine.or(z.array(zLogisticRegressionLine)).nullish(),\n})\n\nexport type RegressionLineConfig = z.infer<typeof zRegressionLine>\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairRect } from './crosshair'\nimport { zStackCornerRadius } from './stackCornerRadius/stackCornerRadius'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zBarGapInGroup, zBarMaxWidth } from './barWidth'\nimport { zRegressionLine } from '../regressionLine'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zColumnParallelConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  barGapInGroup: zBarGapInGroup.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\nexport const zColumnConfig = zColumnParallelConfig.extend({\n  regressionLine: zRegressionLine.nullish(),\n})\nexport const zColumnPercentConfig = zColumnParallelConfig.extend({})\n\nexport type ColumnConfig = z.infer<typeof zColumnConfig>\nexport type ColumnParallelConfig = z.infer<typeof zColumnParallelConfig>\nexport type ColumnPercentConfig = z.infer<typeof zColumnPercentConfig>\n","import { z } from 'zod'\nimport { zYBandAxis, zXLinearAxis } from './axes'\nimport { zCrosshairRect } from './crosshair'\nimport { zStackCornerRadius } from './stackCornerRadius/stackCornerRadius'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zBarConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYBandAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\nexport const zBarParallelConfig = zBarConfig\nexport const zBarPercentConfig = zBarConfig\n\nexport type BarConfig = z.infer<typeof zBarConfig>\nexport type BarParallelConfig = z.infer<typeof zBarParallelConfig>\nexport type BarPercentConfig = z.infer<typeof zBarPercentConfig>\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairLine } from './crosshair'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zAreaConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\nexport const zAreaPercentConfig = zAreaConfig\n\nexport type AreaConfig = z.infer<typeof zAreaConfig>\nexport type AreaPercentConfig = z.infer<typeof zAreaPercentConfig>\n","import { z } from 'zod'\nimport { zXLinearAxis, zYLinearAxis } from './axes'\nimport { zCrosshairLine } from './crosshair'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zRegressionLine } from '../regressionLine/zRegressionLine'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zScatterConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  size: z.number().or(z.array(z.number())).nullish(),\n  sizeRange: z.number().or(z.array(z.number())).nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n  regressionLine: zRegressionLine.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\n\nexport type ScatterConfig = z.infer<typeof zScatterConfig>\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairRect } from './crosshair'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zDualChartType } from '../chartType'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zDualAxisConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  dualChartType: z.array(zDualChartType).or(zDualChartType).nullish(),\n  alignTicks: z.array(z.boolean()).or(z.boolean()).nullish(),\n  primaryYAxis: z.array(zYLinearAxis).or(zYLinearAxis).nullish(),\n  secondaryYAxis: z.array(zYLinearAxis).or(zYLinearAxis).nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\n\nexport type DualAxisConfig = z.infer<typeof zDualAxisConfig>\n","import { z } from 'zod'\nimport { zLabel } from './zLabel'\n\nexport const zPieLabel = zLabel.extend({\n  labelLayout: z.union([z.literal('arc'), z.literal('labelLine'), z.literal('edge')]).nullish(),\n})\n","import { z } from 'zod'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zPieLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zPivotChartGridConfig } from './pivotGrid'\n\nexport const zPieConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zPieLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  cornerRadius: z.number().nullish(),\n})\nexport const zDonutConfig = zPieConfig\nexport const zRadarConfig = zPieConfig\n\nexport type PieConfig = z.infer<typeof zPieConfig>\nexport type DonutConfig = z.infer<typeof zDonutConfig>\nexport type RadarConfig = z.infer<typeof zRadarConfig>\n","import { z } from 'zod'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zPieLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zPivotChartGridConfig } from './pivotGrid'\n\nexport const zRoseConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zPieLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n})\nexport const zRoseParallelConfig = zRoseConfig\n\nexport type RoseConfig = z.infer<typeof zRoseConfig>\nexport type RoseParallelConfig = z.infer<typeof zRoseParallelConfig>\n","import { z } from 'zod'\n\nexport const zFunnelTransform = z.object({\n  backgroundColor: z.string().nullish(),\n  textColor: z.string().nullish(),\n})\n","import { z } from 'zod'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zFunnelTransform } from './funnelTransform/zFunnelTransform'\nimport { zPivotChartGridConfig } from './pivotGrid'\n\nexport const zFunnelConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  transform: zFunnelTransform.nullish(),\n})\n\nexport type FunnelConfig = z.infer<typeof zFunnelConfig>\n","import { z } from 'zod'\n\nexport const zHeatmapCell = z.object({\n  stroke: z.string().nullish(),\n  lineWidth: z.number().nullish(),\n  cornerRadius: z.number().nullish(),\n})\n","import { z } from 'zod'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zHeatmapCell } from './heatmap/zHeatmap'\n\nexport const zHeatmapConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  cell: zHeatmapCell.nullish(),\n})\n\nexport type HeatmapConfig = z.infer<typeof zHeatmapConfig>\n","import type { z } from 'zod'\nimport { zTableConfig } from './table'\n\nexport const zPivotTableConfig = zTableConfig\nexport type PivotTableConfig = z.infer<typeof zPivotTableConfig>\n","import { z } from 'zod'\n\nexport const zWhiskersConfig = z.number().or(z.array(z.number())).default(1.5)\n\nexport type WhiskersConfig = z.infer<typeof zWhiskersConfig>\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type BoxPlotStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n\n  /**\n   * @description boxPlot图元是否可见\n   */\n  boxVisible?: boolean\n  /**\n   * @description boxPlot图元颜色\n   * @type {string}\n   */\n  boxColor?: string\n  /**\n   * @description boxPlot图元颜色透明度\n   * @type {number}\n   */\n  boxColorOpacity?: number\n  /**\n   * @description boxPlot图元边框颜色\n   * @type {string}\n   */\n  boxBorderColor?: string\n  /**\n   * @description boxPlot图元边框宽度\n   * @type {number}\n   */\n  boxBorderWidth?: number\n  /**\n   * @description boxPlot图元边框透明度\n   * @type {number}\n   */\n  boxBorderOpacity?: number\n}\n\nexport const zBoxPlotStyle = z.object({\n  selector: zSelector.or(zSelectors).nullish(),\n  boxVisible: z.boolean().nullish(),\n  boxColor: z.string().nullish(),\n  boxColorOpacity: z.number().min(0).max(1).nullish(),\n  boxBorderColor: z.string().nullish(),\n  boxBorderWidth: z.number().min(0).nullish(),\n  boxBorderOpacity: z.number().min(0).max(1).nullish(),\n})\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type OutlierStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n\n  /**\n   * @description 点是否可见\n   */\n  pointVisible?: boolean\n  /**\n   * 点大小\n   * @description 点大小\n   */\n  pointSize?: number\n  /**\n   * 点图元颜色\n   * @description 点图元颜色\n   */\n  pointColor?: string\n  /**\n   * 点图元颜色透明度\n   * @description 点图元颜色透明度\n   */\n  pointColorOpacity?: number\n  /**\n   * 点图元边框颜色\n   * @description 点图元边框颜色\n   */\n  pointBorderColor?: string\n  /**\n   * 点图元边框宽度\n   * @description 点图元边框宽度\n   */\n  pointBorderWidth?: number\n  /**\n   * 点图元边框样式\n   * @description 点图元边框样式\n   * @example solid\n   * @example dashed\n   * @example dotted\n   */\n  pointBorderStyle?: 'solid' | 'dashed' | 'dotted'\n}\n\nexport const zOutlierStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).optional(),\n  pointVisible: z.boolean().optional(),\n  pointSize: z.number().optional(),\n  pointColor: z.string().optional(),\n  pointColorOpacity: z.number().min(0).max(1).optional(),\n  pointBorderColor: z.string().optional(),\n  pointBorderWidth: z.number().min(0).optional(),\n  pointBorderStyle: z.enum(['solid', 'dashed', 'dotted']).optional(),\n})\n","import { z } from 'zod'\n\nexport const zBoxMaxWidth = z.number().or(z.string())\n\nexport const zBoxGapInGroup = z.number().or(z.string())\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairRect } from './crosshair'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zWhiskersConfig } from './whiskers'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\nimport { zBoxPlotStyle, zOutlierStyle } from '../markStyle'\nimport { zBoxGapInGroup, zBoxMaxWidth } from './boxWidth'\n\nexport const zBoxplotConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n\n  whiskers: zWhiskersConfig.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n\n  boxPlotStyle: zBoxPlotStyle.omit({ selector: true }).nullish(),\n  outlierStyle: zOutlierStyle.omit({ selector: true }).nullish(),\n  boxMaxWidth: zBoxMaxWidth.nullish(),\n  boxGapInGroup: zBoxGapInGroup.nullish(),\n})\n\nexport type BoxplotConfig = z.infer<typeof zBoxplotConfig>\n","import { z } from 'zod'\nimport { zXBandAxis, zYLinearAxis } from './axes'\nimport { zCrosshairRect } from './crosshair'\nimport { zStackCornerRadius } from './stackCornerRadius/stackCornerRadius'\nimport { zBackgroundColor } from './backgroundColor/backgroundColor'\nimport { zColor } from './color/color'\nimport { zLabel } from './label'\nimport { zLegend } from './legend/legend'\nimport { zTooltip } from './tooltip/tooltip'\nimport { zAnnotationConfig } from './annotation/zAnnotaion'\nimport { zPivotChartGridConfig } from './pivotGrid'\nimport { zRegressionLine } from '../regressionLine'\nimport { zDimensionLinkage } from './dimensionLinkage/dimensionLinkage'\n\nexport const zHistogramConfig = z.object({\n  backgroundColor: zBackgroundColor.nullish(),\n  label: zLabel.nullish(),\n  color: zColor.nullish(),\n  tooltip: zTooltip.nullish(),\n  legend: zLegend.nullish(),\n\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  pivotGrid: zPivotChartGridConfig.nullish(),\n  annotation: zAnnotationConfig.nullish(),\n  binCount: z.number().positive().nullish(),\n  binStep: z.number().positive().nullish(),\n  binValueType: z.literal('count').or(z.literal('percentage')).nullish(),\n  regressionLine: zRegressionLine.nullish(),\n\n  dimensionLinkage: zDimensionLinkage.nullish(),\n})\n\nexport type HistogramConfig = z.infer<typeof zHistogramConfig>\n","import { z } from 'zod'\nimport { zTableConfig } from './table'\nimport { zLineConfig } from './line'\nimport { zColumnConfig, zColumnParallelConfig, zColumnPercentConfig } from './column'\nimport { zBarConfig, zBarParallelConfig, zBarPercentConfig } from './bar'\nimport { zAreaConfig, zAreaPercentConfig } from './area'\nimport { zScatterConfig } from './scatter'\nimport { zDualAxisConfig } from './dualAxis'\nimport { zDonutConfig, zPieConfig, zRadarConfig } from './pie'\nimport { zRoseConfig, zRoseParallelConfig } from './rose'\nimport { zFunnelConfig } from './funnel'\nimport { zHeatmapConfig } from './heatmap'\nimport { zPivotTableConfig } from './pivotTable'\nimport { zBoxplotConfig } from './boxplot'\nimport { zHistogramConfig } from './histogram'\n\nexport type Config = z.infer<typeof zConfig>\nexport const zConfig = z.object({\n  table: zTableConfig.nullish(),\n  pivotTable: zPivotTableConfig.nullish(),\n\n  // cartesian\n  line: zLineConfig.nullish(),\n  column: zColumnConfig.nullish(),\n  columnParallel: zColumnParallelConfig.nullish(),\n  columnPercent: zColumnPercentConfig.nullish(),\n  bar: zBarConfig.nullish(),\n  barParallel: zBarParallelConfig.nullish(),\n  barPercent: zBarPercentConfig.nullish(),\n  area: zAreaConfig.nullish(),\n  areaPercent: zAreaPercentConfig.nullish(),\n\n  scatter: zScatterConfig.nullish(),\n  dualAxis: zDualAxisConfig.nullish(),\n\n  // polar\n  rose: zRoseConfig.nullish(),\n  roseParallel: zRoseParallelConfig.nullish(),\n  pie: zPieConfig.nullish(),\n  donut: zDonutConfig.nullish(),\n  radar: zRadarConfig.nullish(),\n  // other\n  funnel: zFunnelConfig.nullish(),\n  heatmap: zHeatmapConfig.nullish(),\n  boxPlot: zBoxplotConfig.nullish(),\n  histogram: zHistogramConfig.nullish(),\n})\n","import { z } from 'zod'\nimport { zConfig } from '../config'\n\nexport const zCustomThemeConfig = z.object({\n  config: zConfig.nullish(),\n})\n\nexport const zCustomTheme = z.record(z.string(), zCustomThemeConfig).nullish()\n\nexport type CustomTheme = z.infer<typeof zCustomTheme>\nexport type CustomThemeConfig = z.infer<typeof zCustomThemeConfig>\n","import { z } from 'zod'\n\nexport const zTheme = z.string()\n\ntype Light = 'light' & { readonly brand: unique symbol }\ntype Dark = 'dark' & { readonly brand: unique symbol }\n\n/**\n * 主题\n * @default light\n * @description 内置 light、dark 两种主题, 新的主题可以通过registerTheme自定义主题.\n */\nexport type Theme = Light | Dark | string\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type BarStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n\n  /**\n   * @description 柱图元(矩形图元)是否可见\n   */\n  barVisible?: boolean\n  /**\n   * @description 柱图元(矩形图元)颜色\n   * @type {string}\n   */\n  barColor?: string\n  /**\n   * @description 柱图元(矩形图元)颜色透明度\n   * @type {number}\n   */\n  barColorOpacity?: number\n  /**\n   * @description 柱图元(矩形图元)边框颜色\n   * @type {string}\n   */\n  barBorderColor?: string\n  /**\n   * @description 柱图元(矩形图元)边框宽度\n   * @type {number}\n   */\n  barBorderWidth?: number\n  /**\n   * @description 柱图元(矩形图元)边框样式\n   * @type {number}\n   * @example solid\n   * @example dashed\n   * @example dotted\n   */\n  barBorderStyle?: 'solid' | 'dashed' | 'dotted'\n  /**\n   * @description 柱图元(矩形图元)圆角\n   * @type {number | number[]}\n   * @example 4\n   * @example [0, 0, 10, 10]\n   */\n  /**\n   * @description 柱图元(矩形图元)描边透明度\n   * @type {number}\n   */\n  barBorderOpacity?: number\n  barRadius?: number | number[]\n}\n\nexport const zBarStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  barVisible: z.boolean().nullish(),\n  barColor: z.string().nullish(),\n  barColorOpacity: z.number().nullish(),\n  barBorderColor: z.string().nullish(),\n  barBorderWidth: z.number().nullish(),\n  barBorderStyle: z.union([z.literal('solid'), z.literal('dashed'), z.literal('dotted')]).nullish(),\n  barRadius: z.union([z.number(), z.array(z.number())]).nullish(),\n})\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type PointStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n\n  /**\n   * @description 点是否可见\n   */\n  pointVisible?: boolean\n  /**\n   * 点大小\n   * @description 点大小\n   */\n  pointSize?: number\n  /**\n   * 点图元颜色\n   * @description 点图元颜色\n   */\n  pointColor?: string\n  /**\n   * 点图元颜色透明度\n   * @description 点图元颜色透明度\n   */\n  pointColorOpacity?: number\n  /**\n   * 点图元边框颜色\n   * @description 点图元边框颜色\n   */\n  pointBorderColor?: string\n  /**\n   * 点图元边框宽度\n   * @description 点图元边框宽度\n   */\n  pointBorderWidth?: number\n  /**\n   * 点图元边框样式\n   * @description 点图元边框样式\n   * @example solid\n   * @example dashed\n   * @example dotted\n   */\n  pointBorderStyle?: 'solid' | 'dashed' | 'dotted'\n}\n\nexport const zPointStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  pointVisible: z.boolean().nullish(),\n  pointSize: z.number().nullish(),\n  pointColor: z.string().nullish(),\n  pointColorOpacity: z.number().nullish(),\n  pointBorderColor: z.string().nullish(),\n  pointBorderWidth: z.number().nullish(),\n  pointBorderStyle: z.union([z.enum(['solid', 'dashed', 'dotted'])]).nullish(),\n})\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type LineStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n\n  /**\n   * @description 线段是否可见\n   */\n  lineVisible?: boolean\n  /**\n   * @description 线段是否平滑\n   * @type {boolean}\n   */\n  lineSmooth?: boolean\n\n  /**\n   * @description 线段颜色\n   */\n  lineColor?: string\n  /**\n   * @description 线段颜色透明度\n   */\n  lineColorOpacity?: number\n  /**\n   * @description 线段宽度\n   */\n  lineWidth?: number\n  /**\n   * @description 线段样式\n   * @example `lineStyle: 'solid'`\n   */\n  lineStyle?: 'solid' | 'dashed' | 'dotted'\n}\n\nexport const zLineStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  lineVisible: z.boolean().nullish(),\n  lineSmooth: z.boolean().nullish(),\n  lineColor: z.string().nullish(),\n  lineColorOpacity: z.number().nullish(),\n  lineWidth: z.number().nullish(),\n  lineStyle: z.union([z.enum(['solid', 'dashed', 'dotted'])]).nullish(),\n})\n","import { z } from 'zod'\nimport { zSelector, zSelectors } from '../../dataSelector'\n\nexport const zAreaStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  areaVisible: z.boolean().nullish(),\n  areaColor: z.string().nullish(),\n  areaColorOpacity: z.number().nullish(),\n})\n","import { z } from 'zod'\nimport { zBarStyle } from './barStyle'\nimport { zPointStyle } from './pointStyle'\nimport { zLineStyle } from './lineStyle'\nimport { zAreaStyle } from './zAreaStyle'\nimport { zBoxPlotStyle } from './boxPlotStyle'\nimport { zOutlierStyle } from './outlierStyle'\n\nexport const zMarkStyle = z.object({\n  barStyle: zBarStyle.or(z.array(zBarStyle)).nullish(),\n  pointStyle: zPointStyle.or(z.array(zPointStyle)).nullish(),\n  lineStyle: zLineStyle.or(z.array(zLineStyle)).nullish(),\n  areaStyle: zAreaStyle.or(z.array(zAreaStyle)).nullish(),\n  boxPlotStyle: zBoxPlotStyle.or(z.array(zBoxPlotStyle)).nullish(),\n  outlierStyle: zOutlierStyle.or(z.array(zOutlierStyle)).nullish(),\n})\n\nexport type MarkStyle = z.infer<typeof zMarkStyle>\n","import { zSelector, zSelectors } from '../../dataSelector'\nimport { z } from 'zod'\n\nexport const zAnnotationVerticalLine = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  xValue: z.union([z.number(), z.string(), z.array(z.union([z.number(), z.string()]))]).nullish(),\n  text: z.string().or(z.array(z.string())).nullish(),\n  textPosition: z\n    .enum(['outsideStart', 'outsideEnd', 'outsideMiddle', 'insideStart', 'insideMiddle', 'insideEnd'])\n    .default('insideEnd')\n    .nullish(),\n  textColor: z.string().default('#ffffff').nullish(),\n  textFontSize: z.number().default(12).nullish(),\n  textFontWeight: z.number().default(400).nullish(),\n  textAlign: z.enum(['left', 'right', 'center']).default('right').nullish(),\n  textBaseline: z.enum(['top', 'middle', 'bottom']).default('top').nullish(),\n\n  textBackgroundVisible: z.boolean().default(true).nullish(),\n  textBackgroundColor: z.string().default('#212121').nullish(),\n  textBackgroundBorderColor: z.string().default('#212121').nullish(),\n  textBackgroundBorderRadius: z.number().default(4).nullish(),\n  textBackgroundBorderWidth: z.number().default(1).nullish(),\n  textBackgroundPadding: z.number().default(2).nullish(),\n\n  lineVisible: z.boolean().default(true).nullish(),\n  lineColor: z.string().default('#212121').nullish(),\n  lineWidth: z.number().default(1).nullish(),\n  lineStyle: z\n    .union([z.literal('solid'), z.literal('dashed'), z.literal('dotted')])\n    .default('dashed')\n    .nullish(),\n})\n","import { z } from 'zod'\nimport { zAnnotationPoint } from './zAnnotationPoint'\nimport { zAnnotationVerticalLine } from './zAnnotationVerticalLine'\nimport { zAnnotationHorizontalLine } from './zAnnotationHorizontalLine'\nimport { zAnnotationArea } from './zAnnotationArea'\n\nexport const zAnnotation = z.object({\n  annotationPoint: zAnnotationPoint.or(z.array(zAnnotationPoint)).nullish(),\n  annotationVerticalLine: zAnnotationVerticalLine.or(z.array(zAnnotationVerticalLine)).nullish(),\n  annotationHorizontalLine: zAnnotationHorizontalLine.or(z.array(zAnnotationHorizontalLine)).nullish(),\n  annotationArea: zAnnotationArea.or(z.array(zAnnotationArea)).nullish(),\n})\n\nexport type Annotation = z.infer<typeof zAnnotation>\n","import { z } from 'zod'\n\nexport const zSort = z.object({\n  order: z.enum(['asc', 'desc']).default('asc'),\n  orderBy: z.string().nullish(),\n  customOrder: z.array(z.any()).nullish(),\n})\n\n/**\n * @description 类目轴排序配置, 支持根据维度或指标排序, 以及自定义排序顺序\n * @default {}\n * @example\n * - order:'asc'\n * - orderBy:'date'\n * 或\n * - customOrder:['2019', '2020', '2021']\n */\nexport type Sort = {\n  /**\n   * @description 排序顺序, 可选值为 'asc' 或 'desc'\n   * @enum ['asc', 'desc']\n   * @example order:'asc'\n   */\n  order?: 'asc' | 'desc'\n\n  /**\n   * @description 排序依赖的字段, 可以是维度id或指标id\n   * @example\n   * - orderBy:'date'\n   * - orderBy:'profit'\n   */\n  orderBy?: string\n\n  /**\n   * @description 自定义排序顺序, 该顺序将直接应用至类目轴\n   */\n  customOrder?: string[]\n}\n","import { z } from 'zod'\n\nexport const zSortLegend = z.object({\n  order: z.enum(['asc', 'desc']).default('asc'),\n  orderBy: z.string().nullish(),\n  customOrder: z.array(z.any()).nullish(),\n})\n\n/**\n * @description 图例排序配置, 支持根据维度或指标排序, 以及自定义排序顺序; 排序数组遵循从左到右或从上到下的顺序\n * @default {}\n * @example\n * - order:'asc'\n * - orderBy:'date'\n * 或\n * - customOrder:['2019', '2020', '2021']\n */\nexport type SortLegend = {\n  /**\n   * @description 排序顺序, 可选值为 'asc' 或 'desc'\n   * @default 'asc'\n   * @enum ['asc', 'desc']\n   * @example order:'asc'\n   */\n  order?: 'asc' | 'desc'\n  /**\n   * @description 排序依赖的字段, 可以是维度id或指标id\n   * @example\n   * - orderBy:'date'\n   * - orderBy:'profit'\n   */\n  orderBy?: string\n  /**\n   * @description 自定义排序顺序, 该顺序将直接应用至图例, 升序从左到右或从上到下, 降序从右到左或从下到上\n   */\n  customOrder?: string[]\n}\n","import { z } from 'zod'\n\nexport const zAnalysis = z.object({\n  orderMapping: z.record(z.string(), z.array(z.string())).nullish(),\n})\n","import { z } from 'zod'\nimport { zSelector, zSelectors, type Selector, type Selectors } from '../../dataSelector'\n\nexport type BodyCellStyle = {\n  /**\n   * 数据选择器\n   * @description\n   * 若配置selector, 提供数值 selector, 局部数据 selector, 条件维度 selector, 条件指标 selector 共四类数据匹配能力\n   * 若未配置selector, 则样式全局生效.\n   * @type {Selector | Selectors}\n   * @example 数值选择器\n   * selector = \"tool\"\n   * selector = [\"tool\", \"book\"]\n   * selector = 100\n   * selector = [100, 200]\n   * @example 局部数据选择器\n   * selector = { profit: 100 }\n   * selector = [{ profit: 100 }, { profit: 200 }]\n   * @example 条件维度选择器\n   * selector = {\n   *  field: 'category',\n   *  operator: 'in',\n   *  value: 'tool'\n   * }\n   * selector = {\n   *  field: 'category',\n   *  operator: 'not in',\n   *  value: 'book'\n   * }\n   * @example 条件指标选择器\n   * selector = {\n   *  field: 'profit',\n   *  operator: '>=',\n   *  value: 100\n   * }\n   * selector = {\n   *  field: 'profit',\n   *  operator: 'between'\n   *  value: [100, 300]\n   * }\n   */\n  selector?: Selector | Selectors\n  /**\n   * 单元格背景色\n   */\n  backgroundColor?: string\n  /**\n   * 单元格文字颜色\n   */\n  textColor?: string\n  /**\n   * 单元格文字大小\n   */\n  textFontSize?: number\n  /**\n   * 单元格边框颜色\n   */\n  borderColor?: string\n  /**\n   * 单元格边框线宽\n   */\n  borderLineWidth?: number\n}\n\nexport const zBodyCellStyle = z.object({\n  selector: z.union([zSelector, zSelectors]).nullish(),\n  backgroundColor: z.string().nullish(),\n  textColor: z.string().nullish(),\n  textFontSize: z.number().nullish(),\n  borderColor: z.string().nullish(),\n  borderLineWidth: z.number().nullish(),\n})\n","import { z } from 'zod'\n\nexport type Locale = 'zh-CN' | 'en-US'\n\nexport type TranslateRecordType = Record<string, { [local in Locale]: string }>\n\nexport const zLocale = z.enum(['zh-CN', 'en-US']).default('zh-CN')\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport { zBackgroundColor, zBodyCellStyle, zDataset, zDimensions, zMeasureTree, zTheme } from '../../properties'\n\nexport const zTable = z.object({\n  chartType: z.literal('table'),\n  dataset: zDataset.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n\n  backgroundColor: zBackgroundColor.nullish(),\n  borderColor: z.string().nullish(),\n  bodyFontSize: z.number().nullish(),\n  bodyFontColor: z.string().nullish(),\n  bodyBackgroundColor: z.string().nullish(),\n  hoverBodyBackgroundColor: z.string().nullish(),\n  hoverBodyInlineBackgroundColor: z.string().nullish(),\n  headerFontSize: z.number().nullish(),\n  headerFontColor: z.string().nullish(),\n  headerBackgroundColor: z.string().nullish(),\n  hoverHeaderBackgroundColor: z.string().nullish(),\n  hoverHeaderInlineBackgroundColor: z.string().nullish(),\n  selectedBorderColor: z.string().nullish(),\n  selectedBackgroundColor: z.string().nullish(),\n  bodyCellStyle: zBodyCellStyle.nullish(),\n\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport { zBackgroundColor, zDataset, zDimensions, zTheme, zMeasures, zBodyCellStyle } from '../../properties'\n\nexport const zPivotTable = z.object({\n  chartType: z.literal('pivotTable'),\n  dataset: zDataset.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasures.nullish(),\n\n  backgroundColor: zBackgroundColor.nullish(),\n  borderColor: z.string().nullish(),\n  bodyFontSize: z.number().nullish(),\n  bodyFontColor: z.string().nullish(),\n  bodyBackgroundColor: z.string().nullish(),\n  hoverBodyBackgroundColor: z.string().nullish(),\n  hoverBodyInlineBackgroundColor: z.string().nullish(),\n  headerFontSize: z.number().nullish(),\n  headerFontColor: z.string().nullish(),\n  headerBackgroundColor: z.string().nullish(),\n  hoverHeaderBackgroundColor: z.string().nullish(),\n  hoverHeaderInlineBackgroundColor: z.string().nullish(),\n  selectedBorderColor: z.string().nullish(),\n  selectedBackgroundColor: z.string().nullish(),\n  bodyCellStyle: zBodyCellStyle.nullish(),\n\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zColor,\n  zCrosshairLine,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zLineStyle,\n  zMeasureTree,\n  zPointStyle,\n  zSort,\n  zSortLegend,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nimport { z } from 'zod'\n\nexport const zLine = z.object({\n  chartType: z.literal('line'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  sort: zSort.nullish(),\n  sortLegend: zSortLegend.nullish(),\n  theme: zTheme.nullish(),\n  pointStyle: z.array(zPointStyle).or(zPointStyle).nullish(),\n  lineStyle: z.array(zLineStyle).or(zLineStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zPolynomialRegressionLine,\n  zSort,\n  zSortLegend,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zColumn = z.object({\n  chartType: z.literal('column'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  sort: zSort.nullish(),\n  sortLegent: zSortLegend.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  polynomialRegressionLine: z.array(zPolynomialRegressionLine).or(zPolynomialRegressionLine).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarGapInGroup,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zColumnParallel = z.object({\n  chartType: z.literal('columnParallel'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  barGapInGroup: zBarGapInGroup.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nimport { z } from 'zod'\n\nexport const zColumnPercent = z.object({\n  chartType: z.literal('columnPercent'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXLinearAxis,\n  zYBandAxis,\n} from '../../properties'\n\nimport { z } from 'zod'\n\nexport const zBar = z.object({\n  chartType: z.literal('bar'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYBandAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarGapInGroup,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXLinearAxis,\n  zYBandAxis,\n} from '../../properties'\n\nexport const zBarParallel = z.object({\n  chartType: z.literal('barParallel'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYBandAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  barGapInGroup: zBarGapInGroup.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zStackCornerRadius,\n  zTheme,\n  zTooltip,\n  zXLinearAxis,\n  zYBandAxis,\n} from '../../properties'\n\nexport const zBarPercent = z.object({\n  chartType: z.literal('barPercent'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYBandAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  stackCornerRadius: zStackCornerRadius.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zAreaStyle,\n  zBackgroundColor,\n  zColor,\n  zCrosshairLine,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zLineStyle,\n  zMeasureTree,\n  zPointStyle,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zArea = z.object({\n  chartType: z.literal('area'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  theme: zTheme.nullish(),\n  pointStyle: z.array(zPointStyle).or(zPointStyle).nullish(),\n  lineStyle: z.array(zLineStyle).or(zLineStyle).nullish(),\n  areaStyle: z.array(zAreaStyle).or(zAreaStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zAreaStyle,\n  zBackgroundColor,\n  zColor,\n  zCrosshairLine,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zLineStyle,\n  zMeasureTree,\n  zPointStyle,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nimport { z } from 'zod'\n\nexport const zAreaPercent = z.object({\n  chartType: z.literal('areaPercent'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  theme: zTheme.nullish(),\n  pointStyle: z.array(zPointStyle).or(zPointStyle).nullish(),\n  lineStyle: z.array(zLineStyle).or(zLineStyle).nullish(),\n  areaStyle: z.array(zAreaStyle).or(zAreaStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zColor,\n  zCrosshairLine,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zLinearRegressionLine,\n  zLogisticRegressionLine,\n  zLowessRegressionLine,\n  zMeasureTree,\n  zPointStyle,\n  zPolynomialRegressionLine,\n  zScatterMeasures,\n  zTheme,\n  zTooltip,\n  zXLinearAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zScatter = z.object({\n  chartType: z.literal('scatter'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  scatterMeasures: zScatterMeasures.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  size: z.number().or(z.array(z.number())).nullish(),\n  sizeRange: z.number().or(z.array(z.number())).nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairLine: zCrosshairLine.nullish(),\n  theme: zTheme.nullish(),\n  pointStyle: z.array(zPointStyle).or(zPointStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  linearRegressionLine: z.array(zLinearRegressionLine).or(zLinearRegressionLine).nullish(),\n  lowessRegressionLine: z.array(zLowessRegressionLine).or(zLowessRegressionLine).nullish(),\n  polynomialRegressionLine: z.array(zPolynomialRegressionLine).or(zPolynomialRegressionLine).nullish(),\n  logisticRegressionLine: z.array(zLogisticRegressionLine).or(zLogisticRegressionLine).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from 'src/types/i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zAreaStyle,\n  zBackgroundColor,\n  zBarGapInGroup,\n  zBarMaxWidth,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zDualChartType,\n  zDualMeasures,\n  zLabel,\n  zLegend,\n  zLineStyle,\n  zMeasureTree,\n  zPointStyle,\n  zSort,\n  zSortLegend,\n  zTheme,\n  zTooltip,\n  zXBandAxis,\n  zYLinearAxis,\n} from 'src/types/properties'\n\nexport const zDualAxis = z.object({\n  chartType: z.literal('dualAxis'),\n\n  dataset: zDataset.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  dualMeasures: zDualMeasures.nullish(),\n\n  dualChartType: z.array(zDualChartType).or(zDualChartType).nullish(),\n  alignTicks: z.array(z.boolean()).or(z.boolean()).nullish(),\n\n  primaryYAxis: z.array(zYLinearAxis).or(zYLinearAxis).nullish(),\n  secondaryYAxis: z.array(zYLinearAxis).or(zYLinearAxis).nullish(),\n  xAxis: zXBandAxis.nullish(),\n\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n\n  crosshairRect: zCrosshairRect.nullish(),\n  sort: zSort.nullish(),\n  sortLegend: zSortLegend.nullish(),\n  theme: zTheme.nullish(),\n  barMaxWidth: zBarMaxWidth.nullish(),\n  barGapInGroup: zBarGapInGroup.nullish(),\n\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  pointStyle: z.array(zPointStyle).or(zPointStyle).nullish(),\n  lineStyle: z.array(zLineStyle).or(zLineStyle).nullish(),\n  areaStyle: z.array(zAreaStyle).or(zAreaStyle).nullish(),\n\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBarStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEcdfRegressionLine,\n  zEncoding,\n  zKdeRegressionLine,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n  zXLinearAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zHistogram = z.object({\n  chartType: z.literal('histogram'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXLinearAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  binCount: z.number().positive().nullish(),\n  binStep: z.number().positive().nullish(),\n  binValueType: z.literal('count').or(z.literal('percentage')).nullish(),\n  theme: zTheme.nullish(),\n  barStyle: z.array(zBarStyle).or(zBarStyle).nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  ecdfRegressionLine: z.array(zEcdfRegressionLine).or(zEcdfRegressionLine).nullish(),\n  kdeRegressionLine: z.array(zKdeRegressionLine).or(zKdeRegressionLine).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n})\n\nexport type Histogram = z.infer<typeof zHistogram>\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\n\nimport {\n  zBackgroundColor,\n  zColor,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zRose = z.object({\n  chartType: z.literal('rose'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zBackgroundColor,\n  zColor,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zRoseParallel = z.object({\n  chartType: z.literal('roseParallel'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zBackgroundColor,\n  zColor,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLegend,\n  zMeasureTree,\n  zPieLabel,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zPie = z.object({\n  chartType: z.literal('pie'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zPieLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\n\nimport {\n  zBackgroundColor,\n  zColor,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLegend,\n  zMeasureTree,\n  zPieLabel,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zDonut = z.object({\n  chartType: z.literal('donut'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zPieLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\n\nimport {\n  zBackgroundColor,\n  zColor,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zRadar = z.object({\n  chartType: z.literal('radar'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zBackgroundColor,\n  zColor,\n  zColorLegend,\n  zDataset,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zFunnel = z.object({\n  chartType: z.literal('funnel'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zColorLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\n\nimport {\n  zBackgroundColor,\n  zColor,\n  zColorLegend,\n  zDataset,\n  zDimensions,\n  zLabel,\n  zMeasureTree,\n  zTheme,\n  zTooltip,\n} from '../../properties'\n\nexport const zHeatmap = z.object({\n  chartType: z.literal('heatmap'),\n  dataset: zDataset.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zColorLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  theme: zTheme.nullish(),\n  locale: zLocale.nullish(),\n})\n","import { z } from 'zod'\nimport { zLocale } from '../../i18n'\nimport {\n  zAnnotationArea,\n  zAnnotationHorizontalLine,\n  zAnnotationPoint,\n  zAnnotationVerticalLine,\n  zBackgroundColor,\n  zBoxGapInGroup,\n  zBoxMaxWidth,\n  zBoxPlotStyle,\n  zColor,\n  zCrosshairRect,\n  zDataset,\n  zDimensionLinkage,\n  zDimensions,\n  zEncoding,\n  zLabel,\n  zLegend,\n  zMeasureTree,\n  zOutlierStyle,\n  zSort,\n  zSortLegend,\n  zTheme,\n  zTooltip,\n  zWhiskersConfig,\n  zXBandAxis,\n  zYLinearAxis,\n} from '../../properties'\n\nexport const zBoxPlot = z.object({\n  chartType: z.literal('boxPlot'),\n  dataset: zDataset.nullish(),\n  encoding: zEncoding.nullish(),\n  dimensions: zDimensions.nullish(),\n  measures: zMeasureTree.nullish(),\n  backgroundColor: zBackgroundColor.nullish(),\n  color: zColor.nullish(),\n  label: zLabel.nullish(),\n  legend: zLegend.nullish(),\n  tooltip: zTooltip.nullish(),\n  xAxis: zXBandAxis.nullish(),\n  yAxis: zYLinearAxis.nullish(),\n  sort: zSort.nullish(),\n  sortLegent: zSortLegend.nullish(),\n  crosshairRect: zCrosshairRect.nullish(),\n  boxPlotStyle: z.array(zBoxPlotStyle).or(zBoxPlotStyle).nullish(),\n  outlierStyle: z.array(zOutlierStyle).or(zOutlierStyle).nullish(),\n  theme: zTheme.nullish(),\n  whiskers: zWhiskersConfig.nullish(),\n  annotationPoint: z.array(zAnnotationPoint).or(zAnnotationPoint).nullish(),\n  annotationVerticalLine: z.array(zAnnotationVerticalLine).or(zAnnotationVerticalLine).nullish(),\n  annotationHorizontalLine: z.array(zAnnotationHorizontalLine).or(zAnnotationHorizontalLine).nullish(),\n  annotationArea: z.array(zAnnotationArea).or(zAnnotationArea).nullish(),\n  dimensionLinkage: zDimensionLinkage.nullish(),\n  locale: zLocale.nullish(),\n  boxMaxWidth: zBoxMaxWidth.nullish(),\n  boxGapInGroup: zBoxGapInGroup.nullish(),\n})\n","import { z } from 'zod'\n\nimport { zBar } from './chartType/bar'\nimport { zBarParallel } from './chartType/barParallel'\nimport { zColumn } from './chartType/column'\nimport { zColumnParallel } from './chartType/columnParallel'\nimport { zColumnPercent } from './chartType/columnPercent'\nimport { zLine } from './chartType/line'\nimport { zRose } from './chartType/rose'\nimport { zBarPercent } from './chartType/barPercent'\nimport { zPie } from './chartType/pie'\nimport { zDonut } from './chartType/donut'\nimport { zArea } from './chartType/area'\nimport { zAreaPercent } from './chartType/areaPercent'\nimport {\n  zBoxPlot,\n  zDualAxis,\n  zFunnel,\n  zHeatmap,\n  zHistogram,\n  zPivotTable,\n  zRadar,\n  zRoseParallel,\n  zScatter,\n  zTable,\n} from './chartType'\n\nexport const zVSeed = z.discriminatedUnion('chartType', [\n  zTable,\n  zPivotTable,\n  // cartesian\n  zLine,\n  zColumn,\n  zColumnParallel,\n  zColumnPercent,\n  zBar,\n  zBarParallel,\n  zBarPercent,\n  zArea,\n  zAreaPercent,\n  zScatter,\n  zDualAxis,\n  // polar\n  zPie,\n  zDonut,\n  zRose,\n  zRoseParallel,\n  zRadar,\n  // other\n  zFunnel,\n  zHeatmap,\n  zBoxPlot,\n  zHistogram,\n])\n","import { z } from 'zod'\nimport { zBodyCellStyle } from './bodyCellStyle'\n\nexport const zCellStyle = z.object({\n  bodyCellStyle: zBodyCellStyle.nullish(),\n})\n\nexport type CellStyle = z.infer<typeof zCellStyle>\n","import { z } from 'zod'\nimport { zChartType } from './properties/chartType'\nimport { zDataset } from './properties/dataset'\nimport { zDimensionTree } from './properties/dimensions'\nimport { zMeasureTree } from './properties/measures'\nimport { zEncoding } from './properties/encoding'\nimport { zDatasetReshapeInfo } from './properties/datasetReshapeInfo'\nimport { zTheme, zCustomThemeConfig } from './properties/theme'\nimport { zConfig } from './properties/config'\nimport { zAnalysis, zAnnotation, zRegressionLine, zMarkStyle } from './properties'\nimport { zLocale } from './i18n'\nimport { zCellStyle } from './properties/cellStyle/cellStyle'\n\nexport const zAdvancedVSeed = z.object({\n  chartType: zChartType,\n  dataset: zDataset,\n  datasetReshapeInfo: zDatasetReshapeInfo,\n  pivotAllDatasetReshapeInfo: zDatasetReshapeInfo,\n  dimensions: zDimensionTree,\n  measures: zMeasureTree,\n  reshapeMeasures: zMeasureTree.optional(),\n  reshapeDimensions: zDimensionTree.optional(),\n  encoding: zEncoding,\n  config: zConfig,\n  analysis: zAnalysis,\n  theme: zTheme,\n  markStyle: zMarkStyle,\n  cellStyle: zCellStyle,\n  customTheme: zCustomThemeConfig,\n  annotation: zAnnotation,\n  locale: zLocale,\n  regressionLine: zRegressionLine,\n})\n\nexport type AdvancedVSeed = z.infer<typeof zAdvancedVSeed>\n"],"names":["__webpack_require__","definition","key","Object","obj","prop","Symbol","execPipeline","pipeline","context","initialValue","result","prev","cur","e","translateMap","Intl","value","segments","values","text","segment","index","translatedText","isNullish","console","locale","intl","buildAdvanced","builder","start","performance","Date","chartType","Error","Builder","advancedVSeed","end","buildSpec","spec","build","C","t","o","n","u","p","i","r","l","a","s","Set","preorderTraverse","tree","callback","childrenKey","stack","node","stop","children","Array","child","findTreeNodesBy","nodes","measureDepth","measures","depth","Math","isMeasureTreeWithChildren","measure","isMeasureTreeWithParentId","normalizeMeasureTree","createEmptyMeasureGroup","currentGroup","measureGroups","item","DEFAULT_PARENT_ID","ChartTypeEnum","DATUM_HIDE_KEY","isTable","vseed","isPivotTable","isRadar","isAreaPercent","isColumnPercent","isBarPercent","isBarLikeChart","isVTable","isVChart","isPivotChart","isPivot","isCombination","dimensions","dimension","parentIds","unique","hasMeasureGroup","getColorItems","datasetReshapeInfo","colorItems","d","colorIdMap","getColorIdMap","advanced","customPipe","themeKey","checkVSeed","dataset","isEmpty","initAdvancedVSeed","structuredClone","c","isMeasure","isMeasureGroup","isMeasures","defaultMeasures","clonedMeasures","clone","top100dataset","sample","undefined","isDimension","isDimensionGroup","findMeasureById","id","findFirstMeasure","findAllMeasures","hasMultipleMeasureInSingleView","m","found","defaultDimensions","clonedDimensions","newDimensions","dim","replaceNullToUndefined","isPlainObject","pipe","mapValues","cellStyle","pickedCellStyle","pick","style","records","tableConfig","config","D","Number","theme","customTheme","chartConfigTheme","chartConfig","mergedConfig","mergeDeep","_k","mergeArray","chartCustomTheme","arr","themeItem","isString","isNumber","isObjectType","merge","tableAdvancedPipeline","initTable","backgroundColor","dimensionTreeToColumns","eachNode","columns","treeTreeToColumns","groupNode","field","title","props","createNumFormatter","format","type","ratio","thousandSeparator","prefix","suffix","symbol","fractionDigits","significantDigits","roundingMode","roundingPriority","numFormatterOptions","numFormatter","num","typeSymbol","String","numStr","parts","validSymbol","autoNumFormatter","createFormatter","autoFormatter","createFormatterByMeasure","v","numFormat","autoFormat","formatterFormat","measureTreeToColumns","fieldFormat","formatter","datum","bodyStyle","themeConfig","borderColor","fontColor","fontSize","hoverCellBgColor","hoverInlineColor","headerStyle","themConfig","frameStyle","selectionStyle","isType","isValid","nearlyEqual","b","epsilon","diff","selector","vchartDatum","selectorMode","vchartKeys","k","omit","selectors","isValueSelector","selectByValue","isMeasureSelector","selectByMeasure","isDimensionSelector","selectByDmension","isPartialDatumSelector","selectByPartial","selectorDatum","finalResult","results","op","selectorValueArr","tableStyleMap","pickBodyCellStyle","bodyCellStyle","acc","tableBodyCell","bodyCellStyleList","array","setStyleOfColumn","col","matchedStyles","originalDatum","mergedStyle","tableSpecPipeline","registerTable","ORIGINAL_DATA","FoldMeasureName","FoldMeasureId","FoldMeasureValue","MeasureId","MeasureName","FoldPrimaryMeasureValue","FoldSecondaryMeasureValue","FoldXMeasureValue","FoldYMeasureValue","FoldXMeasureId","FoldYMeasureId","XEncoding","YEncoding","AngleEncoding","DetailEncoding","ColorEncoding","ColorIdEncoding","LowerWhisker","UpperWhisker","OutliersMeasureId","MedianMeasureId","BinStartMeasureId","BinEndMeasureId","BinCountMeasureId","BinPercentageMeasureId","defaultMeasureId","encodingForPivotTable","vseedMeasures","hasDimensionEncoding","hasMeasureEncoding","encoding","generateDimensionEncoding","generateDefaultDimensionEncoding","generateMeasureEncoding","generateDefaultMeasureEncoding","uniqueDimIds","foldMeasures","options","measureId","measureName","measureValue","colorMeasureId","allowEmptyFold","omitIds","foldInfo","Infinity","ids","j","alias","valueNumber","reshapePivotTable","newDatasets","pivotTableConfig","pivotTableAdvancedPipeline","initPivotTable","pivotColumns","pivotRows","rows","allMeasures","res","titleOnDimension","pivotIndicators","hasRow","foldMapValues","row","table","foldMeasureId","rowHeaderStyle","cornerHeaderStyle","hoverCellColor","pivotTableBodyCell","indicators","newIndicators","ind","newInd","indicatorKey","dataValue","cellHeaderPaths","headerPaths","path","dataConfig","aggregationRules","pivotTableSpecPipeline","registerPivotTable","MeaIdDim","encodingAdapter","noEncodingPipeline","hasEncodingPipeline","hasEncoding","addColorToEncoding","isMultiMeasure","defaultEncodingForLine","encodingForLine","color","label","tooltip","buildMeasures","generateMeasuresByParentId","basicMeasuresToMeasureTree","measureTree","parent","deleteMeasureTreeByCallback","parents","Map","nodesToProcess","visited","deleted","parentList","pickMeasuresForReshape","encodingKeys","deleteBy","deleteDimensionTreeByCallback","dimensionTree","pickDimensionsForReshape","reshapeDimensions","pivotAdapter","pivotPipeline","usePivotChart","T","unfoldDimensions","separator","unfoldInfo","x","y","detail","angle","angleDimensions","xDimensions","yDimensions","colorDimensions","detailDimensions","applyEncoding","colorId","getColorAliasItem","dataReshapeByEncoding","foldMeasureName","foldMeasureValue","colorItemAsId","foldedDataset","finalDataset","Separator","colorAdapter","ordinalPipe","linearPipe","isLinearColor","measureIdList","getColorMeasureId","reshapeWithEncoding","uniqueBy","pivotReshapeWithEncoding","datasets","measureGroup","groupId","newSubDataset","reshapeInfo","calcOrder","sortConfig","order","orderBy","sort","aValue","bValue","sortXBandAxis","sortAxis","xField","axisOrderResult","sortLegend","colorIds","orderRes","itemNameOrId","lineConfig","pickedConfig","markStyle","pickedMarkStyle","annotation","lineAdvancedPipeline","initLine","baseConfig","colorScheme","colorMapping","createSpecifiedForColorMapping","matchedList","colors","accurateMap","name","colorValue","accurateMatchedList","colorKey","colorObj","fuzzyMap","fuzzyMatchedList","linearColor","linearColorScheme","datasetXY","analysis","orderMapping","fields","progressive","defaultTitleText","idList","f","xBand","pivotAllDatasetReshapeInfo","visible","tick","grid","line","labelAutoHide","labelAutoHideGap","labelAutoLimit","labelAutoLimitLength","labelAutoRotate","labelAutoRotateAngleRange","sampling","onlyMeasureId","bandAxis","AXIS_LABEL_SPACE","allDatasetReshapeInfo","isArray","createLinearFormat","createLinearPercentFormat","percentFormatter","yLinear","zero","nice","inverse","max","min","log","logBase","linearAxis","LINEAR_AXIS_INNER_OFFSET_TOP","verticalCrosshairLine","lineColor","labelColor","labelVisible","labelBackgroundColor","crosshair","xAxisConfig","xAxisFormatter","discreteLegend","legend","enable","position","labelFontColor","labelFontSize","pagerIconColor","pagerIconDisableColor","labelFontWeight","maxSize","border","shapeType","orient","legendPosition","labelTextColor","colorLegend","colorMeasure","colorPointStyleFill","stylePipe","pointStyle","pointStyles","customMap","pointBorderColor","pointBorderStyle","pointBorderWidth","pointColor","pointColorOpacity","pointSize","pointVisible","lineDash","pointStateDimensionHover","point","pointStateHover","colorLineStyleFill","getCurveType","lineSmooth","getCurveTension","lineStyle","lineStyles","lineColorOpacity","lineWidth","lineVisible","dashSegment","dashGap","curveType","curveTension","_","lineData","buildLabel","generateMeasureValue","labelAutoFormat","mergedMeasure","generateMeasurePercent","sum","percentValue","vseedDimensions","advancedVSeedDimensions","advancedVSeedMeasures","foldInfoList","wrap","showValue","showValuePercent","showDimension","labelOverlap","labelColorSmartInvert","labelStroke","labelPosition","hasDimLabelEncoding","labelDims","labelMeas","percentFormat","data","entry","dimLabels","meaLabels","statistics","measureValueLabel","measurePercentLabel","getTooltipStyle","tooltipConfig","createMarkContent","createDimensionContent","foldMap","encodingColor","dims","meas","dimContent","meaContent","originalData","defaultContent","colorName","isSubset","sub","excludeMeasuresIds","ANNOTATION_AREA_TEXT_STYLE_BY_POSITION","generateAnnotationPointPipe","findSelectedDatas","generateMarkPoint","annotationPoint","annotationPointList","isHorizontalBar","defaultStyle","markPoint","selectorPoint","textColor","textFontSize","textFontWeight","textAlign","textBaseline","textBackgroundBorderColor","textBackgroundBorderRadius","textBackgroundBorderWidth","textBackgroundColor","textBackgroundPadding","textBackgroundVisible","offsetX","offsetY","selectedData","dx","dy","markPointStyle","ANNOTATION_Z_INDEX","marks","mark","annotationVerticalLine","annotationVerticalLineList","positionMap","markLine","xValue","textPosition","generateOneMarkLine","xValueArr","specMarkLine","newMarkLine","annotationHorizontalLine","annotationHorizontalLineList","yValue","yValueArr","annotationArea","annotationAreaList","defaultTextPosition","markArea","areaColor","areaColorOpacity","areaBorderColor","areaBorderRadius","areaBorderWidth","areaLineDash","outerPadding","positionData","xyList","yAxisHelper","xAxisHelper","regionRect","minX","maxX","minY","maxY","fuzzy","isNil","clamp","input","hslToRgb","h","g","rgbToHsl","cMin","cMax","delta","REG_HEX","DEFAULT_COLORS_OPACITY","DEFAULT_COLORS","RGB","rgba","SRGBToLinear","LinearToSRGB","setHex","formatValue","forceHex","isHex","hex","parseInt","hexLength","Color","source","model","hexRes","aColor","parseFloat","rgb","opacity","hsl","scalar","RsRGB","GsRGB","BsRGB","R","G","B","gammaFactor","safeInverse","isNaN","clamper","formatGradientStops","stops","firstInvalidateIndex","newStops","splitLine","splitLineConfig","splitValue","colorTheme","colorConfig","groupMark","ctx","vchart","chart","lineSeries","lineMark","lineGraphics","points","seg","pt","scale","splitCoordinate","lineStroke","areaFill","VUtilColor","attrs","range","opt","parentNode","seriesSpec","measureValueKey","initPivot","pivotGridStyle","onlyCombination","transparent","bodyFontColor","headerFontColor","headerBackgroundColor","hoverHeaderBackgroundColor","hoverHeaderInlineBackgroundColor","outlineBorderLineWidth","frameCornerRadius","arg","noYAxis","chartPipeline","allMeasureIds","subMeasuresId","invalideMeasuresIds","newDataset","newDatasetReshapeInfo","newContext","chartSpec","pivotIndicatorsAsRow","pivotIndicatorsAsCol","datasetPivot","pre","pivotAxisStyle","axisStyle","axis","BAND_AXIS_INNER_OFFSET_IN_PIVOT","pivotRowDimensions","rowDimensions","pivotColumnDimensions","columnDimensions","pivotTitle","pivotDiscreteLegend","colorSpecified","legends","pivotColorLegend","dimensionLinkage","labelHoverOnAxis","labelFormat","adapted","pivotLine","lineSpecPipeline","registerLine","defaultEncodingForColumn","encodingForColumn","columnConfig","regressionLine","keys","regressionLineConfig","hasLine","columnAdvancedPipeline","initColumn","stackCornerRadius","barMaxWidth","stackInverse","verticalCrosshairRect","rectColor","colorBarStyleFill","barStyle","showStroke","barStyles","barBorderColor","barBorderStyle","barBorderWidth","barColor","barColorOpacity","barBorderOpacity","barRadius","barVisible","annotationAreaBand","bandPosition","xBandWidth","startX","endX","width","middleX","yBandWidth","startY","endY","middleY","invNorm","c1","c2","c3","c4","c5","c6","d1","d2","d3","d4","q","computeLinearCIComponents","predict","sumX","X","SSE","Sxx","dxc","stdErrorsAt","px","comps","s2","ordinaryLeastSquares","uX","uY","uXY","uX2","denom","visitPoints","xi","yi","rSquared","ssr","sst","regressionLinear","_a","alpha","meanX","meanY","meanXY","meanX2","xx","N","out","step","z","errs","solveLinearSystem","A","M","maxRow","maxVal","tmp","factor","regressionPolynomial","_b","degree","sums","xp","coef","cnt","_dx","yh","defaultRegressionLineColor","defaultRegressionLineLabelX","defaultRegressionLineLabelY","getAlphaByConfidenceLevel","confidenceLevel","columnPolynomialRegressionLine","lineTheme","lineList","lineIndex","confidenceIntervalOpacity","confidenceIntervalVisible","childrenMarks","rect","yClamper","fieldX","fieldY","xValues","minPoints","confidenceInterval","evaluateGrid","xVal","filteredData","halfBandWidth","linePoints","intervalData","column","pivotColumn","columnSpecPipeline","registerColumn","pieConfig","areaConfig","areaPercentConfig","barConfig","barParallelConfig","barPercentConfig","columnParallelConfig","columnPercentConfig","donutConfig","roseConfig","roseParallelConfig","radarConfig","funnelConfig","heatmapConfig","columnParallelAdvancedPipeline","RegExp","initColumnParallel","sameDimensionsMode","isDeepEqual","barGapInGroup","columnParallel","pivotColumnParallel","columnParallelSpecPipeline","registerColumnParallel","columnPercentAdvancedPipeline","percent","columnPercent","pivotColumnPercent","columnPercentSpecPipeline","registerColumnPercent","defaultEncodingForBar","encodingForBar","sortYBandAxis","yField","barAdvancedPipeline","initBar","datasetYX","xLinear","yBand","horizontalCrosshairRect","yAxisConfig","yAxisFormatter","bar","pivotBar","barSpecPipeline","registerBar","barParallelAdvancedPipeline","initBarParallel","barParallel","pivotBarParallel","barParallelSpecPipeline","registerBarParallel","barPercentAdvancedPipeline","barPercent","pivotBarPercent","barPercentSpecPipeline","registerBarPercent","areaAdvancedPipeline","initArea","colorAreaStyleFill","areaStyle","areaStyles","group","areaGroups","groupBy","areaVisible","area","pivotArea","areaSpecPipeline","registerArea","areaPercentAdvancedPipeline","areaPercent","pivotAreaPercent","areaPercentSpecPipeline","registerAreaPercent","defaultEncodingForScatter","encodingForScatter","dimensionsWithoutMeasureId","buildMeasuresForScatter","scatterMeasures","basicMeasuresToScatterMeasures","scatterMeasuresToMeasureTree","basicMeasures","yMeasures","xMeasures","isYAxis","isXAxis","groupChildren","arrPrimaryMeasures","arrSecondaryMeasures","scatterChart","Boolean","isX","isY","scatterConfig","reshapeWithScatterEncoding","unfoldInfoList","pivotReshapeWithScatterEncoding","datasetList","scatterAdvancedPipeline","initScatter","datasetScatter","scatterSize","hasSizeEncoding","size","labelScatter","tooltipScatter","foldMeaContent","horizontalCrosshairLine","tricube","uu","regressionLowess","span","iterations","ptsX","ptsY","predictSingle","x0","robustWeights","dists","maxDist","w","sumw","idx","wi","sw","sx","sy","sxx","sxy","slope","iter","fits","med","regressionLogistic","_c","maxIter","tol","xs","ys","_x","intercept","beta","converged","pi","g0","g1","h00","h01","h11","det","delta0","delta1","generateRegressionLinePipe","regressionFunction","getOptions","getDefaultRegressionOptions","getMinPoints","colorAttrOptions","groups","groupData","mainColor","ld","NaN","areaPoints","y1","linearRegressionLine","lowessRegressionLine","polynomialRegressionLine","logisticRegressionLine","scatter","pivotScatter","scatterSpecPipeline","registerScatter","defaultEncodingForDualAxis","encodingForDualAxis","buildMeasuresForDualAxis","dualMeasures","basicMeasuresToDualMeasures","dualMeasuresToMeasureTree","primaryMeasures","secondaryMeasures","isPrimaryYAxis","isSecondaryYAxis","dualChart","isPrimary","isSecondary","reshapeWithDualEncoding","pivotReshapeWithDualEncoding","dualAxisConfig","dualAxisAdvancedPipeline","series","args","seriesDualAxis","createDualContext","seriesContext","initDualAxisPrimary","initDualAxisSecondary","dualChartTypePrimary","DUAL_AXIS_CHART_NON_COLUMN_Z_INDEX","primary","secondary","bothColumn","DUAL_AXIS_CHART_COLUMN_Z_INDEX","columnSpec","dualChartTypeSecondary","datasetPrimary","datasetSecondary","labelPrimary","DUAL_AXIS_LABEL_Z_INDEX","labelSecondary","tooltipPrimary","tooltipSecondary","tooltipDualAxis","barStyleFilter","pointStyleFilter","lineStyleFilter","areaStyleFilter","yLinearPrimary","reshapeInfoId","primaryYAxis","alignTicks","alignTicksConfig","isEmptySecondary","seriesIds","seriesId","yLinearSecondary","secondaryYAxis","onlySecondary","sync","linearColorForDualAxis","isObjectLike","proto","pickWithout","match","itKey","annotationPointOfDualAxis","pickedDatum","dualAxis","pivotDualAxis","dualAxisSpecPipeline","registerDualAxis","defaultEncodingForPie","encodingForPie","hasMulti","pieAdvancedPipeline","initPie","colorPieStyleFill","pieStyle","labelPie","pivotHideIndicatorName","addRegionPadding","pie","pivotPie","pieSpecPipeline","registerPie","donutAdvancedPipeline","initDonut","donut","pivotDonut","donutSpecPipeline","registerDonut","defaultEncodingForRose","encodingForRose","roseAdvancedPipeline","initRose","hasNegativeValue","radiusAxis","colorRoseStyleFill","roseStyle","rose","pivotRose","roseSpecPipeline","registerRose","roseParallelAdvancedPipeline","initRoseParallel","roseParallel","pivotRoseParallel","roseParallelSpecPipeline","registerRoseParallel","defaultEncodingForRadar","encodingForRadar","radarAdvancedPipeline","initRadar","radarAngleAxis","radarRadiusAxis","radar","pivotRadar","radarSpecPipeline","registerRadar","defaultEncodingForFunnel","encodingForFunnel","funnelAdvancedPipeline","initFunnel","colorFunnelStyleFill","funnelStyle","funnelTransformStyle","funnel","pivotFunnel","funnelSpecPipeline","registerFunnel","defaultEncodingForHeatmap","encodingForHeatmap","colorDims","heatmapAdvancedPipeline","heatmapColorLegend","val","isHide","colorCellStyleFill","cell","tooltipHeatmap","initHeatmap","heatmap","pivotHeatmap","heatmapSpecPipeline","registerHeatmap","boxplotConfig","defaultEncodingForBoxplot","encodingForBoxplot","toNumber","quantileSorted","valueof","i0","value0","boxplot","_d","_e","_f","_g","_h","_j","_l","_m","_o","_p","_q","_r","groupField","whiskers","includeValues","names","keyName","countName","meanName","q1Name","medianName","q3Name","iqrName","minName","maxName","lowerWhiskerName","upperWhiskerName","outliersName","valuesName","rawValues","keyToGroup","rv","vals","sorted","count","dataMin","dataMax","mean","q1","median","q3","iqr","lowerBound","upperBound","outliers","representative","groupObj","reshapeWithBoxplotEncoding","uniqDims","boxPlotDataList","boxPlotData","Q1MeasureValue","Q3MeasureValue","pivotReshapeWithBoxplotEncoding","rowColumnFields","subMeasures","validEncodingIds","boxplotAdvancedPipeline","initBoxplot","boxMaxWidth","boxGapInGroup","datasetBoxplot","boxPlotMeasureKeys","VCHART_OUTLIER_KEY","tooltipBoxplot","valueMeasure","defaultFormatter","measureAliasMapping","tooltipItems","outerlierMeasure","mea","colorBoxPlotStyleFill","boxPlotStyle","boxPlotStyles","boxColor","boxColorOpacity","boxBorderColor","boxBorderWidth","boxVisible","boxBorderOpacity","outlierStyle","outlierStyles","pivotBoxplot","boxplotSpecPipeline","registerBoxPlot","baseMerge","target","shallowArray","skipTargetArray","iterable","length","propIndex","assignMergeValue","baseMergeDeep","objValue","srcValue","newValue","isCommon","eq","other","sources","sourceIndex","histogramConfig","hasColorEncoding","histogramXAxisConfig","flattenDatasert","minValue","maxValue","defaultEncodingForHistogram","encodingForHistogram","subBin","numBins","thresholds","percentageName","countField","x0Name","x1Name","usingGroup","rec","binGroupCounts","binGroupValues","groupKeyOrder","groupKeySet","groupRepr","left","right","datumCount","gk","vv","totalCount","finalOut","repr","denominator","len","bin","stepSize","startMin","bins","stepSizeInt","facetField","normalizedGroupField","subViewOptions","subViewMap","dataItem","subViewKey","subDataset","combinedGroupField","reshapeWithHistogramEncoding","binCount","binStep","binValueType","valueField","binData","pivotReshapeWithHistogramEncoding","histogramAdvancedPipeline","initHistogram","datasetHistogram","getDefaultXFormatterOfHistogram","xConfig","getDefaultValueFormatterOfHistogram","tooltipHistogram","defaultXFormatter","defaultValueFormatter","dimFormatter","histogramVerticalCrosshairRect","binRange","binStart","binEnd","annotationPointOfHistogram","histogramSpec","x2Field","gaussian","scott","std","silverman","kde","kernel","sd","method","invNh","evalPoint","kdeRegressionLine","kdeLine","scaleY","viewData","simpleData","scaleR","ecdf","evaluateSingle","lo","hi","mid","ecdfRegressionLine","ecdfLine","yRange","y0","leftAxis","histogram","pivotHistogram","histogramSpecPipeline","registerHistogram","getDarkCrosshairLine","getDarkCrosshairRect","getLightCrosshairLine","getLightCrosshairRect","getLightColorScheme","getDarkColorScheme","getLightLinearColorScheme","getDarkLinearColorScheme","getLightColor","getDarkColor","getDefaultLabel","getDarkLabel","getLightLabel","getDefaultLegend","getDarkLegend","getLightLegend","getDefaultTableConfig","getLightTableConfig","getDarkTableConfig","pickPivotChartGridConfig","getLightPivotChartGridConfig","getDarkPivotChartGridConfig","getDefaultTooltip","getLightTooltip","getDarkTooltip","getLightLinearAxis","getLightBandAxis","getDarkLinearAxis","getDarkBandAxis","getDefaultAnnotationPoint","getLightAnnotationPoint","getDefaultAnnotationLine","getLightAnnotationHorizontalLine","getLightAnnotationVerticalLine","getDefaultAnnotationArea","getLightAnnotationArea","getLightAnnotation","getDarkAnnotationPoint","getDarkAnnotationHorizontalLine","getDarkAnnotationVerticalLine","getDarkAnnotationArea","getDarkAnnotation","getLightFunnelTransformTheme","getDarkFunnelTransformTheme","getLightHeatmapCellTheme","getDarkHeatmapCellTheme","getDefaultRegressionLine","getLightRegressionLine","getDarkRegressionLine","getLightBoxPlotStyle","getDarkBoxPlotStyle","getLightOutlierStyle","getDarkOutlierStyle","lightTheme","barBandAxis","crosshairLine","crosshairRect","darkTheme","registerCustomTheme","registerLightTheme","registerDarkTheme","registerAll","updateAdvanced","advancedPipe","updateSpec","specPipe","$constructor","initializer","params","init","inst","def","Parent","Definition","fn","$ZodAsyncError","globalConfig","newConfig","cuid","cuid2","ulid","xid","ksuid","nanoid","duration","guid","uuid","version","email","_emoji","emoji","ipv4","ipv6","cidrv4","cidrv6","base64url","hostname","e164","dateSource","date","timeSource","hhmm","regex","datetime","time","opts","timeRegex","string","integer","number","_undefined","lowercase","uppercase","getEnumValues","entries","numericValues","jsonStringifyReplacer","cached","getter","set","nullish","cleanRegex","floatSafeRemainder","valDecCount","stepString","stepDecCount","decCount","valInt","stepInt","EVALUATING","defineLazy","object","assignProp","mergeDefs","defs","mergedDescriptors","descriptors","esc","str","JSON","captureStackTrace","_args","navigator","F","Function","ctor","prot","propertyKeyTypes","escapeRegex","cl","normalizeParams","_params","optionalKeys","shape","NUMBER_FORMAT_RANGES","schema","mask","currDef","newShape","extend","_shape","partial","Class","oldShape","required","aborted","startIndex","prefixIssues","issues","iss","unwrapMessage","message","finalizeIssue","full","getLengthableOrigin","$ZodCheck","numericOriginMap","$ZodCheckLessThan","origin","bag","curr","payload","$ZodCheckGreaterThan","$ZodCheckMultipleOf","isMultiple","BigInt","$ZodCheckNumberFormat","isInt","minimum","maximum","$ZodCheckMaxLength","$ZodCheckMinLength","$ZodCheckLengthEquals","tooBig","$ZodCheckStringFormat","$ZodCheckRegex","$ZodCheckLowerCase","$ZodCheckUpperCase","$ZodCheckIncludes","escapedRegex","pattern","$ZodCheckStartsWith","$ZodCheckEndsWith","$ZodCheckOverwrite","Doc","content","lines","minIndent","dedented","$ZodError","$ZodRealError","flattenError","error","mapper","issue","fieldErrors","formErrors","formatError","_mapper","processError","el","terminal","_parse","_Err","_ctx","Promise","_parseAsync","_safeParse","safeParse","_safeParseAsync","safeParseAsync","$ZodType","checks","ch","runChecks","isAborted","asyncResult","shouldRun","currLen","nextLen","$ZodString","$ZodStringFormat","$ZodGUID","$ZodUUID","versionMap","$ZodEmail","$ZodURL","trimmed","url","URL","$ZodEmoji","$ZodNanoID","$ZodCUID","$ZodCUID2","$ZodULID","$ZodXID","$ZodKSUID","$ZodISODateTime","$ZodISODate","$ZodISOTime","$ZodISODuration","$ZodIPv4","$ZodIPv6","$ZodCIDRv4","$ZodCIDRv6","address","prefixNum","isValidBase64","atob","$ZodBase64","isValidBase64URL","base64","padded","$ZodBase64URL","$ZodE164","isValidJWT","token","algorithm","tokensParts","header","parsedHeader","$ZodJWT","$ZodNumber","received","$ZodNumberFormat","$ZodBoolean","$ZodUndefined","$ZodAny","$ZodUnknown","$ZodNever","handleArrayResult","final","$ZodArray","proms","handlePropertyResult","$ZodObject","_normalized","okeys","propValues","generateFastpass","doc","normalized","parseStr","counter","fastpass","isObject","jit","allowsEval","fastEnabled","catchall","unrecognized","keySet","_catchall","handleUnionResults","nonaborted","$ZodUnion","option","patterns","single","first","async","$ZodDiscriminatedUnion","_super","pv","disc","map","$ZodIntersection","handleIntersectionResults","mergeValues","bKeys","sharedKeys","newObj","sharedValue","newArray","itemA","itemB","merged","$ZodRecord","Reflect","keyResult","$ZodEnum","valuesSet","$ZodLiteral","$ZodTransform","_out","output","handleOptionalResult","$ZodOptional","$ZodNullable","$ZodDefault","handleDefaultResult","$ZodPrefault","$ZodNonOptional","handleNonOptionalResult","$ZodCatch","$ZodPipe","handlePipeResult","$ZodReadonly","handleReadonlyResult","$ZodCustom","handleRefineResult","_iss","$ZodRegistry","_meta","meta","pm","registry","globalRegistry","_string","_email","_guid","_uuid","_uuidv4","_uuidv6","_uuidv7","_url","_nanoid","_cuid","_cuid2","_ulid","_xid","_ksuid","_ipv4","_ipv6","_cidrv4","_cidrv6","_base64","_base64url","_e164","_jwt","_isoDateTime","_isoDate","_isoTime","_isoDuration","_number","_int","_boolean","_any","_unknown","_never","_lt","_lte","_gt","_gte","_multipleOf","_maxLength","_minLength","_length","_regex","_lowercase","_uppercase","_includes","includes","_startsWith","_endsWith","_overwrite","tx","_normalize","form","_trim","_toLowerCase","_toUpperCase","_array","element","_refine","_superRefine","_check","_issue","ZodISODateTime","ZodISODate","ZodISOTime","ZodISODuration","ZodRealError","ZodType","reg","check","refine","refinement","superRefine","optional","nullable","nonoptional","union","intersection","transform","prefault","readonly","description","_ZodString","ZodString","ZodEmail","ZodURL","ZodJWT","ZodEmoji","ZodGUID","ZodUUID","ZodNanoID","ZodCUID","ZodCUID2","ZodULID","ZodBase64","ZodBase64URL","ZodXID","ZodKSUID","ZodIPv4","ZodIPv6","ZodCIDRv4","ZodCIDRv6","ZodE164","ZodStringFormat","ZodNumber","ZodNumberFormat","ZodBoolean","ZodUndefined","ZodAny","any","ZodUnknown","unknown","ZodNever","never","ZodArray","minLength","maxLength","ZodObject","incoming","ZodOptional","ZodNonOptional","ZodUnion","ZodDiscriminatedUnion","discriminatedUnion","discriminator","ZodIntersection","ZodRecord","record","keyType","valueType","ZodEnum","newEntries","ZodLiteral","literal","ZodTransform","innerType","ZodNullable","ZodDefault","defaultValue","ZodPrefault","ZodCatch","catchValue","ZodPipe","in_","ZodReadonly","ZodCustom","zChartType","zDualChartType","zDatum","zDataset","zDimension","zDimensionGroup","zDimensions","zDimensionTree","zNumFormat","zMeasure","zMeasureGroup","zMeasures","zMeasureTree","zDualMeasure","zDualMeasures","zScatterMeasure","zScatterMeasures","zFoldInfo","zUnfoldInfo","zDatasetReshapeInfo","zEncoding","EncodingEnum","zDimensionEncoding","DimensionEncodingEnum","zMeasureEncoding","MeasureEncodingEnum","zBackgroundColor","zTableConfig","zXBandAxis","zYBandAxis","zXLinearAxis","zYLinearAxis","zCrosshairLine","zCrosshairRect","zColor","zLinearColor","zSelector","zSelectors","zLabel","zLegend","zColorLegend","zTooltip","zAnnotationPoint","zAnnotationHorizontalLine","zAnnotationArea","zAnnotationPointConfig","zAnnotationHorizontalLineConfig","zAnnotationVerticalLineConfig","zAnnotationAreaConfig","zAnnotationConfig","zPivotChartGridConfig","zDimensionLinkage","zLineConfig","zStackCornerRadius","zBarMaxWidth","zBarGapInGroup","zEcdfRegressionLine","zKdeRegressionLine","zLinearRegressionLine","zLogisticRegressionLine","zLowessRegressionLine","zPolynomialRegressionLine","zRegressionLine","zColumnParallelConfig","zColumnConfig","zColumnPercentConfig","zBarConfig","zBarParallelConfig","zBarPercentConfig","zAreaConfig","zAreaPercentConfig","zScatterConfig","zDualAxisConfig","zPieLabel","zPieConfig","zDonutConfig","zRadarConfig","zRoseConfig","zRoseParallelConfig","zFunnelTransform","zFunnelConfig","zHeatmapCell","zHeatmapConfig","zPivotTableConfig","zWhiskersConfig","zBoxPlotStyle","zOutlierStyle","zBoxMaxWidth","zBoxGapInGroup","zBoxplotConfig","zHistogramConfig","zConfig","zCustomThemeConfig","zCustomTheme","zTheme","zBarStyle","zPointStyle","zLineStyle","zAreaStyle","zMarkStyle","zAnnotationVerticalLine","zAnnotation","zSort","zSortLegend","zAnalysis","zBodyCellStyle","zLocale","zTable","zPivotTable","zLine","zColumn","zColumnParallel","zColumnPercent","zBar","zBarParallel","zBarPercent","zArea","zAreaPercent","zScatter","zDualAxis","zHistogram","zRose","zRoseParallel","zPie","zDonut","zRadar","zFunnel","zHeatmap","zBoxPlot","zVSeed","zCellStyle","zAdvancedVSeed"],"mappings":"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"}