{"version":3,"sources":["../src/data-zoom/data-zoom.ts"],"names":[],"mappings":"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","file":"data-zoom.js","sourcesContent":["import { type IGroup } from '@visactor/vrender-core';\nimport { array, isFunction, isValid, merge } from '@visactor/vutils';\nimport { AbstractComponent } from '../core/base';\nimport { IDataZoomEvent, IDataZoomInteractiveEvent, type DataZoomAttributes } from './type';\nimport type { ComponentOptions } from '../interface';\nimport { DataZoomRenderer, type DataZoomRendererAttrs } from './renderer';\nimport { DataZoomInteraction, type InteractionAttributes } from './interaction';\nimport { loadDataZoomComponent } from './register';\nimport { DEFAULT_DATA_ZOOM_ATTRIBUTES } from './config';\n\nloadDataZoomComponent();\nexport class DataZoom extends AbstractComponent<Required<DataZoomAttributes>> {\n  name = 'dataZoom';\n  static defaultAttributes = DEFAULT_DATA_ZOOM_ATTRIBUTES;\n  /** 交互控制 */\n  private _interaction: DataZoomInteraction;\n  /** 渲染控制 */\n  private _renderer: DataZoomRenderer;\n  /** 共享变量: 容器 */\n  private _container: IGroup;\n  /** 共享变量: 状态 */\n  private _state: { start: number; end: number } = { start: 0, end: 1 };\n  /** 共享变量: 布局 */\n  private _layoutCacheFromConfig: any;\n\n  /** 中间量 */\n  private _isHorizontal: boolean;\n\n  constructor(attributes: DataZoomAttributes, options?: ComponentOptions) {\n    super(options?.skipDefault ? attributes : merge({}, DataZoom.defaultAttributes, attributes));\n    const { start, end, orient } = this.attribute as DataZoomAttributes;\n    this._isHorizontal = orient === 'top' || orient === 'bottom';\n    start && (this._state.start = start);\n    end && (this._state.end = end);\n    this._renderer = new DataZoomRenderer(this._getRendererAttrs());\n    this._interaction = new DataZoomInteraction(this._getInteractionAttrs());\n  }\n\n  /**\n   * 获取背景框中的位置和宽高\n   * @description 实际绘制的背景框中的高度或宽度 减去 中间手柄的高度或宽度\n   */\n  getLayoutAttrFromConfig = () => {\n    if (this._layoutCacheFromConfig) {\n      return this._layoutCacheFromConfig;\n    }\n    const {\n      position: positionConfig,\n      size,\n      orient,\n      middleHandlerStyle = {},\n      startHandlerStyle = {},\n      endHandlerStyle = {},\n      backgroundStyle = {}\n    } = this.attribute as DataZoomAttributes;\n    const { width: widthConfig, height: heightConfig } = size;\n    const middleHandlerSize = middleHandlerStyle.background?.size ?? 10;\n\n    // 如果middleHandler显示的话，要将其宽高计入datazoom宽高\n    let width;\n    let height;\n    let position;\n    if (middleHandlerStyle.visible) {\n      if (this._isHorizontal) {\n        width = widthConfig;\n        height = heightConfig - middleHandlerSize;\n        position = {\n          x: positionConfig.x,\n          y: positionConfig.y + middleHandlerSize\n        };\n      } else {\n        width = widthConfig - middleHandlerSize;\n        height = heightConfig;\n        position = {\n          x: positionConfig.x + (orient === 'left' ? middleHandlerSize : 0),\n          y: positionConfig.y\n        };\n      }\n    } else {\n      width = widthConfig;\n      height = heightConfig;\n      position = positionConfig;\n    }\n\n    const startHandlerSize = (startHandlerStyle.size as number) ?? (this._isHorizontal ? height : width);\n    const endHandlerSize = (endHandlerStyle.size as number) ?? (this._isHorizontal ? height : width);\n    // 如果startHandler显示的话，要将其宽高计入dataZoom宽高\n    if (startHandlerStyle.visible) {\n      if (this._isHorizontal) {\n        width -= (startHandlerSize + endHandlerSize) / 2;\n        position = {\n          x: position.x + startHandlerSize / 2,\n          y: position.y\n        };\n      } else {\n        height -= (startHandlerSize + endHandlerSize) / 2;\n        position = {\n          x: position.x,\n          y: position.y + startHandlerSize / 2\n        };\n      }\n    }\n\n    // stroke 需计入宽高, 否则dataZoom在画布边缘会被裁剪lineWidth / 2\n    height += (backgroundStyle.lineWidth ?? 2) / 2;\n    width += (backgroundStyle.lineWidth ?? 2) / 2;\n\n    this._layoutCacheFromConfig = {\n      position,\n      width,\n      height\n    };\n    return this._layoutCacheFromConfig;\n  };\n\n  private _getRendererAttrs(): DataZoomRendererAttrs {\n    return {\n      attribute: this.attribute,\n      getLayoutAttrFromConfig: this.getLayoutAttrFromConfig,\n      setState: (state: { start: number; end: number }) => {\n        this._state = state;\n      },\n      getState: () => this._state,\n      getContainer: () => this._container\n    };\n  }\n\n  private _getInteractionAttrs(): InteractionAttributes {\n    return {\n      stage: this.stage,\n      attribute: this.attribute,\n      startHandlerMask: this._renderer.startHandlerMask,\n      endHandlerMask: this._renderer.endHandlerMask,\n      middleHandlerSymbol: this._renderer.middleHandlerSymbol,\n      middleHandlerRect: this._renderer.middleHandlerRect,\n      selectedBackground: this._renderer.selectedBackground,\n      background: this._renderer.background,\n      previewGroup: this._renderer.previewGroup,\n      selectedPreviewGroup: this._renderer.selectedPreviewGroup,\n      getLayoutAttrFromConfig: this.getLayoutAttrFromConfig,\n      setState: (state: { start: number; end: number }) => {\n        this._state = state;\n      },\n      getState: () => this._state,\n      getGlobalTransMatrix: () => this.globalTransMatrix\n    };\n  }\n\n  bindEvents(): void {\n    if (this.attribute.disableTriggerEvent) {\n      this.setAttribute('childrenPickable', false);\n      return;\n    }\n    this._interaction.bindEvents();\n    this._interaction.on(IDataZoomInteractiveEvent.stateUpdate, ({ shouldRender }) => {\n      if (shouldRender) {\n        this._renderer.renderDataZoom(true);\n      }\n    });\n    this._interaction.on(IDataZoomInteractiveEvent.dataZoomUpdate, ({ start, end, tag }) => {\n      this._dispatchEvent(IDataZoomEvent.dataZoomChange, { start, end, tag });\n    });\n    this._interaction.on(IDataZoomInteractiveEvent.maskUpdate, () => {\n      this._renderer.renderDragMask();\n    });\n    if (this.attribute.showDetail === 'auto') {\n      this._container.addEventListener('pointerenter', () => {\n        this._renderer.showText = true;\n        this._renderer.renderText();\n      });\n      this._container.addEventListener('pointerleave', () => {\n        this._renderer.showText = false;\n        this._renderer.renderText();\n      });\n    }\n  }\n\n  setAttributes(params: Partial<Required<DataZoomAttributes>>, forceUpdateTag?: boolean): void {\n    const { start, end } = this.attribute as DataZoomAttributes;\n    start && (this._state.start = params.start ?? start);\n    end && (this._state.end = params.end ?? end);\n\n    this._renderer.setAttributes(this._getRendererAttrs());\n    this._interaction.setAttributes(this._getInteractionAttrs());\n    super.setAttributes(params, forceUpdateTag);\n  }\n\n  render(): void {\n    this._layoutCacheFromConfig = null;\n    this._container = this.createOrUpdateChild('datazoom-container', {}, 'group') as IGroup;\n    this._renderer.renderDataZoom();\n    this._interaction.setAttributes(this._getInteractionAttrs());\n  }\n\n  release(all?: boolean): void {\n    /**\n     * 浏览器上的事件必须解绑，防止内存泄漏，场景树上的事件会自动解绑\n     */\n    super.release(all);\n    this._interaction.clearDragEvents();\n  }\n\n  /** 外部重置组件的起始状态 */\n  setStartAndEnd(start?: number, end?: number) {\n    const { start: startState, end: endState } = this._state;\n    if (isValid(start) && isValid(end) && (start !== startState || end !== endState)) {\n      this._state = { start, end };\n      this._renderer.renderDataZoom(true);\n      this._dispatchEvent(IDataZoomEvent.dataZoomChange, {\n        start,\n        end\n      });\n    }\n  }\n\n  /** 外部更新背景图表的数据 */\n  setPreviewData(data: any[]) {\n    this._renderer.previewData = data;\n  }\n\n  /** 外部更新手柄文字 */\n  setText(text: string, tag: 'start' | 'end') {\n    if (tag === 'start') {\n      this._renderer.startText.setAttribute('text', text);\n    } else {\n      this._renderer.endText.setAttribute('text', text);\n    }\n  }\n\n  /** 外部获取起始点数据值 */\n  getStartValue() {\n    return this._renderer.startValue;\n  }\n\n  getEndTextValue() {\n    return this._renderer.endValue;\n  }\n\n  getMiddleHandlerSize() {\n    const { middleHandlerStyle = {} } = this.attribute as DataZoomAttributes;\n    const middleHandlerRectSize = middleHandlerStyle.background?.size ?? 10;\n    const middleHandlerSymbolSize = middleHandlerStyle.icon?.size ?? 10;\n    return Math.max(middleHandlerRectSize, ...array(middleHandlerSymbolSize));\n  }\n\n  /** 外部传入数据映射 */\n  setPreviewPointsX(callback: (d: any) => number) {\n    isFunction(callback) && (this._renderer.previewPointsX = callback);\n  }\n  setPreviewPointsY(callback: (d: any) => number) {\n    isFunction(callback) && (this._renderer.previewPointsY = callback);\n  }\n  setPreviewPointsX1(callback: (d: any) => number) {\n    isFunction(callback) && (this._renderer.previewPointsX1 = callback);\n  }\n  setPreviewPointsY1(callback: (d: any) => number) {\n    isFunction(callback) && (this._renderer.previewPointsY1 = callback);\n  }\n  setStatePointToData(callback: (state: number) => any) {\n    isFunction(callback) && (this._renderer.statePointToData = callback);\n  }\n}\n"]}